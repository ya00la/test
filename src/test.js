;
(function(e, t) {
  function H(e) {
    var t = e.length,
      n = w.type(e);
    return w.isWindow(e) ? !1 : 1 === e.nodeType && t ? !0 : "array" === n || "function" !== n && (0 === t || "number" == typeof t && t > 0 && t - 1 in e)
  }

  function j(e) {
    var t = B[e] = {};
    return w.each(e.match(S) || [], function(e, n) {
      t[n] = !0
    }), t
  }

  function q(e, n, r, i) {
    if (w.acceptData(e)) {
      var s, o, u = w.expando,
        a = e.nodeType,
        f = a ? w.cache : e,
        l = a ? e[u] : e[u] && u;
      if (l && f[l] && (i || f[l].data) || r !== t || "string" != typeof n) return l || (l = a ? e[u] = c.pop() || w.guid++ : u), f[l] || (f[l] = a ? {} : {
        toJSON: w.noop
      }), ("object" == typeof n || "function" == typeof n) && (i ? f[l] = w.extend(f[l], n) : f[l].data = w.extend(f[l].data, n)), o = f[l], i || (o.data || (o.data = {}), o = o.data), r !== t && (o[w.camelCase(n)] = r), "string" == typeof n ? (s = o[n], null == s && (s = o[w.camelCase(n)])) : s = o, s
    }
  }

  function R(e, t, n) {
    if (w.acceptData(e)) {
      var r, i, s = e.nodeType,
        o = s ? w.cache : e,
        u = s ? e[w.expando] : w.expando;
      if (o[u]) {
        if (t && (r = n ? o[u] : o[u].data)) {
          w.isArray(t) ? t = t.concat(w.map(t, w.camelCase)) : t in r ? t = [t] : (t = w.camelCase(t), t = t in r ? [t] : t.split(" ")), i = t.length;
          while (i--) delete r[t[i]];
          if (n ? !z(r) : !w.isEmptyObject(r)) return
        }(n || (delete o[u].data, z(o[u]))) && (s ? w.cleanData([e], !0) : w.support.deleteExpando || o != o.window ? delete o[u] : o[u] = null)
      }
    }
  }

  function U(e, n, r) {
    if (r === t && 1 === e.nodeType) {
      var i = "data-" + n.replace(I, "-$1").toLowerCase();
      if (r = e.getAttribute(i), "string" == typeof r) {
        try {
          r = "true" === r ? !0 : "false" === r ? !1 : "null" === r ? null : +r + "" === r ? +r : F.test(r) ? w.parseJSON(r) : r
        } catch (s) {}
        w.data(e, n, r)
      } else r = t
    }
    return r
  }

  function z(e) {
    var t;
    for (t in e)
      if (("data" !== t || !w.isEmptyObject(e[t])) && "toJSON" !== t) return !1;
    return !0
  }

  function it() {
    return !0
  }

  function st() {
    return !1
  }

  function ot() {
    try {
      return o.activeElement
    } catch (e) {}
  }

  function ct(e, t) {
    do e = e[t]; while (e && 1 !== e.nodeType);
    return e
  }

  function ht(e, t, n) {
    if (w.isFunction(t)) return w.grep(e, function(e, r) {
      return !!t.call(e, r, e) !== n
    });
    if (t.nodeType) return w.grep(e, function(e) {
      return e === t !== n
    });
    if ("string" == typeof t) {
      if (ut.test(t)) return w.filter(t, e, n);
      t = w.filter(t, e)
    }
    return w.grep(e, function(e) {
      return w.inArray(e, t) >= 0 !== n
    })
  }

  function pt(e) {
    var t = dt.split("|"),
      n = e.createDocumentFragment();
    if (n.createElement)
      while (t.length) n.createElement(t.pop());
    return n
  }

  function Mt(e, t) {
    return w.nodeName(e, "table") && w.nodeName(1 === t.nodeType ? t : t.firstChild, "tr") ? e.getElementsByTagName("tbody")[0] || e.appendChild(e.ownerDocument.createElement("tbody")) : e
  }

  function _t(e) {
    return e.type = (null !== w.find.attr(e, "type")) + "/" + e.type, e
  }

  function Dt(e) {
    var t = Ct.exec(e.type);
    return t ? e.type = t[1] : e.removeAttribute("type"), e
  }

  function Pt(e, t) {
    var n, r = 0;
    for (; null != (n = e[r]); r++) w._data(n, "globalEval", !t || w._data(t[r], "globalEval"))
  }

  function Ht(e, t) {
    if (1 === t.nodeType && w.hasData(e)) {
      var n, r, i, s = w._data(e),
        o = w._data(t, s),
        u = s.events;
      if (u) {
        delete o.handle, o.events = {};
        for (n in u)
          for (r = 0, i = u[n].length; i > r; r++) w.event.add(t, n, u[n][r])
      }
      o.data && (o.data = w.extend({}, o.data))
    }
  }

  function Bt(e, t) {
    var n, r, i;
    if (1 === t.nodeType) {
      if (n = t.nodeName.toLowerCase(), !w.support.noCloneEvent && t[w.expando]) {
        i = w._data(t);
        for (r in i.events) w.removeEvent(t, r, i.handle);
        t.removeAttribute(w.expando)
      }
      "script" === n && t.text !== e.text ? (_t(t).text = e.text, Dt(t)) : "object" === n ? (t.parentNode && (t.outerHTML = e.outerHTML), w.support.html5Clone && e.innerHTML && !w.trim(t.innerHTML) && (t.innerHTML = e.innerHTML)) : "input" === n && xt.test(e.type) ? (t.defaultChecked = t.checked = e.checked, t.value !== e.value && (t.value = e.value)) : "option" === n ? t.defaultSelected = t.selected = e.defaultSelected : ("input" === n || "textarea" === n) && (t.defaultValue = e.defaultValue)
    }
  }

  function jt(e, n) {
    var r, s, o = 0,
      u = typeof e.getElementsByTagName !== i ? e.getElementsByTagName(n || "*") : typeof e.querySelectorAll !== i ? e.querySelectorAll(n || "*") : t;
    if (!u)
      for (u = [], r = e.childNodes || e; null != (s = r[o]); o++) !n || w.nodeName(s, n) ? u.push(s) : w.merge(u, jt(s, n));
    return n === t || n && w.nodeName(e, n) ? w.merge([e], u) : u
  }

  function Ft(e) {
    xt.test(e.type) && (e.defaultChecked = e.checked)
  }

  function tn(e, t) {
    if (t in e) return t;
    var n = t.charAt(0).toUpperCase() + t.slice(1),
      r = t,
      i = en.length;
    while (i--)
      if (t = en[i] + n, t in e) return t;
    return r
  }

  function nn(e, t) {
    return e = t || e, "none" === w.css(e, "display") || !w.contains(e.ownerDocument, e)
  }

  function rn(e, t) {
    var n, r, i, s = [],
      o = 0,
      u = e.length;
    for (; u > o; o++) r = e[o], r.style && (s[o] = w._data(r, "olddisplay"), n = r.style.display, t ? (s[o] || "none" !== n || (r.style.display = ""), "" === r.style.display && nn(r) && (s[o] = w._data(r, "olddisplay", an(r.nodeName)))) : s[o] || (i = nn(r), (n && "none" !== n || !i) && w._data(r, "olddisplay", i ? n : w.css(r, "display"))));
    for (o = 0; u > o; o++) r = e[o], r.style && (t && "none" !== r.style.display && "" !== r.style.display || (r.style.display = t ? s[o] || "" : "none"));
    return e
  }

  function sn(e, t, n) {
    var r = $t.exec(t);
    return r ? Math.max(0, r[1] - (n || 0)) + (r[2] || "px") : t
  }

  function on(e, t, n, r, i) {
    var s = n === (r ? "border" : "content") ? 4 : "width" === t ? 1 : 0,
      o = 0;
    for (; 4 > s; s += 2) "margin" === n && (o += w.css(e, n + Zt[s], !0, i)), r ? ("content" === n && (o -= w.css(e, "padding" + Zt[s], !0, i)), "margin" !== n && (o -= w.css(e, "border" + Zt[s] + "Width", !0, i))) : (o += w.css(e, "padding" + Zt[s], !0, i), "padding" !== n && (o += w.css(e, "border" + Zt[s] + "Width", !0, i)));
    return o
  }

  function un(e, t, n) {
    var r = !0,
      i = "width" === t ? e.offsetWidth : e.offsetHeight,
      s = qt(e),
      o = w.support.boxSizing && "border-box" === w.css(e, "boxSizing", !1, s);
    if (0 >= i || null == i) {
      if (i = Rt(e, t, s), (0 > i || null == i) && (i = e.style[t]), Jt.test(i)) return i;
      r = o && (w.support.boxSizingReliable || i === e.style[t]), i = parseFloat(i) || 0
    }
    return i + on(e, t, n || (o ? "border" : "content"), r, s) + "px"
  }

  function an(e) {
    var t = o,
      n = Qt[e];
    return n || (n = fn(e, t), "none" !== n && n || (It = (It || w("<iframe frameborder='0' width='0' height='0'/>").css("cssText", "display:block !important")).appendTo(t.documentElement), t = (It[0].contentWindow || It[0].contentDocument).document, t.write("<!doctype html><html><body>"), t.close(), n = fn(e, t), It.detach()), Qt[e] = n), n
  }

  function fn(e, t) {
    var n = w(t.createElement(e)).appendTo(t.body),
      r = w.css(n[0], "display");
    return n.remove(), r
  }

  function vn(e, t, n, r) {
    var i;
    if (w.isArray(t)) w.each(t, function(t, i) {
      n || cn.test(e) ? r(e, i) : vn(e + "[" + ("object" == typeof i ? t : "") + "]", i, n, r)
    });
    else if (n || "object" !== w.type(t)) r(e, t);
    else
      for (i in t) vn(e + "[" + i + "]", t[i], n, r)
  }

  function _n(e) {
    return function(t, n) {
      "string" != typeof t && (n = t, t = "*");
      var r, i = 0,
        s = t.toLowerCase().match(S) || [];
      if (w.isFunction(n))
        while (r = s[i++]) "+" === r[0] ? (r = r.slice(1) || "*", (e[r] = e[r] || []).unshift(n)) : (e[r] = e[r] || []).push(n)
    }
  }

  function Dn(e, n, r, i) {
    function u(a) {
      var f;
      return s[a] = !0, w.each(e[a] || [], function(e, a) {
        var l = a(n, r, i);
        return "string" != typeof l || o || s[l] ? o ? !(f = l) : t : (n.dataTypes.unshift(l), u(l), !1)
      }), f
    }
    var s = {},
      o = e === An;
    return u(n.dataTypes[0]) || !s["*"] && u("*")
  }

  function Pn(e, n) {
    var r, i, s = w.ajaxSettings.flatOptions || {};
    for (i in n) n[i] !== t && ((s[i] ? e : r || (r = {}))[i] = n[i]);
    return r && w.extend(!0, e, r), e
  }

  function Hn(e, n, r) {
    var i, s, o, u, a = e.contents,
      f = e.dataTypes;
    while ("*" === f[0]) f.shift(), s === t && (s = e.mimeType || n.getResponseHeader("Content-Type"));
    if (s)
      for (u in a)
        if (a[u] && a[u].test(s)) {
          f.unshift(u);
          break
        }
    if (f[0] in r) o = f[0];
    else {
      for (u in r) {
        if (!f[0] || e.converters[u + " " + f[0]]) {
          o = u;
          break
        }
        i || (i = u)
      }
      o = o || i
    }
    return o ? (o !== f[0] && f.unshift(o), r[o]) : t
  }

  function Bn(e, t, n, r) {
    var i, s, o, u, a, f = {},
      l = e.dataTypes.slice();
    if (l[1])
      for (o in e.converters) f[o.toLowerCase()] = e.converters[o];
    s = l.shift();
    while (s)
      if (e.responseFields[s] && (n[e.responseFields[s]] = t), !a && r && e.dataFilter && (t = e.dataFilter(t, e.dataType)), a = s, s = l.shift())
        if ("*" === s) s = a;
        else if ("*" !== a && a !== s) {
      if (o = f[a + " " + s] || f["* " + s], !o)
        for (i in f)
          if (u = i.split(" "), u[1] === s && (o = f[a + " " + u[0]] || f["* " + u[0]])) {
            o === !0 ? o = f[i] : f[i] !== !0 && (s = u[0], l.unshift(u[1]));
            break
          }
      if (o !== !0)
        if (o && e["throws"]) t = o(t);
        else try {
          t = o(t)
        } catch (c) {
          return {
            state: "parsererror",
            error: o ? c : "No conversion from " + a + " to " + s
          }
        }
    }
    return {
      state: "success",
      data: t
    }
  }

  function zn() {
    try {
      return new e.XMLHttpRequest
    } catch (t) {}
  }

  function Wn() {
    try {
      return new e.ActiveXObject("Microsoft.XMLHTTP")
    } catch (t) {}
  }

  function Yn() {
    return setTimeout(function() {
      Xn = t
    }), Xn = w.now()
  }

  function Zn(e, t, n) {
    var r, i = (Gn[t] || []).concat(Gn["*"]),
      s = 0,
      o = i.length;
    for (; o > s; s++)
      if (r = i[s].call(n, t, e)) return r
  }

  function er(e, t, n) {
    var r, i, s = 0,
      o = Qn.length,
      u = w.Deferred().always(function() {
        delete a.elem
      }),
      a = function() {
        if (i) return !1;
        var t = Xn || Yn(),
          n = Math.max(0, f.startTime + f.duration - t),
          r = n / f.duration || 0,
          s = 1 - r,
          o = 0,
          a = f.tweens.length;
        for (; a > o; o++) f.tweens[o].run(s);
        return u.notifyWith(e, [f, s, n]), 1 > s && a ? n : (u.resolveWith(e, [f]), !1)
      },
      f = u.promise({
        elem: e,
        props: w.extend({}, t),
        opts: w.extend(!0, {
          specialEasing: {}
        }, n),
        originalProperties: t,
        originalOptions: n,
        startTime: Xn || Yn(),
        duration: n.duration,
        tweens: [],
        createTween: function(t, n) {
          var r = w.Tween(e, f.opts, t, n, f.opts.specialEasing[t] || f.opts.easing);
          return f.tweens.push(r), r
        },
        stop: function(t) {
          var n = 0,
            r = t ? f.tweens.length : 0;
          if (i) return this;
          for (i = !0; r > n; n++) f.tweens[n].run(1);
          return t ? u.resolveWith(e, [f, t]) : u.rejectWith(e, [f, t]), this
        }
      }),
      l = f.props;
    for (tr(l, f.opts.specialEasing); o > s; s++)
      if (r = Qn[s].call(f, e, l, f.opts)) return r;
    return w.map(l, Zn, f), w.isFunction(f.opts.start) && f.opts.start.call(e, f), w.fx.timer(w.extend(a, {
      elem: e,
      anim: f,
      queue: f.opts.queue
    })), f.progress(f.opts.progress).done(f.opts.done, f.opts.complete).fail(f.opts.fail).always(f.opts.always)
  }

  function tr(e, t) {
    var n, r, i, s, o;
    for (n in e)
      if (r = w.camelCase(n), i = t[r], s = e[n], w.isArray(s) && (i = s[1], s = e[n] = s[0]), n !== r && (e[r] = s, delete e[n]), o = w.cssHooks[r], o && "expand" in o) {
        s = o.expand(s), delete e[r];
        for (n in s) n in e || (e[n] = s[n], t[n] = i)
      } else t[r] = i
  }

  function nr(e, t, n) {
    var r, i, s, o, u, a, f = this,
      l = {},
      c = e.style,
      h = e.nodeType && nn(e),
      p = w._data(e, "fxshow");
    n.queue || (u = w._queueHooks(e, "fx"), null == u.unqueued && (u.unqueued = 0, a = u.empty.fire, u.empty.fire = function() {
      u.unqueued || a()
    }), u.unqueued++, f.always(function() {
      f.always(function() {
        u.unqueued--, w.queue(e, "fx").length || u.empty.fire()
      })
    })), 1 === e.nodeType && ("height" in t || "width" in t) && (n.overflow = [c.overflow, c.overflowX, c.overflowY], "inline" === w.css(e, "display") && "none" === w.css(e, "float") && (w.support.inlineBlockNeedsLayout && "inline" !== an(e.nodeName) ? c.zoom = 1 : c.display = "inline-block")), n.overflow && (c.overflow = "hidden", w.support.shrinkWrapBlocks || f.always(function() {
      c.overflow = n.overflow[0], c.overflowX = n.overflow[1], c.overflowY = n.overflow[2]
    }));
    for (r in t)
      if (i = t[r], $n.exec(i)) {
        if (delete t[r], s = s || "toggle" === i, i === (h ? "hide" : "show")) continue;
        l[r] = p && p[r] || w.style(e, r)
      }
    if (!w.isEmptyObject(l)) {
      p ? "hidden" in p && (h = p.hidden) : p = w._data(e, "fxshow", {}), s && (p.hidden = !h), h ? w(e).show() : f.done(function() {
        w(e).hide()
      }), f.done(function() {
        var t;
        w._removeData(e, "fxshow");
        for (t in l) w.style(e, t, l[t])
      });
      for (r in l) o = Zn(h ? p[r] : 0, r, f), r in p || (p[r] = o.start, h && (o.end = o.start, o.start = "width" === r || "height" === r ? 1 : 0))
    }
  }

  function rr(e, t, n, r, i) {
    return new rr.prototype.init(e, t, n, r, i)
  }

  function ir(e, t) {
    var n, r = {
        height: e
      },
      i = 0;
    for (t = t ? 1 : 0; 4 > i; i += 2 - t) n = Zt[i], r["margin" + n] = r["padding" + n] = e;
    return t && (r.opacity = r.width = e), r
  }

  function sr(e) {
    return w.isWindow(e) ? e : 9 === e.nodeType ? e.defaultView || e.parentWindow : !1
  }
  var n, r, i = typeof t,
    s = e.location,
    o = e.document,
    u = o.documentElement,
    a = e.jQuery,
    f = e.$,
    l = {},
    c = [],
    h = "1.10.2",
    p = c.concat,
    d = c.push,
    v = c.slice,
    m = c.indexOf,
    g = l.toString,
    y = l.hasOwnProperty,
    b = h.trim,
    w = function(e, t) {
      return new w.fn.init(e, t, r)
    },
    E = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
    S = /\S+/g,
    x = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
    T = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
    N = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
    C = /^[\],:{}\s]*$/,
    k = /(?:^|:|,)(?:\s*\[)+/g,
    L = /\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,
    A = /"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,
    O = /^-ms-/,
    M = /-([\da-z])/gi,
    _ = function(e, t) {
      return t.toUpperCase()
    },
    D = function(e) {
      (o.addEventListener || "load" === e.type || "complete" === o.readyState) && (P(), w.ready())
    },
    P = function() {
      o.addEventListener ? (o.removeEventListener("DOMContentLoaded", D, !1), e.removeEventListener("load", D, !1)) : (o.detachEvent("onreadystatechange", D), e.detachEvent("onload", D))
    };
  w.fn = w.prototype = {
      jquery: h,
      constructor: w,
      init: function(e, n, r) {
        var i, s;
        if (!e) return this;
        if ("string" == typeof e) {
          if (i = "<" === e.charAt(0) && ">" === e.charAt(e.length - 1) && e.length >= 3 ? [null, e, null] : T.exec(e), !i || !i[1] && n) return !n || n.jquery ? (n || r).find(e) : this.constructor(n).find(e);
          if (i[1]) {
            if (n = n instanceof w ? n[0] : n, w.merge(this, w.parseHTML(i[1], n && n.nodeType ? n.ownerDocument || n : o, !0)), N.test(i[1]) && w.isPlainObject(n))
              for (i in n) w.isFunction(this[i]) ? this[i](n[i]) : this.attr(i, n[i]);
            return this
          }
          if (s = o.getElementById(i[2]), s && s.parentNode) {
            if (s.id !== i[2]) return r.find(e);
            this.length = 1, this[0] = s
          }
          return this.context = o, this.selector = e, this
        }
        return e.nodeType ? (this.context = this[0] = e, this.length = 1, this) : w.isFunction(e) ? r.ready(e) : (e.selector !== t && (this.selector = e.selector, this.context = e.context), w.makeArray(e, this))
      },
      selector: "",
      length: 0,
      toArray: function() {
        return v.call(this)
      },
      get: function(e) {
        return null == e ? this.toArray() : 0 > e ? this[this.length + e] : this[e]
      },
      pushStack: function(e) {
        var t = w.merge(this.constructor(), e);
        return t.prevObject = this, t.context = this.context, t
      },
      each: function(e, t) {
        return w.each(this, e, t)
      },
      ready: function(e) {
        return w.ready.promise().done(e), this
      },
      slice: function() {
        return this.pushStack(v.apply(this, arguments))
      },
      first: function() {
        return this.eq(0)
      },
      last: function() {
        return this.eq(-1)
      },
      eq: function(e) {
        var t = this.length,
          n = +e + (0 > e ? t : 0);
        return this.pushStack(n >= 0 && t > n ? [this[n]] : [])
      },
      map: function(e) {
        return this.pushStack(w.map(this, function(t, n) {
          return e.call(t, n, t)
        }))
      },
      end: function() {
        return this.prevObject || this.constructor(null)
      },
      push: d,
      sort: [].sort,
      splice: [].splice
    }, w.fn.init.prototype = w.fn, w.extend = w.fn.extend = function() {
      var e, n, r, i, s, o, u = arguments[0] || {},
        a = 1,
        f = arguments.length,
        l = !1;
      for ("boolean" == typeof u && (l = u, u = arguments[1] || {}, a = 2), "object" == typeof u || w.isFunction(u) || (u = {}), f === a && (u = this, --a); f > a; a++)
        if (null != (s = arguments[a]))
          for (i in s) e = u[i], r = s[i], u !== r && (l && r && (w.isPlainObject(r) || (n = w.isArray(r))) ? (n ? (n = !1, o = e && w.isArray(e) ? e : []) : o = e && w.isPlainObject(e) ? e : {}, u[i] = w.extend(l, o, r)) : r !== t && (u[i] = r));
      return u
    }, w.extend({
      expando: "jQuery" + (h + Math.random()).replace(/\D/g, ""),
      noConflict: function(t) {
        return e.$ === w && (e.$ = f), t && e.jQuery === w && (e.jQuery = a), w
      },
      isReady: !1,
      readyWait: 1,
      holdReady: function(e) {
        e ? w.readyWait++ : w.ready(!0)
      },
      ready: function(e) {
        if (e === !0 ? !--w.readyWait : !w.isReady) {
          if (!o.body) return setTimeout(w.ready);
          w.isReady = !0, e !== !0 && --w.readyWait > 0 || (n.resolveWith(o, [w]), w.fn.trigger && w(o).trigger("ready").off("ready"))
        }
      },
      isFunction: function(e) {
        return "function" === w.type(e)
      },
      isArray: Array.isArray || function(e) {
        return "array" === w.type(e)
      },
      isWindow: function(e) {
        return null != e && e == e.window
      },
      isNumeric: function(e) {
        return !isNaN(parseFloat(e)) && isFinite(e)
      },
      type: function(e) {
        return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? l[g.call(e)] || "object" : typeof e
      },
      isPlainObject: function(e) {
        var n;
        if (!e || "object" !== w.type(e) || e.nodeType || w.isWindow(e)) return !1;
        try {
          if (e.constructor && !y.call(e, "constructor") && !y.call(e.constructor.prototype, "isPrototypeOf")) return !1
        } catch (r) {
          return !1
        }
        if (w.support.ownLast)
          for (n in e) return y.call(e, n);
        for (n in e);
        return n === t || y.call(e, n)
      },
      isEmptyObject: function(e) {
        var t;
        for (t in e) return !1;
        return !0
      },
      error: function(e) {
        throw Error(e)
      },
      parseHTML: function(e, t, n) {
        if (!e || "string" != typeof e) return null;
        "boolean" == typeof t && (n = t, t = !1), t = t || o;
        var r = N.exec(e),
          i = !n && [];
        return r ? [t.createElement(r[1])] : (r = w.buildFragment([e], t, i), i && w(i).remove(), w.merge([], r.childNodes))
      },
      parseJSON: function(n) {
        return e.JSON && e.JSON.parse ? e.JSON.parse(n) : null === n ? n : "string" == typeof n && (n = w.trim(n), n && C.test(n.replace(L, "@").replace(A, "]").replace(k, ""))) ? Function("return " + n)() : (w.error("Invalid JSON: " + n), t)
      },
      parseXML: function(n) {
        var r, i;
        if (!n || "string" != typeof n) return null;
        try {
          e.DOMParser ? (i = new DOMParser, r = i.parseFromString(n, "text/xml")) : (r = new ActiveXObject("Microsoft.XMLDOM"), r.async = "false", r.loadXML(n))
        } catch (s) {
          r = t
        }
        return r && r.documentElement && !r.getElementsByTagName("parsererror").length || w.error("Invalid XML: " + n), r
      },
      noop: function() {},
      globalEval: function(t) {
        t && w.trim(t) && (e.execScript || function(t) {
          e.eval.call(e, t)
        })(t)
      },
      camelCase: function(e) {
        return e.replace(O, "ms-").replace(M, _)
      },
      nodeName: function(e, t) {
        return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase()
      },
      each: function(e, t, n) {
        var r, i = 0,
          s = e.length,
          o = H(e);
        if (n) {
          if (o) {
            for (; s > i; i++)
              if (r = t.apply(e[i], n), r === !1) break
          } else
            for (i in e)
              if (r = t.apply(e[i], n), r === !1) break
        } else if (o) {
          for (; s > i; i++)
            if (r = t.call(e[i], i, e[i]), r === !1) break
        } else
          for (i in e)
            if (r = t.call(e[i], i, e[i]), r === !1) break;
        return e
      },
      trim: b && !b.call("﻿ ") ? function(e) {
        return null == e ? "" : b.call(e)
      } : function(e) {
        return null == e ? "" : (e + "").replace(x, "")
      },
      makeArray: function(e, t) {
        var n = t || [];
        return null != e && (H(Object(e)) ? w.merge(n, "string" == typeof e ? [e] : e) : d.call(n, e)), n
      },
      inArray: function(e, t, n) {
        var r;
        if (t) {
          if (m) return m.call(t, e, n);
          for (r = t.length, n = n ? 0 > n ? Math.max(0, r + n) : n : 0; r > n; n++)
            if (n in t && t[n] === e) return n
        }
        return -1
      },
      merge: function(e, n) {
        var r = n.length,
          i = e.length,
          s = 0;
        if ("number" == typeof r)
          for (; r > s; s++) e[i++] = n[s];
        else
          while (n[s] !== t) e[i++] = n[s++];
        return e.length = i, e
      },
      grep: function(e, t, n) {
        var r, i = [],
          s = 0,
          o = e.length;
        for (n = !!n; o > s; s++) r = !!t(e[s], s), n !== r && i.push(e[s]);
        return i
      },
      map: function(e, t, n) {
        var r, i = 0,
          s = e.length,
          o = H(e),
          u = [];
        if (o)
          for (; s > i; i++) r = t(e[i], i, n), null != r && (u[u.length] = r);
        else
          for (i in e) r = t(e[i], i, n), null != r && (u[u.length] = r);
        return p.apply([], u)
      },
      guid: 1,
      proxy: function(e, n) {
        var r, i, s;
        return "string" == typeof n && (s = e[n], n = e, e = s), w.isFunction(e) ? (r = v.call(arguments, 2), i = function() {
          return e.apply(n || this, r.concat(v.call(arguments)))
        }, i.guid = e.guid = e.guid || w.guid++, i) : t
      },
      access: function(e, n, r, i, s, o, u) {
        var a = 0,
          f = e.length,
          l = null == r;
        if ("object" === w.type(r)) {
          s = !0;
          for (a in r) w.access(e, n, a, r[a], !0, o, u)
        } else if (i !== t && (s = !0, w.isFunction(i) || (u = !0), l && (u ? (n.call(e, i), n = null) : (l = n, n = function(e, t, n) {
            return l.call(w(e), n)
          })), n))
          for (; f > a; a++) n(e[a], r, u ? i : i.call(e[a], a, n(e[a], r)));
        return s ? e : l ? n.call(e) : f ? n(e[0], r) : o
      },
      now: function() {
        return (new Date).getTime()
      },
      swap: function(e, t, n, r) {
        var i, s, o = {};
        for (s in t) o[s] = e.style[s], e.style[s] = t[s];
        i = n.apply(e, r || []);
        for (s in t) e.style[s] = o[s];
        return i
      }
    }), w.ready.promise = function(t) {
      if (!n)
        if (n = w.Deferred(), "complete" === o.readyState) setTimeout(w.ready);
        else if (o.addEventListener) o.addEventListener("DOMContentLoaded", D, !1), e.addEventListener("load", D, !1);
      else {
        o.attachEvent("onreadystatechange", D), e.attachEvent("onload", D);
        var r = !1;
        try {
          r = null == e.frameElement && o.documentElement
        } catch (i) {}
        r && r.doScroll && function s() {
          if (!w.isReady) {
            try {
              r.doScroll("left")
            } catch (e) {
              return setTimeout(s, 50)
            }
            P(), w.ready()
          }
        }()
      }
      return n.promise(t)
    }, w.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(e, t) {
      l["[object " + t + "]"] = t.toLowerCase()
    }), r = w(o),
    function(e, t) {
      function ot(e, t, n, i) {
        var s, o, u, a, f, l, p, m, g, w;
        if ((t ? t.ownerDocument || t : E) !== h && c(t), t = t || h, n = n || [], !e || "string" != typeof e) return n;
        if (1 !== (a = t.nodeType) && 9 !== a) return [];
        if (d && !i) {
          if (s = Z.exec(e))
            if (u = s[1]) {
              if (9 === a) {
                if (o = t.getElementById(u), !o || !o.parentNode) return n;
                if (o.id === u) return n.push(o), n
              } else if (t.ownerDocument && (o = t.ownerDocument.getElementById(u)) && y(t, o) && o.id === u) return n.push(o), n
            } else {
              if (s[2]) return H.apply(n, t.getElementsByTagName(e)), n;
              if ((u = s[3]) && r.getElementsByClassName && t.getElementsByClassName) return H.apply(n, t.getElementsByClassName(u)), n
            }
          if (r.qsa && (!v || !v.test(e))) {
            if (m = p = b, g = t, w = 9 === a && e, 1 === a && "object" !== t.nodeName.toLowerCase()) {
              l = mt(e), (p = t.getAttribute("id")) ? m = p.replace(nt, "\\$&") : t.setAttribute("id", m), m = "[id='" + m + "'] ", f = l.length;
              while (f--) l[f] = m + gt(l[f]);
              g = $.test(e) && t.parentNode || t, w = l.join(",")
            }
            if (w) try {
              return H.apply(n, g.querySelectorAll(w)), n
            } catch (S) {} finally {
              p || t.removeAttribute("id")
            }
          }
        }
        return Nt(e.replace(W, "$1"), t, n, i)
      }

      function ut() {
        function t(n, r) {
          return e.push(n += " ") > s.cacheLength && delete t[e.shift()], t[n] = r
        }
        var e = [];
        return t
      }

      function at(e) {
        return e[b] = !0, e
      }

      function ft(e) {
        var t = h.createElement("div");
        try {
          return !!e(t)
        } catch (n) {
          return !1
        } finally {
          t.parentNode && t.parentNode.removeChild(t), t = null
        }
      }

      function lt(e, t) {
        var n = e.split("|"),
          r = e.length;
        while (r--) s.attrHandle[n[r]] = t
      }

      function ct(e, t) {
        var n = t && e,
          r = n && 1 === e.nodeType && 1 === t.nodeType && (~t.sourceIndex || O) - (~e.sourceIndex || O);
        if (r) return r;
        if (n)
          while (n = n.nextSibling)
            if (n === t) return -1;
        return e ? 1 : -1
      }

      function ht(e) {
        return function(t) {
          var n = t.nodeName.toLowerCase();
          return "input" === n && t.type === e
        }
      }

      function pt(e) {
        return function(t) {
          var n = t.nodeName.toLowerCase();
          return ("input" === n || "button" === n) && t.type === e
        }
      }

      function dt(e) {
        return at(function(t) {
          return t = +t, at(function(n, r) {
            var i, s = e([], n.length, t),
              o = s.length;
            while (o--) n[i = s[o]] && (n[i] = !(r[i] = n[i]))
          })
        })
      }

      function vt() {}

      function mt(e, t) {
        var n, r, i, o, u, a, f, l = N[e + " "];
        if (l) return t ? 0 : l.slice(0);
        u = e, a = [], f = s.preFilter;
        while (u) {
          (!n || (r = X.exec(u))) && (r && (u = u.slice(r[0].length) || u), a.push(i = [])), n = !1, (r = V.exec(u)) && (n = r.shift(), i.push({
            value: n,
            type: r[0].replace(W, " ")
          }), u = u.slice(n.length));
          for (o in s.filter) !(r = G[o].exec(u)) || f[o] && !(r = f[o](r)) || (n = r.shift(), i.push({
            value: n,
            type: o,
            matches: r
          }), u = u.slice(n.length));
          if (!n) break
        }
        return t ? u.length : u ? ot.error(e) : N(e, a).slice(0)
      }

      function gt(e) {
        var t = 0,
          n = e.length,
          r = "";
        for (; n > t; t++) r += e[t].value;
        return r
      }

      function yt(e, t, n) {
        var r = t.dir,
          s = n && "parentNode" === r,
          o = x++;
        return t.first ? function(t, n, i) {
          while (t = t[r])
            if (1 === t.nodeType || s) return e(t, n, i)
        } : function(t, n, u) {
          var a, f, l, c = S + " " + o;
          if (u) {
            while (t = t[r])
              if ((1 === t.nodeType || s) && e(t, n, u)) return !0
          } else
            while (t = t[r])
              if (1 === t.nodeType || s)
                if (l = t[b] || (t[b] = {}), (f = l[r]) && f[0] === c) {
                  if ((a = f[1]) === !0 || a === i) return a === !0
                } else if (f = l[r] = [c], f[1] = e(t, n, u) || i, f[1] === !0) return !0
        }
      }

      function bt(e) {
        return e.length > 1 ? function(t, n, r) {
          var i = e.length;
          while (i--)
            if (!e[i](t, n, r)) return !1;
          return !0
        } : e[0]
      }

      function wt(e, t, n, r, i) {
        var s, o = [],
          u = 0,
          a = e.length,
          f = null != t;
        for (; a > u; u++)(s = e[u]) && (!n || n(s, r, i)) && (o.push(s), f && t.push(u));
        return o
      }

      function Et(e, t, n, r, i, s) {
        return r && !r[b] && (r = Et(r)), i && !i[b] && (i = Et(i, s)), at(function(s, o, u, a) {
          var f, l, c, h = [],
            p = [],
            d = o.length,
            v = s || Tt(t || "*", u.nodeType ? [u] : u, []),
            m = !e || !s && t ? v : wt(v, h, e, u, a),
            g = n ? i || (s ? e : d || r) ? [] : o : m;
          if (n && n(m, g, u, a), r) {
            f = wt(g, p), r(f, [], u, a), l = f.length;
            while (l--)(c = f[l]) && (g[p[l]] = !(m[p[l]] = c))
          }
          if (s) {
            if (i || e) {
              if (i) {
                f = [], l = g.length;
                while (l--)(c = g[l]) && f.push(m[l] = c);
                i(null, g = [], f, a)
              }
              l = g.length;
              while (l--)(c = g[l]) && (f = i ? j.call(s, c) : h[l]) > -1 && (s[f] = !(o[f] = c))
            }
          } else g = wt(g === o ? g.splice(d, g.length) : g), i ? i(null, o, g, a) : H.apply(o, g)
        })
      }

      function St(e) {
        var t, n, r, i = e.length,
          o = s.relative[e[0].type],
          u = o || s.relative[" "],
          a = o ? 1 : 0,
          l = yt(function(e) {
            return e === t
          }, u, !0),
          c = yt(function(e) {
            return j.call(t, e) > -1
          }, u, !0),
          h = [function(e, n, r) {
            return !o && (r || n !== f) || ((t = n).nodeType ? l(e, n, r) : c(e, n, r))
          }];
        for (; i > a; a++)
          if (n = s.relative[e[a].type]) h = [yt(bt(h), n)];
          else {
            if (n = s.filter[e[a].type].apply(null, e[a].matches), n[b]) {
              for (r = ++a; i > r; r++)
                if (s.relative[e[r].type]) break;
              return Et(a > 1 && bt(h), a > 1 && gt(e.slice(0, a - 1).concat({
                value: " " === e[a - 2].type ? "*" : ""
              })).replace(W, "$1"), n, r > a && St(e.slice(a, r)), i > r && St(e = e.slice(r)), i > r && gt(e))
            }
            h.push(n)
          }
        return bt(h)
      }

      function xt(e, t) {
        var n = 0,
          r = t.length > 0,
          o = e.length > 0,
          u = function(u, a, l, c, p) {
            var d, v, m, g = [],
              y = 0,
              b = "0",
              w = u && [],
              E = null != p,
              x = f,
              T = u || o && s.find.TAG("*", p && a.parentNode || a),
              N = S += null == x ? 1 : Math.random() || .1;
            for (E && (f = a !== h && a, i = n); null != (d = T[b]); b++) {
              if (o && d) {
                v = 0;
                while (m = e[v++])
                  if (m(d, a, l)) {
                    c.push(d);
                    break
                  }
                E && (S = N, i = ++n)
              }
              r && ((d = !m && d) && y--, u && w.push(d))
            }
            if (y += b, r && b !== y) {
              v = 0;
              while (m = t[v++]) m(w, g, a, l);
              if (u) {
                if (y > 0)
                  while (b--) w[b] || g[b] || (g[b] = D.call(c));
                g = wt(g)
              }
              H.apply(c, g), E && !u && g.length > 0 && y + t.length > 1 && ot.uniqueSort(c)
            }
            return E && (S = N, f = x), w
          };
        return r ? at(u) : u
      }

      function Tt(e, t, n) {
        var r = 0,
          i = t.length;
        for (; i > r; r++) ot(e, t[r], n);
        return n
      }

      function Nt(e, t, n, i) {
        var o, u, f, l, c, h = mt(e);
        if (!i && 1 === h.length) {
          if (u = h[0] = h[0].slice(0), u.length > 2 && "ID" === (f = u[0]).type && r.getById && 9 === t.nodeType && d && s.relative[u[1].type]) {
            if (t = (s.find.ID(f.matches[0].replace(rt, it), t) || [])[0], !t) return n;
            e = e.slice(u.shift().value.length)
          }
          o = G.needsContext.test(e) ? 0 : u.length;
          while (o--) {
            if (f = u[o], s.relative[l = f.type]) break;
            if ((c = s.find[l]) && (i = c(f.matches[0].replace(rt, it), $.test(u[0].type) && t.parentNode || t))) {
              if (u.splice(o, 1), e = i.length && gt(u), !e) return H.apply(n, i), n;
              break
            }
          }
        }
        return a(e, h)(i, t, !d, n, $.test(e)), n
      }
      var n, r, i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b = "sizzle" + -(new Date),
        E = e.document,
        S = 0,
        x = 0,
        T = ut(),
        N = ut(),
        C = ut(),
        k = !1,
        L = function(e, t) {
          return e === t ? (k = !0, 0) : 0
        },
        A = typeof t,
        O = 1 << 31,
        M = {}.hasOwnProperty,
        _ = [],
        D = _.pop,
        P = _.push,
        H = _.push,
        B = _.slice,
        j = _.indexOf || function(e) {
          var t = 0,
            n = this.length;
          for (; n > t; t++)
            if (this[t] === e) return t;
          return -1
        },
        F = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
        I = "[\\x20\\t\\r\\n\\f]",
        q = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
        R = q.replace("w", "w#"),
        U = "\\[" + I + "*(" + q + ")" + I + "*(?:([*^$|!~]?=)" + I + "*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|(" + R + ")|)|)" + I + "*\\]",
        z = ":(" + q + ")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|" + U.replace(3, 8) + ")*)|.*)\\)|)",
        W = RegExp("^" + I + "+|((?:^|[^\\\\])(?:\\\\.)*)" + I + "+$", "g"),
        X = RegExp("^" + I + "*," + I + "*"),
        V = RegExp("^" + I + "*([>+~]|" + I + ")" + I + "*"),
        $ = RegExp(I + "*[+~]"),
        J = RegExp("=" + I + "*([^\\]'\"]*)" + I + "*\\]", "g"),
        K = RegExp(z),
        Q = RegExp("^" + R + "$"),
        G = {
          ID: RegExp("^#(" + q + ")"),
          CLASS: RegExp("^\\.(" + q + ")"),
          TAG: RegExp("^(" + q.replace("w", "w*") + ")"),
          ATTR: RegExp("^" + U),
          PSEUDO: RegExp("^" + z),
          CHILD: RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + I + "*(even|odd|(([+-]|)(\\d*)n|)" + I + "*(?:([+-]|)" + I + "*(\\d+)|))" + I + "*\\)|)", "i"),
          bool: RegExp("^(?:" + F + ")$", "i"),
          needsContext: RegExp("^" + I + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + I + "*((?:-\\d)?\\d*)" + I + "*\\)|)(?=[^-]|$)", "i")
        },
        Y = /^[^{]+\{\s*\[native \w/,
        Z = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
        et = /^(?:input|select|textarea|button)$/i,
        tt = /^h\d$/i,
        nt = /'|\\/g,
        rt = RegExp("\\\\([\\da-f]{1,6}" + I + "?|(" + I + ")|.)", "ig"),
        it = function(e, t, n) {
          var r = "0x" + t - 65536;
          return r !== r || n ? t : 0 > r ? String.fromCharCode(r + 65536) : String.fromCharCode(55296 | r >> 10, 56320 | 1023 & r)
        };
      try {
        H.apply(_ = B.call(E.childNodes), E.childNodes), _[E.childNodes.length].nodeType
      } catch (st) {
        H = {
          apply: _.length ? function(e, t) {
            P.apply(e, B.call(t))
          } : function(e, t) {
            var n = e.length,
              r = 0;
            while (e[n++] = t[r++]);
            e.length = n - 1
          }
        }
      }
      u = ot.isXML = function(e) {
        var t = e && (e.ownerDocument || e).documentElement;
        return t ? "HTML" !== t.nodeName : !1
      }, r = ot.support = {}, c = ot.setDocument = function(e) {
        var n = e ? e.ownerDocument || e : E,
          i = n.defaultView;
        return n !== h && 9 === n.nodeType && n.documentElement ? (h = n, p = n.documentElement, d = !u(n), i && i.attachEvent && i !== i.top && i.attachEvent("onbeforeunload", function() {
          c()
        }), r.attributes = ft(function(e) {
          return e.className = "i", !e.getAttribute("className")
        }), r.getElementsByTagName = ft(function(e) {
          return e.appendChild(n.createComment("")), !e.getElementsByTagName("*").length
        }), r.getElementsByClassName = ft(function(e) {
          return e.innerHTML = "<div class='a'></div><div class='a i'></div>", e.firstChild.className = "i", 2 === e.getElementsByClassName("i").length
        }), r.getById = ft(function(e) {
          return p.appendChild(e).id = b, !n.getElementsByName || !n.getElementsByName(b).length
        }), r.getById ? (s.find.ID = function(e, t) {
          if (typeof t.getElementById !== A && d) {
            var n = t.getElementById(e);
            return n && n.parentNode ? [n] : []
          }
        }, s.filter.ID = function(e) {
          var t = e.replace(rt, it);
          return function(e) {
            return e.getAttribute("id") === t
          }
        }) : (delete s.find.ID, s.filter.ID = function(e) {
          var t = e.replace(rt, it);
          return function(e) {
            var n = typeof e.getAttributeNode !== A && e.getAttributeNode("id");
            return n && n.value === t
          }
        }), s.find.TAG = r.getElementsByTagName ? function(e, n) {
          return typeof n.getElementsByTagName !== A ? n.getElementsByTagName(e) : t
        } : function(e, t) {
          var n, r = [],
            i = 0,
            s = t.getElementsByTagName(e);
          if ("*" === e) {
            while (n = s[i++]) 1 === n.nodeType && r.push(n);
            return r
          }
          return s
        }, s.find.CLASS = r.getElementsByClassName && function(e, n) {
          return typeof n.getElementsByClassName !== A && d ? n.getElementsByClassName(e) : t
        }, m = [], v = [], (r.qsa = Y.test(n.querySelectorAll)) && (ft(function(e) {
          e.innerHTML = "<select><option selected=''></option></select>", e.querySelectorAll("[selected]").length || v.push("\\[" + I + "*(?:value|" + F + ")"), e.querySelectorAll(":checked").length || v.push(":checked")
        }), ft(function(e) {
          var t = n.createElement("input");
          t.setAttribute("type", "hidden"), e.appendChild(t).setAttribute("t", ""), e.querySelectorAll("[t^='']").length && v.push("[*^$]=" + I + "*(?:''|\"\")"), e.querySelectorAll(":enabled").length || v.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), v.push(",.*:")
        })), (r.matchesSelector = Y.test(g = p.webkitMatchesSelector || p.mozMatchesSelector || p.oMatchesSelector || p.msMatchesSelector)) && ft(function(e) {
          r.disconnectedMatch = g.call(e, "div"), g.call(e, "[s!='']:x"), m.push("!=", z)
        }), v = v.length && RegExp(v.join("|")), m = m.length && RegExp(m.join("|")), y = Y.test(p.contains) || p.compareDocumentPosition ? function(e, t) {
          var n = 9 === e.nodeType ? e.documentElement : e,
            r = t && t.parentNode;
          return e === r || !!r && 1 === r.nodeType && !!(n.contains ? n.contains(r) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(r))
        } : function(e, t) {
          if (t)
            while (t = t.parentNode)
              if (t === e) return !0;
          return !1
        }, L = p.compareDocumentPosition ? function(e, t) {
          if (e === t) return k = !0, 0;
          var i = t.compareDocumentPosition && e.compareDocumentPosition && e.compareDocumentPosition(t);
          return i ? 1 & i || !r.sortDetached && t.compareDocumentPosition(e) === i ? e === n || y(E, e) ? -1 : t === n || y(E, t) ? 1 : l ? j.call(l, e) - j.call(l, t) : 0 : 4 & i ? -1 : 1 : e.compareDocumentPosition ? -1 : 1
        } : function(e, t) {
          var r, i = 0,
            s = e.parentNode,
            o = t.parentNode,
            u = [e],
            a = [t];
          if (e === t) return k = !0, 0;
          if (!s || !o) return e === n ? -1 : t === n ? 1 : s ? -1 : o ? 1 : l ? j.call(l, e) - j.call(l, t) : 0;
          if (s === o) return ct(e, t);
          r = e;
          while (r = r.parentNode) u.unshift(r);
          r = t;
          while (r = r.parentNode) a.unshift(r);
          while (u[i] === a[i]) i++;
          return i ? ct(u[i], a[i]) : u[i] === E ? -1 : a[i] === E ? 1 : 0
        }, n) : h
      }, ot.matches = function(e, t) {
        return ot(e, null, null, t)
      }, ot.matchesSelector = function(e, t) {
        if ((e.ownerDocument || e) !== h && c(e), t = t.replace(J, "='$1']"), !(!r.matchesSelector || !d || m && m.test(t) || v && v.test(t))) try {
          var n = g.call(e, t);
          if (n || r.disconnectedMatch || e.document && 11 !== e.document.nodeType) return n
        } catch (i) {}
        return ot(t, h, null, [e]).length > 0
      }, ot.contains = function(e, t) {
        return (e.ownerDocument || e) !== h && c(e), y(e, t)
      }, ot.attr = function(e, n) {
        (e.ownerDocument || e) !== h && c(e);
        var i = s.attrHandle[n.toLowerCase()],
          o = i && M.call(s.attrHandle, n.toLowerCase()) ? i(e, n, !d) : t;
        return o === t ? r.attributes || !d ? e.getAttribute(n) : (o = e.getAttributeNode(n)) && o.specified ? o.value : null : o
      }, ot.error = function(e) {
        throw Error("Syntax error, unrecognized expression: " + e)
      }, ot.uniqueSort = function(e) {
        var t, n = [],
          i = 0,
          s = 0;
        if (k = !r.detectDuplicates, l = !r.sortStable && e.slice(0), e.sort(L), k) {
          while (t = e[s++]) t === e[s] && (i = n.push(s));
          while (i--) e.splice(n[i], 1)
        }
        return e
      }, o = ot.getText = function(e) {
        var t, n = "",
          r = 0,
          i = e.nodeType;
        if (i) {
          if (1 === i || 9 === i || 11 === i) {
            if ("string" == typeof e.textContent) return e.textContent;
            for (e = e.firstChild; e; e = e.nextSibling) n += o(e)
          } else if (3 === i || 4 === i) return e.nodeValue
        } else
          for (; t = e[r]; r++) n += o(t);
        return n
      }, s = ot.selectors = {
        cacheLength: 50,
        createPseudo: at,
        match: G,
        attrHandle: {},
        find: {},
        relative: {
          ">": {
            dir: "parentNode",
            first: !0
          },
          " ": {
            dir: "parentNode"
          },
          "+": {
            dir: "previousSibling",
            first: !0
          },
          "~": {
            dir: "previousSibling"
          }
        },
        preFilter: {
          ATTR: function(e) {
            return e[1] = e[1].replace(rt, it), e[3] = (e[4] || e[5] || "").replace(rt, it), "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4)
          },
          CHILD: function(e) {
            return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || ot.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && ot.error(e[0]), e
          },
          PSEUDO: function(e) {
            var n, r = !e[5] && e[2];
            return G.CHILD.test(e[0]) ? null : (e[3] && e[4] !== t ? e[2] = e[4] : r && K.test(r) && (n = mt(r, !0)) && (n = r.indexOf(")", r.length - n) - r.length) && (e[0] = e[0].slice(0, n), e[2] = r.slice(0, n)), e.slice(0, 3))
          }
        },
        filter: {
          TAG: function(e) {
            var t = e.replace(rt, it).toLowerCase();
            return "*" === e ? function() {
              return !0
            } : function(e) {
              return e.nodeName && e.nodeName.toLowerCase() === t
            }
          },
          CLASS: function(e) {
            var t = T[e + " "];
            return t || (t = RegExp("(^|" + I + ")" + e + "(" + I + "|$)")) && T(e, function(e) {
              return t.test("string" == typeof e.className && e.className || typeof e.getAttribute !== A && e.getAttribute("class") || "")
            })
          },
          ATTR: function(e, t, n) {
            return function(r) {
              var i = ot.attr(r, e);
              return null == i ? "!=" === t : t ? (i += "", "=" === t ? i === n : "!=" === t ? i !== n : "^=" === t ? n && 0 === i.indexOf(n) : "*=" === t ? n && i.indexOf(n) > -1 : "$=" === t ? n && i.slice(-n.length) === n : "~=" === t ? (" " + i + " ").indexOf(n) > -1 : "|=" === t ? i === n || i.slice(0, n.length + 1) === n + "-" : !1) : !0
            }
          },
          CHILD: function(e, t, n, r, i) {
            var s = "nth" !== e.slice(0, 3),
              o = "last" !== e.slice(-4),
              u = "of-type" === t;
            return 1 === r && 0 === i ? function(e) {
              return !!e.parentNode
            } : function(t, n, a) {
              var f, l, c, h, p, d, v = s !== o ? "nextSibling" : "previousSibling",
                m = t.parentNode,
                g = u && t.nodeName.toLowerCase(),
                y = !a && !u;
              if (m) {
                if (s) {
                  while (v) {
                    c = t;
                    while (c = c[v])
                      if (u ? c.nodeName.toLowerCase() === g : 1 === c.nodeType) return !1;
                    d = v = "only" === e && !d && "nextSibling"
                  }
                  return !0
                }
                if (d = [o ? m.firstChild : m.lastChild], o && y) {
                  l = m[b] || (m[b] = {}), f = l[e] || [], p = f[0] === S && f[1], h = f[0] === S && f[2], c = p && m.childNodes[p];
                  while (c = ++p && c && c[v] || (h = p = 0) || d.pop())
                    if (1 === c.nodeType && ++h && c === t) {
                      l[e] = [S, p, h];
                      break
                    }
                } else if (y && (f = (t[b] || (t[b] = {}))[e]) && f[0] === S) h = f[1];
                else
                  while (c = ++p && c && c[v] || (h = p = 0) || d.pop())
                    if ((u ? c.nodeName.toLowerCase() === g : 1 === c.nodeType) && ++h && (y && ((c[b] || (c[b] = {}))[e] = [S, h]), c === t)) break;
                return h -= i, h === r || 0 === h % r && h / r >= 0
              }
            }
          },
          PSEUDO: function(e, t) {
            var n, r = s.pseudos[e] || s.setFilters[e.toLowerCase()] || ot.error("unsupported pseudo: " + e);
            return r[b] ? r(t) : r.length > 1 ? (n = [e, e, "", t], s.setFilters.hasOwnProperty(e.toLowerCase()) ? at(function(e, n) {
              var i, s = r(e, t),
                o = s.length;
              while (o--) i = j.call(e, s[o]), e[i] = !(n[i] = s[o])
            }) : function(e) {
              return r(e, 0, n)
            }) : r
          }
        },
        pseudos: {
          not: at(function(e) {
            var t = [],
              n = [],
              r = a(e.replace(W, "$1"));
            return r[b] ? at(function(e, t, n, i) {
              var s, o = r(e, null, i, []),
                u = e.length;
              while (u--)(s = o[u]) && (e[u] = !(t[u] = s))
            }) : function(e, i, s) {
              return t[0] = e, r(t, null, s, n), !n.pop()
            }
          }),
          has: at(function(e) {
            return function(t) {
              return ot(e, t).length > 0
            }
          }),
          contains: at(function(e) {
            return function(t) {
              return (t.textContent || t.innerText || o(t)).indexOf(e) > -1
            }
          }),
          lang: at(function(e) {
            return Q.test(e || "") || ot.error("unsupported lang: " + e), e = e.replace(rt, it).toLowerCase(),
              function(t) {
                var n;
                do
                  if (n = d ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang")) return n = n.toLowerCase(), n === e || 0 === n.indexOf(e + "-");
                while ((t = t.parentNode) && 1 === t.nodeType);
                return !1
              }
          }),
          target: function(t) {
            var n = e.location && e.location.hash;
            return n && n.slice(1) === t.id
          },
          root: function(e) {
            return e === p
          },
          focus: function(e) {
            return e === h.activeElement && (!h.hasFocus || h.hasFocus()) && !!(e.type || e.href || ~e.tabIndex)
          },
          enabled: function(e) {
            return e.disabled === !1
          },
          disabled: function(e) {
            return e.disabled === !0
          },
          checked: function(e) {
            var t = e.nodeName.toLowerCase();
            return "input" === t && !!e.checked || "option" === t && !!e.selected
          },
          selected: function(e) {
            return e.parentNode && e.parentNode.selectedIndex, e.selected === !0
          },
          empty: function(e) {
            for (e = e.firstChild; e; e = e.nextSibling)
              if (e.nodeName > "@" || 3 === e.nodeType || 4 === e.nodeType) return !1;
            return !0
          },
          parent: function(e) {
            return !s.pseudos.empty(e)
          },
          header: function(e) {
            return tt.test(e.nodeName)
          },
          input: function(e) {
            return et.test(e.nodeName)
          },
          button: function(e) {
            var t = e.nodeName.toLowerCase();
            return "input" === t && "button" === e.type || "button" === t
          },
          text: function(e) {
            var t;
            return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || t.toLowerCase() === e.type)
          },
          first: dt(function() {
            return [0]
          }),
          last: dt(function(e, t) {
            return [t - 1]
          }),
          eq: dt(function(e, t, n) {
            return [0 > n ? n + t : n]
          }),
          even: dt(function(e, t) {
            var n = 0;
            for (; t > n; n += 2) e.push(n);
            return e
          }),
          odd: dt(function(e, t) {
            var n = 1;
            for (; t > n; n += 2) e.push(n);
            return e
          }),
          lt: dt(function(e, t, n) {
            var r = 0 > n ? n + t : n;
            for (; --r >= 0;) e.push(r);
            return e
          }),
          gt: dt(function(e, t, n) {
            var r = 0 > n ? n + t : n;
            for (; t > ++r;) e.push(r);
            return e
          })
        }
      }, s.pseudos.nth = s.pseudos.eq;
      for (n in {
          radio: !0,
          checkbox: !0,
          file: !0,
          password: !0,
          image: !0
        }) s.pseudos[n] = ht(n);
      for (n in {
          submit: !0,
          reset: !0
        }) s.pseudos[n] = pt(n);
      vt.prototype = s.filters = s.pseudos, s.setFilters = new vt, a = ot.compile = function(e, t) {
        var n, r = [],
          i = [],
          s = C[e + " "];
        if (!s) {
          t || (t = mt(e)), n = t.length;
          while (n--) s = St(t[n]), s[b] ? r.push(s) : i.push(s);
          s = C(e, xt(i, r))
        }
        return s
      }, r.sortStable = b.split("").sort(L).join("") === b, r.detectDuplicates = k, c(), r.sortDetached = ft(function(e) {
        return 1 & e.compareDocumentPosition(h.createElement("div"))
      }), ft(function(e) {
        return e.innerHTML = "<a href='#'></a>", "#" === e.firstChild.getAttribute("href")
      }) || lt("type|href|height|width", function(e, n, r) {
        return r ? t : e.getAttribute(n, "type" === n.toLowerCase() ? 1 : 2)
      }), r.attributes && ft(function(e) {
        return e.innerHTML = "<input/>", e.firstChild.setAttribute("value", ""), "" === e.firstChild.getAttribute("value")
      }) || lt("value", function(e, n, r) {
        return r || "input" !== e.nodeName.toLowerCase() ? t : e.defaultValue
      }), ft(function(e) {
        return null == e.getAttribute("disabled")
      }) || lt(F, function(e, n, r) {
        var i;
        return r ? t : (i = e.getAttributeNode(n)) && i.specified ? i.value : e[n] === !0 ? n.toLowerCase() : null
      }), w.find = ot, w.expr = ot.selectors, w.expr[":"] = w.expr.pseudos, w.unique = ot.uniqueSort, w.text = ot.getText, w.isXMLDoc = ot.isXML, w.contains = ot.contains
    }(e);
  var B = {};
  w.Callbacks = function(e) {
    e = "string" == typeof e ? B[e] || j(e) : w.extend({}, e);
    var n, r, i, s, o, u, a = [],
      f = !e.once && [],
      l = function(t) {
        for (r = e.memory && t, i = !0, o = u || 0, u = 0, s = a.length, n = !0; a && s > o; o++)
          if (a[o].apply(t[0], t[1]) === !1 && e.stopOnFalse) {
            r = !1;
            break
          }
        n = !1, a && (f ? f.length && l(f.shift()) : r ? a = [] : c.disable())
      },
      c = {
        add: function() {
          if (a) {
            var t = a.length;
            (function i(t) {
              w.each(t, function(t, n) {
                var r = w.type(n);
                "function" === r ? e.unique && c.has(n) || a.push(n) : n && n.length && "string" !== r && i(n)
              })
            })(arguments), n ? s = a.length : r && (u = t, l(r))
          }
          return this
        },
        remove: function() {
          return a && w.each(arguments, function(e, t) {
            var r;
            while ((r = w.inArray(t, a, r)) > -1) a.splice(r, 1), n && (s >= r && s--, o >= r && o--)
          }), this
        },
        has: function(e) {
          return e ? w.inArray(e, a) > -1 : !!a && !!a.length
        },
        empty: function() {
          return a = [], s = 0, this
        },
        disable: function() {
          return a = f = r = t, this
        },
        disabled: function() {
          return !a
        },
        lock: function() {
          return f = t, r || c.disable(), this
        },
        locked: function() {
          return !f
        },
        fireWith: function(e, t) {
          return !a || i && !f || (t = t || [], t = [e, t.slice ? t.slice() : t], n ? f.push(t) : l(t)), this
        },
        fire: function() {
          return c.fireWith(this, arguments), this
        },
        fired: function() {
          return !!i
        }
      };
    return c
  }, w.extend({
    Deferred: function(e) {
      var t = [
          ["resolve", "done", w.Callbacks("once memory"), "resolved"],
          ["reject", "fail", w.Callbacks("once memory"), "rejected"],
          ["notify", "progress", w.Callbacks("memory")]
        ],
        n = "pending",
        r = {
          state: function() {
            return n
          },
          always: function() {
            return i.done(arguments).fail(arguments), this
          },
          then: function() {
            var e = arguments;
            return w.Deferred(function(n) {
              w.each(t, function(t, s) {
                var o = s[0],
                  u = w.isFunction(e[t]) && e[t];
                i[s[1]](function() {
                  var e = u && u.apply(this, arguments);
                  e && w.isFunction(e.promise) ? e.promise().done(n.resolve).fail(n.reject).progress(n.notify) : n[o + "With"](this === r ? n.promise() : this, u ? [e] : arguments)
                })
              }), e = null
            }).promise()
          },
          promise: function(e) {
            return null != e ? w.extend(e, r) : r
          }
        },
        i = {};
      return r.pipe = r.then, w.each(t, function(e, s) {
        var o = s[2],
          u = s[3];
        r[s[1]] = o.add, u && o.add(function() {
          n = u
        }, t[1 ^ e][2].disable, t[2][2].lock), i[s[0]] = function() {
          return i[s[0] + "With"](this === i ? r : this, arguments), this
        }, i[s[0] + "With"] = o.fireWith
      }), r.promise(i), e && e.call(i, i), i
    },
    when: function(e) {
      var t = 0,
        n = v.call(arguments),
        r = n.length,
        i = 1 !== r || e && w.isFunction(e.promise) ? r : 0,
        s = 1 === i ? e : w.Deferred(),
        o = function(e, t, n) {
          return function(r) {
            t[e] = this, n[e] = arguments.length > 1 ? v.call(arguments) : r, n === u ? s.notifyWith(t, n) : --i || s.resolveWith(t, n)
          }
        },
        u, a, f;
      if (r > 1)
        for (u = Array(r), a = Array(r), f = Array(r); r > t; t++) n[t] && w.isFunction(n[t].promise) ? n[t].promise().done(o(t, f, n)).fail(s.reject).progress(o(t, a, u)) : --i;
      return i || s.resolveWith(f, n), s.promise()
    }
  }), w.support = function(t) {
    var n, r, s, u, a, f, l, c, h, p = o.createElement("div");
    if (p.setAttribute("className", "t"), p.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>", n = p.getElementsByTagName("*") || [], r = p.getElementsByTagName("a")[0], !r || !r.style || !n.length) return t;
    u = o.createElement("select"), f = u.appendChild(o.createElement("option")), s = p.getElementsByTagName("input")[0], r.style.cssText = "top:1px;float:left;opacity:.5", t.getSetAttribute = "t" !== p.className, t.leadingWhitespace = 3 === p.firstChild.nodeType, t.tbody = !p.getElementsByTagName("tbody").length, t.htmlSerialize = !!p.getElementsByTagName("link").length, t.style = /top/.test(r.getAttribute("style")), t.hrefNormalized = "/a" === r.getAttribute("href"), t.opacity = /^0.5/.test(r.style.opacity), t.cssFloat = !!r.style.cssFloat, t.checkOn = !!s.value, t.optSelected = f.selected, t.enctype = !!o.createElement("form").enctype, t.html5Clone = "<:nav></:nav>" !== o.createElement("nav").cloneNode(!0).outerHTML, t.inlineBlockNeedsLayout = !1, t.shrinkWrapBlocks = !1, t.pixelPosition = !1, t.deleteExpando = !0, t.noCloneEvent = !0, t.reliableMarginRight = !0, t.boxSizingReliable = !0, s.checked = !0, t.noCloneChecked = s.cloneNode(!0).checked, u.disabled = !0, t.optDisabled = !f.disabled;
    try {
      delete p.test
    } catch (d) {
      t.deleteExpando = !1
    }
    s = o.createElement("input"), s.setAttribute("value", ""), t.input = "" === s.getAttribute("value"), s.value = "t", s.setAttribute("type", "radio"), t.radioValue = "t" === s.value, s.setAttribute("checked", "t"), s.setAttribute("name", "t"), a = o.createDocumentFragment(), a.appendChild(s), t.appendChecked = s.checked, t.checkClone = a.cloneNode(!0).cloneNode(!0).lastChild.checked, p.attachEvent && (p.attachEvent("onclick", function() {
      t.noCloneEvent = !1
    }), p.cloneNode(!0).click());
    for (h in {
        submit: !0,
        change: !0,
        focusin: !0
      }) p.setAttribute(l = "on" + h, "t"), t[h + "Bubbles"] = l in e || p.attributes[l].expando === !1;
    p.style.backgroundClip = "content-box", p.cloneNode(!0).style.backgroundClip = "", t.clearCloneStyle = "content-box" === p.style.backgroundClip;
    for (h in w(t)) break;
    return t.ownLast = "0" !== h, w(function() {
      var n, r, s, u = "padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",
        a = o.getElementsByTagName("body")[0];
      a && (n = o.createElement("div"), n.style.cssText = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px", a.appendChild(n).appendChild(p), p.innerHTML = "<table><tr><td></td><td>t</td></tr></table>", s = p.getElementsByTagName("td"), s[0].style.cssText = "padding:0;margin:0;border:0;display:none", c = 0 === s[0].offsetHeight, s[0].style.display = "", s[1].style.display = "none", t.reliableHiddenOffsets = c && 0 === s[0].offsetHeight, p.innerHTML = "", p.style.cssText = "box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;", w.swap(a, null != a.style.zoom ? {
        zoom: 1
      } : {}, function() {
        t.boxSizing = 4 === p.offsetWidth
      }), e.getComputedStyle && (t.pixelPosition = "1%" !== (e.getComputedStyle(p, null) || {}).top, t.boxSizingReliable = "4px" === (e.getComputedStyle(p, null) || {
        width: "4px"
      }).width, r = p.appendChild(o.createElement("div")), r.style.cssText = p.style.cssText = u, r.style.marginRight = r.style.width = "0", p.style.width = "1px", t.reliableMarginRight = !parseFloat((e.getComputedStyle(r, null) || {}).marginRight)), typeof p.style.zoom !== i && (p.innerHTML = "", p.style.cssText = u + "width:1px;padding:1px;display:inline;zoom:1", t.inlineBlockNeedsLayout = 3 === p.offsetWidth, p.style.display = "block", p.innerHTML = "<div></div>", p.firstChild.style.width = "5px", t.shrinkWrapBlocks = 3 !== p.offsetWidth, t.inlineBlockNeedsLayout && (a.style.zoom = 1)), a.removeChild(n), n = p = s = r = null)
    }), n = u = a = f = r = s = null, t
  }({});
  var F = /(?:\{[\s\S]*\}|\[[\s\S]*\])$/,
    I = /([A-Z])/g;
  w.extend({
    cache: {},
    noData: {
      applet: !0,
      embed: !0,
      object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
    },
    hasData: function(e) {
      return e = e.nodeType ? w.cache[e[w.expando]] : e[w.expando], !!e && !z(e)
    },
    data: function(e, t, n) {
      return q(e, t, n)
    },
    removeData: function(e, t) {
      return R(e, t)
    },
    _data: function(e, t, n) {
      return q(e, t, n, !0)
    },
    _removeData: function(e, t) {
      return R(e, t, !0)
    },
    acceptData: function(e) {
      if (e.nodeType && 1 !== e.nodeType && 9 !== e.nodeType) return !1;
      var t = e.nodeName && w.noData[e.nodeName.toLowerCase()];
      return !t || t !== !0 && e.getAttribute("classid") === t
    }
  }), w.fn.extend({
    data: function(e, n) {
      var r, i, s = null,
        o = 0,
        u = this[0];
      if (e === t) {
        if (this.length && (s = w.data(u), 1 === u.nodeType && !w._data(u, "parsedAttrs"))) {
          for (r = u.attributes; r.length > o; o++) i = r[o].name, 0 === i.indexOf("data-") && (i = w.camelCase(i.slice(5)), U(u, i, s[i]));
          w._data(u, "parsedAttrs", !0)
        }
        return s
      }
      return "object" == typeof e ? this.each(function() {
        w.data(this, e)
      }) : arguments.length > 1 ? this.each(function() {
        w.data(this, e, n)
      }) : u ? U(u, e, w.data(u, e)) : null
    },
    removeData: function(e) {
      return this.each(function() {
        w.removeData(this, e)
      })
    }
  }), w.extend({
    queue: function(e, n, r) {
      var i;
      return e ? (n = (n || "fx") + "queue", i = w._data(e, n), r && (!i || w.isArray(r) ? i = w._data(e, n, w.makeArray(r)) : i.push(r)), i || []) : t
    },
    dequeue: function(e, t) {
      t = t || "fx";
      var n = w.queue(e, t),
        r = n.length,
        i = n.shift(),
        s = w._queueHooks(e, t),
        o = function() {
          w.dequeue(e, t)
        };
      "inprogress" === i && (i = n.shift(), r--), i && ("fx" === t && n.unshift("inprogress"), delete s.stop, i.call(e, o, s)), !r && s && s.empty.fire()
    },
    _queueHooks: function(e, t) {
      var n = t + "queueHooks";
      return w._data(e, n) || w._data(e, n, {
        empty: w.Callbacks("once memory").add(function() {
          w._removeData(e, t + "queue"), w._removeData(e, n)
        })
      })
    }
  }), w.fn.extend({
    queue: function(e, n) {
      var r = 2;
      return "string" != typeof e && (n = e, e = "fx", r--), r > arguments.length ? w.queue(this[0], e) : n === t ? this : this.each(function() {
        var t = w.queue(this, e, n);
        w._queueHooks(this, e), "fx" === e && "inprogress" !== t[0] && w.dequeue(this, e)
      })
    },
    dequeue: function(e) {
      return this.each(function() {
        w.dequeue(this, e)
      })
    },
    delay: function(e, t) {
      return e = w.fx ? w.fx.speeds[e] || e : e, t = t || "fx", this.queue(t, function(t, n) {
        var r = setTimeout(t, e);
        n.stop = function() {
          clearTimeout(r)
        }
      })
    },
    clearQueue: function(e) {
      return this.queue(e || "fx", [])
    },
    promise: function(e, n) {
      var r, i = 1,
        s = w.Deferred(),
        o = this,
        u = this.length,
        a = function() {
          --i || s.resolveWith(o, [o])
        };
      "string" != typeof e && (n = e, e = t), e = e || "fx";
      while (u--) r = w._data(o[u], e + "queueHooks"), r && r.empty && (i++, r.empty.add(a));
      return a(), s.promise(n)
    }
  });
  var W, X, V = /[\t\r\n\f]/g,
    $ = /\r/g,
    J = /^(?:input|select|textarea|button|object)$/i,
    K = /^(?:a|area)$/i,
    Q = /^(?:checked|selected)$/i,
    G = w.support.getSetAttribute,
    Y = w.support.input;
  w.fn.extend({
    attr: function(e, t) {
      return w.access(this, w.attr, e, t, arguments.length > 1)
    },
    removeAttr: function(e) {
      return this.each(function() {
        w.removeAttr(this, e)
      })
    },
    prop: function(e, t) {
      return w.access(this, w.prop, e, t, arguments.length > 1)
    },
    removeProp: function(e) {
      return e = w.propFix[e] || e, this.each(function() {
        try {
          this[e] = t, delete this[e]
        } catch (n) {}
      })
    },
    addClass: function(e) {
      var t, n, r, i, s, o = 0,
        u = this.length,
        a = "string" == typeof e && e;
      if (w.isFunction(e)) return this.each(function(t) {
        w(this).addClass(e.call(this, t, this.className))
      });
      if (a)
        for (t = (e || "").match(S) || []; u > o; o++)
          if (n = this[o], r = 1 === n.nodeType && (n.className ? (" " + n.className + " ").replace(V, " ") : " ")) {
            s = 0;
            while (i = t[s++]) 0 > r.indexOf(" " + i + " ") && (r += i + " ");
            n.className = w.trim(r)
          }
      return this
    },
    removeClass: function(e) {
      var t, n, r, i, s, o = 0,
        u = this.length,
        a = 0 === arguments.length || "string" == typeof e && e;
      if (w.isFunction(e)) return this.each(function(t) {
        w(this).removeClass(e.call(this, t, this.className))
      });
      if (a)
        for (t = (e || "").match(S) || []; u > o; o++)
          if (n = this[o], r = 1 === n.nodeType && (n.className ? (" " + n.className + " ").replace(V, " ") : "")) {
            s = 0;
            while (i = t[s++])
              while (r.indexOf(" " + i + " ") >= 0) r = r.replace(" " + i + " ", " ");
            n.className = e ? w.trim(r) : ""
          }
      return this
    },
    toggleClass: function(e, t) {
      var n = typeof e;
      return "boolean" == typeof t && "string" === n ? t ? this.addClass(e) : this.removeClass(e) : w.isFunction(e) ? this.each(function(n) {
        w(this).toggleClass(e.call(this, n, this.className, t), t)
      }) : this.each(function() {
        if ("string" === n) {
          var t, r = 0,
            s = w(this),
            o = e.match(S) || [];
          while (t = o[r++]) s.hasClass(t) ? s.removeClass(t) : s.addClass(t)
        } else(n === i || "boolean" === n) && (this.className && w._data(this, "__className__", this.className), this.className = this.className || e === !1 ? "" : w._data(this, "__className__") || "")
      })
    },
    hasClass: function(e) {
      var t = " " + e + " ",
        n = 0,
        r = this.length;
      for (; r > n; n++)
        if (1 === this[n].nodeType && (" " + this[n].className + " ").replace(V, " ").indexOf(t) >= 0) return !0;
      return !1
    },
    val: function(e) {
      var n, r, i, s = this[0];
      if (arguments.length) return i = w.isFunction(e), this.each(function(n) {
        var s;
        1 === this.nodeType && (s = i ? e.call(this, n, w(this).val()) : e, null == s ? s = "" : "number" == typeof s ? s += "" : w.isArray(s) && (s = w.map(s, function(e) {
          return null == e ? "" : e + ""
        })), r = w.valHooks[this.type] || w.valHooks[this.nodeName.toLowerCase()], r && "set" in r && r.set(this, s, "value") !== t || (this.value = s))
      });
      if (s) return r = w.valHooks[s.type] || w.valHooks[s.nodeName.toLowerCase()], r && "get" in r && (n = r.get(s, "value")) !== t ? n : (n = s.value, "string" == typeof n ? n.replace($, "") : null == n ? "" : n)
    }
  }), w.extend({
    valHooks: {
      option: {
        get: function(e) {
          var t = w.find.attr(e, "value");
          return null != t ? t : e.text
        }
      },
      select: {
        get: function(e) {
          var t, n, r = e.options,
            i = e.selectedIndex,
            s = "select-one" === e.type || 0 > i,
            o = s ? null : [],
            u = s ? i + 1 : r.length,
            a = 0 > i ? u : s ? i : 0;
          for (; u > a; a++)
            if (n = r[a], !(!n.selected && a !== i || (w.support.optDisabled ? n.disabled : null !== n.getAttribute("disabled")) || n.parentNode.disabled && w.nodeName(n.parentNode, "optgroup"))) {
              if (t = w(n).val(), s) return t;
              o.push(t)
            }
          return o
        },
        set: function(e, t) {
          var n, r, i = e.options,
            s = w.makeArray(t),
            o = i.length;
          while (o--) r = i[o], (r.selected = w.inArray(w(r).val(), s) >= 0) && (n = !0);
          return n || (e.selectedIndex = -1), s
        }
      }
    },
    attr: function(e, n, r) {
      var s, o, u = e.nodeType;
      if (e && 3 !== u && 8 !== u && 2 !== u) return typeof e.getAttribute === i ? w.prop(e, n, r) : (1 === u && w.isXMLDoc(e) || (n = n.toLowerCase(), s = w.attrHooks[n] || (w.expr.match.bool.test(n) ? X : W)), r === t ? s && "get" in s && null !== (o = s.get(e, n)) ? o : (o = w.find.attr(e, n), null == o ? t : o) : null !== r ? s && "set" in s && (o = s.set(e, r, n)) !== t ? o : (e.setAttribute(n, r + ""), r) : (w.removeAttr(e, n), t))
    },
    removeAttr: function(e, t) {
      var n, r, i = 0,
        s = t && t.match(S);
      if (s && 1 === e.nodeType)
        while (n = s[i++]) r = w.propFix[n] || n, w.expr.match.bool.test(n) ? Y && G || !Q.test(n) ? e[r] = !1 : e[w.camelCase("default-" + n)] = e[r] = !1 : w.attr(e, n, ""), e.removeAttribute(G ? n : r)
    },
    attrHooks: {
      type: {
        set: function(e, t) {
          if (!w.support.radioValue && "radio" === t && w.nodeName(e, "input")) {
            var n = e.value;
            return e.setAttribute("type", t), n && (e.value = n), t
          }
        }
      }
    },
    propFix: {
      "for": "htmlFor",
      "class": "className"
    },
    prop: function(e, n, r) {
      var i, s, o, u = e.nodeType;
      if (e && 3 !== u && 8 !== u && 2 !== u) return o = 1 !== u || !w.isXMLDoc(e), o && (n = w.propFix[n] || n, s = w.propHooks[n]), r !== t ? s && "set" in s && (i = s.set(e, r, n)) !== t ? i : e[n] = r : s && "get" in s && null !== (i = s.get(e, n)) ? i : e[n]
    },
    propHooks: {
      tabIndex: {
        get: function(e) {
          var t = w.find.attr(e, "tabindex");
          return t ? parseInt(t, 10) : J.test(e.nodeName) || K.test(e.nodeName) && e.href ? 0 : -1
        }
      }
    }
  }), X = {
    set: function(e, t, n) {
      return t === !1 ? w.removeAttr(e, n) : Y && G || !Q.test(n) ? e.setAttribute(!G && w.propFix[n] || n, n) : e[w.camelCase("default-" + n)] = e[n] = !0, n
    }
  }, w.each(w.expr.match.bool.source.match(/\w+/g), function(e, n) {
    var r = w.expr.attrHandle[n] || w.find.attr;
    w.expr.attrHandle[n] = Y && G || !Q.test(n) ? function(e, n, i) {
      var s = w.expr.attrHandle[n],
        o = i ? t : (w.expr.attrHandle[n] = t) != r(e, n, i) ? n.toLowerCase() : null;
      return w.expr.attrHandle[n] = s, o
    } : function(e, n, r) {
      return r ? t : e[w.camelCase("default-" + n)] ? n.toLowerCase() : null
    }
  }), Y && G || (w.attrHooks.value = {
    set: function(e, n, r) {
      return w.nodeName(e, "input") ? (e.defaultValue = n, t) : W && W.set(e, n, r)
    }
  }), G || (W = {
    set: function(e, n, r) {
      var i = e.getAttributeNode(r);
      return i || e.setAttributeNode(i = e.ownerDocument.createAttribute(r)), i.value = n += "", "value" === r || n === e.getAttribute(r) ? n : t
    }
  }, w.expr.attrHandle.id = w.expr.attrHandle.name = w.expr.attrHandle.coords = function(e, n, r) {
    var i;
    return r ? t : (i = e.getAttributeNode(n)) && "" !== i.value ? i.value : null
  }, w.valHooks.button = {
    get: function(e, n) {
      var r = e.getAttributeNode(n);
      return r && r.specified ? r.value : t
    },
    set: W.set
  }, w.attrHooks.contenteditable = {
    set: function(e, t, n) {
      W.set(e, "" === t ? !1 : t, n)
    }
  }, w.each(["width", "height"], function(e, n) {
    w.attrHooks[n] = {
      set: function(e, r) {
        return "" === r ? (e.setAttribute(n, "auto"), r) : t
      }
    }
  })), w.support.hrefNormalized || w.each(["href", "src"], function(e, t) {
    w.propHooks[t] = {
      get: function(e) {
        return e.getAttribute(t, 4)
      }
    }
  }), w.support.style || (w.attrHooks.style = {
    get: function(e) {
      return e.style.cssText || t
    },
    set: function(e, t) {
      return e.style.cssText = t + ""
    }
  }), w.support.optSelected || (w.propHooks.selected = {
    get: function(e) {
      var t = e.parentNode;
      return t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex), null
    }
  }), w.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function() {
    w.propFix[this.toLowerCase()] = this
  }), w.support.enctype || (w.propFix.enctype = "encoding"), w.each(["radio", "checkbox"], function() {
    w.valHooks[this] = {
      set: function(e, n) {
        return w.isArray(n) ? e.checked = w.inArray(w(e).val(), n) >= 0 : t
      }
    }, w.support.checkOn || (w.valHooks[this].get = function(e) {
      return null === e.getAttribute("value") ? "on" : e.value
    })
  });
  var Z = /^(?:input|select|textarea)$/i,
    et = /^key/,
    tt = /^(?:mouse|contextmenu)|click/,
    nt = /^(?:focusinfocus|focusoutblur)$/,
    rt = /^([^.]*)(?:\.(.+)|)$/;
  w.event = {
    global: {},
    add: function(e, n, r, s, o) {
      var u, a, f, l, c, h, p, d, v, m, g, y = w._data(e);
      if (y) {
        r.handler && (l = r, r = l.handler, o = l.selector), r.guid || (r.guid = w.guid++), (a = y.events) || (a = y.events = {}), (h = y.handle) || (h = y.handle = function(e) {
          return typeof w === i || e && w.event.triggered === e.type ? t : w.event.dispatch.apply(h.elem, arguments)
        }, h.elem = e), n = (n || "").match(S) || [""], f = n.length;
        while (f--) u = rt.exec(n[f]) || [], v = g = u[1], m = (u[2] || "").split(".").sort(), v && (c = w.event.special[v] || {}, v = (o ? c.delegateType : c.bindType) || v, c = w.event.special[v] || {}, p = w.extend({
          type: v,
          origType: g,
          data: s,
          handler: r,
          guid: r.guid,
          selector: o,
          needsContext: o && w.expr.match.needsContext.test(o),
          namespace: m.join(".")
        }, l), (d = a[v]) || (d = a[v] = [], d.delegateCount = 0, c.setup && c.setup.call(e, s, m, h) !== !1 || (e.addEventListener ? e.addEventListener(v, h, !1) : e.attachEvent && e.attachEvent("on" + v, h))), c.add && (c.add.call(e, p), p.handler.guid || (p.handler.guid = r.guid)), o ? d.splice(d.delegateCount++, 0, p) : d.push(p), w.event.global[v] = !0);
        e = null
      }
    },
    remove: function(e, t, n, r, i) {
      var s, o, u, a, f, l, c, h, p, d, v, m = w.hasData(e) && w._data(e);
      if (m && (l = m.events)) {
        t = (t || "").match(S) || [""], f = t.length;
        while (f--)
          if (u = rt.exec(t[f]) || [], p = v = u[1], d = (u[2] || "").split(".").sort(), p) {
            c = w.event.special[p] || {}, p = (r ? c.delegateType : c.bindType) || p, h = l[p] || [], u = u[2] && RegExp("(^|\\.)" + d.join("\\.(?:.*\\.|)") + "(\\.|$)"), a = s = h.length;
            while (s--) o = h[s], !i && v !== o.origType || n && n.guid !== o.guid || u && !u.test(o.namespace) || r && r !== o.selector && ("**" !== r || !o.selector) || (h.splice(s, 1), o.selector && h.delegateCount--, c.remove && c.remove.call(e, o));
            a && !h.length && (c.teardown && c.teardown.call(e, d, m.handle) !== !1 || w.removeEvent(e, p, m.handle), delete l[p])
          } else
            for (p in l) w.event.remove(e, p + t[f], n, r, !0);
        w.isEmptyObject(l) && (delete m.handle, w._removeData(e, "events"))
      }
    },
    trigger: function(n, r, i, s) {
      var u, a, f, l, c, h, p, d = [i || o],
        v = y.call(n, "type") ? n.type : n,
        m = y.call(n, "namespace") ? n.namespace.split(".") : [];
      if (f = h = i = i || o, 3 !== i.nodeType && 8 !== i.nodeType && !nt.test(v + w.event.triggered) && (v.indexOf(".") >= 0 && (m = v.split("."), v = m.shift(), m.sort()), a = 0 > v.indexOf(":") && "on" + v, n = n[w.expando] ? n : new w.Event(v, "object" == typeof n && n), n.isTrigger = s ? 2 : 3, n.namespace = m.join("."), n.namespace_re = n.namespace ? RegExp("(^|\\.)" + m.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, n.result = t, n.target || (n.target = i), r = null == r ? [n] : w.makeArray(r, [n]), c = w.event.special[v] || {}, s || !c.trigger || c.trigger.apply(i, r) !== !1)) {
        if (!s && !c.noBubble && !w.isWindow(i)) {
          for (l = c.delegateType || v, nt.test(l + v) || (f = f.parentNode); f; f = f.parentNode) d.push(f), h = f;
          h === (i.ownerDocument || o) && d.push(h.defaultView || h.parentWindow || e)
        }
        p = 0;
        while ((f = d[p++]) && !n.isPropagationStopped()) n.type = p > 1 ? l : c.bindType || v, u = (w._data(f, "events") || {})[n.type] && w._data(f, "handle"), u && u.apply(f, r), u = a && f[a], u && w.acceptData(f) && u.apply && u.apply(f, r) === !1 && n.preventDefault();
        if (n.type = v, !s && !n.isDefaultPrevented() && (!c._default || c._default.apply(d.pop(), r) === !1) && w.acceptData(i) && a && i[v] && !w.isWindow(i)) {
          h = i[a], h && (i[a] = null), w.event.triggered = v;
          try {
            i[v]()
          } catch (g) {}
          w.event.triggered = t, h && (i[a] = h)
        }
        return n.result
      }
    },
    dispatch: function(e) {
      e = w.event.fix(e);
      var n, r, i, s, o, u = [],
        a = v.call(arguments),
        f = (w._data(this, "events") || {})[e.type] || [],
        l = w.event.special[e.type] || {};
      if (a[0] = e, e.delegateTarget = this, !l.preDispatch || l.preDispatch.call(this, e) !== !1) {
        u = w.event.handlers.call(this, e, f), n = 0;
        while ((s = u[n++]) && !e.isPropagationStopped()) {
          e.currentTarget = s.elem, o = 0;
          while ((i = s.handlers[o++]) && !e.isImmediatePropagationStopped())(!e.namespace_re || e.namespace_re.test(i.namespace)) && (e.handleObj = i, e.data = i.data, r = ((w.event.special[i.origType] || {}).handle || i.handler).apply(s.elem, a), r !== t && (e.result = r) === !1 && (e.preventDefault(), e.stopPropagation()))
        }
        return l.postDispatch && l.postDispatch.call(this, e), e.result
      }
    },
    handlers: function(e, n) {
      var r, i, s, o, u = [],
        a = n.delegateCount,
        f = e.target;
      if (a && f.nodeType && (!e.button || "click" !== e.type))
        for (; f != this; f = f.parentNode || this)
          if (1 === f.nodeType && (f.disabled !== !0 || "click" !== e.type)) {
            for (s = [], o = 0; a > o; o++) i = n[o], r = i.selector + " ", s[r] === t && (s[r] = i.needsContext ? w(r, this).index(f) >= 0 : w.find(r, this, null, [f]).length), s[r] && s.push(i);
            s.length && u.push({
              elem: f,
              handlers: s
            })
          }
      return n.length > a && u.push({
        elem: this,
        handlers: n.slice(a)
      }), u
    },
    fix: function(e) {
      if (e[w.expando]) return e;
      var t, n, r, i = e.type,
        s = e,
        u = this.fixHooks[i];
      u || (this.fixHooks[i] = u = tt.test(i) ? this.mouseHooks : et.test(i) ? this.keyHooks : {}), r = u.props ? this.props.concat(u.props) : this.props, e = new w.Event(s), t = r.length;
      while (t--) n = r[t], e[n] = s[n];
      return e.target || (e.target = s.srcElement || o), 3 === e.target.nodeType && (e.target = e.target.parentNode), e.metaKey = !!e.metaKey, u.filter ? u.filter(e, s) : e
    },
    props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
    fixHooks: {},
    keyHooks: {
      props: "char charCode key keyCode".split(" "),
      filter: function(e, t) {
        return null == e.which && (e.which = null != t.charCode ? t.charCode : t.keyCode), e
      }
    },
    mouseHooks: {
      props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
      filter: function(e, n) {
        var r, i, s, u = n.button,
          a = n.fromElement;
        return null == e.pageX && null != n.clientX && (i = e.target.ownerDocument || o, s = i.documentElement, r = i.body, e.pageX = n.clientX + (s && s.scrollLeft || r && r.scrollLeft || 0) - (s && s.clientLeft || r && r.clientLeft || 0), e.pageY = n.clientY + (s && s.scrollTop || r && r.scrollTop || 0) - (s && s.clientTop || r && r.clientTop || 0)), !e.relatedTarget && a && (e.relatedTarget = a === e.target ? n.toElement : a), e.which || u === t || (e.which = 1 & u ? 1 : 2 & u ? 3 : 4 & u ? 2 : 0), e
      }
    },
    special: {
      load: {
        noBubble: !0
      },
      focus: {
        trigger: function() {
          if (this !== ot() && this.focus) try {
            return this.focus(), !1
          } catch (e) {}
        },
        delegateType: "focusin"
      },
      blur: {
        trigger: function() {
          return this === ot() && this.blur ? (this.blur(), !1) : t
        },
        delegateType: "focusout"
      },
      click: {
        trigger: function() {
          return w.nodeName(this, "input") && "checkbox" === this.type && this.click ? (this.click(), !1) : t
        },
        _default: function(e) {
          return w.nodeName(e.target, "a")
        }
      },
      beforeunload: {
        postDispatch: function(e) {
          e.result !== t && (e.originalEvent.returnValue = e.result)
        }
      }
    },
    simulate: function(e, t, n, r) {
      var i = w.extend(new w.Event, n, {
        type: e,
        isSimulated: !0,
        originalEvent: {}
      });
      r ? w.event.trigger(i, null, t) : w.event.dispatch.call(t, i), i.isDefaultPrevented() && n.preventDefault()
    }
  }, w.removeEvent = o.removeEventListener ? function(e, t, n) {
    e.removeEventListener && e.removeEventListener(t, n, !1)
  } : function(e, t, n) {
    var r = "on" + t;
    e.detachEvent && (typeof e[r] === i && (e[r] = null), e.detachEvent(r, n))
  }, w.Event = function(e, n) {
    return this instanceof w.Event ? (e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || e.returnValue === !1 || e.getPreventDefault && e.getPreventDefault() ? it : st) : this.type = e, n && w.extend(this, n), this.timeStamp = e && e.timeStamp || w.now(), this[w.expando] = !0, t) : new w.Event(e, n)
  }, w.Event.prototype = {
    isDefaultPrevented: st,
    isPropagationStopped: st,
    isImmediatePropagationStopped: st,
    preventDefault: function() {
      var e = this.originalEvent;
      this.isDefaultPrevented = it, e && (e.preventDefault ? e.preventDefault() : e.returnValue = !1)
    },
    stopPropagation: function() {
      var e = this.originalEvent;
      this.isPropagationStopped = it, e && (e.stopPropagation && e.stopPropagation(), e.cancelBubble = !0)
    },
    stopImmediatePropagation: function() {
      this.isImmediatePropagationStopped = it, this.stopPropagation()
    }
  }, w.each({
    mouseenter: "mouseover",
    mouseleave: "mouseout"
  }, function(e, t) {
    w.event.special[e] = {
      delegateType: t,
      bindType: t,
      handle: function(e) {
        var n, r = this,
          i = e.relatedTarget,
          s = e.handleObj;
        return (!i || i !== r && !w.contains(r, i)) && (e.type = s.origType, n = s.handler.apply(this, arguments), e.type = t), n
      }
    }
  }), w.support.submitBubbles || (w.event.special.submit = {
    setup: function() {
      return w.nodeName(this, "form") ? !1 : (w.event.add(this, "click._submit keypress._submit", function(e) {
        var n = e.target,
          r = w.nodeName(n, "input") || w.nodeName(n, "button") ? n.form : t;
        r && !w._data(r, "submitBubbles") && (w.event.add(r, "submit._submit", function(e) {
          e._submit_bubble = !0
        }), w._data(r, "submitBubbles", !0))
      }), t)
    },
    postDispatch: function(e) {
      e._submit_bubble && (delete e._submit_bubble, this.parentNode && !e.isTrigger && w.event.simulate("submit", this.parentNode, e, !0))
    },
    teardown: function() {
      return w.nodeName(this, "form") ? !1 : (w.event.remove(this, "._submit"), t)
    }
  }), w.support.changeBubbles || (w.event.special.change = {
    setup: function() {
      return Z.test(this.nodeName) ? (("checkbox" === this.type || "radio" === this.type) && (w.event.add(this, "propertychange._change", function(e) {
        "checked" === e.originalEvent.propertyName && (this._just_changed = !0)
      }), w.event.add(this, "click._change", function(e) {
        this._just_changed && !e.isTrigger && (this._just_changed = !1), w.event.simulate("change", this, e, !0)
      })), !1) : (w.event.add(this, "beforeactivate._change", function(e) {
        var t = e.target;
        Z.test(t.nodeName) && !w._data(t, "changeBubbles") && (w.event.add(t, "change._change", function(e) {
          !this.parentNode || e.isSimulated || e.isTrigger || w.event.simulate("change", this.parentNode, e, !0)
        }), w._data(t, "changeBubbles", !0))
      }), t)
    },
    handle: function(e) {
      var n = e.target;
      return this !== n || e.isSimulated || e.isTrigger || "radio" !== n.type && "checkbox" !== n.type ? e.handleObj.handler.apply(this, arguments) : t
    },
    teardown: function() {
      return w.event.remove(this, "._change"), !Z.test(this.nodeName)
    }
  }), w.support.focusinBubbles || w.each({
    focus: "focusin",
    blur: "focusout"
  }, function(e, t) {
    var n = 0,
      r = function(e) {
        w.event.simulate(t, e.target, w.event.fix(e), !0)
      };
    w.event.special[t] = {
      setup: function() {
        0 === n++ && o.addEventListener(e, r, !0)
      },
      teardown: function() {
        0 === --n && o.removeEventListener(e, r, !0)
      }
    }
  }), w.fn.extend({
    on: function(e, n, r, i, s) {
      var o, u;
      if ("object" == typeof e) {
        "string" != typeof n && (r = r || n, n = t);
        for (o in e) this.on(o, n, r, e[o], s);
        return this
      }
      if (null == r && null == i ? (i = n, r = n = t) : null == i && ("string" == typeof n ? (i = r, r = t) : (i = r, r = n, n = t)), i === !1) i = st;
      else if (!i) return this;
      return 1 === s && (u = i, i = function(e) {
        return w().off(e), u.apply(this, arguments)
      }, i.guid = u.guid || (u.guid = w.guid++)), this.each(function() {
        w.event.add(this, e, i, r, n)
      })
    },
    one: function(e, t, n, r) {
      return this.on(e, t, n, r, 1)
    },
    off: function(e, n, r) {
      var i, s;
      if (e && e.preventDefault && e.handleObj) return i = e.handleObj, w(e.delegateTarget).off(i.namespace ? i.origType + "." + i.namespace : i.origType, i.selector, i.handler), this;
      if ("object" == typeof e) {
        for (s in e) this.off(s, n, e[s]);
        return this
      }
      return (n === !1 || "function" == typeof n) && (r = n, n = t), r === !1 && (r = st), this.each(function() {
        w.event.remove(this, e, r, n)
      })
    },
    trigger: function(e, t) {
      return this.each(function() {
        w.event.trigger(e, t, this)
      })
    },
    triggerHandler: function(e, n) {
      var r = this[0];
      return r ? w.event.trigger(e, n, r, !0) : t
    }
  });
  var ut = /^.[^:#\[\.,]*$/,
    at = /^(?:parents|prev(?:Until|All))/,
    ft = w.expr.match.needsContext,
    lt = {
      children: !0,
      contents: !0,
      next: !0,
      prev: !0
    };
  w.fn.extend({
    find: function(e) {
      var t, n = [],
        r = this,
        i = r.length;
      if ("string" != typeof e) return this.pushStack(w(e).filter(function() {
        for (t = 0; i > t; t++)
          if (w.contains(r[t], this)) return !0
      }));
      for (t = 0; i > t; t++) w.find(e, r[t], n);
      return n = this.pushStack(i > 1 ? w.unique(n) : n), n.selector = this.selector ? this.selector + " " + e : e, n
    },
    has: function(e) {
      var t, n = w(e, this),
        r = n.length;
      return this.filter(function() {
        for (t = 0; r > t; t++)
          if (w.contains(this, n[t])) return !0
      })
    },
    not: function(e) {
      return this.pushStack(ht(this, e || [], !0))
    },
    filter: function(e) {
      return this.pushStack(ht(this, e || [], !1))
    },
    is: function(e) {
      return !!ht(this, "string" == typeof e && ft.test(e) ? w(e) : e || [], !1).length
    },
    closest: function(e, t) {
      var n, r = 0,
        i = this.length,
        s = [],
        o = ft.test(e) || "string" != typeof e ? w(e, t || this.context) : 0;
      for (; i > r; r++)
        for (n = this[r]; n && n !== t; n = n.parentNode)
          if (11 > n.nodeType && (o ? o.index(n) > -1 : 1 === n.nodeType && w.find.matchesSelector(n, e))) {
            n = s.push(n);
            break
          }
      return this.pushStack(s.length > 1 ? w.unique(s) : s)
    },
    index: function(e) {
      return e ? "string" == typeof e ? w.inArray(this[0], w(e)) : w.inArray(e.jquery ? e[0] : e, this) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
    },
    add: function(e, t) {
      var n = "string" == typeof e ? w(e, t) : w.makeArray(e && e.nodeType ? [e] : e),
        r = w.merge(this.get(), n);
      return this.pushStack(w.unique(r))
    },
    addBack: function(e) {
      return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
    }
  }), w.each({
    parent: function(e) {
      var t = e.parentNode;
      return t && 11 !== t.nodeType ? t : null
    },
    parents: function(e) {
      return w.dir(e, "parentNode")
    },
    parentsUntil: function(e, t, n) {
      return w.dir(e, "parentNode", n)
    },
    next: function(e) {
      return ct(e, "nextSibling")
    },
    prev: function(e) {
      return ct(e, "previousSibling")
    },
    nextAll: function(e) {
      return w.dir(e, "nextSibling")
    },
    prevAll: function(e) {
      return w.dir(e, "previousSibling")
    },
    nextUntil: function(e, t, n) {
      return w.dir(e, "nextSibling", n)
    },
    prevUntil: function(e, t, n) {
      return w.dir(e, "previousSibling", n)
    },
    siblings: function(e) {
      return w.sibling((e.parentNode || {}).firstChild, e)
    },
    children: function(e) {
      return w.sibling(e.firstChild)
    },
    contents: function(e) {
      return w.nodeName(e, "iframe") ? e.contentDocument || e.contentWindow.document : w.merge([], e.childNodes)
    }
  }, function(e, t) {
    w.fn[e] = function(n, r) {
      var i = w.map(this, t, n);
      return "Until" !== e.slice(-5) && (r = n), r && "string" == typeof r && (i = w.filter(r, i)), this.length > 1 && (lt[e] || (i = w.unique(i)), at.test(e) && (i = i.reverse())), this.pushStack(i)
    }
  }), w.extend({
    filter: function(e, t, n) {
      var r = t[0];
      return n && (e = ":not(" + e + ")"), 1 === t.length && 1 === r.nodeType ? w.find.matchesSelector(r, e) ? [r] : [] : w.find.matches(e, w.grep(t, function(e) {
        return 1 === e.nodeType
      }))
    },
    dir: function(e, n, r) {
      var i = [],
        s = e[n];
      while (s && 9 !== s.nodeType && (r === t || 1 !== s.nodeType || !w(s).is(r))) 1 === s.nodeType && i.push(s), s = s[n];
      return i
    },
    sibling: function(e, t) {
      var n = [];
      for (; e; e = e.nextSibling) 1 === e.nodeType && e !== t && n.push(e);
      return n
    }
  });
  var dt = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",
    vt = / jQuery\d+="(?:null|\d+)"/g,
    mt = RegExp("<(?:" + dt + ")[\\s/>]", "i"),
    gt = /^\s+/,
    yt = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
    bt = /<([\w:]+)/,
    wt = /<tbody/i,
    Et = /<|&#?\w+;/,
    St = /<(?:script|style|link)/i,
    xt = /^(?:checkbox|radio)$/i,
    Tt = /checked\s*(?:[^=]|=\s*.checked.)/i,
    Nt = /^$|\/(?:java|ecma)script/i,
    Ct = /^true\/(.*)/,
    kt = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
    Lt = {
      option: [1, "<select multiple='multiple'>", "</select>"],
      legend: [1, "<fieldset>", "</fieldset>"],
      area: [1, "<map>", "</map>"],
      param: [1, "<object>", "</object>"],
      thead: [1, "<table>", "</table>"],
      tr: [2, "<table><tbody>", "</tbody></table>"],
      col: [2, "<table><tbody></tbody><colgroup>", "</colgroup></table>"],
      td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
      _default: w.support.htmlSerialize ? [0, "", ""] : [1, "X<div>", "</div>"]
    },
    At = pt(o),
    Ot = At.appendChild(o.createElement("div"));
  Lt.optgroup = Lt.option, Lt.tbody = Lt.tfoot = Lt.colgroup = Lt.caption = Lt.thead, Lt.th = Lt.td, w.fn.extend({
    text: function(e) {
      return w.access(this, function(e) {
        return e === t ? w.text(this) : this.empty().append((this[0] && this[0].ownerDocument || o).createTextNode(e))
      }, null, e, arguments.length)
    },
    append: function() {
      return this.domManip(arguments, function(e) {
        if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
          var t = Mt(this, e);
          t.appendChild(e)
        }
      })
    },
    prepend: function() {
      return this.domManip(arguments, function(e) {
        if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
          var t = Mt(this, e);
          t.insertBefore(e, t.firstChild)
        }
      })
    },
    before: function() {
      return this.domManip(arguments, function(e) {
        this.parentNode && this.parentNode.insertBefore(e, this)
      })
    },
    after: function() {
      return this.domManip(arguments, function(e) {
        this.parentNode && this.parentNode.insertBefore(e, this.nextSibling)
      })
    },
    remove: function(e, t) {
      var n, r = e ? w.filter(e, this) : this,
        i = 0;
      for (; null != (n = r[i]); i++) t || 1 !== n.nodeType || w.cleanData(jt(n)), n.parentNode && (t && w.contains(n.ownerDocument, n) && Pt(jt(n, "script")), n.parentNode.removeChild(n));
      return this
    },
    empty: function() {
      var e, t = 0;
      for (; null != (e = this[t]); t++) {
        1 === e.nodeType && w.cleanData(jt(e, !1));
        while (e.firstChild) e.removeChild(e.firstChild);
        e.options && w.nodeName(e, "select") && (e.options.length = 0)
      }
      return this
    },
    clone: function(e, t) {
      return e = null == e ? !1 : e, t = null == t ? e : t, this.map(function() {
        return w.clone(this, e, t)
      })
    },
    html: function(e) {
      return w.access(this, function(e) {
        var n = this[0] || {},
          r = 0,
          i = this.length;
        if (e === t) return 1 === n.nodeType ? n.innerHTML.replace(vt, "") : t;
        if (!("string" != typeof e || St.test(e) || !w.support.htmlSerialize && mt.test(e) || !w.support.leadingWhitespace && gt.test(e) || Lt[(bt.exec(e) || ["", ""])[1].toLowerCase()])) {
          e = e.replace(yt, "<$1></$2>");
          try {
            for (; i > r; r++) n = this[r] || {}, 1 === n.nodeType && (w.cleanData(jt(n, !1)), n.innerHTML = e);
            n = 0
          } catch (s) {}
        }
        n && this.empty().append(e)
      }, null, e, arguments.length)
    },
    replaceWith: function() {
      var e = w.map(this, function(e) {
          return [e.nextSibling, e.parentNode]
        }),
        t = 0;
      return this.domManip(arguments, function(n) {
        var r = e[t++],
          i = e[t++];
        i && (r && r.parentNode !== i && (r = this.nextSibling), w(this).remove(), i.insertBefore(n, r))
      }, !0), t ? this : this.remove()
    },
    detach: function(e) {
      return this.remove(e, !0)
    },
    domManip: function(e, t, n) {
      e = p.apply([], e);
      var r, i, s, o, u, a, f = 0,
        l = this.length,
        c = this,
        h = l - 1,
        d = e[0],
        v = w.isFunction(d);
      if (v || !(1 >= l || "string" != typeof d || w.support.checkClone) && Tt.test(d)) return this.each(function(r) {
        var i = c.eq(r);
        v && (e[0] = d.call(this, r, i.html())), i.domManip(e, t, n)
      });
      if (l && (a = w.buildFragment(e, this[0].ownerDocument, !1, !n && this), r = a.firstChild, 1 === a.childNodes.length && (a = r), r)) {
        for (o = w.map(jt(a, "script"), _t), s = o.length; l > f; f++) i = a, f !== h && (i = w.clone(i, !0, !0), s && w.merge(o, jt(i, "script"))), t.call(this[f], i, f);
        if (s)
          for (u = o[o.length - 1].ownerDocument, w.map(o, Dt), f = 0; s > f; f++) i = o[f], Nt.test(i.type || "") && !w._data(i, "globalEval") && w.contains(u, i) && (i.src ? w._evalUrl(i.src) : w.globalEval((i.text || i.textContent || i.innerHTML || "").replace(kt, "")));
        a = r = null
      }
      return this
    }
  }), w.each({
    appendTo: "append",
    prependTo: "prepend",
    insertBefore: "before",
    insertAfter: "after",
    replaceAll: "replaceWith"
  }, function(e, t) {
    w.fn[e] = function(e) {
      var n, r = 0,
        i = [],
        s = w(e),
        o = s.length - 1;
      for (; o >= r; r++) n = r === o ? this : this.clone(!0), w(s[r])[t](n), d.apply(i, n.get());
      return this.pushStack(i)
    }
  }), w.extend({
    clone: function(e, t, n) {
      var r, i, s, o, u, a = w.contains(e.ownerDocument, e);
      if (w.support.html5Clone || w.isXMLDoc(e) || !mt.test("<" + e.nodeName + ">") ? s = e.cloneNode(!0) : (Ot.innerHTML = e.outerHTML, Ot.removeChild(s = Ot.firstChild)), !(w.support.noCloneEvent && w.support.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || w.isXMLDoc(e)))
        for (r = jt(s), u = jt(e), o = 0; null != (i = u[o]); ++o) r[o] && Bt(i, r[o]);
      if (t)
        if (n)
          for (u = u || jt(e), r = r || jt(s), o = 0; null != (i = u[o]); o++) Ht(i, r[o]);
        else Ht(e, s);
      return r = jt(s, "script"), r.length > 0 && Pt(r, !a && jt(e, "script")), r = u = i = null, s
    },
    buildFragment: function(e, t, n, r) {
      var i, s, o, u, a, f, l, c = e.length,
        h = pt(t),
        p = [],
        d = 0;
      for (; c > d; d++)
        if (s = e[d], s || 0 === s)
          if ("object" === w.type(s)) w.merge(p, s.nodeType ? [s] : s);
          else if (Et.test(s)) {
        u = u || h.appendChild(t.createElement("div")), a = (bt.exec(s) || ["", ""])[1].toLowerCase(), l = Lt[a] || Lt._default, u.innerHTML = l[1] + s.replace(yt, "<$1></$2>") + l[2], i = l[0];
        while (i--) u = u.lastChild;
        if (!w.support.leadingWhitespace && gt.test(s) && p.push(t.createTextNode(gt.exec(s)[0])), !w.support.tbody) {
          s = "table" !== a || wt.test(s) ? "<table>" !== l[1] || wt.test(s) ? 0 : u : u.firstChild, i = s && s.childNodes.length;
          while (i--) w.nodeName(f = s.childNodes[i], "tbody") && !f.childNodes.length && s.removeChild(f)
        }
        w.merge(p, u.childNodes), u.textContent = "";
        while (u.firstChild) u.removeChild(u.firstChild);
        u = h.lastChild
      } else p.push(t.createTextNode(s));
      u && h.removeChild(u), w.support.appendChecked || w.grep(jt(p, "input"), Ft), d = 0;
      while (s = p[d++])
        if ((!r || -1 === w.inArray(s, r)) && (o = w.contains(s.ownerDocument, s), u = jt(h.appendChild(s), "script"), o && Pt(u), n)) {
          i = 0;
          while (s = u[i++]) Nt.test(s.type || "") && n.push(s)
        }
      return u = null, h
    },
    cleanData: function(e, t) {
      var n, r, s, o, u = 0,
        a = w.expando,
        f = w.cache,
        l = w.support.deleteExpando,
        h = w.event.special;
      for (; null != (n = e[u]); u++)
        if ((t || w.acceptData(n)) && (s = n[a], o = s && f[s])) {
          if (o.events)
            for (r in o.events) h[r] ? w.event.remove(n, r) : w.removeEvent(n, r, o.handle);
          f[s] && (delete f[s], l ? delete n[a] : typeof n.removeAttribute !== i ? n.removeAttribute(a) : n[a] = null, c.push(s))
        }
    },
    _evalUrl: function(e) {
      return w.ajax({
        url: e,
        type: "GET",
        dataType: "script",
        async: !1,
        global: !1,
        "throws": !0
      })
    }
  }), w.fn.extend({
    wrapAll: function(e) {
      if (w.isFunction(e)) return this.each(function(t) {
        w(this).wrapAll(e.call(this, t))
      });
      if (this[0]) {
        var t = w(e, this[0].ownerDocument).eq(0).clone(!0);
        this[0].parentNode && t.insertBefore(this[0]), t.map(function() {
          var e = this;
          while (e.firstChild && 1 === e.firstChild.nodeType) e = e.firstChild;
          return e
        }).append(this)
      }
      return this
    },
    wrapInner: function(e) {
      return w.isFunction(e) ? this.each(function(t) {
        w(this).wrapInner(e.call(this, t))
      }) : this.each(function() {
        var t = w(this),
          n = t.contents();
        n.length ? n.wrapAll(e) : t.append(e)
      })
    },
    wrap: function(e) {
      var t = w.isFunction(e);
      return this.each(function(n) {
        w(this).wrapAll(t ? e.call(this, n) : e)
      })
    },
    unwrap: function() {
      return this.parent().each(function() {
        w.nodeName(this, "body") || w(this).replaceWith(this.childNodes)
      }).end()
    }
  });
  var It, qt, Rt, Ut = /alpha\([^)]*\)/i,
    zt = /opacity\s*=\s*([^)]*)/,
    Wt = /^(top|right|bottom|left)$/,
    Xt = /^(none|table(?!-c[ea]).+)/,
    Vt = /^margin/,
    $t = RegExp("^(" + E + ")(.*)$", "i"),
    Jt = RegExp("^(" + E + ")(?!px)[a-z%]+$", "i"),
    Kt = RegExp("^([+-])=(" + E + ")", "i"),
    Qt = {
      BODY: "block"
    },
    Gt = {
      position: "absolute",
      visibility: "hidden",
      display: "block"
    },
    Yt = {
      letterSpacing: 0,
      fontWeight: 400
    },
    Zt = ["Top", "Right", "Bottom", "Left"],
    en = ["Webkit", "O", "Moz", "ms"];
  w.fn.extend({
    css: function(e, n) {
      return w.access(this, function(e, n, r) {
        var i, s, o = {},
          u = 0;
        if (w.isArray(n)) {
          for (s = qt(e), i = n.length; i > u; u++) o[n[u]] = w.css(e, n[u], !1, s);
          return o
        }
        return r !== t ? w.style(e, n, r) : w.css(e, n)
      }, e, n, arguments.length > 1)
    },
    show: function() {
      return rn(this, !0)
    },
    hide: function() {
      return rn(this)
    },
    toggle: function(e) {
      return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each(function() {
        nn(this) ? w(this).show() : w(this).hide()
      })
    }
  }), w.extend({
    cssHooks: {
      opacity: {
        get: function(e, t) {
          if (t) {
            var n = Rt(e, "opacity");
            return "" === n ? "1" : n
          }
        }
      }
    },
    cssNumber: {
      columnCount: !0,
      fillOpacity: !0,
      fontWeight: !0,
      lineHeight: !0,
      opacity: !0,
      order: !0,
      orphans: !0,
      widows: !0,
      zIndex: !0,
      zoom: !0
    },
    cssProps: {
      "float": w.support.cssFloat ? "cssFloat" : "styleFloat"
    },
    style: function(e, n, r, i) {
      if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
        var s, o, u, a = w.camelCase(n),
          f = e.style;
        if (n = w.cssProps[a] || (w.cssProps[a] = tn(f, a)), u = w.cssHooks[n] || w.cssHooks[a], r === t) return u && "get" in u && (s = u.get(e, !1, i)) !== t ? s : f[n];
        if (o = typeof r, "string" === o && (s = Kt.exec(r)) && (r = (s[1] + 1) * s[2] + parseFloat(w.css(e, n)), o = "number"), !(null == r || "number" === o && isNaN(r) || ("number" !== o || w.cssNumber[a] || (r += "px"), w.support.clearCloneStyle || "" !== r || 0 !== n.indexOf("background") || (f[n] = "inherit"), u && "set" in u && (r = u.set(e, r, i)) === t))) try {
          f[n] = r
        } catch (l) {}
      }
    },
    css: function(e, n, r, i) {
      var s, o, u, a = w.camelCase(n);
      return n = w.cssProps[a] || (w.cssProps[a] = tn(e.style, a)), u = w.cssHooks[n] || w.cssHooks[a], u && "get" in u && (o = u.get(e, !0, r)), o === t && (o = Rt(e, n, i)), "normal" === o && n in Yt && (o = Yt[n]), "" === r || r ? (s = parseFloat(o), r === !0 || w.isNumeric(s) ? s || 0 : o) : o
    }
  }), e.getComputedStyle ? (qt = function(t) {
    return e.getComputedStyle(t, null)
  }, Rt = function(e, n, r) {
    var i, s, o, u = r || qt(e),
      a = u ? u.getPropertyValue(n) || u[n] : t,
      f = e.style;
    return u && ("" !== a || w.contains(e.ownerDocument, e) || (a = w.style(e, n)), Jt.test(a) && Vt.test(n) && (i = f.width, s = f.minWidth, o = f.maxWidth, f.minWidth = f.maxWidth = f.width = a, a = u.width, f.width = i, f.minWidth = s, f.maxWidth = o)), a
  }) : o.documentElement.currentStyle && (qt = function(e) {
    return e.currentStyle
  }, Rt = function(e, n, r) {
    var i, s, o, u = r || qt(e),
      a = u ? u[n] : t,
      f = e.style;
    return null == a && f && f[n] && (a = f[n]), Jt.test(a) && !Wt.test(n) && (i = f.left, s = e.runtimeStyle, o = s && s.left, o && (s.left = e.currentStyle.left), f.left = "fontSize" === n ? "1em" : a, a = f.pixelLeft + "px", f.left = i, o && (s.left = o)), "" === a ? "auto" : a
  }), w.each(["height", "width"], function(e, n) {
    w.cssHooks[n] = {
      get: function(e, r, i) {
        return r ? 0 === e.offsetWidth && Xt.test(w.css(e, "display")) ? w.swap(e, Gt, function() {
          return un(e, n, i)
        }) : un(e, n, i) : t
      },
      set: function(e, t, r) {
        var i = r && qt(e);
        return sn(e, t, r ? on(e, n, r, w.support.boxSizing && "border-box" === w.css(e, "boxSizing", !1, i), i) : 0)
      }
    }
  }), w.support.opacity || (w.cssHooks.opacity = {
    get: function(e, t) {
      return zt.test((t && e.currentStyle ? e.currentStyle.filter : e.style.filter) || "") ? .01 * parseFloat(RegExp.$1) + "" : t ? "1" : ""
    },
    set: function(e, t) {
      var n = e.style,
        r = e.currentStyle,
        i = w.isNumeric(t) ? "alpha(opacity=" + 100 * t + ")" : "",
        s = r && r.filter || n.filter || "";
      n.zoom = 1, (t >= 1 || "" === t) && "" === w.trim(s.replace(Ut, "")) && n.removeAttribute && (n.removeAttribute("filter"), "" === t || r && !r.filter) || (n.filter = Ut.test(s) ? s.replace(Ut, i) : s + " " + i)
    }
  }), w(function() {
    w.support.reliableMarginRight || (w.cssHooks.marginRight = {
      get: function(e, n) {
        return n ? w.swap(e, {
          display: "inline-block"
        }, Rt, [e, "marginRight"]) : t
      }
    }), !w.support.pixelPosition && w.fn.position && w.each(["top", "left"], function(e, n) {
      w.cssHooks[n] = {
        get: function(e, r) {
          return r ? (r = Rt(e, n), Jt.test(r) ? w(e).position()[n] + "px" : r) : t
        }
      }
    })
  }), w.expr && w.expr.filters && (w.expr.filters.hidden = function(e) {
    return 0 >= e.offsetWidth && 0 >= e.offsetHeight || !w.support.reliableHiddenOffsets && "none" === (e.style && e.style.display || w.css(e, "display"))
  }, w.expr.filters.visible = function(e) {
    return !w.expr.filters.hidden(e)
  }), w.each({
    margin: "",
    padding: "",
    border: "Width"
  }, function(e, t) {
    w.cssHooks[e + t] = {
      expand: function(n) {
        var r = 0,
          i = {},
          s = "string" == typeof n ? n.split(" ") : [n];
        for (; 4 > r; r++) i[e + Zt[r] + t] = s[r] || s[r - 2] || s[0];
        return i
      }
    }, Vt.test(e) || (w.cssHooks[e + t].set = sn)
  });
  var ln = /%20/g,
    cn = /\[\]$/,
    hn = /\r?\n/g,
    pn = /^(?:submit|button|image|reset|file)$/i,
    dn = /^(?:input|select|textarea|keygen)/i;
  w.fn.extend({
    serialize: function() {
      return w.param(this.serializeArray())
    },
    serializeArray: function() {
      return this.map(function() {
        var e = w.prop(this, "elements");
        return e ? w.makeArray(e) : this
      }).filter(function() {
        var e = this.type;
        return this.name && !w(this).is(":disabled") && dn.test(this.nodeName) && !pn.test(e) && (this.checked || !xt.test(e))
      }).map(function(e, t) {
        var n = w(this).val();
        return null == n ? null : w.isArray(n) ? w.map(n, function(e) {
          return {
            name: t.name,
            value: e.replace(hn, "\r\n")
          }
        }) : {
          name: t.name,
          value: n.replace(hn, "\r\n")
        }
      }).get()
    }
  }), w.param = function(e, n) {
    var r, i = [],
      s = function(e, t) {
        t = w.isFunction(t) ? t() : null == t ? "" : t, i[i.length] = encodeURIComponent(e) + "=" + encodeURIComponent(t)
      };
    if (n === t && (n = w.ajaxSettings && w.ajaxSettings.traditional), w.isArray(e) || e.jquery && !w.isPlainObject(e)) w.each(e, function() {
      s(this.name, this.value)
    });
    else
      for (r in e) vn(r, e[r], n, s);
    return i.join("&").replace(ln, "+")
  }, w.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(e, t) {
    w.fn[t] = function(e, n) {
      return arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t)
    }
  }), w.fn.extend({
    hover: function(e, t) {
      return this.mouseenter(e).mouseleave(t || e)
    },
    bind: function(e, t, n) {
      return this.on(e, null, t, n)
    },
    unbind: function(e, t) {
      return this.off(e, null, t)
    },
    delegate: function(e, t, n, r) {
      return this.on(t, e, n, r)
    },
    undelegate: function(e, t, n) {
      return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", n)
    }
  });
  var mn, gn, yn = w.now(),
    bn = /\?/,
    wn = /#.*$/,
    En = /([?&])_=[^&]*/,
    Sn = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm,
    xn = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
    Tn = /^(?:GET|HEAD)$/,
    Nn = /^\/\//,
    Cn = /^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,
    kn = w.fn.load,
    Ln = {},
    An = {},
    On = "*/".concat("*");
  try {
    gn = s.href
  } catch (Mn) {
    gn = o.createElement("a"), gn.href = "", gn = gn.href
  }
  mn = Cn.exec(gn.toLowerCase()) || [], w.fn.load = function(e, n, r) {
    if ("string" != typeof e && kn) return kn.apply(this, arguments);
    var i, s, o, u = this,
      a = e.indexOf(" ");
    return a >= 0 && (i = e.slice(a, e.length), e = e.slice(0, a)), w.isFunction(n) ? (r = n, n = t) : n && "object" == typeof n && (o = "POST"), u.length > 0 && w.ajax({
      url: e,
      type: o,
      dataType: "html",
      data: n
    }).done(function(e) {
      s = arguments, u.html(i ? w("<div>").append(w.parseHTML(e)).find(i) : e)
    }).complete(r && function(e, t) {
      u.each(r, s || [e.responseText, t, e])
    }), this
  }, w.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function(e, t) {
    w.fn[t] = function(e) {
      return this.on(t, e)
    }
  }), w.extend({
    active: 0,
    lastModified: {},
    etag: {},
    ajaxSettings: {
      url: gn,
      type: "GET",
      isLocal: xn.test(mn[1]),
      global: !0,
      processData: !0,
      async: !0,
      contentType: "application/x-www-form-urlencoded; charset=UTF-8",
      accepts: {
        "*": On,
        text: "text/plain",
        html: "text/html",
        xml: "application/xml, text/xml",
        json: "application/json, text/javascript"
      },
      contents: {
        xml: /xml/,
        html: /html/,
        json: /json/
      },
      responseFields: {
        xml: "responseXML",
        text: "responseText",
        json: "responseJSON"
      },
      converters: {
        "* text": String,
        "text html": !0,
        "text json": w.parseJSON,
        "text xml": w.parseXML
      },
      flatOptions: {
        url: !0,
        context: !0
      }
    },
    ajaxSetup: function(e, t) {
      return t ? Pn(Pn(e, w.ajaxSettings), t) : Pn(w.ajaxSettings, e)
    },
    ajaxPrefilter: _n(Ln),
    ajaxTransport: _n(An),
    ajax: function(e, n) {
      function N(e, n, r, i) {
        var l, g, y, E, S, T = n;
        2 !== b && (b = 2, u && clearTimeout(u), f = t, o = i || "", x.readyState = e > 0 ? 4 : 0, l = e >= 200 && 300 > e || 304 === e, r && (E = Hn(c, x, r)), E = Bn(c, E, x, l), l ? (c.ifModified && (S = x.getResponseHeader("Last-Modified"), S && (w.lastModified[s] = S), S = x.getResponseHeader("etag"), S && (w.etag[s] = S)), 204 === e || "HEAD" === c.type ? T = "nocontent" : 304 === e ? T = "notmodified" : (T = E.state, g = E.data, y = E.error, l = !y)) : (y = T, (e || !T) && (T = "error", 0 > e && (e = 0))), x.status = e, x.statusText = (n || T) + "", l ? d.resolveWith(h, [g, T, x]) : d.rejectWith(h, [x, T, y]), x.statusCode(m), m = t, a && p.trigger(l ? "ajaxSuccess" : "ajaxError", [x, c, l ? g : y]), v.fireWith(h, [x, T]), a && (p.trigger("ajaxComplete", [x, c]), --w.active || w.event.trigger("ajaxStop")))
      }
      "object" == typeof e && (n = e, e = t), n = n || {};
      var r, i, s, o, u, a, f, l, c = w.ajaxSetup({}, n),
        h = c.context || c,
        p = c.context && (h.nodeType || h.jquery) ? w(h) : w.event,
        d = w.Deferred(),
        v = w.Callbacks("once memory"),
        m = c.statusCode || {},
        g = {},
        y = {},
        b = 0,
        E = "canceled",
        x = {
          readyState: 0,
          getResponseHeader: function(e) {
            var t;
            if (2 === b) {
              if (!l) {
                l = {};
                while (t = Sn.exec(o)) l[t[1].toLowerCase()] = t[2]
              }
              t = l[e.toLowerCase()]
            }
            return null == t ? null : t
          },
          getAllResponseHeaders: function() {
            return 2 === b ? o : null
          },
          setRequestHeader: function(e, t) {
            var n = e.toLowerCase();
            return b || (e = y[n] = y[n] || e, g[e] = t), this
          },
          overrideMimeType: function(e) {
            return b || (c.mimeType = e), this
          },
          statusCode: function(e) {
            var t;
            if (e)
              if (2 > b)
                for (t in e) m[t] = [m[t], e[t]];
              else x.always(e[x.status]);
            return this
          },
          abort: function(e) {
            var t = e || E;
            return f && f.abort(t), N(0, t), this
          }
        };
      if (d.promise(x).complete = v.add, x.success = x.done, x.error = x.fail, c.url = ((e || c.url || gn) + "").replace(wn, "").replace(Nn, mn[1] + "//"), c.type = n.method || n.type || c.method || c.type, c.dataTypes = w.trim(c.dataType || "*").toLowerCase().match(S) || [""], null == c.crossDomain && (r = Cn.exec(c.url.toLowerCase()), c.crossDomain = !(!r || r[1] === mn[1] && r[2] === mn[2] && (r[3] || ("http:" === r[1] ? "80" : "443")) === (mn[3] || ("http:" === mn[1] ? "80" : "443")))), c.data && c.processData && "string" != typeof c.data && (c.data = w.param(c.data, c.traditional)), Dn(Ln, c, n, x), 2 === b) return x;
      a = c.global, a && 0 === w.active++ && w.event.trigger("ajaxStart"), c.type = c.type.toUpperCase(), c.hasContent = !Tn.test(c.type), s = c.url, c.hasContent || (c.data && (s = c.url += (bn.test(s) ? "&" : "?") + c.data, delete c.data), c.cache === !1 && (c.url = En.test(s) ? s.replace(En, "$1_=" + yn++) : s + (bn.test(s) ? "&" : "?") + "_=" + yn++)), c.ifModified && (w.lastModified[s] && x.setRequestHeader("If-Modified-Since", w.lastModified[s]), w.etag[s] && x.setRequestHeader("If-None-Match", w.etag[s])), (c.data && c.hasContent && c.contentType !== !1 || n.contentType) && x.setRequestHeader("Content-Type", c.contentType), x.setRequestHeader("Accept", c.dataTypes[0] && c.accepts[c.dataTypes[0]] ? c.accepts[c.dataTypes[0]] + ("*" !== c.dataTypes[0] ? ", " + On + "; q=0.01" : "") : c.accepts["*"]);
      for (i in c.headers) x.setRequestHeader(i, c.headers[i]);
      if (!c.beforeSend || c.beforeSend.call(h, x, c) !== !1 && 2 !== b) {
        E = "abort";
        for (i in {
            success: 1,
            error: 1,
            complete: 1
          }) x[i](c[i]);
        if (f = Dn(An, c, n, x)) {
          x.readyState = 1, a && p.trigger("ajaxSend", [x, c]), c.async && c.timeout > 0 && (u = setTimeout(function() {
            x.abort("timeout")
          }, c.timeout));
          try {
            b = 1, f.send(g, N)
          } catch (T) {
            if (!(2 > b)) throw T;
            N(-1, T)
          }
        } else N(-1, "No Transport");
        return x
      }
      return x.abort()
    },
    getJSON: function(e, t, n) {
      return w.get(e, t, n, "json")
    },
    getScript: function(e, n) {
      return w.get(e, t, n, "script")
    }
  }), w.each(["get", "post"], function(e, n) {
    w[n] = function(e, r, i, s) {
      return w.isFunction(r) && (s = s || i, i = r, r = t), w.ajax({
        url: e,
        type: n,
        dataType: s,
        data: r,
        success: i
      })
    }
  }), w.ajaxSetup({
    accepts: {
      script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
    },
    contents: {
      script: /(?:java|ecma)script/
    },
    converters: {
      "text script": function(e) {
        return w.globalEval(e), e
      }
    }
  }), w.ajaxPrefilter("script", function(e) {
    e.cache === t && (e.cache = !1), e.crossDomain && (e.type = "GET", e.global = !1)
  }), w.ajaxTransport("script", function(e) {
    if (e.crossDomain) {
      var n, r = o.head || w("head")[0] || o.documentElement;
      return {
        send: function(t, i) {
          n = o.createElement("script"), n.async = !0, e.scriptCharset && (n.charset = e.scriptCharset), n.src = e.url, n.onload = n.onreadystatechange = function(e, t) {
            (t || !n.readyState || /loaded|complete/.test(n.readyState)) && (n.onload = n.onreadystatechange = null, n.parentNode && n.parentNode.removeChild(n), n = null, t || i(200, "success"))
          }, r.insertBefore(n, r.firstChild)
        },
        abort: function() {
          n && n.onload(t, !0)
        }
      }
    }
  });
  var jn = [],
    Fn = /(=)\?(?=&|$)|\?\?/;
  w.ajaxSetup({
    jsonp: "callback",
    jsonpCallback: function() {
      var e = jn.pop() || w.expando + "_" + yn++;
      return this[e] = !0, e
    }
  }), w.ajaxPrefilter("json jsonp", function(n, r, i) {
    var s, o, u, a = n.jsonp !== !1 && (Fn.test(n.url) ? "url" : "string" == typeof n.data && !(n.contentType || "").indexOf("application/x-www-form-urlencoded") && Fn.test(n.data) && "data");
    return a || "jsonp" === n.dataTypes[0] ? (s = n.jsonpCallback = w.isFunction(n.jsonpCallback) ? n.jsonpCallback() : n.jsonpCallback, a ? n[a] = n[a].replace(Fn, "$1" + s) : n.jsonp !== !1 && (n.url += (bn.test(n.url) ? "&" : "?") + n.jsonp + "=" + s), n.converters["script json"] = function() {
      return u || w.error(s + " was not called"), u[0]
    }, n.dataTypes[0] = "json", o = e[s], e[s] = function() {
      u = arguments
    }, i.always(function() {
      e[s] = o, n[s] && (n.jsonpCallback = r.jsonpCallback, jn.push(s)), u && w.isFunction(o) && o(u[0]), u = o = t
    }), "script") : t
  });
  var In, qn, Rn = 0,
    Un = e.ActiveXObject && function() {
      var e;
      for (e in In) In[e](t, !0)
    };
  w.ajaxSettings.xhr = e.ActiveXObject ? function() {
    return !this.isLocal && zn() || Wn()
  } : zn, qn = w.ajaxSettings.xhr(), w.support.cors = !!qn && "withCredentials" in qn, qn = w.support.ajax = !!qn, qn && w.ajaxTransport(function(n) {
    if (!n.crossDomain || w.support.cors) {
      var r;
      return {
        send: function(i, s) {
          var o, u, a = n.xhr();
          if (n.username ? a.open(n.type, n.url, n.async, n.username, n.password) : a.open(n.type, n.url, n.async), n.xhrFields)
            for (u in n.xhrFields) a[u] = n.xhrFields[u];
          n.mimeType && a.overrideMimeType && a.overrideMimeType(n.mimeType), n.crossDomain || i["X-Requested-With"] || (i["X-Requested-With"] = "XMLHttpRequest");
          try {
            for (u in i) a.setRequestHeader(u, i[u])
          } catch (f) {}
          a.send(n.hasContent && n.data || null), r = function(e, i) {
            var u, f, l, c;
            try {
              if (r && (i || 4 === a.readyState))
                if (r = t, o && (a.onreadystatechange = w.noop, Un && delete In[o]), i) 4 !== a.readyState && a.abort();
                else {
                  c = {}, u = a.status, f = a.getAllResponseHeaders(), "string" == typeof a.responseText && (c.text = a.responseText);
                  try {
                    l = a.statusText
                  } catch (h) {
                    l = ""
                  }
                  u || !n.isLocal || n.crossDomain ? 1223 === u && (u = 204) : u = c.text ? 200 : 404
                }
            } catch (p) {
              i || s(-1, p)
            }
            c && s(u, l, c, f)
          }, n.async ? 4 === a.readyState ? setTimeout(r) : (o = ++Rn, Un && (In || (In = {}, w(e).unload(Un)), In[o] = r), a.onreadystatechange = r) : r()
        },
        abort: function() {
          r && r(t, !0)
        }
      }
    }
  });
  var Xn, Vn, $n = /^(?:toggle|show|hide)$/,
    Jn = RegExp("^(?:([+-])=|)(" + E + ")([a-z%]*)$", "i"),
    Kn = /queueHooks$/,
    Qn = [nr],
    Gn = {
      "*": [function(e, t) {
        var n = this.createTween(e, t),
          r = n.cur(),
          i = Jn.exec(t),
          s = i && i[3] || (w.cssNumber[e] ? "" : "px"),
          o = (w.cssNumber[e] || "px" !== s && +r) && Jn.exec(w.css(n.elem, e)),
          u = 1,
          a = 20;
        if (o && o[3] !== s) {
          s = s || o[3], i = i || [], o = +r || 1;
          do u = u || ".5", o /= u, w.style(n.elem, e, o + s); while (u !== (u = n.cur() / r) && 1 !== u && --a)
        }
        return i && (o = n.start = +o || +r || 0, n.unit = s, n.end = i[1] ? o + (i[1] + 1) * i[2] : +i[2]), n
      }]
    };
  w.Animation = w.extend(er, {
    tweener: function(e, t) {
      w.isFunction(e) ? (t = e, e = ["*"]) : e = e.split(" ");
      var n, r = 0,
        i = e.length;
      for (; i > r; r++) n = e[r], Gn[n] = Gn[n] || [], Gn[n].unshift(t)
    },
    prefilter: function(e, t) {
      t ? Qn.unshift(e) : Qn.push(e)
    }
  }), w.Tween = rr, rr.prototype = {
    constructor: rr,
    init: function(e, t, n, r, i, s) {
      this.elem = e, this.prop = n, this.easing = i || "swing", this.options = t, this.start = this.now = this.cur(), this.end = r, this.unit = s || (w.cssNumber[n] ? "" : "px")
    },
    cur: function() {
      var e = rr.propHooks[this.prop];
      return e && e.get ? e.get(this) : rr.propHooks._default.get(this)
    },
    run: function(e) {
      var t, n = rr.propHooks[this.prop];
      return this.pos = t = this.options.duration ? w.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : e, this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), n && n.set ? n.set(this) : rr.propHooks._default.set(this), this
    }
  }, rr.prototype.init.prototype = rr.prototype, rr.propHooks = {
    _default: {
      get: function(e) {
        var t;
        return null == e.elem[e.prop] || e.elem.style && null != e.elem.style[e.prop] ? (t = w.css(e.elem, e.prop, ""), t && "auto" !== t ? t : 0) : e.elem[e.prop]
      },
      set: function(e) {
        w.fx.step[e.prop] ? w.fx.step[e.prop](e) : e.elem.style && (null != e.elem.style[w.cssProps[e.prop]] || w.cssHooks[e.prop]) ? w.style(e.elem, e.prop, e.now + e.unit) : e.elem[e.prop] = e.now
      }
    }
  }, rr.propHooks.scrollTop = rr.propHooks.scrollLeft = {
    set: function(e) {
      e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now)
    }
  }, w.each(["toggle", "show", "hide"], function(e, t) {
    var n = w.fn[t];
    w.fn[t] = function(e, r, i) {
      return null == e || "boolean" == typeof e ? n.apply(this, arguments) : this.animate(ir(t, !0), e, r, i)
    }
  }), w.fn.extend({
    fadeTo: function(e, t, n, r) {
      return this.filter(nn).css("opacity", 0).show().end().animate({
        opacity: t
      }, e, n, r)
    },
    animate: function(e, t, n, r) {
      var i = w.isEmptyObject(e),
        s = w.speed(t, n, r),
        o = function() {
          var t = er(this, w.extend({}, e), s);
          (i || w._data(this, "finish")) && t.stop(!0)
        };
      return o.finish = o, i || s.queue === !1 ? this.each(o) : this.queue(s.queue, o)
    },
    stop: function(e, n, r) {
      var i = function(e) {
        var t = e.stop;
        delete e.stop, t(r)
      };
      return "string" != typeof e && (r = n, n = e, e = t), n && e !== !1 && this.queue(e || "fx", []), this.each(function() {
        var t = !0,
          n = null != e && e + "queueHooks",
          s = w.timers,
          o = w._data(this);
        if (n) o[n] && o[n].stop && i(o[n]);
        else
          for (n in o) o[n] && o[n].stop && Kn.test(n) && i(o[n]);
        for (n = s.length; n--;) s[n].elem !== this || null != e && s[n].queue !== e || (s[n].anim.stop(r), t = !1, s.splice(n, 1));
        (t || !r) && w.dequeue(this, e)
      })
    },
    finish: function(e) {
      return e !== !1 && (e = e || "fx"), this.each(function() {
        var t, n = w._data(this),
          r = n[e + "queue"],
          i = n[e + "queueHooks"],
          s = w.timers,
          o = r ? r.length : 0;
        for (n.finish = !0, w.queue(this, e, []), i && i.stop && i.stop.call(this, !0), t = s.length; t--;) s[t].elem === this && s[t].queue === e && (s[t].anim.stop(!0), s.splice(t, 1));
        for (t = 0; o > t; t++) r[t] && r[t].finish && r[t].finish.call(this);
        delete n.finish
      })
    }
  }), w.each({
    slideDown: ir("show"),
    slideUp: ir("hide"),
    slideToggle: ir("toggle"),
    fadeIn: {
      opacity: "show"
    },
    fadeOut: {
      opacity: "hide"
    },
    fadeToggle: {
      opacity: "toggle"
    }
  }, function(e, t) {
    w.fn[e] = function(e, n, r) {
      return this.animate(t, e, n, r)
    }
  }), w.speed = function(e, t, n) {
    var r = e && "object" == typeof e ? w.extend({}, e) : {
      complete: n || !n && t || w.isFunction(e) && e,
      duration: e,
      easing: n && t || t && !w.isFunction(t) && t
    };
    return r.duration = w.fx.off ? 0 : "number" == typeof r.duration ? r.duration : r.duration in w.fx.speeds ? w.fx.speeds[r.duration] : w.fx.speeds._default, (null == r.queue || r.queue === !0) && (r.queue = "fx"), r.old = r.complete, r.complete = function() {
      w.isFunction(r.old) && r.old.call(this), r.queue && w.dequeue(this, r.queue)
    }, r
  }, w.easing = {
    linear: function(e) {
      return e
    },
    swing: function(e) {
      return .5 - Math.cos(e * Math.PI) / 2
    }
  }, w.timers = [], w.fx = rr.prototype.init, w.fx.tick = function() {
    var e, n = w.timers,
      r = 0;
    for (Xn = w.now(); n.length > r; r++) e = n[r], e() || n[r] !== e || n.splice(r--, 1);
    n.length || w.fx.stop(), Xn = t
  }, w.fx.timer = function(e) {
    e() && w.timers.push(e) && w.fx.start()
  }, w.fx.interval = 13, w.fx.start = function() {
    Vn || (Vn = setInterval(w.fx.tick, w.fx.interval))
  }, w.fx.stop = function() {
    clearInterval(Vn), Vn = null
  }, w.fx.speeds = {
    slow: 600,
    fast: 200,
    _default: 400
  }, w.fx.step = {}, w.expr && w.expr.filters && (w.expr.filters.animated = function(e) {
    return w.grep(w.timers, function(t) {
      return e === t.elem
    }).length
  }), w.fn.offset = function(e) {
    if (arguments.length) return e === t ? this : this.each(function(t) {
      w.offset.setOffset(this, e, t)
    });
    var n, r, s = {
        top: 0,
        left: 0
      },
      o = this[0],
      u = o && o.ownerDocument;
    if (u) return n = u.documentElement, w.contains(n, o) ? (typeof o.getBoundingClientRect !== i && (s = o.getBoundingClientRect()), r = sr(u), {
      top: s.top + (r.pageYOffset || n.scrollTop) - (n.clientTop || 0),
      left: s.left + (r.pageXOffset || n.scrollLeft) - (n.clientLeft || 0)
    }) : s
  }, w.offset = {
    setOffset: function(e, t, n) {
      var r = w.css(e, "position");
      "static" === r && (e.style.position = "relative");
      var i = w(e),
        s = i.offset(),
        o = w.css(e, "top"),
        u = w.css(e, "left"),
        a = ("absolute" === r || "fixed" === r) && w.inArray("auto", [o, u]) > -1,
        f = {},
        l = {},
        c, h;
      a ? (l = i.position(), c = l.top, h = l.left) : (c = parseFloat(o) || 0, h = parseFloat(u) || 0), w.isFunction(t) && (t = t.call(e, n, s)), null != t.top && (f.top = t.top - s.top + c), null != t.left && (f.left = t.left - s.left + h), "using" in t ? t.using.call(e, f) : i.css(f)
    }
  }, w.fn.extend({
    position: function() {
      if (this[0]) {
        var e, t, n = {
            top: 0,
            left: 0
          },
          r = this[0];
        return "fixed" === w.css(r, "position") ? t = r.getBoundingClientRect() : (e = this.offsetParent(), t = this.offset(), w.nodeName(e[0], "html") || (n = e.offset()), n.top += w.css(e[0], "borderTopWidth", !0), n.left += w.css(e[0], "borderLeftWidth", !0)), {
          top: t.top - n.top - w.css(r, "marginTop", !0),
          left: t.left - n.left - w.css(r, "marginLeft", !0)
        }
      }
    },
    offsetParent: function() {
      return this.map(function() {
        var e = this.offsetParent || u;
        while (e && !w.nodeName(e, "html") && "static" === w.css(e, "position")) e = e.offsetParent;
        return e || u
      })
    }
  }), w.each({
    scrollLeft: "pageXOffset",
    scrollTop: "pageYOffset"
  }, function(e, n) {
    var r = /Y/.test(n);
    w.fn[e] = function(i) {
      return w.access(this, function(e, i, s) {
        var o = sr(e);
        return s === t ? o ? n in o ? o[n] : o.document.documentElement[i] : e[i] : (o ? o.scrollTo(r ? w(o).scrollLeft() : s, r ? s : w(o).scrollTop()) : e[i] = s, t)
      }, e, i, arguments.length, null)
    }
  }), w.each({
    Height: "height",
    Width: "width"
  }, function(e, n) {
    w.each({
      padding: "inner" + e,
      content: n,
      "": "outer" + e
    }, function(r, i) {
      w.fn[i] = function(i, s) {
        var o = arguments.length && (r || "boolean" != typeof i),
          u = r || (i === !0 || s === !0 ? "margin" : "border");
        return w.access(this, function(n, r, i) {
          var s;
          return w.isWindow(n) ? n.document.documentElement["client" + e] : 9 === n.nodeType ? (s = n.documentElement, Math.max(n.body["scroll" + e], s["scroll" + e], n.body["offset" + e], s["offset" + e], s["client" + e])) : i === t ? w.css(n, r, u) : w.style(n, r, i, u)
        }, n, o ? i : t, o, null)
      }
    })
  }), w.fn.size = function() {
    return this.length
  }, w.fn.andSelf = w.fn.addBack, "object" == typeof module && module && "object" == typeof module.exports ? module.exports = w : (e.jQuery = e.$ = w, "function" == typeof define && define.amd && define("jquery", [], function() {
    return w
  }))
})(window);
! function(e) {
  "use strict";

  function t(e, t) {
    var n = (65535 & e) + (65535 & t),
      r = (e >> 16) + (t >> 16) + (n >> 16);
    return r << 16 | 65535 & n
  }

  function n(e, t) {
    return e << t | e >>> 32 - t
  }

  function r(e, r, i, s, o, u) {
    return t(n(t(t(r, e), t(s, u)), o), i)
  }

  function i(e, t, n, i, s, o, u) {
    return r(t & n | ~t & i, e, t, s, o, u)
  }

  function s(e, t, n, i, s, o, u) {
    return r(t & i | n & ~i, e, t, s, o, u)
  }

  function o(e, t, n, i, s, o, u) {
    return r(t ^ n ^ i, e, t, s, o, u)
  }

  function u(e, t, n, i, s, o, u) {
    return r(n ^ (t | ~i), e, t, s, o, u)
  }

  function a(e, n) {
    e[n >> 5] |= 128 << n % 32, e[(n + 64 >>> 9 << 4) + 14] = n;
    var r, a, f, l, c, h = 1732584193,
      p = -271733879,
      d = -1732584194,
      v = 271733878;
    for (r = 0; r < e.length; r += 16) a = h, f = p, l = d, c = v, h = i(h, p, d, v, e[r], 7, -680876936), v = i(v, h, p, d, e[r + 1], 12, -389564586), d = i(d, v, h, p, e[r + 2], 17, 606105819), p = i(p, d, v, h, e[r + 3], 22, -1044525330), h = i(h, p, d, v, e[r + 4], 7, -176418897), v = i(v, h, p, d, e[r + 5], 12, 1200080426), d = i(d, v, h, p, e[r + 6], 17, -1473231341), p = i(p, d, v, h, e[r + 7], 22, -45705983), h = i(h, p, d, v, e[r + 8], 7, 1770035416), v = i(v, h, p, d, e[r + 9], 12, -1958414417), d = i(d, v, h, p, e[r + 10], 17, -42063), p = i(p, d, v, h, e[r + 11], 22, -1990404162), h = i(h, p, d, v, e[r + 12], 7, 1804603682), v = i(v, h, p, d, e[r + 13], 12, -40341101), d = i(d, v, h, p, e[r + 14], 17, -1502002290), p = i(p, d, v, h, e[r + 15], 22, 1236535329), h = s(h, p, d, v, e[r + 1], 5, -165796510), v = s(v, h, p, d, e[r + 6], 9, -1069501632), d = s(d, v, h, p, e[r + 11], 14, 643717713), p = s(p, d, v, h, e[r], 20, -373897302), h = s(h, p, d, v, e[r + 5], 5, -701558691), v = s(v, h, p, d, e[r + 10], 9, 38016083), d = s(d, v, h, p, e[r + 15], 14, -660478335), p = s(p, d, v, h, e[r + 4], 20, -405537848), h = s(h, p, d, v, e[r + 9], 5, 568446438), v = s(v, h, p, d, e[r + 14], 9, -1019803690), d = s(d, v, h, p, e[r + 3], 14, -187363961), p = s(p, d, v, h, e[r + 8], 20, 1163531501), h = s(h, p, d, v, e[r + 13], 5, -1444681467), v = s(v, h, p, d, e[r + 2], 9, -51403784), d = s(d, v, h, p, e[r + 7], 14, 1735328473), p = s(p, d, v, h, e[r + 12], 20, -1926607734), h = o(h, p, d, v, e[r + 5], 4, -378558), v = o(v, h, p, d, e[r + 8], 11, -2022574463), d = o(d, v, h, p, e[r + 11], 16, 1839030562), p = o(p, d, v, h, e[r + 14], 23, -35309556), h = o(h, p, d, v, e[r + 1], 4, -1530992060), v = o(v, h, p, d, e[r + 4], 11, 1272893353), d = o(d, v, h, p, e[r + 7], 16, -155497632), p = o(p, d, v, h, e[r + 10], 23, -1094730640), h = o(h, p, d, v, e[r + 13], 4, 681279174), v = o(v, h, p, d, e[r], 11, -358537222), d = o(d, v, h, p, e[r + 3], 16, -722521979), p = o(p, d, v, h, e[r + 6], 23, 76029189), h = o(h, p, d, v, e[r + 9], 4, -640364487), v = o(v, h, p, d, e[r + 12], 11, -421815835), d = o(d, v, h, p, e[r + 15], 16, 530742520), p = o(p, d, v, h, e[r + 2], 23, -995338651), h = u(h, p, d, v, e[r], 6, -198630844), v = u(v, h, p, d, e[r + 7], 10, 1126891415), d = u(d, v, h, p, e[r + 14], 15, -1416354905), p = u(p, d, v, h, e[r + 5], 21, -57434055), h = u(h, p, d, v, e[r + 12], 6, 1700485571), v = u(v, h, p, d, e[r + 3], 10, -1894986606), d = u(d, v, h, p, e[r + 10], 15, -1051523), p = u(p, d, v, h, e[r + 1], 21, -2054922799), h = u(h, p, d, v, e[r + 8], 6, 1873313359), v = u(v, h, p, d, e[r + 15], 10, -30611744), d = u(d, v, h, p, e[r + 6], 15, -1560198380), p = u(p, d, v, h, e[r + 13], 21, 1309151649), h = u(h, p, d, v, e[r + 4], 6, -145523070), v = u(v, h, p, d, e[r + 11], 10, -1120210379), d = u(d, v, h, p, e[r + 2], 15, 718787259), p = u(p, d, v, h, e[r + 9], 21, -343485551), h = t(h, a), p = t(p, f), d = t(d, l), v = t(v, c);
    return [h, p, d, v]
  }

  function f(e) {
    var t, n = "";
    for (t = 0; t < 32 * e.length; t += 8) n += String.fromCharCode(e[t >> 5] >>> t % 32 & 255);
    return n
  }

  function l(e) {
    var t, n = [];
    for (n[(e.length >> 2) - 1] = void 0, t = 0; t < n.length; t += 1) n[t] = 0;
    for (t = 0; t < 8 * e.length; t += 8) n[t >> 5] |= (255 & e.charCodeAt(t / 8)) << t % 32;
    return n
  }

  function c(e) {
    return f(a(l(e), 8 * e.length))
  }

  function h(e, t) {
    var n, r, i = l(e),
      s = [],
      o = [];
    for (s[15] = o[15] = void 0, i.length > 16 && (i = a(i, 8 * e.length)), n = 0; 16 > n; n += 1) s[n] = 909522486 ^ i[n], o[n] = 1549556828 ^ i[n];
    return r = a(s.concat(l(t)), 512 + 8 * t.length), f(a(o.concat(r), 640))
  }

  function p(e) {
    var t, n, r = "0123456789abcdef",
      i = "";
    for (n = 0; n < e.length; n += 1) t = e.charCodeAt(n), i += r.charAt(t >>> 4 & 15) + r.charAt(15 & t);
    return i
  }

  function d(e) {
    return unescape(encodeURIComponent(e))
  }

  function v(e) {
    return c(d(e))
  }

  function m(e) {
    return p(v(e))
  }

  function g(e, t) {
    return h(d(e), d(t))
  }

  function y(e, t) {
    return p(g(e, t))
  }

  function b(e, t, n) {
    return t ? n ? g(t, e) : y(t, e) : n ? v(e) : m(e)
  }
  "function" == typeof define && define.amd ? define(function() {
    return b
  }) : e.md5 = b
}(this);
var Zepto = function() {
  function e(e) {
    return null == e ? String(e) : V[$.call(e)] || "object"
  }

  function t(t) {
    return "function" == e(t)
  }

  function n(e) {
    return null != e && e == e.window
  }

  function r(e) {
    return null != e && e.nodeType == e.DOCUMENT_NODE
  }

  function i(t) {
    return "object" == e(t)
  }

  function s(e) {
    return i(e) && !n(e) && Object.getPrototypeOf(e) == Object.prototype
  }

  function o(e) {
    return "number" == typeof e.length
  }

  function u(e) {
    return A.call(e, function(e) {
      return null != e
    })
  }

  function a(e) {
    return e.length > 0 ? x.fn.concat.apply([], e) : e
  }

  function f(e) {
    return e.replace(/::/g, "/").replace(/([A-Z]+)([A-Z][a-z])/g, "$1_$2").replace(/([a-z\d])([A-Z])/g, "$1_$2").replace(/_/g, "-").toLowerCase()
  }

  function l(e) {
    return e in _ ? _[e] : _[e] = new RegExp("(^|\\s)" + e + "(\\s|$)")
  }

  function c(e, t) {
    return "number" != typeof t || D[f(e)] ? t : t + "px"
  }

  function h(e) {
    var t, n;
    return M[e] || (t = O.createElement(e), O.body.appendChild(t), n = getComputedStyle(t, "").getPropertyValue("display"), t.parentNode.removeChild(t), "none" == n && (n = "block"), M[e] = n), M[e]
  }

  function p(e) {
    return "children" in e ? L.call(e.children) : x.map(e.childNodes, function(e) {
      return 1 == e.nodeType ? e : void 0
    })
  }

  function d(e, t, n) {
    for (S in t) n && (s(t[S]) || G(t[S])) ? (s(t[S]) && !s(e[S]) && (e[S] = {}), G(t[S]) && !G(e[S]) && (e[S] = []), d(e[S], t[S], n)) : t[S] !== E && (e[S] = t[S])
  }

  function v(e, t) {
    return null == t ? x(e) : x(e).filter(t)
  }

  function m(e, n, r, i) {
    return t(n) ? n.call(e, r, i) : n
  }

  function g(e, t, n) {
    null == n ? e.removeAttribute(t) : e.setAttribute(t, n)
  }

  function y(e, t) {
    var n = e.className || "",
      r = n && n.baseVal !== E;
    return t === E ? r ? n.baseVal : n : void(r ? n.baseVal = t : e.className = t)
  }

  function b(e) {
    try {
      return e ? "true" == e || ("false" == e ? !1 : "null" == e ? null : +e + "" == e ? +e : /^[\[\{]/.test(e) ? x.parseJSON(e) : e) : e
    } catch (t) {
      return e
    }
  }

  function w(e, t) {
    t(e);
    for (var n = 0, r = e.childNodes.length; r > n; n++) w(e.childNodes[n], t)
  }
  var E, S, x, T, N, C, k = [],
    L = k.slice,
    A = k.filter,
    O = window.document,
    M = {},
    _ = {},
    D = {
      "column-count": 1,
      columns: 1,
      "font-weight": 1,
      "line-height": 1,
      opacity: 1,
      "z-index": 1,
      zoom: 1
    },
    P = /^\s*<(\w+|!)[^>]*>/,
    H = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
    B = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
    j = /^(?:body|html)$/i,
    F = /([A-Z])/g,
    I = ["val", "css", "html", "text", "data", "width", "height", "offset"],
    q = ["after", "prepend", "before", "append"],
    R = O.createElement("table"),
    U = O.createElement("tr"),
    z = {
      tr: O.createElement("tbody"),
      tbody: R,
      thead: R,
      tfoot: R,
      td: U,
      th: U,
      "*": O.createElement("div")
    },
    W = /complete|loaded|interactive/,
    X = /^[\w-]*$/,
    V = {},
    $ = V.toString,
    J = {},
    K = O.createElement("div"),
    Q = {
      tabindex: "tabIndex",
      readonly: "readOnly",
      "for": "htmlFor",
      "class": "className",
      maxlength: "maxLength",
      cellspacing: "cellSpacing",
      cellpadding: "cellPadding",
      rowspan: "rowSpan",
      colspan: "colSpan",
      usemap: "useMap",
      frameborder: "frameBorder",
      contenteditable: "contentEditable"
    },
    G = Array.isArray || function(e) {
      return e instanceof Array
    };
  return J.matches = function(e, t) {
    if (!t || !e || 1 !== e.nodeType) return !1;
    var n = e.webkitMatchesSelector || e.mozMatchesSelector || e.oMatchesSelector || e.matchesSelector;
    if (n) return n.call(e, t);
    var r, i = e.parentNode,
      s = !i;
    return s && (i = K).appendChild(e), r = ~J.qsa(i, t).indexOf(e), s && K.removeChild(e), r
  }, N = function(e) {
    return e.replace(/-+(.)?/g, function(e, t) {
      return t ? t.toUpperCase() : ""
    })
  }, C = function(e) {
    return A.call(e, function(t, n) {
      return e.indexOf(t) == n
    })
  }, J.fragment = function(e, t, n) {
    var r, i, o;
    return H.test(e) && (r = x(O.createElement(RegExp.$1))), r || (e.replace && (e = e.replace(B, "<$1></$2>")), t === E && (t = P.test(e) && RegExp.$1), t in z || (t = "*"), o = z[t], o.innerHTML = "" + e, r = x.each(L.call(o.childNodes), function() {
      o.removeChild(this)
    })), s(n) && (i = x(r), x.each(n, function(e, t) {
      I.indexOf(e) > -1 ? i[e](t) : i.attr(e, t)
    })), r
  }, J.Z = function(e, t) {
    return e = e || [], e.__proto__ = x.fn, e.selector = t || "", e
  }, J.isZ = function(e) {
    return e instanceof J.Z
  }, J.init = function(e, n) {
    var r;
    if (!e) return J.Z();
    if ("string" == typeof e)
      if (e = e.trim(), "<" == e[0] && P.test(e)) r = J.fragment(e, RegExp.$1, n), e = null;
      else {
        if (n !== E) return x(n).find(e);
        r = J.qsa(O, e)
      }
    else {
      if (t(e)) return x(O).ready(e);
      if (J.isZ(e)) return e;
      if (G(e)) r = u(e);
      else if (i(e)) r = [e], e = null;
      else if (P.test(e)) r = J.fragment(e.trim(), RegExp.$1, n), e = null;
      else {
        if (n !== E) return x(n).find(e);
        r = J.qsa(O, e)
      }
    }
    return J.Z(r, e)
  }, x = function(e, t) {
    return J.init(e, t)
  }, x.extend = function(e) {
    var t, n = L.call(arguments, 1);
    return "boolean" == typeof e && (t = e, e = n.shift()), n.forEach(function(n) {
      d(e, n, t)
    }), e
  }, J.qsa = function(e, t) {
    var n, i = "#" == t[0],
      s = !i && "." == t[0],
      o = i || s ? t.slice(1) : t,
      u = X.test(o);
    return r(e) && u && i ? (n = e.getElementById(o)) ? [n] : [] : 1 !== e.nodeType && 9 !== e.nodeType ? [] : L.call(u && !i ? s ? e.getElementsByClassName(o) : e.getElementsByTagName(t) : e.querySelectorAll(t))
  }, x.contains = O.documentElement.contains ? function(e, t) {
    return e !== t && e.contains(t)
  } : function(e, t) {
    for (; t && (t = t.parentNode);)
      if (t === e) return !0;
    return !1
  }, x.type = e, x.isFunction = t, x.isWindow = n, x.isArray = G, x.isPlainObject = s, x.isEmptyObject = function(e) {
    var t;
    for (t in e) return !1;
    return !0
  }, x.inArray = function(e, t, n) {
    return k.indexOf.call(t, e, n)
  }, x.camelCase = N, x.trim = function(e) {
    return null == e ? "" : String.prototype.trim.call(e)
  }, x.uuid = 0, x.support = {}, x.expr = {}, x.map = function(e, t) {
    var n, r, i, s = [];
    if (o(e))
      for (r = 0; r < e.length; r++) n = t(e[r], r), null != n && s.push(n);
    else
      for (i in e) n = t(e[i], i), null != n && s.push(n);
    return a(s)
  }, x.each = function(e, t) {
    var n, r;
    if (o(e)) {
      for (n = 0; n < e.length; n++)
        if (t.call(e[n], n, e[n]) === !1) return e
    } else
      for (r in e)
        if (t.call(e[r], r, e[r]) === !1) return e;
    return e
  }, x.grep = function(e, t) {
    return A.call(e, t)
  }, window.JSON && (x.parseJSON = JSON.parse), x.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(e, t) {
    V["[object " + t + "]"] = t.toLowerCase()
  }), x.fn = {
    forEach: k.forEach,
    reduce: k.reduce,
    push: k.push,
    sort: k.sort,
    indexOf: k.indexOf,
    concat: k.concat,
    map: function(e) {
      return x(x.map(this, function(t, n) {
        return e.call(t, n, t)
      }))
    },
    slice: function() {
      return x(L.apply(this, arguments))
    },
    ready: function(e) {
      return W.test(O.readyState) && O.body ? e(x) : O.addEventListener("DOMContentLoaded", function() {
        e(x)
      }, !1), this
    },
    get: function(e) {
      return e === E ? L.call(this) : this[e >= 0 ? e : e + this.length]
    },
    toArray: function() {
      return this.get()
    },
    size: function() {
      return this.length
    },
    remove: function() {
      return this.each(function() {
        null != this.parentNode && this.parentNode.removeChild(this)
      })
    },
    each: function(e) {
      return k.every.call(this, function(t, n) {
        return e.call(t, n, t) !== !1
      }), this
    },
    filter: function(e) {
      return t(e) ? this.not(this.not(e)) : x(A.call(this, function(t) {
        return J.matches(t, e)
      }))
    },
    add: function(e, t) {
      return x(C(this.concat(x(e, t))))
    },
    is: function(e) {
      return this.length > 0 && J.matches(this[0], e)
    },
    not: function(e) {
      var n = [];
      if (t(e) && e.call !== E) this.each(function(t) {
        e.call(this, t) || n.push(this)
      });
      else {
        var r = "string" == typeof e ? this.filter(e) : o(e) && t(e.item) ? L.call(e) : x(e);
        this.forEach(function(e) {
          r.indexOf(e) < 0 && n.push(e)
        })
      }
      return x(n)
    },
    has: function(e) {
      return this.filter(function() {
        return i(e) ? x.contains(this, e) : x(this).find(e).size()
      })
    },
    eq: function(e) {
      return -1 === e ? this.slice(e) : this.slice(e, +e + 1)
    },
    first: function() {
      var e = this[0];
      return e && !i(e) ? e : x(e)
    },
    last: function() {
      var e = this[this.length - 1];
      return e && !i(e) ? e : x(e)
    },
    find: function(e) {
      var t, n = this;
      return t = e ? "object" == typeof e ? x(e).filter(function() {
        var e = this;
        return k.some.call(n, function(t) {
          return x.contains(t, e)
        })
      }) : 1 == this.length ? x(J.qsa(this[0], e)) : this.map(function() {
        return J.qsa(this, e)
      }) : x()
    },
    closest: function(e, t) {
      var n = this[0],
        i = !1;
      for ("object" == typeof e && (i = x(e)); n && !(i ? i.indexOf(n) >= 0 : J.matches(n, e));) n = n !== t && !r(n) && n.parentNode;
      return x(n)
    },
    parents: function(e) {
      for (var t = [], n = this; n.length > 0;) n = x.map(n, function(e) {
        return (e = e.parentNode) && !r(e) && t.indexOf(e) < 0 ? (t.push(e), e) : void 0
      });
      return v(t, e)
    },
    parent: function(e) {
      return v(C(this.pluck("parentNode")), e)
    },
    children: function(e) {
      return v(this.map(function() {
        return p(this)
      }), e)
    },
    contents: function() {
      return this.map(function() {
        return L.call(this.childNodes)
      })
    },
    siblings: function(e) {
      return v(this.map(function(e, t) {
        return A.call(p(t.parentNode), function(e) {
          return e !== t
        })
      }), e)
    },
    empty: function() {
      return this.each(function() {
        this.innerHTML = ""
      })
    },
    pluck: function(e) {
      return x.map(this, function(t) {
        return t[e]
      })
    },
    show: function() {
      return this.each(function() {
        "none" == this.style.display && (this.style.display = ""), "none" == getComputedStyle(this, "").getPropertyValue("display") && (this.style.display = h(this.nodeName))
      })
    },
    replaceWith: function(e) {
      return this.before(e).remove()
    },
    wrap: function(e) {
      var n = t(e);
      if (this[0] && !n) var r = x(e).get(0),
        i = r.parentNode || this.length > 1;
      return this.each(function(t) {
        x(this).wrapAll(n ? e.call(this, t) : i ? r.cloneNode(!0) : r)
      })
    },
    wrapAll: function(e) {
      if (this[0]) {
        x(this[0]).before(e = x(e));
        for (var t;
          (t = e.children()).length;) e = t.first();
        x(e).append(this)
      }
      return this
    },
    wrapInner: function(e) {
      var n = t(e);
      return this.each(function(t) {
        var r = x(this),
          i = r.contents(),
          s = n ? e.call(this, t) : e;
        i.length ? i.wrapAll(s) : r.append(s)
      })
    },
    unwrap: function() {
      return this.parent().each(function() {
        x(this).replaceWith(x(this).children())
      }), this
    },
    clone: function() {
      return this.map(function() {
        return this.cloneNode(!0)
      })
    },
    hide: function() {
      return this.css("display", "none")
    },
    toggle: function(e) {
      return this.each(function() {
        var t = x(this);
        (e === E ? "none" == t.css("display") : e) ? t.show(): t.hide()
      })
    },
    prev: function(e) {
      return x(this.pluck("previousElementSibling")).filter(e || "*")
    },
    next: function(e) {
      return x(this.pluck("nextElementSibling")).filter(e || "*")
    },
    html: function(e) {
      return 0 in arguments ? this.each(function(t) {
        var n = this.innerHTML;
        x(this).empty().append(m(this, e, t, n))
      }) : 0 in this ? this[0].innerHTML : null
    },
    text: function(e) {
      return 0 in arguments ? this.each(function(t) {
        var n = m(this, e, t, this.textContent);
        this.textContent = null == n ? "" : "" + n
      }) : 0 in this ? this[0].textContent : null
    },
    attr: function(e, t) {
      var n;
      return "string" != typeof e || 1 in arguments ? this.each(function(n) {
        if (1 === this.nodeType)
          if (i(e))
            for (S in e) g(this, S, e[S]);
          else g(this, e, m(this, t, n, this.getAttribute(e)))
      }) : this.length && 1 === this[0].nodeType ? !(n = this[0].getAttribute(e)) && e in this[0] ? this[0][e] : n : E
    },
    removeAttr: function(e) {
      return this.each(function() {
        1 === this.nodeType && e.split(" ").forEach(function(e) {
          g(this, e)
        }, this)
      })
    },
    prop: function(e, t) {
      return e = Q[e] || e, 1 in arguments ? this.each(function(n) {
        this[e] = m(this, t, n, this[e])
      }) : this[0] && this[0][e]
    },
    data: function(e, t) {
      var n = "data-" + e.replace(F, "-$1").toLowerCase(),
        r = 1 in arguments ? this.attr(n, t) : this.attr(n);
      return null !== r ? b(r) : E
    },
    val: function(e) {
      return 0 in arguments ? this.each(function(t) {
        this.value = m(this, e, t, this.value)
      }) : this[0] && (this[0].multiple ? x(this[0]).find("option").filter(function() {
        return this.selected
      }).pluck("value") : this[0].value)
    },
    offset: function(e) {
      if (e) return this.each(function(t) {
        var n = x(this),
          r = m(this, e, t, n.offset()),
          i = n.offsetParent().offset(),
          s = {
            top: r.top - i.top,
            left: r.left - i.left
          };
        "static" == n.css("position") && (s.position = "relative"), n.css(s)
      });
      if (!this.length) return null;
      var t = this[0].getBoundingClientRect();
      return {
        left: t.left + window.pageXOffset,
        top: t.top + window.pageYOffset,
        width: Math.round(t.width),
        height: Math.round(t.height)
      }
    },
    css: function(t, n) {
      if (arguments.length < 2) {
        var r, i = this[0];
        if (!i) return;
        if (r = getComputedStyle(i, ""), "string" == typeof t) return i.style[N(t)] || r.getPropertyValue(t);
        if (G(t)) {
          var s = {};
          return x.each(t, function(e, t) {
            s[t] = i.style[N(t)] || r.getPropertyValue(t)
          }), s
        }
      }
      var o = "";
      if ("string" == e(t)) n || 0 === n ? o = f(t) + ":" + c(t, n) : this.each(function() {
        this.style.removeProperty(f(t))
      });
      else
        for (S in t) t[S] || 0 === t[S] ? o += f(S) + ":" + c(S, t[S]) + ";" : this.each(function() {
          this.style.removeProperty(f(S))
        });
      return this.each(function() {
        this.style.cssText += ";" + o
      })
    },
    index: function(e) {
      return e ? this.indexOf(x(e)[0]) : this.parent().children().indexOf(this[0])
    },
    hasClass: function(e) {
      return e ? k.some.call(this, function(e) {
        return this.test(y(e))
      }, l(e)) : !1
    },
    addClass: function(e) {
      return e ? this.each(function(t) {
        if ("className" in this) {
          T = [];
          var n = y(this),
            r = m(this, e, t, n);
          r.split(/\s+/g).forEach(function(e) {
            x(this).hasClass(e) || T.push(e)
          }, this), T.length && y(this, n + (n ? " " : "") + T.join(" "))
        }
      }) : this
    },
    removeClass: function(e) {
      return this.each(function(t) {
        if ("className" in this) {
          if (e === E) return y(this, "");
          T = y(this), m(this, e, t, T).split(/\s+/g).forEach(function(e) {
            T = T.replace(l(e), " ")
          }), y(this, T.trim())
        }
      })
    },
    toggleClass: function(e, t) {
      return e ? this.each(function(n) {
        var r = x(this),
          i = m(this, e, n, y(this));
        i.split(/\s+/g).forEach(function(e) {
          (t === E ? !r.hasClass(e) : t) ? r.addClass(e): r.removeClass(e)
        })
      }) : this
    },
    scrollTop: function(e) {
      if (this.length) {
        var t = "scrollTop" in this[0];
        return e === E ? t ? this[0].scrollTop : this[0].pageYOffset : this.each(t ? function() {
          this.scrollTop = e
        } : function() {
          this.scrollTo(this.scrollX, e)
        })
      }
    },
    scrollLeft: function(e) {
      if (this.length) {
        var t = "scrollLeft" in this[0];
        return e === E ? t ? this[0].scrollLeft : this[0].pageXOffset : this.each(t ? function() {
          this.scrollLeft = e
        } : function() {
          this.scrollTo(e, this.scrollY)
        })
      }
    },
    position: function() {
      if (this.length) {
        var e = this[0],
          t = this.offsetParent(),
          n = this.offset(),
          r = j.test(t[0].nodeName) ? {
            top: 0,
            left: 0
          } : t.offset();
        return n.top -= parseFloat(x(e).css("margin-top")) || 0, n.left -= parseFloat(x(e).css("margin-left")) || 0, r.top += parseFloat(x(t[0]).css("border-top-width")) || 0, r.left += parseFloat(x(t[0]).css("border-left-width")) || 0, {
          top: n.top - r.top,
          left: n.left - r.left
        }
      }
    },
    offsetParent: function() {
      return this.map(function() {
        for (var e = this.offsetParent || O.body; e && !j.test(e.nodeName) && "static" == x(e).css("position");) e = e.offsetParent;
        return e
      })
    }
  }, x.fn.detach = x.fn.remove, ["width", "height"].forEach(function(e) {
    var t = e.replace(/./, function(e) {
      return e[0].toUpperCase()
    });
    x.fn[e] = function(i) {
      var s, o = this[0];
      return i === E ? n(o) ? o["inner" + t] : r(o) ? o.documentElement["scroll" + t] : (s = this.offset()) && s[e] : this.each(function(t) {
        o = x(this), o.css(e, m(this, i, t, o[e]()))
      })
    }
  }), q.forEach(function(t, n) {
    var r = n % 2;
    x.fn[t] = function() {
      var t, i, s = x.map(arguments, function(n) {
          return t = e(n), "object" == t || "array" == t || null == n ? n : J.fragment(n)
        }),
        o = this.length > 1;
      return s.length < 1 ? this : this.each(function(e, t) {
        i = r ? t : t.parentNode, t = 0 == n ? t.nextSibling : 1 == n ? t.firstChild : 2 == n ? t : null;
        var u = x.contains(O.documentElement, i);
        s.forEach(function(e) {
          if (o) e = e.cloneNode(!0);
          else if (!i) return x(e).remove();
          i.insertBefore(e, t), u && w(e, function(e) {
            null == e.nodeName || "SCRIPT" !== e.nodeName.toUpperCase() || e.type && "text/javascript" !== e.type || e.src || window.eval.call(window, e.innerHTML)
          })
        })
      })
    }, x.fn[r ? t + "To" : "insert" + (n ? "Before" : "After")] = function(e) {
      return x(e)[t](this), this
    }
  }), J.Z.prototype = x.fn, J.uniq = C, J.deserializeValue = b, x.zepto = J, x
}();
window.Zepto = Zepto, void 0 === window.$ && (window.$ = Zepto),
  function(e) {
    function t(e) {
      return e._zid || (e._zid = h++)
    }

    function n(e, n, s, o) {
      if (n = r(n), n.ns) var u = i(n.ns);
      return (m[t(e)] || []).filter(function(e) {
        return !(!e || n.e && e.e != n.e || n.ns && !u.test(e.ns) || s && t(e.fn) !== t(s) || o && e.sel != o)
      })
    }

    function r(e) {
      var t = ("" + e).split(".");
      return {
        e: t[0],
        ns: t.slice(1).sort().join(" ")
      }
    }

    function i(e) {
      return new RegExp("(?:^| )" + e.replace(" ", " .* ?") + "(?: |$)")
    }

    function s(e, t) {
      return e.del && !y && e.e in b || !!t
    }

    function o(e) {
      return w[e] || y && b[e] || e
    }

    function u(n, i, u, a, l, h, p) {
      var d = t(n),
        v = m[d] || (m[d] = []);
      i.split(/\s/).forEach(function(t) {
        if ("ready" == t) return e(document).ready(u);
        var i = r(t);
        i.fn = u, i.sel = l, i.e in w && (u = function(t) {
          var n = t.relatedTarget;
          return !n || n !== this && !e.contains(this, n) ? i.fn.apply(this, arguments) : void 0
        }), i.del = h;
        var d = h || u;
        i.proxy = function(e) {
          if (e = f(e), !e.isImmediatePropagationStopped()) {
            e.data = a;
            var t = d.apply(n, e._args == c ? [e] : [e].concat(e._args));
            return t === !1 && (e.preventDefault(), e.stopPropagation()), t
          }
        }, i.i = v.length, v.push(i), "addEventListener" in n && n.addEventListener(o(i.e), i.proxy, s(i, p))
      })
    }

    function a(e, r, i, u, a) {
      var f = t(e);
      (r || "").split(/\s/).forEach(function(t) {
        n(e, t, i, u).forEach(function(t) {
          delete m[f][t.i], "removeEventListener" in e && e.removeEventListener(o(t.e), t.proxy, s(t, a))
        })
      })
    }

    function f(t, n) {
      return (n || !t.isDefaultPrevented) && (n || (n = t), e.each(T, function(e, r) {
        var i = n[e];
        t[e] = function() {
          return this[r] = E, i && i.apply(n, arguments)
        }, t[r] = S
      }), (n.defaultPrevented !== c ? n.defaultPrevented : "returnValue" in n ? n.returnValue === !1 : n.getPreventDefault && n.getPreventDefault()) && (t.isDefaultPrevented = E)), t
    }

    function l(e) {
      var t, n = {
        originalEvent: e
      };
      for (t in e) x.test(t) || e[t] === c || (n[t] = e[t]);
      return f(n, e)
    }
    var c, h = 1,
      p = Array.prototype.slice,
      d = e.isFunction,
      v = function(e) {
        return "string" == typeof e
      },
      m = {},
      g = {},
      y = "onfocusin" in window,
      b = {
        focus: "focusin",
        blur: "focusout"
      },
      w = {
        mouseenter: "mouseover",
        mouseleave: "mouseout"
      };
    g.click = g.mousedown = g.mouseup = g.mousemove = "MouseEvents", e.event = {
      add: u,
      remove: a
    }, e.proxy = function(n, r) {
      var i = 2 in arguments && p.call(arguments, 2);
      if (d(n)) {
        var s = function() {
          return n.apply(r, i ? i.concat(p.call(arguments)) : arguments)
        };
        return s._zid = t(n), s
      }
      if (v(r)) return i ? (i.unshift(n[r], n), e.proxy.apply(null, i)) : e.proxy(n[r], n);
      throw new TypeError("expected function")
    }, e.fn.bind = function(e, t, n) {
      return this.on(e, t, n)
    }, e.fn.unbind = function(e, t) {
      return this.off(e, t)
    }, e.fn.one = function(e, t, n, r) {
      return this.on(e, t, n, r, 1)
    };
    var E = function() {
        return !0
      },
      S = function() {
        return !1
      },
      x = /^([A-Z]|returnValue$|layer[XY]$)/,
      T = {
        preventDefault: "isDefaultPrevented",
        stopImmediatePropagation: "isImmediatePropagationStopped",
        stopPropagation: "isPropagationStopped"
      };
    e.fn.delegate = function(e, t, n) {
      return this.on(t, e, n)
    }, e.fn.undelegate = function(e, t, n) {
      return this.off(t, e, n)
    }, e.fn.live = function(t, n) {
      return e(document.body).delegate(this.selector, t, n), this
    }, e.fn.die = function(t, n) {
      return e(document.body).undelegate(this.selector, t, n), this
    }, e.fn.on = function(t, n, r, i, s) {
      var o, f, h = this;
      return t && !v(t) ? (e.each(t, function(e, t) {
        h.on(e, n, r, t, s)
      }), h) : (v(n) || d(i) || i === !1 || (i = r, r = n, n = c), (d(r) || r === !1) && (i = r, r = c), i === !1 && (i = S), h.each(function(c, h) {
        s && (o = function(e) {
          return a(h, e.type, i), i.apply(this, arguments)
        }), n && (f = function(t) {
          var r, s = e(t.target).closest(n, h).get(0);
          return s && s !== h ? (r = e.extend(l(t), {
            currentTarget: s,
            liveFired: h
          }), (o || i).apply(s, [r].concat(p.call(arguments, 1)))) : void 0
        }), u(h, t, i, r, n, f || o)
      }))
    }, e.fn.off = function(t, n, r) {
      var i = this;
      return t && !v(t) ? (e.each(t, function(e, t) {
        i.off(e, n, t)
      }), i) : (v(n) || d(r) || r === !1 || (r = n, n = c), r === !1 && (r = S), i.each(function() {
        a(this, t, r, n)
      }))
    }, e.fn.trigger = function(t, n) {
      return t = v(t) || e.isPlainObject(t) ? e.Event(t) : f(t), t._args = n, this.each(function() {
        t.type in b && "function" == typeof this[t.type] ? this[t.type]() : "dispatchEvent" in this ? this.dispatchEvent(t) : e(this).triggerHandler(t, n)
      })
    }, e.fn.triggerHandler = function(t, r) {
      var i, s;
      return this.each(function(o, u) {
        i = l(v(t) ? e.Event(t) : t), i._args = r, i.target = u, e.each(n(u, t.type || t), function(e, t) {
          return s = t.proxy(i), i.isImmediatePropagationStopped() ? !1 : void 0
        })
      }), s
    }, "focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t) {
      e.fn[t] = function(e) {
        return 0 in arguments ? this.bind(t, e) : this.trigger(t)
      }
    }), e.Event = function(e, t) {
      v(e) || (t = e, e = t.type);
      var n = document.createEvent(g[e] || "Events"),
        r = !0;
      if (t)
        for (var i in t) "bubbles" == i ? r = !!t[i] : n[i] = t[i];
      return n.initEvent(e, r, !0), f(n)
    }
  }(Zepto),
  function(t) {
    function h(e, n, r) {
      var i = t.Event(n);
      return t(e).trigger(i, r), !i.isDefaultPrevented()
    }

    function p(e, t, r, i) {
      return e.global ? h(t || n, r, i) : void 0
    }

    function d(e) {
      e.global && 0 === t.active++ && p(e, null, "ajaxStart")
    }

    function m(e) {
      e.global && !--t.active && p(e, null, "ajaxStop")
    }

    function g(e, t) {
      var n = t.context;
      return t.beforeSend.call(n, e, t) === !1 || p(t, n, "ajaxBeforeSend", [e, t]) === !1 ? !1 : void p(t, n, "ajaxSend", [e, t])
    }

    function v(e, t, n, r) {
      var i = n.context,
        s = "success";
      n.success.call(i, e, s, t), r && r.resolveWith(i, [e, s, t]), p(n, i, "ajaxSuccess", [t, n, e]), x(s, t, n)
    }

    function y(e, t, n, r, i) {
      var s = r.context;
      r.error.call(s, n, t, e), i && i.rejectWith(s, [n, t, e]), p(r, s, "ajaxError", [n, r, e || t]), x(t, n, r)
    }

    function x(e, t, n) {
      var r = n.context;
      n.complete.call(r, t, e), p(n, r, "ajaxComplete", [t, n]), m(n)
    }

    function b() {}

    function w(e) {
      return e && (e = e.split(";", 2)[0]), e && (e == f ? "html" : e == u ? "json" : s.test(e) ? "script" : a.test(e) && "xml") || "text"
    }

    function E(e, t) {
      return "" == t ? e : (e + "&" + t).replace(/[&?]{1,2}/, "?")
    }

    function j(e) {
      e.processData && e.data && "string" != t.type(e.data) && (e.data = t.param(e.data, e.traditional)), !e.data || e.type && "GET" != e.type.toUpperCase() || (e.url = E(e.url, e.data), e.data = void 0)
    }

    function S(e, n, r, i) {
      return t.isFunction(n) && (i = r, r = n, n = void 0), t.isFunction(r) || (i = r, r = void 0), {
        url: e,
        data: n,
        success: r,
        dataType: i
      }
    }

    function C(e, n, r, i) {
      var s, o = t.isArray(n),
        u = t.isPlainObject(n);
      t.each(n, function(n, f) {
        s = t.type(f), i && (n = r ? i : i + "[" + (u || "object" == s || "array" == s ? n : "") + "]"), !i && o ? e.add(f.name, f.value) : "array" == s || !r && "object" == s ? C(e, f, r, n) : e.add(n, f)
      })
    }
    var i, r, e = 0,
      n = window.document,
      o = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,
      s = /^(?:text|application)\/javascript/i,
      a = /^(?:text|application)\/xml/i,
      u = "application/json",
      f = "text/html",
      c = /^\s*$/,
      l = n.createElement("a");
    l.href = window.location.href, t.active = 0, t.ajaxJSONP = function(r, i) {
      if ("type" in r) {
        var s, o, u = r.jsonpCallback,
          a = (t.isFunction(u) ? u() : u) || "jsonp" + ++e,
          f = n.createElement("script"),
          l = window[a],
          c = function(e) {
            t(f).triggerHandler("error", e || "abort")
          },
          h = {
            abort: c
          };
        return i && i.promise(h), t(f).on("load error", function(e, n) {
          clearTimeout(o), t(f).off().remove(), "error" != e.type && s ? v(s[0], h, r, i) : y(null, n || "error", h, r, i), window[a] = l, s && t.isFunction(l) && l(s[0]), l = s = void 0
        }), g(h, r) === !1 ? (c("abort"), h) : (window[a] = function() {
          s = arguments
        }, f.src = r.url.replace(/\?(.+)=\?/, "?$1=" + a), n.head.appendChild(f), r.timeout > 0 && (o = setTimeout(function() {
          c("timeout")
        }, r.timeout)), h)
      }
      return t.ajax(r)
    }, t.ajaxSettings = {
      type: "GET",
      beforeSend: b,
      success: b,
      error: b,
      complete: b,
      context: null,
      global: !0,
      xhr: function() {
        return new window.XMLHttpRequest
      },
      accepts: {
        script: "text/javascript, application/javascript, application/x-javascript",
        json: u,
        xml: "application/xml, text/xml",
        html: f,
        text: "text/plain"
      },
      crossDomain: !1,
      timeout: 0,
      processData: !0,
      cache: !0
    }, t.ajax = function(e) {
      var a, o = t.extend({}, e || {}),
        s = t.Deferred && t.Deferred();
      for (i in t.ajaxSettings) void 0 === o[i] && (o[i] = t.ajaxSettings[i]);
      d(o), o.crossDomain || (a = n.createElement("a"), a.href = o.url, a.href = a.href, o.crossDomain = l.protocol + "//" + l.host != a.protocol + "//" + a.host), o.url || (o.url = window.location.toString()), j(o);
      var u = o.dataType,
        f = /\?.+=\?/.test(o.url);
      if (f && (u = "jsonp"), o.cache !== !1 && (e && e.cache === !0 || "script" != u && "jsonp" != u) || (o.url = E(o.url, "_=" + Date.now())), "jsonp" == u) return f || (o.url = E(o.url, o.jsonp ? o.jsonp + "=?" : o.jsonp === !1 ? "" : "callback=?")), t.ajaxJSONP(o, s);
      var C, h = o.accepts[u],
        p = {},
        m = function(e, t) {
          p[e.toLowerCase()] = [e, t]
        },
        x = /^([\w-]+:)\/\//.test(o.url) ? RegExp.$1 : window.location.protocol,
        S = o.xhr(),
        T = S.setRequestHeader;
      if (s && s.promise(S), o.crossDomain || m("X-Requested-With", "XMLHttpRequest"), m("Accept", h || "*/*"), (h = o.mimeType || h) && (h.indexOf(",") > -1 && (h = h.split(",", 2)[0]), S.overrideMimeType && S.overrideMimeType(h)), (o.contentType || o.contentType !== !1 && o.data && "GET" != o.type.toUpperCase()) && m("Content-Type", o.contentType || "application/x-www-form-urlencoded"), o.headers)
        for (r in o.headers) m(r, o.headers[r]);
      if (S.setRequestHeader = m, S.onreadystatechange = function() {
          if (4 == S.readyState) {
            S.onreadystatechange = b, clearTimeout(C);
            var e, n = !1;
            if (S.status >= 200 && S.status < 300 || 304 == S.status || 0 == S.status && "file:" == x) {
              u = u || w(o.mimeType || S.getResponseHeader("content-type")), e = S.responseText;
              try {
                "script" == u ? (1, eval)(e) : "xml" == u ? e = S.responseXML : "json" == u && (e = c.test(e) ? null : t.parseJSON(e))
              } catch (i) {
                n = i
              }
              n ? y(n, "parsererror", S, o, s) : v(e, S, o, s)
            } else y(S.statusText || null, S.status ? "error" : "abort", S, o, s)
          }
        }, g(S, o) === !1) return S.abort(), y(null, "abort", S, o, s), S;
      if (o.xhrFields)
        for (r in o.xhrFields) S[r] = o.xhrFields[r];
      var N = "async" in o ? o.async : !0;
      S.open(o.type, o.url, N, o.username, o.password);
      for (r in p) T.apply(S, p[r]);
      return o.timeout > 0 && (C = setTimeout(function() {
        S.onreadystatechange = b, S.abort(), y(null, "timeout", S, o, s)
      }, o.timeout)), S.send(o.data ? o.data : null), S
    }, t.get = function() {
      return t.ajax(S.apply(null, arguments))
    }, t.post = function() {
      var e = S.apply(null, arguments);
      return e.type = "POST", t.ajax(e)
    }, t.getJSON = function() {
      var e = S.apply(null, arguments);
      return e.dataType = "json", t.ajax(e)
    }, t.fn.load = function(e, n, r) {
      if (!this.length) return this;
      var i, s = this,
        u = e.split(/\s/),
        a = S(e, n, r),
        f = a.success;
      return u.length > 1 && (a.url = u[0], i = u[1]), a.success = function(e) {
        s.html(i ? t("<div>").html(e.replace(o, "")).find(i) : e), f && f.apply(s, arguments)
      }, t.ajax(a), this
    };
    var T = encodeURIComponent;
    t.param = function(e, n) {
      var r = [];
      return r.add = function(e, n) {
        t.isFunction(n) && (n = n()), null == n && (n = ""), this.push(T(e) + "=" + T(n))
      }, C(r, e, n), r.join("&").replace(/%20/g, "+")
    }
  }(Zepto),
  function(e) {
    e.fn.serializeArray = function() {
      var n, r, i = [],
        s = function(e) {
          return e.forEach ? e.forEach(s) : void i.push({
            name: n,
            value: e
          })
        };
      return this[0] && e.each(this[0].elements, function(i, o) {
        r = o.type, n = o.name, n && "fieldset" != o.nodeName.toLowerCase() && !o.disabled && "submit" != r && "reset" != r && "button" != r && "file" != r && ("radio" != r && "checkbox" != r || o.checked) && s(e(o).val())
      }), i
    }, e.fn.serialize = function() {
      var e = [];
      return this.serializeArray().forEach(function(n) {
        e.push(encodeURIComponent(n.name) + "=" + encodeURIComponent(n.value))
      }), e.join("&")
    }, e.fn.submit = function(n) {
      if (0 in arguments) this.bind("submit", n);
      else if (this.length) {
        var r = e.Event("submit");
        this.eq(0).trigger(r), r.isDefaultPrevented() || this.get(0).submit()
      }
      return this
    }
  }(Zepto),
  function(e) {
    "__proto__" in {} || e.extend(e.zepto, {
      Z: function(t, n) {
        return t = t || [], e.extend(t, e.fn), t.selector = n || "", t.__Z = !0, t
      },
      isZ: function(t) {
        return "array" === e.type(t) && "__Z" in t
      }
    });
    try {
      getComputedStyle(void 0)
    } catch (t) {
      var n = getComputedStyle;
      window.getComputedStyle = function(e) {
        try {
          return n(e)
        } catch (t) {
          return null
        }
      }
    }
  }(Zepto);

function getCookie(e) {
  var t, n = new RegExp("(^| )" + e + "=([^;]*)(;|$)");
  return (t = document.cookie.match(n)) ? unescape(t[2]) : null
}
Zepto.config = {
  router: !1,
  autoInit: !1,
  showPageLoadingIndicator: !0
}, jQuery(document).ajaxSend(function(e, t, n) {
  t.setRequestHeader("CSRFToken", getCookie("CSRFToken") ? window.md5(getCookie("CSRFToken")) : ""), t.setRequestHeader("clientType", "H5"), t.setRequestHeader("lang", localStorage.lang)
}), /Android 4\.[0-3]/.test(navigator.appVersion) && window.addEventListener("resize", function() {
  document.activeElement.tagName == "INPUT" && window.setTimeout(function() {
    document.activeElement.scrollIntoViewIfNeeded()
  }, 0)
});
$.smVersion = "0.6.2", + function(e) {
    "use strict";
    var t = {
      autoInit: !1,
      showPageLoadingIndicator: !0,
      router: !0,
      swipePanel: "left",
      swipePanelOnlyClose: !0
    };
    e.smConfig = e.extend(t, e.config)
  }(Zepto), + function(e) {
    "use strict";
    e.compareVersion = function(e, t) {
      var n = e.split("."),
        r = t.split(".");
      if (e === t) return 0;
      for (var i = 0; i < n.length; i++) {
        var s = parseInt(n[i]);
        if (!r[i]) return 1;
        var o = parseInt(r[i]);
        if (o > s) return -1;
        if (s > o) return 1
      }
      return -1
    }, e.getCurrentPage = function() {
      return e(".page-current")[0] || e(".page")[0] || document.body
    }
  }(Zepto),
  function(e) {
    "use strict";

    function t(e, t) {
      function n(e) {
        if (e.target === this)
          for (t.call(this, e), r = 0; r < i.length; r++) s.off(i[r], n)
      }
      var r, i = e,
        s = this;
      if (t)
        for (r = 0; r < i.length; r++) s.on(i[r], n)
    }["width", "height"].forEach(function(t) {
      var n = t.replace(/./, function(e) {
        return e[0].toUpperCase()
      });
      e.fn["outer" + n] = function(e) {
        var n = this;
        if (n) {
          var r = n[t](),
            i = {
              width: ["left", "right"],
              height: ["top", "bottom"]
            };
          return i[t].forEach(function(t) {
            e && (r += parseInt(n.css("margin-" + t), 10))
          }), r
        }
        return null
      }
    }), e.support = function() {
      var e = {
        touch: !!("ontouchstart" in window || window.DocumentTouch && document instanceof window.DocumentTouch)
      };
      return e
    }(), e.touchEvents = {
      start: e.support.touch ? "touchstart" : "mousedown",
      move: e.support.touch ? "touchmove" : "mousemove",
      end: e.support.touch ? "touchend" : "mouseup"
    }, e.getTranslate = function(e, t) {
      var n, r, i, s;
      return "undefined" == typeof t && (t = "x"), i = window.getComputedStyle(e, null), window.WebKitCSSMatrix ? s = new WebKitCSSMatrix("none" === i.webkitTransform ? "" : i.webkitTransform) : (s = i.MozTransform || i.transform || i.getPropertyValue("transform").replace("translate(", "matrix(1, 0, 0, 1,"), n = s.toString().split(",")), "x" === t && (r = window.WebKitCSSMatrix ? s.m41 : 16 === n.length ? parseFloat(n[12]) : parseFloat(n[4])), "y" === t && (r = window.WebKitCSSMatrix ? s.m42 : 16 === n.length ? parseFloat(n[13]) : parseFloat(n[5])), r || 0
    }, e.requestAnimationFrame = function(e) {
      return requestAnimationFrame ? requestAnimationFrame(e) : webkitRequestAnimationFrame ? webkitRequestAnimationFrame(e) : mozRequestAnimationFrame ? mozRequestAnimationFrame(e) : setTimeout(e, 1e3 / 60)
    }, e.cancelAnimationFrame = function(e) {
      return cancelAnimationFrame ? cancelAnimationFrame(e) : webkitCancelAnimationFrame ? webkitCancelAnimationFrame(e) : mozCancelAnimationFrame ? mozCancelAnimationFrame(e) : clearTimeout(e)
    }, e.fn.dataset = function() {
      var t = {},
        n = this[0].dataset;
      for (var r in n) {
        var i = t[r] = n[r];
        "false" === i ? t[r] = !1 : "true" === i ? t[r] = !0 : parseFloat(i) === 1 * i && (t[r] = 1 * i)
      }
      return e.extend({}, t, this[0].__eleData)
    }, e.fn.data = function(t, n) {
      var r = e(this).dataset();
      if (!t) return r;
      if ("undefined" == typeof n) {
        var i = r[t],
          s = this[0].__eleData;
        return s && t in s ? s[t] : i
      }
      for (var o = 0; o < this.length; o++) {
        var u = this[o];
        t in r && delete u.dataset[t], u.__eleData || (u.__eleData = {}), u.__eleData[t] = n
      }
      return this
    }, e.fn.animationEnd = function(e) {
      return t.call(this, ["webkitAnimationEnd", "animationend"], e), this
    }, e.fn.transitionEnd = function(e) {
      return t.call(this, ["webkitTransitionEnd", "transitionend"], e), this
    }, e.fn.transition = function(e) {
      "string" != typeof e && (e += "ms");
      for (var t = 0; t < this.length; t++) {
        var n = this[t].style;
        n.webkitTransitionDuration = n.MozTransitionDuration = n.transitionDuration = e
      }
      return this
    }, e.fn.transform = function(e) {
      for (var t = 0; t < this.length; t++) {
        var n = this[t].style;
        n.webkitTransform = n.MozTransform = n.transform = e
      }
      return this
    }, e.fn.prevAll = function(t) {
      var n = [],
        r = this[0];
      if (!r) return e([]);
      for (; r.previousElementSibling;) {
        var i = r.previousElementSibling;
        t ? e(i).is(t) && n.push(i) : n.push(i), r = i
      }
      return e(n)
    }, e.fn.nextAll = function(t) {
      var n = [],
        r = this[0];
      if (!r) return e([]);
      for (; r.nextElementSibling;) {
        var i = r.nextElementSibling;
        t ? e(i).is(t) && n.push(i) : n.push(i), r = i
      }
      return e(n)
    }, e.fn.show = function() {
      function e(e) {
        var n, r;
        return t[e] || (n = document.createElement(e), document.body.appendChild(n), r = getComputedStyle(n, "").getPropertyValue("display"), n.parentNode.removeChild(n), "none" === r && (r = "block"), t[e] = r), t[e]
      }
      var t = {};
      return this.each(function() {
        "none" === this.style.display && (this.style.display = ""), "none" === getComputedStyle(this, "").getPropertyValue("display"), this.style.display = e(this.nodeName)
      })
    }
  }(Zepto),
  function(e) {
    "use strict";
    var t = {},
      n = navigator.userAgent,
      r = n.match(/(Android);?[\s\/]+([\d.]+)?/),
      i = n.match(/(iPad).*OS\s([\d_]+)/),
      s = n.match(/(iPod)(.*OS\s([\d_]+))?/),
      o = !i && n.match(/(iPhone\sOS)\s([\d_]+)/);
    if (t.ios = t.android = t.iphone = t.ipad = t.androidChrome = !1, r && (t.os = "android", t.osVersion = r[2], t.android = !0, t.androidChrome = n.toLowerCase().indexOf("chrome") >= 0), (i || o || s) && (t.os = "ios", t.ios = !0), o && !s && (t.osVersion = o[2].replace(/_/g, "."), t.iphone = !0), i && (t.osVersion = i[2].replace(/_/g, "."), t.ipad = !0), s && (t.osVersion = s[3] ? s[3].replace(/_/g, ".") : null, t.iphone = !0), t.ios && t.osVersion && n.indexOf("Version/") >= 0 && "10" === t.osVersion.split(".")[0] && (t.osVersion = n.toLowerCase().split("version/")[1].split(" ")[0]), t.webView = (o || i || s) && n.match(/.*AppleWebKit(?!.*Safari)/i), t.os && "ios" === t.os) {
      var u = t.osVersion.split(".");
      t.minimalUi = !t.webView && (s || o) && (1 * u[0] === 7 ? 1 * u[1] >= 1 : 1 * u[0] > 7) && e('meta[name="viewport"]').length > 0 && e('meta[name="viewport"]').attr("content").indexOf("minimal-ui") >= 0
    }
    var a = e(window).width(),
      f = e(window).height();
    t.statusBar = !1, t.webView && a * f === screen.width * screen.height ? t.statusBar = !0 : t.statusBar = !1;
    var l = [];
    if (t.pixelRatio = window.devicePixelRatio || 1, l.push("pixel-ratio-" + Math.floor(t.pixelRatio)), t.pixelRatio >= 2 && l.push("retina"), t.os && (l.push(t.os, t.os + "-" + t.osVersion.split(".")[0], t.os + "-" + t.osVersion.replace(/\./g, "-")), "ios" === t.os))
      for (var c = parseInt(t.osVersion.split(".")[0], 10), h = c - 1; h >= 6; h--) l.push("ios-gt-" + h);
    t.statusBar ? l.push("with-statusbar-overlay") : e("html").removeClass("with-statusbar-overlay"), l.length > 0 && e("html").addClass(l.join(" ")), t.isWeixin = /MicroMessenger/i.test(n), e.device = t
  }(Zepto),
  function() {
    "use strict";

    function e(t, r) {
      function i(e, t) {
        return function() {
          return e.apply(t, arguments)
        }
      }
      var s;
      if (r = r || {}, this.trackingClick = !1, this.trackingClickStart = 0, this.targetElement = null, this.touchStartX = 0, this.touchStartY = 0, this.lastTouchIdentifier = 0, this.touchBoundary = r.touchBoundary || 10, this.layer = t, this.tapDelay = r.tapDelay || 200, this.tapTimeout = r.tapTimeout || 700, !e.notNeeded(t)) {
        for (var o = ["onMouse", "onClick", "onTouchStart", "onTouchMove", "onTouchEnd", "onTouchCancel"], u = this, f = 0, l = o.length; l > f; f++) u[o[f]] = i(u[o[f]], u);
        n && (t.addEventListener("mouseover", this.onMouse, !0), t.addEventListener("mousedown", this.onMouse, !0), t.addEventListener("mouseup", this.onMouse, !0)), t.addEventListener("click", this.onClick, !0), t.addEventListener("touchstart", this.onTouchStart, !1), t.addEventListener("touchmove", this.onTouchMove, !1), t.addEventListener("touchend", this.onTouchEnd, !1), t.addEventListener("touchcancel", this.onTouchCancel, !1), Event.prototype.stopImmediatePropagation || (t.removeEventListener = function(e, n, r) {
          var i = Node.prototype.removeEventListener;
          "click" === e ? i.call(t, e, n.hijacked || n, r) : i.call(t, e, n, r)
        }, t.addEventListener = function(e, n, r) {
          var i = Node.prototype.addEventListener;
          "click" === e ? i.call(t, e, n.hijacked || (n.hijacked = function(e) {
            e.propagationStopped || n(e)
          }), r) : i.call(t, e, n, r)
        }), "function" == typeof t.onclick && (s = t.onclick, t.addEventListener("click", function(e) {
          s(e)
        }, !1), t.onclick = null)
      }
    }
    var t = navigator.userAgent.indexOf("Windows Phone") >= 0,
      n = navigator.userAgent.indexOf("Android") > 0 && !t,
      r = /iP(ad|hone|od)/.test(navigator.userAgent) && !t,
      i = r && /OS 4_\d(_\d)?/.test(navigator.userAgent),
      s = r && /OS [6-7]_\d/.test(navigator.userAgent),
      o = navigator.userAgent.indexOf("BB10") > 0,
      u = !1;
    e.prototype.needsClick = function(e) {
      for (var t = e; t && "BODY" !== t.tagName.toUpperCase();) {
        if ("LABEL" === t.tagName.toUpperCase() && (u = !0, /\bneedsclick\b/.test(t.className))) return !0;
        t = t.parentNode
      }
      switch (e.nodeName.toLowerCase()) {
        case "button":
        case "select":
        case "textarea":
          if (e.disabled) return !0;
          break;
        case "input":
          if (r && "file" === e.type || e.disabled) return !0;
          break;
        case "label":
        case "iframe":
        case "video":
          return !0
      }
      return /\bneedsclick\b/.test(e.className)
    }, e.prototype.needsFocus = function(e) {
      switch (e.nodeName.toLowerCase()) {
        case "textarea":
          return !0;
        case "select":
          return !n;
        case "input":
          switch (e.type) {
            case "button":
            case "checkbox":
            case "file":
            case "image":
            case "radio":
            case "submit":
              return !1
          }
          return !e.disabled && !e.readOnly;
        default:
          return /\bneedsfocus\b/.test(e.className)
      }
    }, e.prototype.sendClick = function(e, t) {
      var n, r;
      document.activeElement && document.activeElement !== e && document.activeElement.blur(), r = t.changedTouches[0], n = document.createEvent("MouseEvents"), n.initMouseEvent(this.determineEventType(e), !0, !0, window, 1, r.screenX, r.screenY, r.clientX, r.clientY, !1, !1, !1, !1, 0, null), n.forwardedTouchEvent = !0, e.dispatchEvent(n)
    }, e.prototype.determineEventType = function(e) {
      return n && "select" === e.tagName.toLowerCase() ? "mousedown" : "click"
    }, e.prototype.focus = function(e) {
      var t, n = ["date", "time", "month", "number", "email"];
      r && e.setSelectionRange && -1 === n.indexOf(e.type) ? (t = e.value.length, e.setSelectionRange(t, t)) : e.focus()
    }, e.prototype.updateScrollParent = function(e) {
      var t, n;
      if (t = e.fastClickScrollParent, !t || !t.contains(e)) {
        n = e;
        do {
          if (n.scrollHeight > n.offsetHeight) {
            t = n, e.fastClickScrollParent = n;
            break
          }
          n = n.parentElement
        } while (n)
      }
      t && (t.fastClickLastScrollTop = t.scrollTop)
    }, e.prototype.getTargetElementFromEventTarget = function(e) {
      return e.nodeType === Node.TEXT_NODE ? e.parentNode : e
    }, e.prototype.onTouchStart = function(e) {
      var t, n, s;
      if (e.targetTouches.length > 1) return !0;
      if (t = this.getTargetElementFromEventTarget(e.target), n = e.targetTouches[0], r) {
        if (s = window.getSelection(), s.rangeCount && !s.isCollapsed) return !0;
        if (!i) {
          if (n.identifier && n.identifier === this.lastTouchIdentifier) return e.preventDefault(), !1;
          this.lastTouchIdentifier = n.identifier, this.updateScrollParent(t)
        }
      }
      return this.trackingClick = !0, this.trackingClickStart = e.timeStamp, this.targetElement = t, this.touchStartX = n.pageX, this.touchStartY = n.pageY, e.timeStamp - this.lastClickTime < this.tapDelay && e.preventDefault(), !0
    }, e.prototype.touchHasMoved = function(e) {
      var t = e.changedTouches[0],
        n = this.touchBoundary;
      return Math.abs(t.pageX - this.touchStartX) > n || Math.abs(t.pageY - this.touchStartY) > n ? !0 : !1
    }, e.prototype.onTouchMove = function(e) {
      return this.trackingClick ? ((this.targetElement !== this.getTargetElementFromEventTarget(e.target) || this.touchHasMoved(e)) && (this.trackingClick = !1, this.targetElement = null), !0) : !0
    }, e.prototype.findControl = function(e) {
      return void 0 !== e.control ? e.control : e.htmlFor ? document.getElementById(e.htmlFor) : e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")
    }, e.prototype.onTouchEnd = function(e) {
      var t, o, u, a, l, h = this.targetElement;
      if (!this.trackingClick) return !0;
      if (e.timeStamp - this.lastClickTime < this.tapDelay) return this.cancelNextClick = !0, !0;
      if (e.timeStamp - this.trackingClickStart > this.tapTimeout) return !0;
      var p = ["date", "time", "month"];
      if (-1 !== p.indexOf(e.target.type)) return !1;
      if (this.cancelNextClick = !1, this.lastClickTime = e.timeStamp, o = this.trackingClickStart, this.trackingClick = !1, this.trackingClickStart = 0, s && (l = e.changedTouches[0], h = document.elementFromPoint(l.pageX - window.pageXOffset, l.pageY - window.pageYOffset) || h, h.fastClickScrollParent = this.targetElement.fastClickScrollParent), u = h.tagName.toLowerCase(), "label" === u) {
        if (t = this.findControl(h)) {
          if (this.focus(h), n) return !1;
          h = t
        }
      } else if (this.needsFocus(h)) return e.timeStamp - o > 100 || r && window.top !== window && "input" === u ? (this.targetElement = null, !1) : (this.focus(h), this.sendClick(h, e), r && "select" === u || (this.targetElement = null, e.preventDefault()), !1);
      return r && !i && (a = h.fastClickScrollParent, a && a.fastClickLastScrollTop !== a.scrollTop) ? !0 : (this.needsClick(h) || (e.preventDefault(), this.sendClick(h, e)), !1)
    }, e.prototype.onTouchCancel = function() {
      this.trackingClick = !1, this.targetElement = null
    }, e.prototype.onMouse = function(e) {
      return this.targetElement ? e.forwardedTouchEvent ? !0 : e.cancelable && (!this.needsClick(this.targetElement) || this.cancelNextClick) ? (e.stopImmediatePropagation ? e.stopImmediatePropagation() : e.propagationStopped = !0, e.stopPropagation(), u || e.preventDefault(), !1) : !0 : !0
    }, e.prototype.onClick = function(e) {
      var t;
      return this.trackingClick ? (this.targetElement = null, this.trackingClick = !1, !0) : "submit" === e.target.type && 0 === e.detail ? !0 : (t = this.onMouse(e), t || (this.targetElement = null), t)
    }, e.prototype.destroy = function() {
      var e = this.layer;
      n && (e.removeEventListener("mouseover", this.onMouse, !0), e.removeEventListener("mousedown", this.onMouse, !0), e.removeEventListener("mouseup", this.onMouse, !0)), e.removeEventListener("click", this.onClick, !0), e.removeEventListener("touchstart", this.onTouchStart, !1), e.removeEventListener("touchmove", this.onTouchMove, !1), e.removeEventListener("touchend", this.onTouchEnd, !1), e.removeEventListener("touchcancel", this.onTouchCancel, !1)
    }, e.notNeeded = function(e) {
      var t, r, i, s;
      if ("undefined" == typeof window.ontouchstart) return !0;
      if (r = +(/Chrome\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1]) {
        if (!n) return !0;
        if (t = document.querySelector("meta[name=viewport]")) {
          if (-1 !== t.content.indexOf("user-scalable=no")) return !0;
          if (r > 31 && document.documentElement.scrollWidth <= window.outerWidth) return !0
        }
      }
      if (o && (i = navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/), i[1] >= 10 && i[2] >= 3 && (t = document.querySelector("meta[name=viewport]")))) {
        if (-1 !== t.content.indexOf("user-scalable=no")) return !0;
        if (document.documentElement.scrollWidth <= window.outerWidth) return !0
      }
      return "none" === e.style.msTouchAction || "manipulation" === e.style.touchAction ? !0 : (s = +(/Firefox\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1], s >= 27 && (t = document.querySelector("meta[name=viewport]"), t && (-1 !== t.content.indexOf("user-scalable=no") || document.documentElement.scrollWidth <= window.outerWidth)) ? !0 : "none" === e.style.touchAction || "manipulation" === e.style.touchAction ? !0 : !1)
    }, e.attach = function(t, n) {
      return new e(t, n)
    }, window.FastClick = e
  }(), + function(e) {
    "use strict";

    function t(t) {
      var n, i = e(this),
        s = (i.attr("href"), i.dataset());
      i.hasClass("open-popup") && (n = s.popup ? s.popup : ".popup", e.popup(n)), i.hasClass("close-popup") && (n = s.popup ? s.popup : ".popup.modal-in", e.closeModal(n)), i.hasClass("modal-overlay") && (e(".modal.modal-in").length > 0 && r.modalCloseByOutside && e.closeModal(".modal.modal-in"), e(".actions-modal.modal-in").length > 0 && r.actionsCloseByOutside && e.closeModal(".actions-modal.modal-in")), i.hasClass("popup-overlay") && e(".popup.modal-in").length > 0 && r.popupCloseByOutside && e.closeModal(".popup.modal-in")
    }
    var n = document.createElement("div");
    e.modalStack = [], e.modalStackClearQueue = function() {
      e.modalStack.length && e.modalStack.shift()()
    }, e.modal = function(t) {
      t = t || {};
      var i = "",
        s = "";
      if (t.buttons && t.buttons.length > 0)
        for (var o = 0; o < t.buttons.length; o++) s += '<span class="modal-button' + (t.buttons[o].bold ? " modal-button-bold" : "") + '">' + t.buttons[o].text + "</span>";
      var u = t.extraClass || "",
        f = t.title ? '<div class="modal-title">' + t.title + "</div>" : "",
        l = t.text ? '<div class="modal-text">' + t.text + "</div>" : "",
        h = t.afterText ? t.afterText : "",
        p = t.buttons && 0 !== t.buttons.length ? "" : "modal-no-buttons",
        v = t.verticalButtons ? "modal-buttons-vertical" : "";
      i = '<div class="modal ' + u + " " + p + '"><div class="modal-inner">' + (f + l + h) + '</div><div class="modal-buttons ' + v + '">' + s + "</div></div>", n.innerHTML = i;
      var m = e(n).children();
      return e(r.modalContainer).append(m[0]), m.find(".modal-button").each(function(n, r) {
        e(r).on("click", function(r) {
          t.buttons[n].close !== !1 && e.closeModal(m), t.buttons[n].onClick && t.buttons[n].onClick(m, r), t.onClick && t.onClick(m, n)
        })
      }), e.openModal(m), m[0]
    }, e.alert = function(t, n, i) {
      return "function" == typeof n && (i = arguments[1], n = void 0), e.modal({
        text: t || "",
        title: "undefined" == typeof n ? r.modalTitle : n,
        buttons: [{
          text: r.modalButtonOk,
          bold: !0,
          onClick: i
        }]
      })
    }, e.confirm = function(t, n, i, s) {
      return "function" == typeof n && (s = arguments[2], i = arguments[1], n = void 0), e.modal({
        text: t || "",
        title: "undefined" == typeof n ? r.modalTitle : n,
        buttons: [{
          text: r.modalButtonCancel,
          onClick: s
        }, {
          text: r.modalButtonOk,
          bold: !0,
          onClick: i
        }]
      })
    }, e.prompt = function(t, n, i, s) {
      return "function" == typeof n && (s = arguments[2], i = arguments[1], n = void 0), e.modal({
        text: t || "",
        title: "undefined" == typeof n ? r.modalTitle : n,
        afterText: '<input type="text" class="modal-text-input">',
        buttons: [{
          text: r.modalButtonCancel
        }, {
          text: r.modalButtonOk,
          bold: !0
        }],
        onClick: function(t, n) {
          0 === n && s && s(e(t).find(".modal-text-input").val()), 1 === n && i && i(e(t).find(".modal-text-input").val())
        }
      })
    }, e.modalLogin = function(t, n, i, s) {
      return "function" == typeof n && (s = arguments[2], i = arguments[1], n = void 0), e.modal({
        text: t || "",
        title: "undefined" == typeof n ? r.modalTitle : n,
        afterText: '<input type="text" name="modal-username" placeholder="' + r.modalUsernamePlaceholder + '" class="modal-text-input modal-text-input-double"><input type="password" name="modal-password" placeholder="' + r.modalPasswordPlaceholder + '" class="modal-text-input modal-text-input-double">',
        buttons: [{
          text: r.modalButtonCancel
        }, {
          text: r.modalButtonOk,
          bold: !0
        }],
        onClick: function(t, n) {
          var r = e(t).find('.modal-text-input[name="modal-username"]').val(),
            o = e(t).find('.modal-text-input[name="modal-password"]').val();
          0 === n && s && s(r, o), 1 === n && i && i(r, o)
        }
      })
    }, e.modalPassword = function(t, n, i, s) {
      return "function" == typeof n && (s = arguments[2], i = arguments[1], n = void 0), e.modal({
        text: t || "",
        title: "undefined" == typeof n ? r.modalTitle : n,
        afterText: '<input type="password" name="modal-password" placeholder="' + r.modalPasswordPlaceholder + '" class="modal-text-input">',
        buttons: [{
          text: r.modalButtonCancel
        }, {
          text: r.modalButtonOk,
          bold: !0
        }],
        onClick: function(t, n) {
          var r = e(t).find('.modal-text-input[name="modal-password"]').val();
          0 === n && s && s(r), 1 === n && i && i(r)
        }
      })
    }, e.showPreloader = function(t) {
      return e.hidePreloader(), e.showPreloader.preloaderModal = e.modal({
        title: t || r.modalPreloaderTitle,
        text: '<div class="preloader"></div>'
      }), e.showPreloader.preloaderModal
    }, e.hidePreloader = function() {
      e.showPreloader.preloaderModal && e.closeModal(e.showPreloader.preloaderModal)
    }, e.showIndicator = function() {
      e(".preloader-indicator-modal")[0] || e(r.modalContainer).append('<div class="preloader-indicator-overlay"></div><div class="preloader-indicator-modal"><span class="preloader preloader-white"></span></div>')
    }, e.hideIndicator = function() {
      e(".preloader-indicator-overlay, .preloader-indicator-modal").remove()
    }, e.actions = function(t) {
      var i, s, o;
      t = t || [], t.length > 0 && !e.isArray(t[0]) && (t = [t]);
      for (var u, f = "", l = 0; l < t.length; l++)
        for (var h = 0; h < t[l].length; h++) {
          0 === h && (f += '<div class="actions-modal-group">');
          var p = t[l][h],
            v = p.label ? "actions-modal-label" : "actions-modal-button";
          p.bold && (v += " actions-modal-button-bold"), p.color && (v += " color-" + p.color), p.bg && (v += " bg-" + p.bg), p.disabled && (v += " disabled"), f += '<span class="' + v + '">' + p.text + "</span>", h === t[l].length - 1 && (f += "</div>")
        }
      u = '<div class="actions-modal">' + f + "</div>", n.innerHTML = u, i = e(n).children(), e(r.modalContainer).append(i[0]), s = ".actions-modal-group", o = ".actions-modal-button";
      var m = i.find(s);
      return m.each(function(n, r) {
        var s = n;
        e(r).children().each(function(n, r) {
          var u, f = n,
            l = t[s][f];
          e(r).is(o) && (u = e(r)), u && u.on("click", function(t) {
            l.close !== !1 && e.closeModal(i), l.onClick && l.onClick(i, t)
          })
        })
      }), e.openModal(i), i[0]
    }, e.popup = function(t, n) {
      if ("undefined" == typeof n && (n = !0), "string" == typeof t && t.indexOf("<") >= 0) {
        var i = document.createElement("div");
        if (i.innerHTML = t.trim(), !(i.childNodes.length > 0)) return !1;
        t = i.childNodes[0], n && t.classList.add("remove-on-close"), e(r.modalContainer).append(t)
      }
      return t = e(t), 0 === t.length ? !1 : (t.show(), t.find(".content").scroller("refresh"), t.find("." + r.viewClass).length > 0 && e.sizeNavbars(t.find("." + r.viewClass)[0]), e.openModal(t), t[0])
    }, e.pickerModal = function(t, n) {
      if ("undefined" == typeof n && (n = !0), "string" == typeof t && t.indexOf("<") >= 0) {
        if (t = e(t), !(t.length > 0)) return !1;
        n && t.addClass("remove-on-close"), e(r.modalContainer).append(t[0])
      }
      return t = e(t), 0 === t.length ? !1 : (t.show(), e.openModal(t), t[0])
    }, e.loginScreen = function(t) {
      return t || (t = ".login-screen"), t = e(t), 0 === t.length ? !1 : (t.show(), t.find("." + r.viewClass).length > 0 && e.sizeNavbars(t.find("." + r.viewClass)[0]), e.openModal(t), t[0])
    }, e.toast = function(t, n, r) {
      var i = e('<div class="modal toast ' + (r || "") + '">' + t + "</div>").appendTo(document.body);
      e.openModal(i, function() {
        setTimeout(function() {
          e.closeModal(i)
        }, n || 2e3)
      })
    }, e.openModal = function(t, n) {
      t = e(t);
      var i = t.hasClass("modal"),
        s = !t.hasClass("toast");
      if (e(".modal.modal-in:not(.modal-out)").length && r.modalStack && i && s) return void e.modalStack.push(function() {
        e.openModal(t, n)
      });
      var o = t.hasClass("popup"),
        u = t.hasClass("login-screen"),
        f = t.hasClass("picker-modal"),
        l = t.hasClass("toast");
      i && (t.show(), t.css({
        marginTop: -Math.round(t.outerHeight() / 2) + "px"
      })), l && t.css({
        marginLeft: -Math.round(t.outerWidth() / 2 / 1.185) + "px"
      });
      var c;
      return u || f || l || (0 !== e(".modal-overlay").length || o || e(r.modalContainer).append('<div class="modal-overlay"></div>'), 0 === e(".popup-overlay").length && o && e(r.modalContainer).append('<div class="popup-overlay"></div>'), c = e(o ? ".popup-overlay" : ".modal-overlay")), t[0].clientLeft, t.trigger("open"), f && e(r.modalContainer).addClass("with-picker-modal"), u || f || l || c.addClass("modal-overlay-visible"), t.removeClass("modal-out").addClass("modal-in").transitionEnd(function(e) {
        t.hasClass("modal-out") ? t.trigger("closed") : t.trigger("opened")
      }), "function" == typeof n && n.call(this), !0
    }, e.closeModal = function(t) {
      if (t = e(t || ".modal-in"), "undefined" == typeof t || 0 !== t.length) {
        var n = t.hasClass("modal"),
          i = t.hasClass("popup"),
          s = t.hasClass("toast"),
          o = t.hasClass("login-screen"),
          u = t.hasClass("picker-modal"),
          f = t.hasClass("remove-on-close"),
          l = e(i ? ".popup-overlay" : ".modal-overlay");
        return i ? t.length === e(".popup.modal-in").length && l.removeClass("modal-overlay-visible") : u || s || l.removeClass("modal-overlay-visible"), t.trigger("close"), u && (e(r.modalContainer).removeClass("with-picker-modal"), e(r.modalContainer).addClass("picker-modal-closing")), t.removeClass("modal-in").addClass("modal-out").transitionEnd(function(n) {
          t.hasClass("modal-out") ? t.trigger("closed") : t.trigger("opened"), u && e(r.modalContainer).removeClass("picker-modal-closing"), i || o || u ? (t.removeClass("modal-out").hide(), f && t.length > 0 && t.remove()) : t.remove()
        }), n && r.modalStack && e.modalStackClearQueue(), !0
      }
    }, e(document).on("click", " .modal-overlay, .popup-overlay, .close-popup, .open-popup, .close-picker", t);
    var r = e.modal.prototype.defaults = {
      modalStack: !0,
      modalButtonOk: "纭畾",
      modalButtonCancel: "鍙栨秷",
      modalPreloaderTitle: "鍔犺浇涓�",
      modalContainer: document.body
    }
  }(Zepto), + function(e) {
    "use strict";
    var t = !1,
      n = function(n) {
        function r(e) {
          e = new Date(e);
          var t = e.getFullYear(),
            n = e.getMonth(),
            r = n + 1,
            i = e.getDate(),
            s = e.getDay();
          return u.params.dateFormat.replace(/yyyy/g, t).replace(/yy/g, (t + "").substring(2)).replace(/mm/g, 10 > r ? "0" + r : r).replace(/m/g, r).replace(/MM/g, u.params.monthNames[n]).replace(/M/g, u.params.monthNamesShort[n]).replace(/dd/g, 10 > i ? "0" + i : i).replace(/d/g, i).replace(/DD/g, u.params.dayNames[s]).replace(/D/g, u.params.dayNamesShort[s])
        }

        function i(t) {
          if (t.preventDefault(), e.device.isWeixin && e.device.android && u.params.inputReadOnly && (this.focus(), this.blur()), !u.opened && (u.open(), u.params.scrollToInput)) {
            var n = u.input.parents(".content");
            if (0 === n.length) return;
            var r, i = parseInt(n.css("padding-top"), 10),
              s = parseInt(n.css("padding-bottom"), 10),
              o = n[0].offsetHeight - i - u.container.height(),
              f = n[0].scrollHeight - i - u.container.height(),
              l = u.input.offset().top - i + u.input[0].offsetHeight;
            if (l > o) {
              var c = n.scrollTop() + l - o;
              c + o > f && (r = c + o - f + s, o === f && (r = u.container.height()), n.css({
                "padding-bottom": r + "px"
              })), n.scrollTop(c, 300)
            }
          }
        }

        function s(t) {
          u.input && u.input.length > 0 ? t.target !== u.input[0] && 0 === e(t.target).parents(".picker-modal").length && u.close() : 0 === e(t.target).parents(".picker-modal").length && u.close()
        }

        function o() {
          u.opened = !1, u.input && u.input.length > 0 && u.input.parents(".content").css({
            "padding-bottom": ""
          }), u.params.onClose && u.params.onClose(u), u.destroyCalendarEvents()
        }
        var u = this,
          f = {
            monthNames: ["涓€鏈�", "浜屾湀", "涓夋湀", "鍥涙湀", "浜旀湀", "鍏湀", "涓冩湀", "鍏湀", "涔濇湀", "鍗佹湀", "鍗佷竴鏈�", "鍗佷簩鏈�"],
            monthNamesShort: ["涓€鏈�", "浜屾湀", "涓夋湀", "鍥涙湀", "浜旀湀", "鍏湀", "涓冩湀", "鍏湀", "涔濇湀", "鍗佹湀", "鍗佷竴鏈�", "鍗佷簩鏈�"],
            dayNames: ["鍛ㄦ棩", "鍛ㄤ竴", "鍛ㄤ簩", "鍛ㄤ笁", "鍛ㄥ洓", "鍛ㄤ簲", "鍛ㄥ叚"],
            dayNamesShort: ["鍛ㄦ棩", "鍛ㄤ竴", "鍛ㄤ簩", "鍛ㄤ笁", "鍛ㄥ洓", "鍛ㄤ簲", "鍛ㄥ叚"],
            firstDay: 1,
            weekendDays: [0, 6],
            multiple: !1,
            dateFormat: "yyyy-mm-dd",
            direction: "horizontal",
            minDate: null,
            maxDate: null,
            touchMove: !0,
            animate: !0,
            closeOnSelect: !0,
            monthPicker: !0,
            monthPickerTemplate: '<div class="picker-calendar-month-picker"><a href="#" class="link icon-only picker-calendar-prev-month"><i class="icon icon-prev"></i></a><div class="current-month-value"></div><a href="#" class="link icon-only picker-calendar-next-month"><i class="icon icon-next"></i></a></div>',
            yearPicker: !0,
            yearPickerTemplate: '<div class="picker-calendar-year-picker"><a href="#" class="link icon-only picker-calendar-prev-year"><i class="icon icon-prev"></i></a><span class="current-year-value"></span><a href="#" class="link icon-only picker-calendar-next-year"><i class="icon icon-next"></i></a></div>',
            weekHeader: !0,
            scrollToInput: !0,
            inputReadOnly: !0,
            toolbar: !0,
            toolbarCloseText: "Done",
            toolbarTemplate: '<div class="toolbar"><div class="toolbar-inner">{{monthPicker}}{{yearPicker}}</div></div>'
          };
        n = n || {};
        for (var l in f) "undefined" == typeof n[l] && (n[l] = f[l]);
        u.params = n, u.initialized = !1, u.inline = u.params.container ? !0 : !1, u.isH = "horizontal" === u.params.direction;
        var c = u.isH && t ? -1 : 1;
        return u.animating = !1, u.addValue = function(e) {
          if (u.params.multiple) {
            u.value || (u.value = []);
            for (var t, n = 0; n < u.value.length; n++)(new Date(e)).getTime() === (new Date(u.value[n])).getTime() && (t = n);
            "undefined" == typeof t ? u.value.push(e) : u.value.splice(t, 1), u.updateValue()
          } else u.value = [e], u.updateValue()
        }, u.setValue = function(e) {
          u.value = e, u.updateValue()
        }, u.updateValue = function() {
          u.wrapper.find(".picker-calendar-day-selected").removeClass("picker-calendar-day-selected");
          var t, n;
          for (t = 0; t < u.value.length; t++) {
            var i = new Date(u.value[t]);
            u.wrapper.find('.picker-calendar-day[data-date="' + i.getFullYear() + "-" + i.getMonth() + "-" + i.getDate() + '"]').addClass("picker-calendar-day-selected")
          }
          if (u.params.onChange && u.params.onChange(u, u.value, u.value.map(r)), u.input && u.input.length > 0) {
            if (u.params.formatValue) n = u.params.formatValue(u, u.value);
            else {
              for (n = [], t = 0; t < u.value.length; t++) n.push(r(u.value[t]));
              n = n.join(", ")
            }
            e(u.input).val(n), e(u.input).trigger("change")
          }
        }, u.initCalendarEvents = function() {
          function n(e) {
            f || o || (o = !0, l = v = "touchstart" === e.type ? e.targetTouches[0].pageX : e.pageX, p = v = "touchstart" === e.type ? e.targetTouches[0].pageY : e.pageY, m = (new Date).getTime(), x = 0, C = !0, N = void 0, y = w = u.monthsTranslate)
          }

          function r(e) {
            if (o) {
              if (d = "touchmove" === e.type ? e.targetTouches[0].pageX : e.pageX, v = "touchmove" === e.type ? e.targetTouches[0].pageY : e.pageY, "undefined" == typeof N && (N = !!(N || Math.abs(v - p) > Math.abs(d - l))), u.isH && N) return void(o = !1);
              if (e.preventDefault(), u.animating) return void(o = !1);
              C = !1, f || (f = !0, E = u.wrapper[0].offsetWidth, S = u.wrapper[0].offsetHeight, u.wrapper.transition(0)), e.preventDefault(), T = u.isH ? d - l : v - p, x = T / (u.isH ? E : S), w = 100 * (u.monthsTranslate * c + x), u.wrapper.transform("translate3d(" + (u.isH ? w : 0) + "%, " + (u.isH ? 0 : w) + "%, 0)")
            }
          }

          function i(e) {
            return o && f ? (o = f = !1, g = (new Date).getTime(), 300 > g - m ? Math.abs(T) < 10 ? u.resetMonth() : T >= 10 ? t ? u.nextMonth() : u.prevMonth() : t ? u.prevMonth() : u.nextMonth() : -0.5 >= x ? t ? u.prevMonth() : u.nextMonth() : x >= .5 ? t ? u.nextMonth() : u.prevMonth() : u.resetMonth(), void setTimeout(function() {
              C = !0
            }, 100)) : void(o = f = !1)
          }

          function s(t) {
            if (C) {
              var n = e(t.target).parents(".picker-calendar-day");
              if (0 === n.length && e(t.target).hasClass("picker-calendar-day") && (n = e(t.target)), 0 !== n.length && (!n.hasClass("picker-calendar-day-selected") || u.params.multiple) && !n.hasClass("picker-calendar-day-disabled")) {
                n.hasClass("picker-calendar-day-next") && u.nextMonth(), n.hasClass("picker-calendar-day-prev") && u.prevMonth();
                var r = n.attr("data-year"),
                  i = n.attr("data-month"),
                  s = n.attr("data-day");
                u.params.onDayClick && u.params.onDayClick(u, n[0], r, i, s), u.addValue((new Date(r, i, s)).getTime()), u.params.closeOnSelect && u.close()
              }
            }
          }
          var o, f, l, p, d, v, m, g, y, w, E, S, x, T, N, C = !0;
          u.container.find(".picker-calendar-prev-month").on("click", u.prevMonth), u.container.find(".picker-calendar-next-month").on("click", u.nextMonth), u.container.find(".picker-calendar-prev-year").on("click", u.prevYear), u.container.find(".picker-calendar-next-year").on("click", u.nextYear), u.wrapper.on("click", s), u.params.touchMove && (u.wrapper.on(e.touchEvents.start, n), u.wrapper.on(e.touchEvents.move, r), u.wrapper.on(e.touchEvents.end, i)), u.container[0].f7DestroyCalendarEvents = function() {
            u.container.find(".picker-calendar-prev-month").off("click", u.prevMonth), u.container.find(".picker-calendar-next-month").off("click", u.nextMonth), u.container.find(".picker-calendar-prev-year").off("click", u.prevYear), u.container.find(".picker-calendar-next-year").off("click", u.nextYear), u.wrapper.off("click", s), u.params.touchMove && (u.wrapper.off(e.touchEvents.start, n), u.wrapper.off(e.touchEvents.move, r), u.wrapper.off(e.touchEvents.end, i))
          }
        }, u.destroyCalendarEvents = function(e) {
          "f7DestroyCalendarEvents" in u.container[0] && u.container[0].f7DestroyCalendarEvents()
        }, u.daysInMonth = function(e) {
          var t = new Date(e);
          return (new Date(t.getFullYear(), t.getMonth() + 1, 0)).getDate()
        }, u.monthHTML = function(e, t) {
          e = new Date(e);
          var n = e.getFullYear(),
            r = e.getMonth();
          e.getDate(), "next" === t && (e = 11 === r ? new Date(n + 1, 0) : new Date(n, r + 1, 1)), "prev" === t && (e = 0 === r ? new Date(n - 1, 11) : new Date(n, r - 1, 1)), ("next" === t || "prev" === t) && (r = e.getMonth(), n = e.getFullYear());
          var i = u.daysInMonth((new Date(e.getFullYear(), e.getMonth())).getTime() - 864e6),
            s = u.daysInMonth(e),
            o = (new Date(e.getFullYear(), e.getMonth())).getDay();
          0 === o && (o = 7);
          var a, f, l, c = [],
            p = 6,
            d = 7,
            v = "",
            m = 0 + (u.params.firstDay - 1),
            g = (new Date).setHours(0, 0, 0, 0),
            y = u.params.minDate ? (new Date(u.params.minDate)).getTime() : null,
            b = u.params.maxDate ? (new Date(u.params.maxDate)).getTime() : null;
          if (u.value && u.value.length)
            for (f = 0; f < u.value.length; f++) c.push((new Date(u.value[f])).setHours(0, 0, 0, 0));
          for (f = 1; p >= f; f++) {
            var w = "";
            for (l = 1; d >= l; l++) {
              var E = l;
              m++;
              var S = m - o,
                x = "";
              0 > S ? (S = i + S + 1, x += " picker-calendar-day-prev", a = (new Date(0 > r - 1 ? n - 1 : n, 0 > r - 1 ? 11 : r - 1, S)).getTime()) : (S += 1, S > s ? (S -= s, x += " picker-calendar-day-next", a = (new Date(r + 1 > 11 ? n + 1 : n, r + 1 > 11 ? 0 : r + 1, S)).getTime()) : a = (new Date(n, r, S)).getTime()), a === g && (x += " picker-calendar-day-today"), c.indexOf(a) >= 0 && (x += " picker-calendar-day-selected"), u.params.weekendDays.indexOf(E - 1) >= 0 && (x += " picker-calendar-day-weekend"), (y && y > a || b && a > b) && (x += " picker-calendar-day-disabled"), a = new Date(a);
              var T = a.getFullYear(),
                N = a.getMonth();
              w += '<div data-year="' + T + '" data-month="' + N + '" data-day="' + S + '" class="picker-calendar-day' + x + '" data-date="' + (T + "-" + N + "-" + S) + '"><span>' + S + "</span></div>"
            }
            v += '<div class="picker-calendar-row">' + w + "</div>"
          }
          return v = '<div class="picker-calendar-month" data-year="' + n + '" data-month="' + r + '">' + v + "</div>"
        }, u.animating = !1, u.updateCurrentMonthYear = function(e) {
          "undefined" == typeof e ? (u.currentMonth = parseInt(u.months.eq(1).attr("data-month"), 10), u.currentYear = parseInt(u.months.eq(1).attr("data-year"), 10)) : (u.currentMonth = parseInt(u.months.eq("next" === e ? u.months.length - 1 : 0).attr("data-month"), 10), u.currentYear = parseInt(u.months.eq("next" === e ? u.months.length - 1 : 0).attr("data-year"), 10)), u.container.find(".current-month-value").text(u.params.monthNames[u.currentMonth]), u.container.find(".current-year-value").text(u.currentYear)
        }, u.onMonthChangeStart = function(e) {
          u.updateCurrentMonthYear(e), u.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");
          var t = "next" === e ? u.months.length - 1 : 0;
          u.months.eq(t).addClass("picker-calendar-month-current"), u.months.eq("next" === e ? t - 1 : t + 1).addClass("next" === e ? "picker-calendar-month-prev" : "picker-calendar-month-next"), u.params.onMonthYearChangeStart && u.params.onMonthYearChangeStart(u, u.currentYear, u.currentMonth)
        }, u.onMonthChangeEnd = function(e, t) {
          u.animating = !1;
          var n, r, i;
          u.wrapper.find(".picker-calendar-month:not(.picker-calendar-month-prev):not(.picker-calendar-month-current):not(.picker-calendar-month-next)").remove(), "undefined" == typeof e && (e = "next", t = !0), t ? (u.wrapper.find(".picker-calendar-month-next, .picker-calendar-month-prev").remove(), r = u.monthHTML(new Date(u.currentYear, u.currentMonth), "prev"), n = u.monthHTML(new Date(u.currentYear, u.currentMonth), "next")) : i = u.monthHTML(new Date(u.currentYear, u.currentMonth), e), ("next" === e || t) && u.wrapper.append(i || n), ("prev" === e || t) && u.wrapper.prepend(i || r), u.months = u.wrapper.find(".picker-calendar-month"), u.setMonthsTranslate(u.monthsTranslate), u.params.onMonthAdd && u.params.onMonthAdd(u, "next" === e ? u.months.eq(u.months.length - 1)[0] : u.months.eq(0)[0]), u.params.onMonthYearChangeEnd && u.params.onMonthYearChangeEnd(u, u.currentYear, u.currentMonth)
        }, u.setMonthsTranslate = function(e) {
          e = e || u.monthsTranslate || 0, "undefined" == typeof u.monthsTranslate && (u.monthsTranslate = e), u.months.removeClass("picker-calendar-month-current picker-calendar-month-prev picker-calendar-month-next");
          var t = 100 * -(e + 1) * c,
            n = 100 * -e * c,
            r = 100 * -(e - 1) * c;
          u.months.eq(0).transform("translate3d(" + (u.isH ? t : 0) + "%, " + (u.isH ? 0 : t) + "%, 0)").addClass("picker-calendar-month-prev"), u.months.eq(1).transform("translate3d(" + (u.isH ? n : 0) + "%, " + (u.isH ? 0 : n) + "%, 0)").addClass("picker-calendar-month-current"), u.months.eq(2).transform("translate3d(" + (u.isH ? r : 0) + "%, " + (u.isH ? 0 : r) + "%, 0)").addClass("picker-calendar-month-next")
        }, u.nextMonth = function(t) {
          ("undefined" == typeof t || "object" == typeof t) && (t = "", u.params.animate || (t = 0));
          var n = parseInt(u.months.eq(u.months.length - 1).attr("data-month"), 10),
            r = parseInt(u.months.eq(u.months.length - 1).attr("data-year"), 10),
            i = new Date(r, n),
            s = i.getTime(),
            o = u.animating ? !1 : !0;
          if (u.params.maxDate && s > (new Date(u.params.maxDate)).getTime()) return u.resetMonth();
          if (u.monthsTranslate--, n === u.currentMonth) {
            var f = 100 * -u.monthsTranslate * c,
              l = e(u.monthHTML(s, "next")).transform("translate3d(" + (u.isH ? f : 0) + "%, " + (u.isH ? 0 : f) + "%, 0)").addClass("picker-calendar-month-next");
            u.wrapper.append(l[0]), u.months = u.wrapper.find(".picker-calendar-month"), u.params.onMonthAdd && u.params.onMonthAdd(u, u.months.eq(u.months.length - 1)[0])
          }
          u.animating = !0, u.onMonthChangeStart("next");
          var p = 100 * u.monthsTranslate * c;
          u.wrapper.transition(t).transform("translate3d(" + (u.isH ? p : 0) + "%, " + (u.isH ? 0 : p) + "%, 0)"), o && u.wrapper.transitionEnd(function() {
            u.onMonthChangeEnd("next")
          }), u.params.animate || u.onMonthChangeEnd("next")
        }, u.prevMonth = function(t) {
          ("undefined" == typeof t || "object" == typeof t) && (t = "", u.params.animate || (t = 0));
          var n = parseInt(u.months.eq(0).attr("data-month"), 10),
            r = parseInt(u.months.eq(0).attr("data-year"), 10),
            i = new Date(r, n + 1, -1),
            s = i.getTime(),
            o = u.animating ? !1 : !0;
          if (u.params.minDate && s < (new Date(u.params.minDate)).getTime()) return u.resetMonth();
          if (u.monthsTranslate++, n === u.currentMonth) {
            var f = 100 * -u.monthsTranslate * c,
              l = e(u.monthHTML(s, "prev")).transform("translate3d(" + (u.isH ? f : 0) + "%, " + (u.isH ? 0 : f) + "%, 0)").addClass("picker-calendar-month-prev");
            u.wrapper.prepend(l[0]), u.months = u.wrapper.find(".picker-calendar-month"), u.params.onMonthAdd && u.params.onMonthAdd(u, u.months.eq(0)[0])
          }
          u.animating = !0, u.onMonthChangeStart("prev");
          var p = 100 * u.monthsTranslate * c;
          u.wrapper.transition(t).transform("translate3d(" + (u.isH ? p : 0) + "%, " + (u.isH ? 0 : p) + "%, 0)"), o && u.wrapper.transitionEnd(function() {
            u.onMonthChangeEnd("prev")
          }), u.params.animate || u.onMonthChangeEnd("prev")
        }, u.resetMonth = function(e) {
          "undefined" == typeof e && (e = "");
          var t = 100 * u.monthsTranslate * c;
          u.wrapper.transition(e).transform("translate3d(" + (u.isH ? t : 0) + "%, " + (u.isH ? 0 : t) + "%, 0)")
        }, u.setYearMonth = function(e, t, n) {
          "undefined" == typeof e && (e = u.currentYear), "undefined" == typeof t && (t = u.currentMonth), ("undefined" == typeof n || "object" == typeof n) && (n = "", u.params.animate || (n = 0));
          var r;
          if (r = e < u.currentYear ? (new Date(e, t + 1, -1)).getTime() : (new Date(e, t)).getTime(), u.params.maxDate && r > (new Date(u.params.maxDate)).getTime()) return !1;
          if (u.params.minDate && r < (new Date(u.params.minDate)).getTime()) return !1;
          var i = (new Date(u.currentYear, u.currentMonth)).getTime(),
            s = r > i ? "next" : "prev",
            o = u.monthHTML(new Date(e, t));
          u.monthsTranslate = u.monthsTranslate || 0;
          var a, f, l = u.monthsTranslate,
            p = u.animating ? !1 : !0;
          r > i ? (u.monthsTranslate--, u.animating || u.months.eq(u.months.length - 1).remove(), u.wrapper.append(o), u.months = u.wrapper.find(".picker-calendar-month"), a = 100 * -(l - 1) * c, u.months.eq(u.months.length - 1).transform("translate3d(" + (u.isH ? a : 0) + "%, " + (u.isH ? 0 : a) + "%, 0)").addClass("picker-calendar-month-next")) : (u.monthsTranslate++, u.animating || u.months.eq(0).remove(), u.wrapper.prepend(o), u.months = u.wrapper.find(".picker-calendar-month"), a = 100 * -(l + 1) * c, u.months.eq(0).transform("translate3d(" + (u.isH ? a : 0) + "%, " + (u.isH ? 0 : a) + "%, 0)").addClass("picker-calendar-month-prev")), u.params.onMonthAdd && u.params.onMonthAdd(u, "next" === s ? u.months.eq(u.months.length - 1)[0] : u.months.eq(0)[0]), u.animating = !0, u.onMonthChangeStart(s), f = 100 * u.monthsTranslate * c, u.wrapper.transition(n).transform("translate3d(" + (u.isH ? f : 0) + "%, " + (u.isH ? 0 : f) + "%, 0)"), p && u.wrapper.transitionEnd(function() {
            u.onMonthChangeEnd(s, !0)
          }), u.params.animate || u.onMonthChangeEnd(s)
        }, u.nextYear = function() {
          u.setYearMonth(u.currentYear + 1)
        }, u.prevYear = function() {
          u.setYearMonth(u.currentYear - 1)
        }, u.layout = function() {
          var e, t = "",
            n = "",
            r = u.value && u.value.length ? u.value[0] : (new Date).setHours(0, 0, 0, 0),
            i = u.monthHTML(r, "prev"),
            s = u.monthHTML(r),
            o = u.monthHTML(r, "next"),
            a = '<div class="picker-calendar-months"><div class="picker-calendar-months-wrapper">' + (i + s + o) + "</div></div>",
            f = "";
          if (u.params.weekHeader) {
            for (e = 0; 7 > e; e++) {
              var l = e + u.params.firstDay > 6 ? e - 7 + u.params.firstDay : e + u.params.firstDay,
                c = u.params.dayNamesShort[l];
              f += '<div class="picker-calendar-week-day ' + (u.params.weekendDays.indexOf(l) >= 0 ? "picker-calendar-week-day-weekend" : "") + '"> ' + c + "</div>"
            }
            f = '<div class="picker-calendar-week-days">' + f + "</div>"
          }
          n = "picker-modal picker-calendar " + (u.params.cssClass || "");
          var p = u.params.toolbar ? u.params.toolbarTemplate.replace(/{{closeText}}/g, u.params.toolbarCloseText) : "";
          u.params.toolbar && (p = u.params.toolbarTemplate.replace(/{{closeText}}/g, u.params.toolbarCloseText).replace(/{{monthPicker}}/g, u.params.monthPicker ? u.params.monthPickerTemplate : "").replace(/{{yearPicker}}/g, u.params.yearPicker ? u.params.yearPickerTemplate : "")), t = '<div class="' + n + '">' + p + '<div class="picker-modal-inner">' + f + a + "</div></div>", u.pickerHTML = t
        }, u.params.input && (u.input = e(u.params.input), u.input.length > 0 && (u.params.inputReadOnly && u.input.prop("readOnly", !0), u.inline || u.input.on("click", i))), u.inline || e("html").on("click", s), u.opened = !1, u.open = function() {
          var t = !1;
          u.opened || (u.value || u.params.value && (u.value = u.params.value, t = !0), u.layout(), u.inline ? (u.container = e(u.pickerHTML), u.container.addClass("picker-modal-inline"), e(u.params.container).append(u.container)) : (u.container = e(e.pickerModal(u.pickerHTML)), e(u.container).on("close", function() {
            o()
          })), u.container[0].f7Calendar = u, u.wrapper = u.container.find(".picker-calendar-months-wrapper"), u.months = u.wrapper.find(".picker-calendar-month"), u.updateCurrentMonthYear(), u.monthsTranslate = 0, u.setMonthsTranslate(), u.initCalendarEvents(), t && u.updateValue()), u.opened = !0, u.initialized = !0, u.params.onMonthAdd && u.months.each(function() {
            u.params.onMonthAdd(u, this)
          }), u.params.onOpen && u.params.onOpen(u)
        }, u.close = function() {
          u.opened && !u.inline && e.closeModal(u.container)
        }, u.destroy = function() {
          u.close(), u.params.input && u.input.length > 0 && u.input.off("click", i), e("html").off("click", s)
        }, u.inline && u.open(), u
      };
    e.fn.calendar = function(t) {
      return this.each(function() {
        var r = e(this);
        if (r[0]) {
          var i = {};
          "INPUT" === r[0].tagName.toUpperCase() ? i.input = r : i.container = r, new n(e.extend(i, t))
        }
      })
    }, e.initCalendar = function(t) {
      var n = e(t ? t : document.body);
      n.find("[data-toggle='date']").each(function() {
        e(this).calendar()
      })
    }
  }(Zepto), + function(e) {
    "use strict";
    var t = function(t) {
      function n() {
        if (o.opened)
          for (var e = 0; e < o.cols.length; e++) o.cols[e].divider || (o.cols[e].calcSize(), o.cols[e].setValue(o.cols[e].value, 0, !1))
      }

      function r(t) {
        if (t.preventDefault(), e.device.isWeixin && e.device.android && o.params.inputReadOnly && (this.focus(), this.blur()), !o.opened && (o.open(), o.params.scrollToInput)) {
          var n = o.input.parents(".content");
          if (0 === n.length) return;
          var r, i = parseInt(n.css("padding-top"), 10),
            s = parseInt(n.css("padding-bottom"), 10),
            u = n[0].offsetHeight - i - o.container.height(),
            f = n[0].scrollHeight - i - o.container.height(),
            l = o.input.offset().top - i + o.input[0].offsetHeight;
          if (l > u) {
            var c = n.scrollTop() + l - u;
            c + u > f && (r = c + u - f + s, u === f && (r = o.container.height()), n.css({
              "padding-bottom": r + "px"
            })), n.scrollTop(c, 300)
          }
        }
      }

      function i(t) {
        o.opened && (o.input && o.input.length > 0 ? t.target !== o.input[0] && 0 === e(t.target).parents(".picker-modal").length && o.close() : 0 === e(t.target).parents(".picker-modal").length && o.close())
      }

      function s() {
        o.opened = !1, o.input && o.input.length > 0 && o.input.parents(".content").css({
          "padding-bottom": ""
        }), o.params.onClose && o.params.onClose(o), o.container.find(".picker-items-col").each(function() {
          o.destroyPickerCol(this)
        })
      }
      var o = this,
        u = {
          updateValuesOnMomentum: !1,
          updateValuesOnTouchmove: !0,
          rotateEffect: !1,
          momentumRatio: 7,
          freeMode: !1,
          scrollToInput: !0,
          inputReadOnly: !0,
          toolbar: !0,
          toolbarCloseText: "纭畾",
          toolbarTemplate: '<header class="bar bar-nav">                <button class="button button-link pull-right close-picker">纭畾</button>                <h1 class="title">璇烽€夋嫨</h1>                </header>'
        };
      t = t || {};
      for (var f in u) "undefined" == typeof t[f] && (t[f] = u[f]);
      o.params = t, o.cols = [], o.initialized = !1, o.inline = o.params.container ? !0 : !1;
      var l = e.device.ios || navigator.userAgent.toLowerCase().indexOf("safari") >= 0 && navigator.userAgent.toLowerCase().indexOf("chrome") < 0 && !e.device.android;
      return o.setValue = function(e, t) {
        for (var n = 0, r = 0; r < o.cols.length; r++) o.cols[r] && !o.cols[r].divider && (o.cols[r].setValue(e[n], t), n++)
      }, o.updateValue = function() {
        for (var t = [], n = [], r = 0; r < o.cols.length; r++) o.cols[r].divider || (t.push(o.cols[r].value), n.push(o.cols[r].displayValue));
        t.indexOf(void 0) >= 0 || (o.value = t, o.displayValue = n, o.params.onChange && o.params.onChange(o, o.value, o.displayValue), o.input && o.input.length > 0 && (e(o.input).val(o.params.formatValue ? o.params.formatValue(o, o.value, o.displayValue) : o.value.join(" ")), e(o.input).trigger("change")))
      }, o.initPickerCol = function(t, n) {
        function r() {
          w = e.requestAnimationFrame(function() {
            p.updateItems(void 0, void 0, 0), r()
          })
        }

        function i(t) {
          S || E || (t.preventDefault(), E = !0, x = T = "touchstart" === t.type ? t.targetTouches[0].pageY : t.pageY, N = (new Date).getTime(), D = !0, k = A = e.getTranslate(p.wrapper[0], "y"))
        }

        function s(t) {
          if (E) {
            t.preventDefault(), D = !1, T = "touchmove" === t.type ? t.targetTouches[0].pageY : t.pageY, S || (e.cancelAnimationFrame(w), S = !0, k = A = e.getTranslate(p.wrapper[0], "y"), p.wrapper.transition(0)), t.preventDefault();
            var n = T - x;
            A = k + n, L = void 0, y > A && (A = y - Math.pow(y - A, .8), L = "min"), A > b && (A = b + Math.pow(A - b, .8), L = "max"), p.wrapper.transform("translate3d(0," + A + "px,0)"), p.updateItems(void 0, A, 0, o.params.updateValuesOnTouchmove), M = A - O || A, _ = (new Date).getTime(), O = A
          }
        }

        function u(t) {
          if (!E || !S) return void(E = S = !1);
          E = S = !1, p.wrapper.transition(""), L && ("min" === L ? p.wrapper.transform("translate3d(0," + y + "px,0)") : p.wrapper.transform("translate3d(0," + b + "px,0)")), C = (new Date).getTime();
          var n, i;
          C - N > 300 ? i = A : (n = Math.abs(M / (C - _)), i = A + M * o.params.momentumRatio), i = Math.max(Math.min(i, b), y);
          var s = -Math.floor((i - b) / v);
          o.params.freeMode || (i = -s * v + b), p.wrapper.transform("translate3d(0," + parseInt(i, 10) + "px,0)"), p.updateItems(s, i, "", !0), o.params.updateValuesOnMomentum && (r(), p.wrapper.transitionEnd(function() {
            e.cancelAnimationFrame(w)
          })), setTimeout(function() {
            D = !0
          }, 100)
        }

        function f(t) {
          if (D) {
            e.cancelAnimationFrame(w);
            var n = e(this).attr("data-picker-value");
            p.setValue(n)
          }
        }
        var c = e(t),
          h = c.index(),
          p = o.cols[h];
        if (!p.divider) {
          p.container = c, p.wrapper = p.container.find(".picker-items-col-wrapper"), p.items = p.wrapper.find(".picker-item");
          var d, v, m, y, b;
          p.replaceValues = function(e, t) {
            p.destroyEvents(), p.values = e, p.displayValues = t;
            var n = o.columnHTML(p, !0);
            p.wrapper.html(n), p.items = p.wrapper.find(".picker-item"), p.calcSize(), p.setValue(p.values[0], 0, !0), p.initEvents()
          }, p.calcSize = function() {
            o.params.rotateEffect && (p.container.removeClass("picker-items-col-absolute"), p.width || p.container.css({
              width: ""
            }));
            var t, n;
            t = 0, n = p.container[0].offsetHeight, d = p.wrapper[0].offsetHeight, v = p.items[0].offsetHeight, m = v * p.items.length, y = n / 2 - m + v / 2, b = n / 2 - v / 2, p.width && (t = p.width, parseInt(t, 10) === t && (t += "px"), p.container.css({
              width: t
            })), o.params.rotateEffect && (p.width || (p.items.each(function() {
              var n = e(this);
              n.css({
                width: "auto"
              }), t = Math.max(t, n[0].offsetWidth), n.css({
                width: ""
              })
            }), p.container.css({
              width: t + 2 + "px"
            })), p.container.addClass("picker-items-col-absolute"))
          }, p.calcSize(), p.wrapper.transform("translate3d(0," + b + "px,0)").transition(0);
          var w;
          p.setValue = function(t, n, i) {
            "undefined" == typeof n && (n = "");
            var s = p.wrapper.find('.picker-item[data-picker-value="' + t + '"]').index();
            if ("undefined" != typeof s && -1 !== s) {
              var u = -s * v + b;
              p.wrapper.transition(n), p.wrapper.transform("translate3d(0," + u + "px,0)"), o.params.updateValuesOnMomentum && p.activeIndex && p.activeIndex !== s && (e.cancelAnimationFrame(w), p.wrapper.transitionEnd(function() {
                e.cancelAnimationFrame(w)
              }), r()), p.updateItems(s, u, n, i)
            }
          }, p.updateItems = function(t, n, r, i) {
            "undefined" == typeof n && (n = e.getTranslate(p.wrapper[0], "y")), "undefined" == typeof t && (t = -Math.round((n - b) / v)), 0 > t && (t = 0), t >= p.items.length && (t = p.items.length - 1);
            var s = p.activeIndex;
            p.activeIndex = t, p.wrapper.find(".picker-selected").removeClass("picker-selected"), o.params.rotateEffect && p.items.transition(r);
            var u = p.items.eq(t).addClass("picker-selected").transform("");
            if ((i || "undefined" == typeof i) && (p.value = u.attr("data-picker-value"), p.displayValue = p.displayValues ? p.displayValues[t] : p.value, s !== t && (p.onChange && p.onChange(o, p.value, p.displayValue), o.updateValue())), o.params.rotateEffect)(n - (Math.floor((n - b) / v) * v + b)) / v, p.items.each(function() {
              var t = e(this),
                r = t.index() * v,
                i = b - n,
                s = r - i,
                o = s / v,
                u = Math.ceil(p.height / v / 2) + 1,
                f = -18 * o;
              f > 180 && (f = 180), -180 > f && (f = -180), Math.abs(o) > u ? t.addClass("picker-item-far") : t.removeClass("picker-item-far"), t.transform("translate3d(0, " + (-n + b) + "px, " + (l ? -110 : 0) + "px) rotateX(" + f + "deg)")
            })
          }, n && p.updateItems(0, b, 0);
          var E, S, x, T, N, C, k, L, A, O, M, _, D = !0;
          p.initEvents = function(t) {
            var n = t ? "off" : "on";
            p.container[n](e.touchEvents.start, i), p.container[n](e.touchEvents.move, s), p.container[n](e.touchEvents.end, u), p.items[n]("click", f)
          }, p.destroyEvents = function() {
            p.initEvents(!0)
          }, p.container[0].f7DestroyPickerCol = function() {
            p.destroyEvents()
          }, p.initEvents()
        }
      }, o.destroyPickerCol = function(t) {
        t = e(t), "f7DestroyPickerCol" in t[0] && t[0].f7DestroyPickerCol()
      }, e(window).on("resize", n), o.columnHTML = function(e, t) {
        var n = "",
          r = "";
        if (e.divider) r += '<div class="picker-items-col picker-items-col-divider ' + (e.textAlign ? "picker-items-col-" + e.textAlign : "") + " " + (e.cssClass || "") + '">' + e.content + "</div>";
        else {
          for (var i = 0; i < e.values.length; i++) n += '<div class="picker-item" data-picker-value="' + e.values[i] + '">' + (e.displayValues ? e.displayValues[i] : e.values[i]) + "</div>";
          r += '<div class="picker-items-col ' + (e.textAlign ? "picker-items-col-" + e.textAlign : "") + " " + (e.cssClass || "") + '"><div class="picker-items-col-wrapper">' + n + "</div></div>"
        }
        return t ? n : r
      }, o.layout = function() {
        var e, t = "",
          n = "";
        o.cols = [];
        var r = "";
        for (e = 0; e < o.params.cols.length; e++) {
          var i = o.params.cols[e];
          r += o.columnHTML(o.params.cols[e]), o.cols.push(i)
        }
        n = "picker-modal picker-columns " + (o.params.cssClass || "") + (o.params.rotateEffect ? " picker-3d" : ""), t = '<div class="' + n + '">' + (o.params.toolbar ? o.params.toolbarTemplate.replace(/{{closeText}}/g, o.params.toolbarCloseText) : "") + '<div class="picker-modal-inner picker-items">' + r + '<div class="picker-center-highlight"></div></div></div>', o.pickerHTML = t
      }, o.params.input && (o.input = e(o.params.input), o.input.length > 0 && (o.params.inputReadOnly && o.input.prop("readOnly", !0), o.inline || o.input.on("click", r))), o.inline || e("html").on("click", i), o.opened = !1, o.open = function() {
        o.opened || (o.layout(), o.inline ? (o.container = e(o.pickerHTML), o.container.addClass("picker-modal-inline"), e(o.params.container).append(o.container), o.opened = !0) : (o.container = e(e.pickerModal(o.pickerHTML)), e(o.container).one("opened", function() {
          o.opened = !0
        }).on("close", function() {
          s()
        })), o.container[0].f7Picker = o, o.container.find(".picker-items-col").each(function() {
          var e = !0;
          (!o.initialized && o.params.value || o.initialized && o.value) && (e = !1), o.initPickerCol(this, e)
        }), o.initialized ? o.value && o.setValue(o.value, 0) : o.params.value && o.setValue(o.params.value, 0)), o.initialized = !0, o.params.onOpen && o.params.onOpen(o)
      }, o.close = function() {
        o.opened && !o.inline && e.closeModal(o.container)
      }, o.destroy = function() {
        o.close(), o.params.input && o.input.length > 0 && o.input.off("click", r), e("html").off("click", i), e(window).off("resize", n)
      }, o.inline && o.open(), o
    };
    e(document).on("click", ".close-picker", function() {
      var t = e(".picker-modal.modal-in");
      e.closeModal(t)
    }), e.fn.picker = function(n) {
      var r = arguments;
      return this.each(function() {
        if (this) {
          var i = e(this),
            s = i.data("picker");
          if (!s) {
            var o = e.extend({
              input: this,
              value: i.val() ? i.val().split(" ") : ""
            }, n);
            s = new t(o), i.data("picker", s)
          }
          "string" == typeof n && s[n].apply(s, Array.prototype.slice.call(r, 1))
        }
      })
    }
  }(Zepto), + function(e) {
    "use strict";
    var t = new Date,
      n = function(e) {
        for (var t = [], n = 1;
          (e || 31) >= n; n++) t.push(10 > n ? "0" + n : n);
        return t
      },
      r = function(e, t) {
        var r = new Date(t, parseInt(e) + 1 - 1, 1),
          i = new Date(r - 1);
        return n(i.getDate())
      },
      i = function(e) {
        return 10 > e ? "0" + e : e
      },
      s = "01 02 03 04 05 06 07 08 09 10 11 12".split(" "),
      o = function() {
        for (var e = [], t = 1950; 2030 >= t; t++) e.push(t);
        return e
      }(),
      u = {
        rotateEffect: !1,
        value: [t.getFullYear(), i(t.getMonth() + 1), i(t.getDate()), t.getHours(), i(t.getMinutes())],
        onChange: function(e, t, n) {
          var i = r(e.cols[1].value, e.cols[0].value),
            s = e.cols[2].value;
          s > i.length && (s = i.length), e.cols[2].setValue(s)
        },
        formatValue: function(e, t, n) {
          return n[0] + "-" + t[1] + "-" + t[2] + " " + t[3] + ":" + t[4]
        },
        cols: [{
          values: o
        }, {
          values: s
        }, {
          values: n()
        }, {
          divider: !0,
          content: "  "
        }, {
          values: function() {
            for (var e = [], t = 0; 23 >= t; t++) e.push(t);
            return e
          }()
        }, {
          divider: !0,
          content: ":"
        }, {
          values: function() {
            for (var e = [], t = 0; 59 >= t; t++) e.push(10 > t ? "0" + t : t);
            return e
          }()
        }]
      };
    e.fn.datetimePicker = function(t) {
      return this.each(function() {
        if (this) {
          var n = e.extend(u, t);
          e(this).picker(n), t.value && e(this).val(n.formatValue(n, n.value, n.value))
        }
      })
    }
  }(Zepto), + function(e) {
    "use strict";

    function t(e, t) {
      this.wrapper = "string" == typeof e ? document.querySelector(e) : e, this.scroller = $(this.wrapper).find(".content-inner")[0], this.scrollerStyle = this.scroller && this.scroller.style, this.options = {
        resizeScrollbars: !0,
        mouseWheelSpeed: 20,
        snapThreshold: .334,
        startX: 0,
        startY: 0,
        scrollY: !0,
        directionLockThreshold: 5,
        momentum: !0,
        bounce: !0,
        bounceTime: 600,
        bounceEasing: "",
        preventDefault: !0,
        preventDefaultException: {
          tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT)$/
        },
        HWCompositing: !0,
        useTransition: !0,
        useTransform: !0,
        eventPassthrough: void 0
      };
      for (var n in t) this.options[n] = t[n];
      this.translateZ = this.options.HWCompositing && s.hasPerspective ? " translateZ(0)" : "", this.options.useTransition = s.hasTransition && this.options.useTransition, this.options.useTransform = s.hasTransform && this.options.useTransform, this.options.eventPassthrough = this.options.eventPassthrough === !0 ? "vertical" : this.options.eventPassthrough, this.options.preventDefault = !this.options.eventPassthrough && this.options.preventDefault, this.options.scrollY = "vertical" === this.options.eventPassthrough ? !1 : this.options.scrollY, this.options.scrollX = "horizontal" === this.options.eventPassthrough ? !1 : this.options.scrollX, this.options.freeScroll = this.options.freeScroll && !this.options.eventPassthrough, this.options.directionLockThreshold = this.options.eventPassthrough ? 0 : this.options.directionLockThreshold, this.options.bounceEasing = "string" == typeof this.options.bounceEasing ? s.ease[this.options.bounceEasing] || s.ease.circular : this.options.bounceEasing, this.options.resizePolling = void 0 === this.options.resizePolling ? 60 : this.options.resizePolling, this.options.tap === !0 && (this.options.tap = "tap"), "scale" === this.options.shrinkScrollbars && (this.options.useTransition = !1), this.options.invertWheelDirection = this.options.invertWheelDirection ? -1 : 1, 3 === this.options.probeType && (this.options.useTransition = !1), this.x = 0, this.y = 0, this.directionX = 0, this.directionY = 0, this._events = {}, this._init(), this.refresh(), this.scrollTo(this.options.startX, this.options.startY), this.enable()
    }

    function n(e, t, n) {
      var r = document.createElement("div"),
        i = document.createElement("div");
      return n === !0 && (r.style.cssText = "position:absolute;z-index:9999", i.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"), i.className = "iScrollIndicator", "h" === e ? (n === !0 && (r.style.cssText += ";height:5px;left:2px;right:2px;bottom:0", i.style.height = "100%"), r.className = "iScrollHorizontalScrollbar") : (n === !0 && (r.style.cssText += ";width:5px;bottom:2px;top:2px;right:1px", i.style.width = "100%"), r.className = "iScrollVerticalScrollbar"), r.style.cssText += ";overflow:hidden", t || (r.style.pointerEvents = "none"), r.appendChild(i), r
    }

    function r(t, n) {
      this.wrapper = "string" == typeof n.el ? document.querySelector(n.el) : n.el, this.wrapperStyle = this.wrapper.style, this.indicator = this.wrapper.children[0], this.indicatorStyle = this.indicator.style, this.scroller = t, this.options = {
        listenX: !0,
        listenY: !0,
        interactive: !1,
        resize: !0,
        defaultScrollbars: !1,
        shrink: !1,
        fade: !1,
        speedRatioX: 0,
        speedRatioY: 0
      };
      for (var r in n) this.options[r] = n[r];
      this.sizeRatioX = 1, this.sizeRatioY = 1, this.maxPosX = 0, this.maxPosY = 0, this.options.interactive && (this.options.disableTouch || (s.addEvent(this.indicator, "touchstart", this), s.addEvent(e, "touchend", this)), this.options.disablePointer || (s.addEvent(this.indicator, s.prefixPointerEvent("pointerdown"), this), s.addEvent(e, s.prefixPointerEvent("pointerup"), this)), this.options.disableMouse || (s.addEvent(this.indicator, "mousedown", this), s.addEvent(e, "mouseup", this))), this.options.fade && (this.wrapperStyle[s.style.transform] = this.scroller.translateZ, this.wrapperStyle[s.style.transitionDuration] = s.isBadAndroid ? "0.001s" : "0ms", this.wrapperStyle.opacity = "0")
    }
    var i = e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame || e.oRequestAnimationFrame || e.msRequestAnimationFrame || function(t) {
        e.setTimeout(t, 1e3 / 60)
      },
      s = function() {
        function t(e) {
          return s === !1 ? !1 : "" === s ? e : s + e.charAt(0).toUpperCase() + e.substr(1)
        }
        var n = {},
          r = document.createElement("div").style,
          s = function() {
            for (var e, t = ["t", "webkitT", "MozT", "msT", "OT"], n = 0, i = t.length; i > n; n++)
              if (e = t[n] + "ransform", e in r) return t[n].substr(0, t[n].length - 1);
            return !1
          }();
        n.getTime = Date.now || function() {
          return (new Date).getTime()
        }, n.extend = function(e, t) {
          for (var n in t) e[n] = t[n]
        }, n.addEvent = function(e, t, n, r) {
          e.addEventListener(t, n, !!r)
        }, n.removeEvent = function(e, t, n, r) {
          e.removeEventListener(t, n, !!r)
        }, n.prefixPointerEvent = function(t) {
          return e.MSPointerEvent ? "MSPointer" + t.charAt(9).toUpperCase() + t.substr(10) : t
        }, n.momentum = function(e, t, n, r, s, o, u) {
          function a() {
            +(new Date) - d > 50 && (u._execEvent("scroll"), d = +(new Date)), +(new Date) - p < l && i(a)
          }
          var f, l, c = e - t,
            h = Math.abs(c) / n;
          h /= 2, h = h > 1.5 ? 1.5 : h, o = void 0 === o ? 6e-4 : o, f = e + h * h / (2 * o) * (0 > c ? -1 : 1), l = h / o, r > f ? (f = s ? r - s / 2.5 * (h / 8) : r, c = Math.abs(f - e), l = c / h) : f > 0 && (f = s ? s / 2.5 * (h / 8) : 0, c = Math.abs(e) + f, l = c / h);
          var p = +(new Date),
            d = p;
          return i(a), {
            destination: Math.round(f),
            duration: l
          }
        };
        var o = t("transform");
        return n.extend(n, {
          hasTransform: o !== !1,
          hasPerspective: t("perspective") in r,
          hasTouch: "ontouchstart" in e,
          hasPointer: e.PointerEvent || e.MSPointerEvent,
          hasTransition: t("transition") in r
        }), n.isBadAndroid = /Android /.test(e.navigator.appVersion) && !/Chrome\/\d/.test(e.navigator.appVersion) && !1, n.extend(n.style = {}, {
          transform: o,
          transitionTimingFunction: t("transitionTimingFunction"),
          transitionDuration: t("transitionDuration"),
          transitionDelay: t("transitionDelay"),
          transformOrigin: t("transformOrigin")
        }), n.hasClass = function(e, t) {
          var n = new RegExp("(^|\\s)" + t + "(\\s|$)");
          return n.test(e.className)
        }, n.addClass = function(e, t) {
          if (!n.hasClass(e, t)) {
            var r = e.className.split(" ");
            r.push(t), e.className = r.join(" ")
          }
        }, n.removeClass = function(e, t) {
          if (n.hasClass(e, t)) {
            var r = new RegExp("(^|\\s)" + t + "(\\s|$)", "g");
            e.className = e.className.replace(r, " ")
          }
        }, n.offset = function(e) {
          for (var t = -e.offsetLeft, n = -e.offsetTop; e = e.offsetParent;) t -= e.offsetLeft, n -= e.offsetTop;
          return {
            left: t,
            top: n
          }
        }, n.preventDefaultException = function(e, t) {
          for (var n in t)
            if (t[n].test(e[n])) return !0;
          return !1
        }, n.extend(n.eventType = {}, {
          touchstart: 1,
          touchmove: 1,
          touchend: 1,
          mousedown: 2,
          mousemove: 2,
          mouseup: 2,
          pointerdown: 3,
          pointermove: 3,
          pointerup: 3,
          MSPointerDown: 3,
          MSPointerMove: 3,
          MSPointerUp: 3
        }), n.extend(n.ease = {}, {
          quadratic: {
            style: "cubic-bezier(0.25, 0.46, 0.45, 0.94)",
            fn: function(e) {
              return e * (2 - e)
            }
          },
          circular: {
            style: "cubic-bezier(0.1, 0.57, 0.1, 1)",
            fn: function(e) {
              return Math.sqrt(1 - --e * e)
            }
          },
          back: {
            style: "cubic-bezier(0.175, 0.885, 0.32, 1.275)",
            fn: function(e) {
              var t = 4;
              return (e -= 1) * e * ((t + 1) * e + t) + 1
            }
          },
          bounce: {
            style: "",
            fn: function(e) {
              return (e /= 1) < 1 / 2.75 ? 7.5625 * e * e : 2 / 2.75 > e ? 7.5625 * (e -= 1.5 / 2.75) * e + .75 : 2.5 / 2.75 > e ? 7.5625 * (e -= 2.25 / 2.75) * e + .9375 : 7.5625 * (e -= 2.625 / 2.75) * e + .984375
            }
          },
          elastic: {
            style: "",
            fn: function(e) {
              var t = .22,
                n = .4;
              return 0 === e ? 0 : 1 === e ? 1 : n * Math.pow(2, -10 * e) * Math.sin((e - t / 4) * 2 * Math.PI / t) + 1
            }
          }
        }), n.tap = function(e, t) {
          var n = document.createEvent("Event");
          n.initEvent(t, !0, !0), n.pageX = e.pageX, n.pageY = e.pageY, e.target.dispatchEvent(n)
        }, n.click = function(e) {
          var t, n = e.target;
          /(SELECT|INPUT|TEXTAREA)/i.test(n.tagName) || (t = document.createEvent("MouseEvents"), t.initMouseEvent("click", !0, !0, e.view, 1, n.screenX, n.screenY, n.clientX, n.clientY, e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, 0, null), t._constructed = !0, n.dispatchEvent(t))
        }, n
      }();
    t.prototype = {
      version: "5.1.3",
      _init: function() {
        this._initEvents(), (this.options.scrollbars || this.options.indicators) && this._initIndicators(), this.options.mouseWheel && this._initWheel(), this.options.snap && this._initSnap(), this.options.keyBindings && this._initKeys()
      },
      destroy: function() {
        this._initEvents(!0), this._execEvent("destroy")
      },
      _transitionEnd: function(e) {
        e.target === this.scroller && this.isInTransition && (this._transitionTime(), this.resetPosition(this.options.bounceTime) || (this.isInTransition = !1, this._execEvent("scrollEnd")))
      },
      _start: function(e) {
        if ((1 === s.eventType[e.type] || 0 === e.button) && this.enabled && (!this.initiated || s.eventType[e.type] === this.initiated)) {
          !this.options.preventDefault || s.isBadAndroid || s.preventDefaultException(e.target, this.options.preventDefaultException) || e.preventDefault();
          var t, n = e.touches ? e.touches[0] : e;
          this.initiated = s.eventType[e.type], this.moved = !1, this.distX = 0, this.distY = 0, this.directionX = 0, this.directionY = 0, this.directionLocked = 0, this._transitionTime(), this.startTime = s.getTime(), this.options.useTransition && this.isInTransition ? (this.isInTransition = !1, t = this.getComputedPosition(), this._translate(Math.round(t.x), Math.round(t.y)), this._execEvent("scrollEnd")) : !this.options.useTransition && this.isAnimating && (this.isAnimating = !1, this._execEvent("scrollEnd")), this.startX = this.x, this.startY = this.y, this.absStartX = this.x, this.absStartY = this.y, this.pointX = n.pageX, this.pointY = n.pageY, this._execEvent("beforeScrollStart")
        }
      },
      _move: function(e) {
        if (this.enabled && s.eventType[e.type] === this.initiated) {
          this.options.preventDefault && e.preventDefault();
          var t, n, r, i, o = e.touches ? e.touches[0] : e,
            u = o.pageX - this.pointX,
            a = o.pageY - this.pointY,
            l = s.getTime();
          if (this.pointX = o.pageX, this.pointY = o.pageY, this.distX += u, this.distY += a, r = Math.abs(this.distX), i = Math.abs(this.distY), !(l - this.endTime > 300 && 10 > r && 10 > i)) {
            if (this.directionLocked || this.options.freeScroll || (r > i + this.options.directionLockThreshold ? this.directionLocked = "h" : i >= r + this.options.directionLockThreshold ? this.directionLocked = "v" : this.directionLocked = "n"), "h" === this.directionLocked) {
              if ("vertical" === this.options.eventPassthrough) e.preventDefault();
              else if ("horizontal" === this.options.eventPassthrough) return void(this.initiated = !1);
              a = 0
            } else if ("v" === this.directionLocked) {
              if ("horizontal" === this.options.eventPassthrough) e.preventDefault();
              else if ("vertical" === this.options.eventPassthrough) return void(this.initiated = !1);
              u = 0
            }
            u = this.hasHorizontalScroll ? u : 0, a = this.hasVerticalScroll ? a : 0, t = this.x + u, n = this.y + a, (t > 0 || t < this.maxScrollX) && (t = this.options.bounce ? this.x + u / 3 : t > 0 ? 0 : this.maxScrollX), (n > 0 || n < this.maxScrollY) && (n = this.options.bounce ? this.y + a / 3 : n > 0 ? 0 : this.maxScrollY), this.directionX = u > 0 ? -1 : 0 > u ? 1 : 0, this.directionY = a > 0 ? -1 : 0 > a ? 1 : 0, this.moved || this._execEvent("scrollStart"), this.moved = !0, this._translate(t, n), l - this.startTime > 300 && (this.startTime = l, this.startX = this.x, this.startY = this.y, 1 === this.options.probeType && this._execEvent("scroll")), this.options.probeType > 1 && this._execEvent("scroll")
          }
        }
      },
      _end: function(e) {
        if (this.enabled && s.eventType[e.type] === this.initiated) {
          this.options.preventDefault && !s.preventDefaultException(e.target, this.options.preventDefaultException) && e.preventDefault();
          var t, n, r = s.getTime() - this.startTime,
            i = Math.round(this.x),
            o = Math.round(this.y),
            u = Math.abs(i - this.startX),
            a = Math.abs(o - this.startY),
            l = 0,
            c = "";
          if (this.isInTransition = 0, this.initiated = 0, this.endTime = s.getTime(), !this.resetPosition(this.options.bounceTime)) {
            if (this.scrollTo(i, o), !this.moved) return this.options.tap && s.tap(e, this.options.tap), this.options.click && s.click(e), void this._execEvent("scrollCancel");
            if (this._events.flick && 200 > r && 100 > u && 100 > a) return void this._execEvent("flick");
            if (this.options.momentum && 300 > r && (t = this.hasHorizontalScroll ? s.momentum(this.x, this.startX, r, this.maxScrollX, this.options.bounce ? this.wrapperWidth : 0, this.options.deceleration, this) : {
                destination: i,
                duration: 0
              }, n = this.hasVerticalScroll ? s.momentum(this.y, this.startY, r, this.maxScrollY, this.options.bounce ? this.wrapperHeight : 0, this.options.deceleration, this) : {
                destination: o,
                duration: 0
              }, i = t.destination, o = n.destination, l = Math.max(t.duration, n.duration), this.isInTransition = 1), this.options.snap) {
              var h = this._nearestSnap(i, o);
              this.currentPage = h, l = this.options.snapSpeed || Math.max(Math.max(Math.min(Math.abs(i - h.x), 1e3), Math.min(Math.abs(o - h.y), 1e3)), 300), i = h.x, o = h.y, this.directionX = 0, this.directionY = 0, c = this.options.bounceEasing
            }
            return i !== this.x || o !== this.y ? ((i > 0 || i < this.maxScrollX || o > 0 || o < this.maxScrollY) && (c = s.ease.quadratic), void this.scrollTo(i, o, l, c)) : void this._execEvent("scrollEnd")
          }
        }
      },
      _resize: function() {
        var e = this;
        clearTimeout(this.resizeTimeout), this.resizeTimeout = setTimeout(function() {
          e.refresh()
        }, this.options.resizePolling)
      },
      resetPosition: function(t) {
        var n = this.x,
          r = this.y;
        if (t = t || 0, !this.hasHorizontalScroll || this.x > 0 ? n = 0 : this.x < this.maxScrollX && (n = this.maxScrollX), !this.hasVerticalScroll || this.y > 0 ? r = 0 : this.y < this.maxScrollY && (r = this.maxScrollY), n === this.x && r === this.y) return !1;
        if (this.options.ptr && this.y > 44 && -1 * this.startY < $(e).height() && !this.ptrLock) {
          r = this.options.ptrOffset || 44, this._execEvent("ptr"), this.ptrLock = !0;
          var i = this;
          setTimeout(function() {
            i.ptrLock = !1
          }, 500)
        }
        return this.scrollTo(n, r, t, this.options.bounceEasing), !0
      },
      disable: function() {
        this.enabled = !1
      },
      enable: function() {
        this.enabled = !0
      },
      refresh: function() {
        this.wrapperWidth = this.wrapper.clientWidth, this.wrapperHeight = this.wrapper.clientHeight, this.scrollerWidth = this.scroller.offsetWidth, this.scrollerHeight = this.scroller.offsetHeight, this.maxScrollX = this.wrapperWidth - this.scrollerWidth, this.maxScrollY = this.wrapperHeight - this.scrollerHeight, this.hasHorizontalScroll = this.options.scrollX && this.maxScrollX < 0, this.hasVerticalScroll = this.options.scrollY && this.maxScrollY < 0, this.hasHorizontalScroll || (this.maxScrollX = 0, this.scrollerWidth = this.wrapperWidth), this.hasVerticalScroll || (this.maxScrollY = 0, this.scrollerHeight = this.wrapperHeight), this.endTime = 0, this.directionX = 0, this.directionY = 0, this.wrapperOffset = s.offset(this.wrapper), this._execEvent("refresh"), this.resetPosition()
      },
      on: function(e, t) {
        this._events[e] || (this._events[e] = []), this._events[e].push(t)
      },
      off: function(e, t) {
        if (this._events[e]) {
          var n = this._events[e].indexOf(t);
          n > -1 && this._events[e].splice(n, 1)
        }
      },
      _execEvent: function(e) {
        if (this._events[e]) {
          var t = 0,
            n = this._events[e].length;
          if (n)
            for (; n > t; t++) this._events[e][t].apply(this, [].slice.call(arguments, 1))
        }
      },
      scrollBy: function(e, t, n, r) {
        e = this.x + e, t = this.y + t, n = n || 0, this.scrollTo(e, t, n, r)
      },
      scrollTo: function(e, t, n, r) {
        r = r || s.ease.circular, this.isInTransition = this.options.useTransition && n > 0, !n || this.options.useTransition && r.style ? (this._transitionTimingFunction(r.style), this._transitionTime(n), this._translate(e, t)) : this._animate(e, t, n, r.fn)
      },
      scrollToElement: function(e, t, n, r, i) {
        if (e = e.nodeType ? e : this.scroller.querySelector(e)) {
          var o = s.offset(e);
          o.left -= this.wrapperOffset.left, o.top -= this.wrapperOffset.top, n === !0 && (n = Math.round(e.offsetWidth / 2 - this.wrapper.offsetWidth / 2)), r === !0 && (r = Math.round(e.offsetHeight / 2 - this.wrapper.offsetHeight / 2)), o.left -= n || 0, o.top -= r || 0, o.left = o.left > 0 ? 0 : o.left < this.maxScrollX ? this.maxScrollX : o.left, o.top = o.top > 0 ? 0 : o.top < this.maxScrollY ? this.maxScrollY : o.top, t = void 0 === t || null === t || "auto" === t ? Math.max(Math.abs(this.x - o.left), Math.abs(this.y - o.top)) : t, this.scrollTo(o.left, o.top, t, i)
        }
      },
      _transitionTime: function(e) {
        if (e = e || 0, this.scrollerStyle[s.style.transitionDuration] = e + "ms", !e && s.isBadAndroid && (this.scrollerStyle[s.style.transitionDuration] = "0.001s"), this.indicators)
          for (var t = this.indicators.length; t--;) this.indicators[t].transitionTime(e)
      },
      _transitionTimingFunction: function(e) {
        if (this.scrollerStyle[s.style.transitionTimingFunction] = e, this.indicators)
          for (var t = this.indicators.length; t--;) this.indicators[t].transitionTimingFunction(e)
      },
      _translate: function(e, t) {
        if (this.options.useTransform ? this.scrollerStyle[s.style.transform] = "translate(" + e + "px," + t + "px)" + this.translateZ : (e = Math.round(e), t = Math.round(t), this.scrollerStyle.left = e + "px", this.scrollerStyle.top = t + "px"), this.x = e, this.y = t, this.indicators)
          for (var n = this.indicators.length; n--;) this.indicators[n].updatePosition()
      },
      _initEvents: function(t) {
        var n = t ? s.removeEvent : s.addEvent,
          r = this.options.bindToWrapper ? this.wrapper : e;
        n(e, "orientationchange", this), n(e, "resize", this), this.options.click && n(this.wrapper, "click", this, !0), this.options.disableMouse || (n(this.wrapper, "mousedown", this), n(r, "mousemove", this), n(r, "mousecancel", this), n(r, "mouseup", this)), s.hasPointer && !this.options.disablePointer && (n(this.wrapper, s.prefixPointerEvent("pointerdown"), this), n(r, s.prefixPointerEvent("pointermove"), this), n(r, s.prefixPointerEvent("pointercancel"), this), n(r, s.prefixPointerEvent("pointerup"), this)), s.hasTouch && !this.options.disableTouch && (n(this.wrapper, "touchstart", this), n(r, "touchmove", this), n(r, "touchcancel", this), n(r, "touchend", this)), n(this.scroller, "transitionend", this), n(this.scroller, "webkitTransitionEnd", this), n(this.scroller, "oTransitionEnd", this), n(this.scroller, "MSTransitionEnd", this)
      },
      getComputedPosition: function() {
        var t, n, r = e.getComputedStyle(this.scroller, null);
        return this.options.useTransform ? (r = r[s.style.transform].split(")")[0].split(", "), t = +(r[12] || r[4]), n = +(r[13] || r[5])) : (t = +r.left.replace(/[^-\d.]/g, ""), n = +r.top.replace(/[^-\d.]/g, "")), {
          x: t,
          y: n
        }
      },
      _initIndicators: function() {
        function e(e) {
          for (var t = u.indicators.length; t--;) e.call(u.indicators[t])
        }
        var t, i = this.options.interactiveScrollbars,
          s = "string" != typeof this.options.scrollbars,
          o = [],
          u = this;
        this.indicators = [], this.options.scrollbars && (this.options.scrollY && (t = {
          el: n("v", i, this.options.scrollbars),
          interactive: i,
          defaultScrollbars: !0,
          customStyle: s,
          resize: this.options.resizeScrollbars,
          shrink: this.options.shrinkScrollbars,
          fade: this.options.fadeScrollbars,
          listenX: !1
        }, this.wrapper.appendChild(t.el), o.push(t)), this.options.scrollX && (t = {
          el: n("h", i, this.options.scrollbars),
          interactive: i,
          defaultScrollbars: !0,
          customStyle: s,
          resize: this.options.resizeScrollbars,
          shrink: this.options.shrinkScrollbars,
          fade: this.options.fadeScrollbars,
          listenY: !1
        }, this.wrapper.appendChild(t.el), o.push(t))), this.options.indicators && (o = o.concat(this.options.indicators));
        for (var a = o.length; a--;) this.indicators.push(new r(this, o[a]));
        this.options.fadeScrollbars && (this.on("scrollEnd", function() {
          e(function() {
            this.fade()
          })
        }), this.on("scrollCancel", function() {
          e(function() {
            this.fade()
          })
        }), this.on("scrollStart", function() {
          e(function() {
            this.fade(1)
          })
        }), this.on("beforeScrollStart", function() {
          e(function() {
            this.fade(1, !0)
          })
        })), this.on("refresh", function() {
          e(function() {
            this.refresh()
          })
        }), this.on("destroy", function() {
          e(function() {
            this.destroy()
          }), delete this.indicators
        })
      },
      _initWheel: function() {
        s.addEvent(this.wrapper, "wheel", this), s.addEvent(this.wrapper, "mousewheel", this), s.addEvent(this.wrapper, "DOMMouseScroll", this), this.on("destroy", function() {
          s.removeEvent(this.wrapper, "wheel", this), s.removeEvent(this.wrapper, "mousewheel", this), s.removeEvent(this.wrapper, "DOMMouseScroll", this)
        })
      },
      _wheel: function(e) {
        if (this.enabled) {
          e.preventDefault(), e.stopPropagation();
          var t, n, r, i, s = this;
          if (void 0 === this.wheelTimeout && s._execEvent("scrollStart"), clearTimeout(this.wheelTimeout), this.wheelTimeout = setTimeout(function() {
              s._execEvent("scrollEnd"), s.wheelTimeout = void 0
            }, 400), "deltaX" in e) 1 === e.deltaMode ? (t = -e.deltaX * this.options.mouseWheelSpeed, n = -e.deltaY * this.options.mouseWheelSpeed) : (t = -e.deltaX, n = -e.deltaY);
          else if ("wheelDeltaX" in e) t = e.wheelDeltaX / 120 * this.options.mouseWheelSpeed, n = e.wheelDeltaY / 120 * this.options.mouseWheelSpeed;
          else if ("wheelDelta" in e) t = n = e.wheelDelta / 120 * this.options.mouseWheelSpeed;
          else {
            if (!("detail" in e)) return;
            t = n = -e.detail / 3 * this.options.mouseWheelSpeed
          }
          if (t *= this.options.invertWheelDirection, n *= this.options.invertWheelDirection, this.hasVerticalScroll || (t = n, n = 0), this.options.snap) return r = this.currentPage.pageX, i = this.currentPage.pageY, t > 0 ? r-- : 0 > t && r++, n > 0 ? i-- : 0 > n && i++, void this.goToPage(r, i);
          r = this.x + Math.round(this.hasHorizontalScroll ? t : 0), i = this.y + Math.round(this.hasVerticalScroll ? n : 0), r > 0 ? r = 0 : r < this.maxScrollX && (r = this.maxScrollX), i > 0 ? i = 0 : i < this.maxScrollY && (i = this.maxScrollY), this.scrollTo(r, i, 0), this._execEvent("scroll")
        }
      },
      _initSnap: function() {
        this.currentPage = {}, "string" == typeof this.options.snap && (this.options.snap = this.scroller.querySelectorAll(this.options.snap)), this.on("refresh", function() {
          var e, t, n, r, i, s, o = 0,
            u = 0,
            a = 0,
            f = this.options.snapStepX || this.wrapperWidth,
            l = this.options.snapStepY || this.wrapperHeight;
          if (this.pages = [], this.wrapperWidth && this.wrapperHeight && this.scrollerWidth && this.scrollerHeight) {
            if (this.options.snap === !0)
              for (n = Math.round(f / 2), r = Math.round(l / 2); a > -this.scrollerWidth;) {
                for (this.pages[o] = [], e = 0, i = 0; i > -this.scrollerHeight;) this.pages[o][e] = {
                  x: Math.max(a, this.maxScrollX),
                  y: Math.max(i, this.maxScrollY),
                  width: f,
                  height: l,
                  cx: a - n,
                  cy: i - r
                }, i -= l, e++;
                a -= f, o++
              } else
                for (s = this.options.snap, e = s.length, t = -1; e > o; o++)(0 === o || s[o].offsetLeft <= s[o - 1].offsetLeft) && (u = 0, t++), this.pages[u] || (this.pages[u] = []), a = Math.max(-s[o].offsetLeft, this.maxScrollX), i = Math.max(-s[o].offsetTop, this.maxScrollY), n = a - Math.round(s[o].offsetWidth / 2), r = i - Math.round(s[o].offsetHeight / 2), this.pages[u][t] = {
                  x: a,
                  y: i,
                  width: s[o].offsetWidth,
                  height: s[o].offsetHeight,
                  cx: n,
                  cy: r
                }, a > this.maxScrollX && u++;
            this.goToPage(this.currentPage.pageX || 0, this.currentPage.pageY || 0, 0), this.options.snapThreshold % 1 === 0 ? (this.snapThresholdX = this.options.snapThreshold, this.snapThresholdY = this.options.snapThreshold) : (this.snapThresholdX = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width * this.options.snapThreshold), this.snapThresholdY = Math.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height * this.options.snapThreshold))
          }
        }), this.on("flick", function() {
          var e = this.options.snapSpeed || Math.max(Math.max(Math.min(Math.abs(this.x - this.startX), 1e3), Math.min(Math.abs(this.y - this.startY), 1e3)), 300);
          this.goToPage(this.currentPage.pageX + this.directionX, this.currentPage.pageY + this.directionY, e)
        })
      },
      _nearestSnap: function(e, t) {
        if (!this.pages.length) return {
          x: 0,
          y: 0,
          pageX: 0,
          pageY: 0
        };
        var n = 0,
          r = this.pages.length,
          i = 0;
        if (Math.abs(e - this.absStartX) < this.snapThresholdX && Math.abs(t - this.absStartY) < this.snapThresholdY) return this.currentPage;
        for (e > 0 ? e = 0 : e < this.maxScrollX && (e = this.maxScrollX), t > 0 ? t = 0 : t < this.maxScrollY && (t = this.maxScrollY); r > n; n++)
          if (e >= this.pages[n][0].cx) {
            e = this.pages[n][0].x;
            break
          }
        for (r = this.pages[n].length; r > i; i++)
          if (t >= this.pages[0][i].cy) {
            t = this.pages[0][i].y;
            break
          }
        return n === this.currentPage.pageX && (n += this.directionX, 0 > n ? n = 0 : n >= this.pages.length && (n = this.pages.length - 1), e = this.pages[n][0].x), i === this.currentPage.pageY && (i += this.directionY, 0 > i ? i = 0 : i >= this.pages[0].length && (i = this.pages[0].length - 1), t = this.pages[0][i].y), {
          x: e,
          y: t,
          pageX: n,
          pageY: i
        }
      },
      goToPage: function(e, t, n, r) {
        r = r || this.options.bounceEasing, e >= this.pages.length ? e = this.pages.length - 1 : 0 > e && (e = 0), t >= this.pages[e].length ? t = this.pages[e].length - 1 : 0 > t && (t = 0);
        var i = this.pages[e][t].x,
          s = this.pages[e][t].y;
        n = void 0 === n ? this.options.snapSpeed || Math.max(Math.max(Math.min(Math.abs(i - this.x), 1e3), Math.min(Math.abs(s - this.y), 1e3)), 300) : n, this.currentPage = {
          x: i,
          y: s,
          pageX: e,
          pageY: t
        }, this.scrollTo(i, s, n, r)
      },
      next: function(e, t) {
        var n = this.currentPage.pageX,
          r = this.currentPage.pageY;
        n++, n >= this.pages.length && this.hasVerticalScroll && (n = 0, r++), this.goToPage(n, r, e, t)
      },
      prev: function(e, t) {
        var n = this.currentPage.pageX,
          r = this.currentPage.pageY;
        n--, 0 > n && this.hasVerticalScroll && (n = 0, r--), this.goToPage(n, r, e, t)
      },
      _initKeys: function() {
        var t, n = {
          pageUp: 33,
          pageDown: 34,
          end: 35,
          home: 36,
          left: 37,
          up: 38,
          right: 39,
          down: 40
        };
        if ("object" == typeof this.options.keyBindings)
          for (t in this.options.keyBindings) "string" == typeof this.options.keyBindings[t] && (this.options.keyBindings[t] = this.options.keyBindings[t].toUpperCase().charCodeAt(0));
        else this.options.keyBindings = {};
        for (t in n) this.options.keyBindings[t] = this.options.keyBindings[t] || n[t];
        s.addEvent(e, "keydown", this), this.on("destroy", function() {
          s.removeEvent(e, "keydown", this)
        })
      },
      _key: function(e) {
        if (this.enabled) {
          var t, n = this.options.snap,
            r = n ? this.currentPage.pageX : this.x,
            i = n ? this.currentPage.pageY : this.y,
            o = s.getTime(),
            u = this.keyTime || 0,
            a = .25;
          switch (this.options.useTransition && this.isInTransition && (t = this.getComputedPosition(), this._translate(Math.round(t.x), Math.round(t.y)), this.isInTransition = !1), this.keyAcceleration = 200 > o - u ? Math.min(this.keyAcceleration + a, 50) : 0, e.keyCode) {
            case this.options.keyBindings.pageUp:
              this.hasHorizontalScroll && !this.hasVerticalScroll ? r += n ? 1 : this.wrapperWidth : i += n ? 1 : this.wrapperHeight;
              break;
            case this.options.keyBindings.pageDown:
              this.hasHorizontalScroll && !this.hasVerticalScroll ? r -= n ? 1 : this.wrapperWidth : i -= n ? 1 : this.wrapperHeight;
              break;
            case this.options.keyBindings.end:
              r = n ? this.pages.length - 1 : this.maxScrollX, i = n ? this.pages[0].length - 1 : this.maxScrollY;
              break;
            case this.options.keyBindings.home:
              r = 0, i = 0;
              break;
            case this.options.keyBindings.left:
              r += n ? -1 : 5 + this.keyAcceleration >> 0;
              break;
            case this.options.keyBindings.up:
              i += n ? 1 : 5 + this.keyAcceleration >> 0;
              break;
            case this.options.keyBindings.right:
              r -= n ? -1 : 5 + this.keyAcceleration >> 0;
              break;
            case this.options.keyBindings.down:
              i -= n ? 1 : 5 + this.keyAcceleration >> 0;
              break;
            default:
              return
          }
          if (n) return void this.goToPage(r, i);
          r > 0 ? (r = 0, this.keyAcceleration = 0) : r < this.maxScrollX && (r = this.maxScrollX, this.keyAcceleration = 0), i > 0 ? (i = 0, this.keyAcceleration = 0) : i < this.maxScrollY && (i = this.maxScrollY, this.keyAcceleration = 0), this.scrollTo(r, i, 0), this.keyTime = o
        }
      },
      _animate: function(e, t, n, r) {
        function o() {
          var p, v, m, y = s.getTime();
          return y >= h ? (u.isAnimating = !1, u._translate(e, t), void(u.resetPosition(u.options.bounceTime) || u._execEvent("scrollEnd"))) : (y = (y - c) / n, m = r(y), p = (e - a) * m + a, v = (t - l) * m + l, u._translate(p, v), u.isAnimating && i(o), void(3 === u.options.probeType && u._execEvent("scroll")))
        }
        var u = this,
          a = this.x,
          l = this.y,
          c = s.getTime(),
          h = c + n;
        this.isAnimating = !0, o()
      },
      handleEvent: function(e) {
        switch (e.type) {
          case "touchstart":
          case "pointerdown":
          case "MSPointerDown":
          case "mousedown":
            this._start(e);
            break;
          case "touchmove":
          case "pointermove":
          case "MSPointerMove":
          case "mousemove":
            this._move(e);
            break;
          case "touchend":
          case "pointerup":
          case "MSPointerUp":
          case "mouseup":
          case "touchcancel":
          case "pointercancel":
          case "MSPointerCancel":
          case "mousecancel":
            this._end(e);
            break;
          case "orientationchange":
          case "resize":
            this._resize();
            break;
          case "transitionend":
          case "webkitTransitionEnd":
          case "oTransitionEnd":
          case "MSTransitionEnd":
            this._transitionEnd(e);
            break;
          case "wheel":
          case "DOMMouseScroll":
          case "mousewheel":
            this._wheel(e);
            break;
          case "keydown":
            this._key(e);
            break;
          case "click":
            e._constructed || (e.preventDefault(), e.stopPropagation())
        }
      }
    }, r.prototype = {
      handleEvent: function(e) {
        switch (e.type) {
          case "touchstart":
          case "pointerdown":
          case "MSPointerDown":
          case "mousedown":
            this._start(e);
            break;
          case "touchmove":
          case "pointermove":
          case "MSPointerMove":
          case "mousemove":
            this._move(e);
            break;
          case "touchend":
          case "pointerup":
          case "MSPointerUp":
          case "mouseup":
          case "touchcancel":
          case "pointercancel":
          case "MSPointerCancel":
          case "mousecancel":
            this._end(e)
        }
      },
      destroy: function() {
        this.options.interactive && (s.removeEvent(this.indicator, "touchstart", this), s.removeEvent(this.indicator, s.prefixPointerEvent("pointerdown"), this), s.removeEvent(this.indicator, "mousedown", this), s.removeEvent(e, "touchmove", this), s.removeEvent(e, s.prefixPointerEvent("pointermove"), this), s.removeEvent(e, "mousemove", this), s.removeEvent(e, "touchend", this), s.removeEvent(e, s.prefixPointerEvent("pointerup"), this), s.removeEvent(e, "mouseup", this)), this.options.defaultScrollbars && this.wrapper.parentNode.removeChild(this.wrapper)
      },
      _start: function(t) {
        var n = t.touches ? t.touches[0] : t;
        t.preventDefault(), t.stopPropagation(), this.transitionTime(), this.initiated = !0, this.moved = !1, this.lastPointX = n.pageX, this.lastPointY = n.pageY, this.startTime = s.getTime(), this.options.disableTouch || s.addEvent(e, "touchmove", this), this.options.disablePointer || s.addEvent(e, s.prefixPointerEvent("pointermove"), this), this.options.disableMouse || s.addEvent(e, "mousemove", this), this.scroller._execEvent("beforeScrollStart")
      },
      _move: function(e) {
        var t, n, r, i, o = e.touches ? e.touches[0] : e,
          u = s.getTime();
        this.moved || this.scroller._execEvent("scrollStart"), this.moved = !0, t = o.pageX - this.lastPointX, this.lastPointX = o.pageX, n = o.pageY - this.lastPointY, this.lastPointY = o.pageY, r = this.x + t, i = this.y + n, this._pos(r, i), 1 === this.scroller.options.probeType && u - this.startTime > 300 ? (this.startTime = u, this.scroller._execEvent("scroll")) : this.scroller.options.probeType > 1 && this.scroller._execEvent("scroll"), e.preventDefault(), e.stopPropagation()
      },
      _end: function(t) {
        if (this.initiated) {
          if (this.initiated = !1, t.preventDefault(), t.stopPropagation(), s.removeEvent(e, "touchmove", this), s.removeEvent(e, s.prefixPointerEvent("pointermove"), this), s.removeEvent(e, "mousemove", this), this.scroller.options.snap) {
            var n = this.scroller._nearestSnap(this.scroller.x, this.scroller.y),
              r = this.options.snapSpeed || Math.max(Math.max(Math.min(Math.abs(this.scroller.x - n.x), 1e3), Math.min(Math.abs(this.scroller.y - n.y), 1e3)), 300);
            (this.scroller.x !== n.x || this.scroller.y !== n.y) && (this.scroller.directionX = 0, this.scroller.directionY = 0, this.scroller.currentPage = n, this.scroller.scrollTo(n.x, n.y, r, this.scroller.options.bounceEasing))
          }
          this.moved && this.scroller._execEvent("scrollEnd")
        }
      },
      transitionTime: function(e) {
        e = e || 0, this.indicatorStyle[s.style.transitionDuration] = e + "ms", !e && s.isBadAndroid && (this.indicatorStyle[s.style.transitionDuration] = "0.001s")
      },
      transitionTimingFunction: function(e) {
        this.indicatorStyle[s.style.transitionTimingFunction] = e
      },
      refresh: function() {
        this.transitionTime(), this.options.listenX && !this.options.listenY ? this.indicatorStyle.display = this.scroller.hasHorizontalScroll ? "block" : "none" : this.options.listenY && !this.options.listenX ? this.indicatorStyle.display = this.scroller.hasVerticalScroll ? "block" : "none" : this.indicatorStyle.display = this.scroller.hasHorizontalScroll || this.scroller.hasVerticalScroll ? "block" : "none", this.scroller.hasHorizontalScroll && this.scroller.hasVerticalScroll ? (s.addClass(this.wrapper, "iScrollBothScrollbars"), s.removeClass(this.wrapper, "iScrollLoneScrollbar"), this.options.defaultScrollbars && this.options.customStyle && (this.options.listenX ? this.wrapper.style.right = "8px" : this.wrapper.style.bottom = "8px")) : (s.removeClass(this.wrapper, "iScrollBothScrollbars"), s.addClass(this.wrapper, "iScrollLoneScrollbar"), this.options.defaultScrollbars && this.options.customStyle && (this.options.listenX ? this.wrapper.style.right = "2px" : this.wrapper.style.bottom = "2px")), this.options.listenX && (this.wrapperWidth = this.wrapper.clientWidth, this.options.resize ? (this.indicatorWidth = Math.max(Math.round(this.wrapperWidth * this.wrapperWidth / (this.scroller.scrollerWidth || this.wrapperWidth || 1)), 8), this.indicatorStyle.width = this.indicatorWidth + "px") : this.indicatorWidth = this.indicator.clientWidth, this.maxPosX = this.wrapperWidth - this.indicatorWidth, "clip" === this.options.shrink ? (this.minBoundaryX = -this.indicatorWidth + 8, this.maxBoundaryX = this.wrapperWidth - 8) : (this.minBoundaryX = 0, this.maxBoundaryX = this.maxPosX), this.sizeRatioX = this.options.speedRatioX || this.scroller.maxScrollX && this.maxPosX / this.scroller.maxScrollX), this.options.listenY && (this.wrapperHeight = this.wrapper.clientHeight, this.options.resize ? (this.indicatorHeight = Math.max(Math.round(this.wrapperHeight * this.wrapperHeight / (this.scroller.scrollerHeight || this.wrapperHeight || 1)), 8), this.indicatorStyle.height = this.indicatorHeight + "px") : this.indicatorHeight = this.indicator.clientHeight, this.maxPosY = this.wrapperHeight - this.indicatorHeight, "clip" === this.options.shrink ? (this.minBoundaryY = -this.indicatorHeight + 8, this.maxBoundaryY = this.wrapperHeight - 8) : (this.minBoundaryY = 0, this.maxBoundaryY = this.maxPosY), this.maxPosY = this.wrapperHeight - this.indicatorHeight, this.sizeRatioY = this.options.speedRatioY || this.scroller.maxScrollY && this.maxPosY / this.scroller.maxScrollY), this.updatePosition()
      },
      updatePosition: function() {
        var e = this.options.listenX && Math.round(this.sizeRatioX * this.scroller.x) || 0,
          t = this.options.listenY && Math.round(this.sizeRatioY * this.scroller.y) || 0;
        this.options.ignoreBoundaries || (e < this.minBoundaryX ? ("scale" === this.options.shrink && (this.width = Math.max(this.indicatorWidth + e, 8), this.indicatorStyle.width = this.width + "px"), e = this.minBoundaryX) : e > this.maxBoundaryX ? "scale" === this.options.shrink ? (this.width = Math.max(this.indicatorWidth - (e - this.maxPosX), 8), this.indicatorStyle.width = this.width + "px", e = this.maxPosX + this.indicatorWidth - this.width) : e = this.maxBoundaryX : "scale" === this.options.shrink && this.width !== this.indicatorWidth && (this.width = this.indicatorWidth, this.indicatorStyle.width = this.width + "px"), t < this.minBoundaryY ? ("scale" === this.options.shrink && (this.height = Math.max(this.indicatorHeight + 3 * t, 8), this.indicatorStyle.height = this.height + "px"), t = this.minBoundaryY) : t > this.maxBoundaryY ? "scale" === this.options.shrink ? (this.height = Math.max(this.indicatorHeight - 3 * (t - this.maxPosY), 8), this.indicatorStyle.height = this.height + "px", t = this.maxPosY + this.indicatorHeight - this.height) : t = this.maxBoundaryY : "scale" === this.options.shrink && this.height !== this.indicatorHeight && (this.height = this.indicatorHeight, this.indicatorStyle.height = this.height + "px")), this.x = e, this.y = t, this.scroller.options.useTransform ? this.indicatorStyle[s.style.transform] = "translate(" + e + "px," + t + "px)" + this.scroller.translateZ : (this.indicatorStyle.left = e + "px", this.indicatorStyle.top = t + "px")
      },
      _pos: function(e, t) {
        0 > e ? e = 0 : e > this.maxPosX && (e = this.maxPosX), 0 > t ? t = 0 : t > this.maxPosY && (t = this.maxPosY), e = this.options.listenX ? Math.round(e / this.sizeRatioX) : this.scroller.x, t = this.options.listenY ? Math.round(t / this.sizeRatioY) : this.scroller.y, this.scroller.scrollTo(e, t)
      },
      fade: function(e, t) {
        if (!t || this.visible) {
          clearTimeout(this.fadeTimeout), this.fadeTimeout = null;
          var n = e ? 250 : 500,
            r = e ? 0 : 300;
          e = e ? "1" : "0", this.wrapperStyle[s.style.transitionDuration] = n + "ms", this.fadeTimeout = setTimeout(function(e) {
            this.wrapperStyle.opacity = e, this.visible = +e
          }.bind(this, e), r)
        }
      }
    }, t.utils = s, e.IScroll = t
  }(window), + function(e) {
    "use strict";

    function t(t) {
      var n = Array.apply(null, arguments);
      n.shift();
      var i;
      return this.each(function() {
        var s = e(this),
          o = e.extend({}, s.dataset(), "object" == typeof t && t),
          u = s.data("scroller");
        return u || s.data("scroller", u = new r(this, o)), "string" == typeof t && "function" == typeof u[t] && (i = u[t].apply(u, n), void 0 !== i) ? !1 : void 0
      }), void 0 !== i ? i : this
    }
    var n = {
      scrollTop: e.fn.scrollTop,
      scrollLeft: e.fn.scrollLeft
    };
    ! function() {
      e.extend(e.fn, {
        scrollTop: function(e, t) {
          if (this.length) {
            var r = this.data("scroller");
            return r && r.scroller ? r.scrollTop(e, t) : n.scrollTop.apply(this, arguments)
          }
        }
      }), e.extend(e.fn, {
        scrollLeft: function(e, t) {
          if (this.length) {
            var r = this.data("scroller");
            return r && r.scroller ? r.scrollLeft(e, t) : n.scrollLeft.apply(this, arguments)
          }
        }
      })
    }();
    var r = function(t, n) {
      var r = this.$pageContent = e(t);
      this.options = e.extend({}, this._defaults, n);
      var i = this.options.type,
        s = "js" === i || "auto" === i && e.device.android && e.compareVersion("4.4.0", e.device.osVersion) > -1 || "auto" === i && e.device.ios && e.compareVersion("6.0.0", e.device.osVersion) > -1;
      if (s) {
        var o = r.find(".content-inner");
        if (!o[0]) {
          var u = r.children();
          u.length < 1 ? r.children().wrapAll('<div class="content-inner"></div>') : r.html('<div class="content-inner">' + r.html() + "</div>")
        }
        if (r.hasClass("pull-to-refresh-content")) {
          var f = e(window).height() + (r.prev().hasClass(".bar") ? 1 : 61);
          r.find(".content-inner").css("min-height", f + "px")
        }
        var l = e(t).hasClass("pull-to-refresh-content"),
          c = 0 === r.find(".fixed-tab").length,
          h = {
            probeType: 1,
            mouseWheel: !0,
            click: e.device.androidChrome,
            useTransform: c,
            scrollX: !0
          };
        l && (h.ptr = !0, h.ptrOffset = 44), this.scroller = new IScroll(t, h), this._bindEventToDomWhenJs(), e.initPullToRefresh = e._pullToRefreshJSScroll.initPullToRefresh, e.pullToRefreshDone = e._pullToRefreshJSScroll.pullToRefreshDone, e.pullToRefreshTrigger = e._pullToRefreshJSScroll.pullToRefreshTrigger, e.destroyToRefresh = e._pullToRefreshJSScroll.destroyToRefresh, r.addClass("javascript-scroll"), c || r.find(".content-inner").css({
          width: "100%",
          position: "absolute"
        });
        var p = this.$pageContent[0].scrollTop;
        p && (this.$pageContent[0].scrollTop = 0, this.scrollTop(p))
      } else r.addClass("native-scroll")
    };
    r.prototype = {
      _defaults: {
        type: "native"
      },
      _bindEventToDomWhenJs: function() {
        if (this.scroller) {
          var e = this;
          this.scroller.on("scrollStart", function() {
            e.$pageContent.trigger("scrollstart")
          }), this.scroller.on("scroll", function() {
            e.$pageContent.trigger("scroll")
          }), this.scroller.on("scrollEnd", function() {
            e.$pageContent.trigger("scrollend")
          })
        }
      },
      scrollTop: function(e, t) {
        return this.scroller ? void 0 === e ? -1 * this.scroller.getComputedPosition().y : (this.scroller.scrollTo(0, -1 * e, t), this) : this.$pageContent.scrollTop(e, t)
      },
      scrollLeft: function(e, t) {
        return this.scroller ? void 0 === e ? -1 * this.scroller.getComputedPosition().x : (this.scroller.scrollTo(-1 * e, 0), this) : this.$pageContent.scrollTop(e, t)
      },
      on: function(e, t) {
        return this.scroller ? this.scroller.on(e, function() {
          t.call(this.wrapper)
        }) : this.$pageContent.on(e, t), this
      },
      off: function(e, t) {
        return this.scroller ? this.scroller.off(e, t) : this.$pageContent.off(e, t), this
      },
      refresh: function() {
        return this.scroller && this.scroller.refresh(), this
      },
      scrollHeight: function() {
        return this.scroller ? this.scroller.scrollerHeight : this.$pageContent[0].scrollHeight
      }
    };
    var i = e.fn.scroller;
    e.fn.scroller = t, e.fn.scroller.Constructor = r, e.fn.scroller.noConflict = function() {
      return e.fn.scroller = i, this
    }, e(function() {
      e('[data-toggle="scroller"]').scroller()
    }), e.refreshScroller = function(t) {
      t ? e(t).scroller("refresh") : e(".javascript-scroll").each(function() {
        e(this).scroller("refresh")
      })
    }, e.initScroller = function(t) {
      this.options = e.extend({}, "object" == typeof t && t), e('[data-toggle="scroller"],.content').scroller(t)
    }, e.getScroller = function(t) {
      return t = t.hasClass("content") ? t : t.parents(".content"), t ? e(t).data("scroller") : e(".content.javascript-scroll").data("scroller")
    }, e.detectScrollerType = function(t) {
      return t ? e(t).data("scroller") && e(t).data("scroller").scroller ? "js" : "native" : void 0
    }
  }(Zepto), + function(e) {
    "use strict";
    var t = function(t, n, r) {
        var i = e(t);
        if (2 === arguments.length && "boolean" == typeof n && (r = n), 0 === i.length) return !1;
        if (i.hasClass("active")) return r && i.trigger("show"), !1;
        var s = i.parent(".tabs");
        if (0 === s.length) return !1;
        var o = s.children(".tab.active").removeClass("active");
        if (i.addClass("active"), i.trigger("show"), n ? n = e(n) : (n = e("string" == typeof t ? '.tab-link[href="' + t + '"]' : '.tab-link[href="#' + i.attr("id") + '"]'), (!n || n && 0 === n.length) && e("[data-tab]").each(function() {
            i.is(e(this).attr("data-tab")) && (n = e(this))
          })), 0 !== n.length) {
          var u;
          if (o && o.length > 0) {
            var f = o.attr("id");
            f && (u = e('.tab-link[href="#' + f + '"]')), (!u || u && 0 === u.length) && e("[data-tab]").each(function() {
              o.is(e(this).attr("data-tab")) && (u = e(this))
            })
          }
          return n && n.length > 0 && n.addClass("active"), u && u.length > 0 && u.removeClass("active"), n.trigger("active"), !0
        }
      },
      n = e.showTab;
    e.showTab = t, e.showTab.noConflict = function() {
      return e.showTab = n, this
    }, e(document).on("click", ".tab-link", function(n) {
      n.preventDefault();
      var r = e(this);
      t(r.data("tab") || r.attr("href"), r)
    })
  }(Zepto), + function(e) {
    "use strict";

    function t(t) {
      var r = Array.apply(null, arguments);
      r.shift(), this.each(function() {
        var r = e(this),
          i = e.extend({}, r.dataset(), "object" == typeof t && t),
          s = r.data("fixedtab");
        s || r.data("fixedtab", s = new n(this, i))
      })
    }
    e.initFixedTab = function() {
      var t = e(".fixed-tab");
      0 !== t.length && e(".fixed-tab").fixedTab()
    };
    var n = function(t, n) {
      var r = this.$pageContent = e(t),
        i = r.clone(),
        s = r[0].getBoundingClientRect().top;
      i.css("visibility", "hidden"), this.options = e.extend({}, this._defaults, {
        fixedTop: s,
        shadow: i,
        offset: 0
      }, n), this._bindEvents()
    };
    n.prototype = {
      _defaults: {
        offset: 0
      },
      _bindEvents: function() {
        this.$pageContent.parents(".content").on("scroll", this._scrollHandler.bind(this)), this.$pageContent.on("active", ".tab-link", this._tabLinkHandler.bind(this))
      },
      _tabLinkHandler: function(t) {
        var n = e(t.target).parents(".buttons-fixed").length > 0,
          r = this.options.fixedTop,
          i = this.options.offset;
        e.refreshScroller(), n && this.$pageContent.parents(".content").scrollTop(r - i)
      },
      _scrollHandler: function(t) {
        var n = e(t.target),
          r = this.$pageContent,
          i = this.options.shadow,
          s = this.options.offset,
          o = this.options.fixedTop,
          u = n.scrollTop(),
          f = u >= o - s;
        f ? (i.insertAfter(r), r.addClass("buttons-fixed").css("top", s)) : (i.remove(), r.removeClass("buttons-fixed").css("top", 0))
      }
    }, e.fn.fixedTab = t, e.fn.fixedTab.Constructor = n, e(document).on("pageInit", function() {
      e.initFixedTab()
    })
  }(Zepto), + function(e) {
    "use strict";
    var t = 0,
      n = function(n) {
        function r() {
          l.hasClass("refreshing") || (-1 * f.scrollTop() >= 44 ? l.removeClass("pull-down").addClass("pull-up") : l.removeClass("pull-up").addClass("pull-down"))
        }

        function i() {
          l.hasClass("refreshing") || (l.removeClass("pull-down pull-up"), l.addClass("refreshing transitioning"), l.trigger("refresh"), t = +(new Date))
        }

        function s() {
          f.off("scroll", r), f.scroller.off("ptr", i)
        }
        var o = e(n);
        if (o.hasClass("pull-to-refresh-content") || (o = o.find(".pull-to-refresh-content")), o && 0 !== o.length) {
          var u = o.hasClass("content") ? o : o.parents(".content"),
            f = e.getScroller(u[0]);
          if (f) {
            var l = o;
            f.on("scroll", r), f.scroller.on("ptr", i), o[0].destroyPullToRefresh = s
          }
        }
      },
      r = function(n) {
        if (n = e(n), 0 === n.length && (n = e(".pull-to-refresh-content.refreshing")), 0 !== n.length) {
          var r = +(new Date) - t,
            i = r > 1e3 ? 0 : 1e3 - r,
            s = e.getScroller(n);
          setTimeout(function() {
            s.refresh(), n.removeClass("refreshing"), n.transitionEnd(function() {
              n.removeClass("transitioning")
            })
          }, i)
        }
      },
      i = function(t) {
        if (t = e(t), 0 === t.length && (t = e(".pull-to-refresh-content")), !t.hasClass("refreshing")) {
          t.addClass("refreshing");
          var n = e.getScroller(t);
          n.scrollTop(45, 200), t.trigger("refresh")
        }
      },
      s = function(t) {
        t = e(t);
        var n = t.hasClass("pull-to-refresh-content") ? t : t.find(".pull-to-refresh-content");
        0 !== n.length && n[0].destroyPullToRefresh && n[0].destroyPullToRefresh()
      };
    e._pullToRefreshJSScroll = {
      initPullToRefresh: n,
      pullToRefreshDone: r,
      pullToRefreshTrigger: i,
      destroyPullToRefresh: s
    }
  }(Zepto), + function(e) {
    "use strict";
    e.initPullToRefresh = function(t) {
      function n(t) {
        if (u) {
          if (!e.device.android) return;
          if ("targetTouches" in t && t.targetTouches.length > 1) return
        }
        f = !1, u = !0, l = void 0, m = void 0, b.x = "touchstart" === t.type ? t.targetTouches[0].pageX : t.pageX, b.y = "touchstart" === t.type ? t.targetTouches[0].pageY : t.pageY, h = (new Date).getTime(), p = e(this)
      }

      function r(t) {
        if (u) {
          var n = "touchmove" === t.type ? t.targetTouches[0].pageX : t.pageX,
            r = "touchmove" === t.type ? t.targetTouches[0].pageY : t.pageY;
          if ("undefined" == typeof l && (l = !!(l || Math.abs(r - b.y) > Math.abs(n - b.x))), !l) return void(u = !1);
          if (v = p[0].scrollTop, "undefined" == typeof m && 0 !== v && (m = !0), !f) {
            if (p.removeClass("transitioning"), v > p[0].offsetHeight) return void(u = !1);
            y && (g = p.attr("data-ptr-distance"), g.indexOf("%") >= 0 && (g = p[0].offsetHeight * parseInt(g, 10) / 100)), S = p.hasClass("refreshing") ? g : 0, E = p[0].scrollHeight !== p[0].offsetHeight && e.device.ios ? !1 : !0, E = !0
          }
          return f = !0, c = r - b.y, c > 0 && 0 >= v || 0 > v ? (e.device.ios && parseInt(e.device.osVersion.split(".")[0], 10) > 7 && 0 === v && !m && (E = !0), E && (t.preventDefault(), d = Math.pow(c, .85) + S, p.transform("translate3d(0," + d + "px,0)")), E && Math.pow(c, .85) > g || !E && c >= 2 * g ? (w = !0, p.addClass("pull-up").removeClass("pull-down")) : (w = !1, p.removeClass("pull-up").addClass("pull-down")), void 0) : (p.removeClass("pull-up pull-down"), void(w = !1))
        }
      }

      function i() {
        if (!u || !f) return u = !1, void(f = !1);
        if (d && (p.addClass("transitioning"), d = 0), p.transform(""), w) {
          if (p.hasClass("refreshing")) return;
          p.addClass("refreshing"), p.trigger("refresh")
        } else p.removeClass("pull-down");
        u = !1, f = !1
      }

      function s() {
        o.off(e.touchEvents.start, n), o.off(e.touchEvents.move, r), o.off(e.touchEvents.end, i)
      }
      var o = e(t);
      if (o.hasClass("pull-to-refresh-content") || (o = o.find(".pull-to-refresh-content")), o && 0 !== o.length) {
        var u, f, l, c, h, p, d, v, m, g, y, b = {},
          w = !1,
          E = !1,
          S = 0;
        p = o, p.attr("data-ptr-distance") ? y = !0 : g = 44, o.on(e.touchEvents.start, n), o.on(e.touchEvents.move, r), o.on(e.touchEvents.end, i), o[0].destroyPullToRefresh = s
      }
    }, e.pullToRefreshDone = function(t) {
      e(window).scrollTop(0), t = e(t), 0 === t.length && (t = e(".pull-to-refresh-content.refreshing")), t.removeClass("refreshing").addClass("transitioning"), t.transitionEnd(function() {
        t.removeClass("transitioning pull-up pull-down")
      })
    }, e.pullToRefreshTrigger = function(t) {
      t = e(t), 0 === t.length && (t = e(".pull-to-refresh-content")), t.hasClass("refreshing") || (t.addClass("transitioning refreshing"), t.trigger("refresh"))
    }, e.destroyPullToRefresh = function(t) {
      t = e(t);
      var n = t.hasClass("pull-to-refresh-content") ? t : t.find(".pull-to-refresh-content");
      0 !== n.length && n[0].destroyPullToRefresh && n[0].destroyPullToRefresh()
    }
  }(Zepto), + function(e) {
    "use strict";

    function t() {
      var t, n = e(this),
        r = e.getScroller(n),
        i = r.scrollTop(),
        s = r.scrollHeight(),
        o = n[0].offsetHeight,
        u = n[0].getAttribute("data-distance"),
        f = n.find(".virtual-list"),
        l = n.hasClass("infinite-scroll-top");
      if (u || (u = 50), "string" == typeof u && u.indexOf("%") >= 0 && (u = parseInt(u, 10) / 100 * o), u > o && (u = o), l) u > i && n.trigger("infinite");
      else if (i + o >= s - u) {
        if (f.length > 0 && (t = f[0].f7VirtualList, t && !t.reachEnd)) return;
        n.trigger("infinite")
      }
    }
    e.attachInfiniteScroll = function(n) {
      e.getScroller(n).on("scroll", t)
    }, e.detachInfiniteScroll = function(n) {
      e.getScroller(n).off("scroll", t)
    }, e.initInfiniteScroll = function(t) {
      function n() {
        e.detachInfiniteScroll(r), t.off("pageBeforeRemove", n)
      }
      t = e(t);
      var r = t.hasClass("infinite-scroll") ? t : t.find(".infinite-scroll");
      0 !== r.length && (e.attachInfiniteScroll(r), t.forEach(function(t) {
        if (e(t).hasClass("infinite-scroll-top")) {
          var n = t.scrollHeight - t.clientHeight;
          e(t).scrollTop(n)
        }
      }), t.on("pageBeforeRemove", n))
    }
  }(Zepto), + function(e) {
    "use strict";
    e(function() {
      e(document).on("focus", ".searchbar input", function(t) {
        var n = e(t.target);
        n.parents(".searchbar").addClass("searchbar-active")
      }), e(document).on("click", ".searchbar-cancel", function(t) {
        var n = e(t.target);
        n.parents(".searchbar").removeClass("searchbar-active")
      }), e(document).on("blur", ".searchbar input", function(t) {
        var n = e(t.target);
        n.parents(".searchbar").removeClass("searchbar-active")
      })
    })
  }(Zepto), + function(e) {
    "use strict";
    e.allowPanelOpen = !0, e.openPanel = function(t) {
      function n() {
        s.transitionEnd(function(r) {
          r.target === s[0] ? (t.hasClass("active") ? t.trigger("opened") : t.trigger("closed"), e.allowPanelOpen = !0) : n()
        })
      }
      if (!e.allowPanelOpen) return !1;
      ("left" === t || "right" === t) && (t = ".panel-" + t), t = t ? e(t) : e(".panel").eq(0);
      var r = t.hasClass("panel-right") ? "right" : "left";
      if (0 === t.length || t.hasClass("active")) return !1;
      e.closePanel(), e.allowPanelOpen = !1;
      var i = t.hasClass("panel-reveal") ? "reveal" : "cover";
      t.css({
        display: "block"
      }).addClass("active"), t.trigger("open");
      var s = (t[0].clientLeft, "reveal" === i ? e(e.getCurrentPage()) : t);
      return n(), e(document.body).addClass("with-panel-" + r + "-" + i), !0
    }, e.closePanel = function() {
      var t = e(".panel.active");
      if (0 === t.length) return !1;
      var n = t.hasClass("panel-reveal") ? "reveal" : "cover",
        r = t.hasClass("panel-left") ? "left" : "right";
      t.removeClass("active");
      var i = "reveal" === n ? e(".page") : t;
      t.trigger("close"), e.allowPanelOpen = !1, i.transitionEnd(function() {
        t.hasClass("active") || (t.css({
          display: ""
        }), t.trigger("closed"), e("body").removeClass("panel-closing"), e.allowPanelOpen = !0)
      }), e("body").addClass("panel-closing").removeClass("with-panel-" + r + "-" + n)
    }, e(document).on("click", ".open-panel", function(t) {
      var n = e(t.target).data("panel");
      e.openPanel(n)
    }), e(document).on("click", ".close-panel, .panel-overlay", function(t) {
      e.closePanel()
    }), e.initSwipePanels = function() {
      function t(t) {
        if (e.allowPanelOpen && (o || u) && !p && !(e(".modal-in, .photo-browser-in").length > 0) && (f || u || !(e(".panel.active").length > 0) || i.hasClass("active"))) {
          if (T.x = "touchstart" === t.type ? t.targetTouches[0].pageX : t.pageX, T.y = "touchstart" === t.type ? t.targetTouches[0].pageY : t.pageY, f || u) {
            if (e(".panel.active").length > 0) s = e(".panel.active").hasClass("panel-left") ? "left" : "right";
            else {
              if (u) return;
              s = o
            }
            if (!s) return
          }
          if (i = e(".panel.panel-" + s), i[0]) {
            if (b = i.hasClass("active"), l && !b) {
              if ("left" === s && T.x > l) return;
              if ("right" === s && T.x < window.innerWidth - l) return
            }
            d = !1, p = !0, v = void 0, m = (new Date).getTime(), S = void 0
          }
        }
      }

      function n(t) {
        if (p && i[0] && !t.f7PreventPanelSwipe) {
          var n = "touchmove" === t.type ? t.targetTouches[0].pageX : t.pageX,
            r = "touchmove" === t.type ? t.targetTouches[0].pageY : t.pageY;
          if ("undefined" == typeof v && (v = !!(v || Math.abs(r - T.y) > Math.abs(n - T.x))), v) return void(p = !1);
          if (!S && (S = n > T.x ? "to-right" : "to-left", "left" === s && "to-left" === S && !i.hasClass("active") || "right" === s && "to-right" === S && !i.hasClass("active"))) return void(p = !1);
          if (h) {
            var o = (new Date).getTime() - m;
            return 300 > o && ("to-left" === S && ("right" === s && e.openPanel(s), "left" === s && i.hasClass("active") && e.closePanel()), "to-right" === S && ("left" === s && e.openPanel(s), "right" === s && i.hasClass("active") && e.closePanel())), p = !1, console.log(3), void(d = !1)
          }
          d || (E = i.hasClass("panel-cover") ? "cover" : "reveal", b || (i.show(), x.show()), w = i[0].offsetWidth, i.transition(0)), d = !0, t.preventDefault();
          var u = b ? 0 : -c;
          "right" === s && (u = -u), g = n - T.x + u, "right" === s ? (y = g - (b ? w : 0), y > 0 && (y = 0), -w > y && (y = -w)) : (y = g + (b ? w : 0), 0 > y && (y = 0), y > w && (y = w)), "reveal" === E ? (N.transform("translate3d(" + y + "px,0,0)").transition(0), x.transform("translate3d(" + y + "px,0,0)")) : i.transform("translate3d(" + y + "px,0,0)").transition(0)
        }
      }

      function r(t) {
        if (!p || !d) return p = !1, void(d = !1);
        p = !1, d = !1;
        var n, r = (new Date).getTime() - m,
          o = 0 === y || Math.abs(y) === w;
        if (n = b ? y === -w ? "reset" : 300 > r && Math.abs(y) >= 0 || r >= 300 && Math.abs(y) <= w / 2 ? "left" === s && y === w ? "reset" : "swap" : "reset" : 0 === y ? "reset" : 300 > r && Math.abs(y) > 0 || r >= 300 && Math.abs(y) >= w / 2 ? "swap" : "reset", "swap" === n && (e.allowPanelOpen = !0, b ? (e.closePanel(), o && (i.css({
            display: ""
          }), e("body").removeClass("panel-closing"))) : e.openPanel(s), o && (e.allowPanelOpen = !0)), "reset" === n)
          if (b) e.allowPanelOpen = !0, e.openPanel(s);
          else if (e.closePanel(), o) e.allowPanelOpen = !0, i.css({
          display: ""
        });
        else {
          var u = "reveal" === E ? N : i;
          e("body").addClass("panel-closing"), u.transitionEnd(function() {
            e.allowPanelOpen = !0, i.css({
              display: ""
            }), e("body").removeClass("panel-closing")
          })
        }
        "reveal" === E && (N.transition(""), N.transform("")), i.transition("").transform(""), x.css({
          display: ""
        }).transform("")
      }
      var i, s, o = e.smConfig.swipePanel,
        u = e.smConfig.swipePanelOnlyClose,
        f = !0,
        l = !1,
        c = 2,
        h = !1;
      if (o || u) {
        var p, d, v, m, g, y, b, w, E, S, x = e(".panel-overlay"),
          T = {},
          N = e(".page");
        e(document).on(e.touchEvents.start, t), e(document).on(e.touchEvents.move, n), e(document).on(e.touchEvents.end, r)
      }
    }, e.initSwipePanels()
  }(Zepto), + function(e) {
    "use strict";

    function t(e) {
      for (var t = ["external", "tab-link", "open-popup", "close-popup", "open-panel", "close-panel"], n = t.length - 1; n >= 0; n--)
        if (e.hasClass(t[n])) return !0;
      var r = e.get(0),
        i = r.getAttribute("href"),
        s = ["http", "https"];
      return /^(\w+):/.test(i) && s.indexOf(RegExp.$1) < 0 ? !0 : r.hasAttribute("external") ? !0 : !1
    }

    function n(t) {
      var n = e.smConfig.routerFilter;
      if (e.isFunction(n)) {
        var r = n(t);
        if ("boolean" == typeof r) return r
      }
      return !0
    }
    window.CustomEvent || (window.CustomEvent = function(e, t) {
      t = t || {
        bubbles: !1,
        cancelable: !1,
        detail: void 0
      };
      var n = document.createEvent("CustomEvent");
      return n.initCustomEvent(e, t.bubbles, t.cancelable, t.detail), n
    }, window.CustomEvent.prototype = window.Event.prototype);
    var r = {
        pageLoadStart: "pageLoadStart",
        pageLoadCancel: "pageLoadCancel",
        pageLoadError: "pageLoadError",
        pageLoadComplete: "pageLoadComplete",
        pageAnimationStart: "pageAnimationStart",
        pageAnimationEnd: "pageAnimationEnd",
        beforePageRemove: "beforePageRemove",
        pageRemoved: "pageRemoved",
        beforePageSwitch: "beforePageSwitch",
        pageInit: "pageInitInternal"
      },
      i = {
        getUrlFragment: function(e) {
          var t = e.indexOf("#");
          return -1 === t ? "" : e.slice(t + 1)
        },
        getAbsoluteUrl: function(e) {
          var t = document.createElement("a");
          t.setAttribute("href", e);
          var n = t.href;
          return t = null, n
        },
        getBaseUrl: function(e) {
          var t = e.indexOf("#");
          return -1 === t ? e.slice(0) : e.slice(0, t)
        },
        toUrlObject: function(e) {
          var t = this.getAbsoluteUrl(e),
            n = this.getBaseUrl(t),
            r = this.getUrlFragment(e);
          return {
            base: n,
            full: t,
            original: e,
            fragment: r
          }
        },
        supportStorage: function() {
          var e = "sm.router.storage.ability";
          try {
            return sessionStorage.setItem(e, e), sessionStorage.removeItem(e), !0
          } catch (t) {
            return !1
          }
        }
      },
      s = {
        sectionGroupClass: "page-group",
        curPageClass: "page-current",
        visiblePageClass: "page-visible",
        pageClass: "page"
      },
      o = {
        leftToRight: "from-left-to-right",
        rightToLeft: "from-right-to-left"
      },
      u = window.history,
      a = function() {
        this.sessionNames = {
          currentState: "sm.router.currentState",
          maxStateId: "sm.router.maxStateId"
        }, this._init(), this.xhr = null, window.addEventListener("popstate", this._onPopState.bind(this))
      };
    a.prototype._init = function() {
      this.$view = e("body"), this.cache = {};
      var t = e(document),
        n = location.href;
      this._saveDocumentIntoCache(t, n);
      var r, o, a = i.toUrlObject(n),
        l = t.find("." + s.pageClass),
        c = t.find("." + s.curPageClass),
        p = c.eq(0);
      if (a.fragment && (o = t.find("#" + a.fragment)), o && o.length ? c = o.eq(0) : c.length || (c = l.eq(0)), c.attr("id") || c.attr("id", this._generateRandomId()), p.length && p.attr("id") !== c.attr("id") ? (p.removeClass(s.curPageClass), c.addClass(s.curPageClass)) : c.addClass(s.curPageClass), r = c.attr("id"), null === u.state) {
        var d = {
          id: this._getNextStateId(),
          url: i.toUrlObject(n),
          pageId: r
        };
        u.replaceState(d, "", n), this._saveAsCurrentState(d), this._incMaxStateId()
      }
    }, a.prototype.load = function(t, n) {
      void 0 === n && (n = !1), this._isTheSameDocument(location.href, t) ? this._switchToSection(i.getUrlFragment(t)) : (this._saveDocumentIntoCache(e(document), location.href), this._switchToDocument(t, n))
    }, a.prototype.forward = function() {
      u.forward()
    }, a.prototype.back = function() {
      u.back()
    }, a.prototype.loadPage = a.prototype.load, a.prototype._switchToSection = function(t) {
      if (t) {
        var n = this._getCurrentSection(),
          r = e("#" + t);
        n !== r && (this._animateSection(n, r, o.rightToLeft), this._pushNewState("#" + t, t))
      }
    }, a.prototype._switchToDocument = function(e, t, n, r) {
      var s = i.toUrlObject(e).base;
      t && delete this.cache[s];
      var o = this.cache[s],
        u = this;
      o ? this._doSwitchDocument(e, n, r) : this._loadDocument(e, {
        success: function(t) {
          try {
            u._parseDocument(e, t), u._doSwitchDocument(e, n, r)
          } catch (i) {
            location.href = e
          }
        },
        error: function() {
          location.href = e
        }
      })
    }, a.prototype._doSwitchDocument = function(t, n, o) {
      "undefined" == typeof n && (n = !0);
      var u, a = i.toUrlObject(t),
        l = this.$view.find("." + s.sectionGroupClass),
        c = e(e("<div></div>").append(this.cache[a.base].$content).html()),
        h = c.find("." + s.pageClass),
        p = c.find("." + s.curPageClass);
      a.fragment && (u = c.find("#" + a.fragment)), u && u.length ? p = u.eq(0) : p.length || (p = h.eq(0)), p.attr("id") || p.attr("id", this._generateRandomId());
      var v = this._getCurrentSection();
      v.trigger(r.beforePageSwitch, [v.attr("id"), v]), h.removeClass(s.curPageClass), p.addClass(s.curPageClass), this.$view.prepend(c), this._animateDocument(l, c, p, o), n && this._pushNewState(t, p.attr("id"))
    }, a.prototype._isTheSameDocument = function(e, t) {
      return i.toUrlObject(e).base === i.toUrlObject(t).base
    }, a.prototype._loadDocument = function(t, n) {
      this.xhr && this.xhr.readyState < 4 && (this.xhr.onreadystatechange = function() {}, this.xhr.abort(), this.dispatch(r.pageLoadCancel)), this.dispatch(r.pageLoadStart), n = n || {};
      var i = this;
      this.xhr = e.ajax({
        url: t,
        success: e.proxy(function(t, r, i) {
          var s = e("<html></html>");
          s.append(t), n.success && n.success.call(null, s, r, i)
        }, this),
        error: function(e, t, s) {
          n.error && n.error.call(null, e, t, s), i.dispatch(r.pageLoadError)
        },
        complete: function(e, t) {
          n.complete && n.complete.call(null, e, t), i.dispatch(r.pageLoadComplete)
        }
      })
    }, a.prototype._parseDocument = function(e, t) {
      var n = t.find("." + s.sectionGroupClass);
      if (!n.length) throw new Error("missing router view mark: " + s.sectionGroupClass);
      this._saveDocumentIntoCache(t, e)
    }, a.prototype._saveDocumentIntoCache = function(t, n) {
      var r = i.toUrlObject(n).base,
        o = e(t);
      this.cache[r] = {
        $doc: o,
        $content: o.find("." + s.sectionGroupClass)
      }
    }, a.prototype._getLastState = function() {
      var e = sessionStorage.getItem(this.sessionNames.currentState);
      try {
        e = JSON.parse(e)
      } catch (t) {
        e = null
      }
      return e
    }, a.prototype._saveAsCurrentState = function(e) {
      sessionStorage.setItem(this.sessionNames.currentState, JSON.stringify(e))
    }, a.prototype._getNextStateId = function() {
      var e = sessionStorage.getItem(this.sessionNames.maxStateId);
      return e ? parseInt(e, 10) + 1 : 1
    }, a.prototype._incMaxStateId = function() {
      sessionStorage.setItem(this.sessionNames.maxStateId, this._getNextStateId())
    }, a.prototype._animateDocument = function(t, n, i, o) {
      var u = i.attr("id"),
        a = t.find("." + s.curPageClass);
      a.addClass(s.visiblePageClass).removeClass(s.curPageClass), i.trigger(r.pageAnimationStart, [u, i]), this._animateElement(t, n, o), t.animationEnd(function() {
        a.removeClass(s.visiblePageClass), e(window).trigger(r.beforePageRemove, [t]), t.remove(), e(window).trigger(r.pageRemoved)
      }), n.animationEnd(function() {
        i.trigger(r.pageAnimationEnd, [u, i]), i.trigger(r.pageInit, [u, i])
      })
    }, a.prototype._animateSection = function(e, t, n) {
      var i = t.attr("id");
      e.trigger(r.beforePageSwitch, [e.attr("id"), e]), e.removeClass(s.curPageClass), t.addClass(s.curPageClass), t.trigger(r.pageAnimationStart, [i, t]), this._animateElement(e, t, n), t.animationEnd(function() {
        t.trigger(r.pageAnimationEnd, [i, t]), t.trigger(r.pageInit, [i, t])
      })
    }, a.prototype._animateElement = function(e, t, n) {
      "undefined" == typeof n && (n = o.rightToLeft);
      var r, i, s = ["page-from-center-to-left", "page-from-center-to-right", "page-from-right-to-center", "page-from-left-to-center"].join(" ");
      switch (n) {
        case o.rightToLeft:
          r = "page-from-center-to-left", i = "page-from-right-to-center";
          break;
        case o.leftToRight:
          r = "page-from-center-to-right", i = "page-from-left-to-center";
          break;
        default:
          r = "page-from-center-to-left", i = "page-from-right-to-center"
      }
      e.removeClass(s).addClass(r), t.removeClass(s).addClass(i), e.animationEnd(function() {
        e.removeClass(s)
      }), t.animationEnd(function() {
        t.removeClass(s)
      })
    }, a.prototype._getCurrentSection = function() {
      return this.$view.find("." + s.curPageClass).eq(0)
    }, a.prototype._back = function(t, n) {
      if (this._isTheSameDocument(t.url.full, n.url.full)) {
        var r = e("#" + t.pageId);
        if (r.length) {
          var i = this._getCurrentSection();
          this._animateSection(i, r, o.leftToRight), this._saveAsCurrentState(t)
        } else location.href = t.url.full
      } else this._saveDocumentIntoCache(e(document), n.url.full), this._switchToDocument(t.url.full, !1, !1, o.leftToRight), this._saveAsCurrentState(t)
    }, a.prototype._forward = function(t, n) {
      if (this._isTheSameDocument(t.url.full, n.url.full)) {
        var r = e("#" + t.pageId);
        if (r.length) {
          var i = this._getCurrentSection();
          this._animateSection(i, r, o.rightToLeft), this._saveAsCurrentState(t)
        } else location.href = t.url.full
      } else this._saveDocumentIntoCache(e(document), n.url.full), this._switchToDocument(t.url.full, !1, !1, o.rightToLeft), this._saveAsCurrentState(t)
    }, a.prototype._onPopState = function(e) {
      var t = e.state;
      if (t && t.pageId) {
        var n = this._getLastState();
        return n ? void(t.id !== n.id && (t.id < n.id ? this._back(t, n) : this._forward(t, n))) : void(console.error && console.error("Missing last state when backward or forward"))
      }
    }, a.prototype._pushNewState = function(e, t) {
      var n = {
        id: this._getNextStateId(),
        pageId: t,
        url: i.toUrlObject(e)
      };
      u.pushState(n, "", e), this._saveAsCurrentState(n), this._incMaxStateId()
    }, a.prototype._generateRandomId = function() {
      return "page-" + +(new Date)
    }, a.prototype.dispatch = function(e) {
      var t = new CustomEvent(e, {
        bubbles: !0,
        cancelable: !0
      });
      window.dispatchEvent(t)
    }, e(function() {
      if (e.smConfig.router && i.supportStorage()) {
        var r = e("." + s.pageClass);
        if (!r.length) {
          var o = "Disable router function because of no .page elements";
          return void(window.console && window.console.warn && console.warn(o))
        }
        var u = e.router = new a;
        e(document).on("click", "a", function(r) {
          var i = e(r.currentTarget),
            s = n(i);
          if (s && !t(i))
            if (r.preventDefault(), i.hasClass("back")) u.back();
            else {
              var o = i.attr("href");
              if (!o || "#" === o) return;
              var a = "true" === i.attr("data-no-cache");
              u.load(o, a)
            }
        })
      }
    })
  }(Zepto), + function(e) {
    "use strict";
    e.lastPosition = function(t) {
      function n(t, n) {
        i.forEach(function(r, i) {
          if (0 !== e(r).length) {
            var s = t,
              o = sessionStorage.getItem(s);
            n.find(r).scrollTop(parseInt(o))
          }
        })
      }

      function r(t, n) {
        var r = t;
        i.forEach(function(t, i) {
          0 !== e(t).length && sessionStorage.setItem(r, n.find(t).scrollTop())
        })
      }
      if (sessionStorage) {
        var i = t.needMemoryClass || [];
        e(window).off("beforePageSwitch").on("beforePageSwitch", function(e, t, n) {
          r(t, n)
        }), e(window).off("pageAnimationStart").on("pageAnimationStart", function(e, t, r) {
          n(t, r)
        })
      }
    }
  }(Zepto), + function(e) {
    "use strict";
    var t = function() {
      var t = e(".page-current");
      return t[0] || (t = e(".page").addClass("page-current")), t
    };
    e.initPage = function(n) {
      var r = t();
      r[0] || (r = e(document.body));
      var i = r.hasClass("content") ? r : r.find(".content");
      i.scroller(), e.initPullToRefresh(i), e.initInfiniteScroll(i), e.initCalendar(i), e.initSwiper && e.initSwiper(i)
    }, e.smConfig.showPageLoadingIndicator && (e(window).on("pageLoadStart", function() {
      e.showIndicator()
    }), e(window).on("pageAnimationStart", function() {
      e.hideIndicator()
    }), e(window).on("pageLoadCancel", function() {
      e.hideIndicator()
    }), e(window).on("pageLoadComplete", function() {
      e.hideIndicator()
    }), e(window).on("pageLoadError", function() {
      e.hideIndicator(), e.toast("åŠ è½½å¤±è´¥")
    })), e(window).on("pageAnimationStart", function(t, n, r) {
      e.closeModal(), e.closePanel(), e("body").removeClass("panel-closing"), e.allowPanelOpen = !0
    }), e(window).on("pageInit", function() {
      e.hideIndicator(), e.lastPosition({
        needMemoryClass: [".content"]
      })
    }), window.addEventListener("pageshow", function(e) {
      e.persisted && location.reload()
    }), e.init = function() {
      var n = t(),
        r = n[0].id;
      e.initPage(), n.trigger("pageInit", [r, n])
    }, e(function() {
      FastClick.attach(document.body), e.smConfig.autoInit && e.init(), e(document).on("pageInitInternal", function(t, n, r) {
        e.init()
      })
    })
  }(Zepto), + function(e) {
    "use strict";
    if (e.device.ios) {
      var t = function(e) {
          var t, n;
          e = e || document.querySelector(e), e && e.addEventListener("touchstart", function(r) {
            t = r.touches[0].pageY, n = e.scrollTop, 0 >= n && (e.scrollTop = 1), n + e.offsetHeight >= e.scrollHeight && (e.scrollTop = e.scrollHeight - e.offsetHeight - 1)
          }, !1)
        },
        n = function() {
          var n = e(".page-current").length > 0 ? ".page-current " : "",
            r = e(n + ".content");
          new t(r[0])
        };
      e(document).on(e.touchEvents.move, ".page-current .bar", function() {
        event.preventDefault()
      }), e(document).on("pageLoadComplete", function() {
        n()
      }), e(document).on("pageAnimationEnd", function() {
        n()
      }), n()
    }
  }(Zepto);
var mmcn = {
  logoUrl: "/m-resources/img/logo-cn.svg",
  siteName: "币安",
  Register: "注册",
  Login: "登录",
  Market: "市场",
  Trade: "交易",
  "Open Orders": "当前委托",
  "Trade  History": "最新成交",
  "Trade History": "历史成交",
  Deposits: "充值",
  Deposit: "充值",
  Withdrawals: "提现",
  Withdrawal: "提现",
  "Deposits History": "充值记录",
  "Withdrawals History": "提现记录",
  Trollbox: "聊天室",
  Support: "帮助中心",
  Language: "语言",
  "24h High": "24h最高价",
  "24h Low": "24h最低价",
  "24h Change": "24h涨跌",
  "24h Volume": "24h成交额",
  Candle: "K线图",
  Depth: "深度图",
  "Last Price": "最新价",
  Buy: "买入",
  Sell: "卖出",
  Qty: "数量",
  Price: "价格",
  OpenPrice: "委托价格",
  OpenAmount: "委托数量",
  Total: "金额",
  Fee: "手续费",
  "Can Buy": "可买",
  "Can Sell": "可卖",
  Balance: "余额",
  Available: "可用余额",
  "In Use": "今日已用",
  Pair: "市场",
  Action: "操作",
  Cancel: "取消",
  History: "历史记录",
  Balance: "余额",
  Deposits: "充值",
  Withdraw: "提现",
  Address: "地址",
  Copy: "复制",
  "Copy Address": "复制地址",
  "Add Withdrawal Address": "新增提现地址",
  "The qty cannot be blank": "数量不能为空",
  "Please enter a correct price": "请输入正确的价格",
  "Please enter a correct qty": "请输入正确的数量",
  "Your balance is not enough": "余额不足",
  orderSucceed: "下单成功",
  noOpenOrders: "暂无当前委托",
  noTradeHistory: "暂无成交记录",
  transaction: "交易",
  Market: "行情",
  "open orders": "当前委托",
  Password: "密码",
  "Repeat Password": "确认密码",
  "Email Address": "邮箱地址",
  Email: "邮箱",
  "Forgot your password": "忘记密码",
  "Don't have an account yet?": "还没账号？",
  "Enter 2FA code": "填写2FA码",
  "Lost your phone": "无手机",
  "Contact support": "帮助中心",
  Succeed: "成功",
  "Please login again": "请立即登录",
  "You can login now": "现在登录",
  "I agree to Binance's": "请阅读并同意Binance的",
  "Terms Of Use": "用户协议",
  "Already Registered?": "已经注册？",
  "Reset Password": "重置密码",
  Submit: "确定",
  "Setting New Password": "设置新密码",
  "New Password": "新密码",
  "Repeat New Password": "确认新密码",
  "Your email address": "你的邮箱地址",
  "Email Verification": "邮箱验证",
  emailVerifyTip: "已向您的注册邮箱发送了一封激活邮件，请点击邮件中的链接完成账户激活。 如果长时间未收到邮件，请尝试在垃圾邮件中查找。",
  "We sent a verification message to your email": "已发送验证信息到你的邮箱",
  "Click the link in the email to get started": "单击链接地址开始登录",
  Description: "内容",
  transHistory: "充值提现记录",
  logout: "退出",
  "Deposits & Withdrawals": "充值提现",
  "Failed to Generate a New Address": "生成新地址失败！",
  "This address has not been used and can not generate a new address": "该地址从未使用过，不能生成新地址！",
  "Generate a New Address": "生成新地址",
  "Hide QR Code": "隐藏二维码",
  "Show QR Code": "显示二维码",
  limitWithdraw: "修改密码后，24小时不能提现。",
  Actual: "实际到账",
  Amount: "数量",
  Time: "时间",
  Coin: "币种",
  status: "状态",
  "Withdraw History": "提现记录",
  "Deposit History": "充值记录",
  unverified: "未验证",
  fancelled: "已取消",
  "under review": "审核中",
  rejected: "已拒绝",
  Processing: "处理中",
  failed: "失败",
  success: "成功",
  Returned: "已退回",
  completed: "已完成",
  confirming: "待确认",
  "This field is required.": "该字段不能为空",
  "Password must be at least 8 characters with uppercase letters.": "至少8个字符，必须包含大写字母和数字",
  Filled: "已成交",
  "Order Price": "订单价格",
  "Cancel All": "全撤",
  Group: "深度合并",
  Confirm: "确认",
  "Are you sure to cancel all?": "您确认取消全部委托？",
  Markets: "市场列表",
  Change: "涨跌",
  Volume: "成交额",
  Low: "最低",
  High: "最高",
  Exchange: "交易中心",
  Charts: "行情",
  Current: "当前选择",
  Account: "用户中心",
  "Choose Coin": "选择币种",
  Suspend: "暂停",
  "Save QR Code": "保存二维码",
  "Daily withdrawal limit": "日提现额度",
  "Transaction Fee": "手续费",
  "You Will Get": "实际到账",
  "Use New Address": "使用新地址",
  Label: "备注标签",
  "This field is required": "该字段不能为空",
  "Not enough.": "余额不足",
  "The input format is incorrect.": "格式不正确",
  "2FA": "二次验证",
  "Google Auth": "谷歌验证",
  "SMS Auth": "手机验证",
  "Google Authenticator Code": "谷歌验证码",
  "SMS Authenticator Code": "短信验证码",
  "Send SMS": "发送验证码",
  "Please check your email for further instructions.": "已向您的注册邮箱发送验证邮件，请点击邮件中的链接确认本次提现请求.",
  "Estimated Value": "总当前估值",
  "Total Balance": "总额",
  "Available Balance": "可用余额",
  "In Order": "下单冻结",
  "BTC Value": "BTC估值",
  "Left Parenthesis": "（",
  "Right Parenthesis": "）",
  "Resend Mail": "重新发送邮件",
  "You have no Deposit History": "您暂无充值记录",
  "You have no Withdraw History": "您暂无提现记录",
  "Warm promptfir": "请不要透露密码、短信和谷歌验证码给任何人，包括币安的工作人员。",
  feetip: "使用BNB支付交易手续费",
  "50% discount": "50% 折扣",
  "Last login Time": "最后登录时间",
  "Google Authenticator": "谷歌验证",
  "SMS Authenticator": "手机验证",
  Enable: "启用",
  Disable: "关闭",
  "Change Password": "修改密码",
  "Old Password": "原密码",
  "Confirm Password": "确认密码",
  "Confirm New Password": "确认新密码",
  OK: "确定",
  "Passwords are not the same.": "两次密码不一致",
  "Invalid email address.": "无效的邮箱地址",
  On: "已启用",
  Off: "未启用",
  "Identity Authentication": "身份认证",
  Authenticated: "已认证",
  Unverified: "未认证",
  "Please go to Binance PC website to finish Google Authenticator setting.": "请前往币安官网完成谷歌二次验证设置",
  "Please go to Binance PC website to finish SMS Authenticator setting.": "请前往币安官网完成手机二次验证设置",
  "Please go to Binance PC website to complete related setting.": "请前往币安官网完成相关操作",
  "Daily Withdrawal Limit": "日提现额度",
  "Higher Limit": "更高提现额度",
  Sumbit: "确定",
  "Email Verification": "邮箱验证",
  emailTip: "您尚未激活该账户，请前往注册邮箱中点击邮件激活链接进行激活。如果长时间未收到邮件，请尝试在垃圾邮件中查找。",
  "Resend mail": "重新发送邮件",
  termofuseUrl: "https://binance.zendesk.com/hc/zh-cn/articles/115000421672",
  Funds: "资产管理",
  Loadmore: "加载更多",
  "No More": "没有更多",
  Check: "检查",
  "Order Amount": "订单数量",
  "Max Qty": "最大数量",
  Regain: "重新获取",
  marketplace: "市场",
  transHistoryTitle: "历史记录",
  "2FA": "二次验证",
  "Forget Password": "忘记密码",
  withdrawVerifytitle: "提现确认",
  "Switch to Desktop Version": "切换到桌面版",
  MaxAmountSell: "可卖",
  MaxAmountBuy: "可买",
  "Deposits And Withdrawals": "充值提现",
  "Account activated": "您的账户已激活。请登录开始交易。",
  "Activation link expired.  Please register again.": "激活链接已失效请您重新发起注册申请。",
  "Please check your activation link and try again.": "请检查您提供给的电子邮件地址的链接并再次尝试。",
  fail: "失败",
  "Transaction History": "充值提现记录",
  OpenCancel: "撤销",
  "Verify Your Email": "邮件验证",
  open: "开",
  high: "高",
  low: "低",
  close: "收",
  fudu: "幅",
  timeLine: "分时",
  day: "日",
  week: "周",
  minute: "分钟",
  minutes: "分钟",
  tradeHistory: "成交历史",
  price: "价格",
  qty: "数量",
  time: "时间",
  withdrawAll: "全部",
  "Hide 0 Balances": "隐藏0余额",
  "Show All": "显示全部",
  speAddressTips: "充值地址不能重复使用。在第一次使用充值地址后，随后充值到此相同的地址将不会被确认。",
  "I understand": "我已知晓",
  "Binance Refer-a-Friend Program": "超级返利",
  "Referral ID": "推荐人ID （选填）",
  "Referral ID is invalid.": "推荐人ID无效。",
  loginImportant: "请确认您正在访问"
};
var mmen = {
  logoUrl: "/m-resources/img/logo-en.svg",
  siteName: "Binance.com",
  orderSucceed: "Succeed",
  noOpenOrders: "You have no open orders",
  noTradeHistory: "You have no trade history",
  transHistory: "Deposits & Withdrawals History",
  limitWithdraw: "You are not allowed to withdraw within 24 hours after change login password.",
  "Left Parenthesis": "(",
  "Right Parenthesis": ")",
  "Warm promptfir": "Please do not disclose SMS and Google Authentication codes to anyone, including Binance customer support.",
  feetip: "Using BNB to pay for fees",
  emailTip: "Your account is not activated yet. Please click on the verification link in your email. If you didn’t receive an email, please check your spam folder.",
  termofuseUrl: "https://binance.zendesk.com/hc/en-us/articles/115000421672-Terms-of-Use",
  marketplace: "Markets",
  transHistoryTitle: "Deposits & Withdrawls History",
  withdrawVerifytitle: "Withdrawal Confirmed",
  MaxAmountSell: "Max Amount",
  MaxAmountBuy: "Max Amount",
  Loadmore: "Load More",
  OpenPrice: "Price",
  OpenAmount: "Amount",
  emailVerifyTip: "To complete the registration process look for an email in your inbox that provides further instructions. If you cannot find the email, please check your spam email.",
  "Deposits And Withdrawals": "Deposits Withdrawals",
  "Account activated": "Your account is activated. Please login to trade.",
  OpenCancel: "Cancel",
  open: "O",
  high: "H",
  low: "L",
  close: "C",
  fudu: "Inc",
  timeLine: "Time",
  day: "Day",
  week: "Week",
  minutes: "Mins",
  minute: "Min",
  tradeHistory: "Trade History",
  price: "Price",
  qty: "Qty",
  time: "Time",
  withdrawAll: "Max",
  speAddressTips: "deposit addresses should not be used more than once. After the first use of a deposit address, subsequent deposits to the same address will not be credited.",
  "Referral ID": "Referral ID (optional)",
  "Binance Refer-a-Friend Program": "Binance Referral Program",
  loginImportant: "Please check that you are visiting"
};
(function(e, t, n) {
  "use strict";

  function r(e) {
    return function() {
      var t = arguments[0],
        n, t = "[" + (e ? e + ":" : "") + t + "] http://errors.angularjs.org/1.2.28/" + (e ? e + "/" : "") + t;
      for (n = 1; n < arguments.length; n++) t = t + (1 == n ? "?" : "&") + "p" + (n - 1) + "=" + encodeURIComponent("function" == typeof arguments[n] ? arguments[n].toString().replace(/ \{[\s\S]*$/, "") : "undefined" == typeof arguments[n] ? "undefined" : "string" != typeof arguments[n] ? JSON.stringify(arguments[n]) : arguments[n]);
      return Error(t)
    }
  }

  function i(e) {
    if (null == e || N(e)) return !1;
    var t = e.length;
    return 1 === e.nodeType && t ? !0 : w(e) || or(e) || 0 === t || "number" == typeof t && 0 < t && t - 1 in e
  }

  function s(e, t, n) {
    var r;
    if (e)
      if (x(e))
        for (r in e) "prototype" == r || "length" == r || "name" == r || e.hasOwnProperty && !e.hasOwnProperty(r) || t.call(n, e[r], r);
      else if (or(e) || i(e))
      for (r = 0; r < e.length; r++) t.call(n, e[r], r);
    else if (e.forEach && e.forEach !== s) e.forEach(t, n);
    else
      for (r in e) e.hasOwnProperty(r) && t.call(n, e[r], r);
    return e
  }

  function o(e) {
    var t = [],
      n;
    for (n in e) e.hasOwnProperty(n) && t.push(n);
    return t.sort()
  }

  function u(e, t, n) {
    for (var r = o(e), i = 0; i < r.length; i++) t.call(n, e[r[i]], r[i]);
    return r
  }

  function a(e) {
    return function(t, n) {
      e(n, t)
    }
  }

  function f() {
    for (var e = sr.length, t; e;) {
      e--, t = sr[e].charCodeAt(0);
      if (57 == t) return sr[e] = "A", sr.join("");
      if (90 != t) return sr[e] = String.fromCharCode(t + 1), sr.join("");
      sr[e] = "0"
    }
    return sr.unshift("0"), sr.join("")
  }

  function l(e, t) {
    t ? e.$$hashKey = t : delete e.$$hashKey
  }

  function c(e) {
    var t = e.$$hashKey;
    return s(arguments, function(t) {
      t !== e && s(t, function(t, n) {
        e[n] = t
      })
    }), l(e, t), e
  }

  function h(e) {
    return parseInt(e, 10)
  }

  function p(e, t) {
    return c(new(c(function() {}, {
      prototype: e
    })), t)
  }

  function d() {}

  function v(e) {
    return e
  }

  function m(e) {
    return function() {
      return e
    }
  }

  function g(e) {
    return "undefined" == typeof e
  }

  function y(e) {
    return "undefined" != typeof e
  }

  function b(e) {
    return null != e && "object" == typeof e
  }

  function w(e) {
    return "string" == typeof e
  }

  function E(e) {
    return "number" == typeof e
  }

  function S(e) {
    return "[object Date]" === er.call(e)
  }

  function x(e) {
    return "function" == typeof e
  }

  function T(e) {
    return "[object RegExp]" === er.call(e)
  }

  function N(e) {
    return e && e.document && e.location && e.alert && e.setInterval
  }

  function C(e) {
    return !!e && !!(e.nodeName || e.prop && e.attr && e.find)
  }

  function k(e, t, n) {
    var r = [];
    return s(e, function(e, i, s) {
      r.push(t.call(n, e, i, s))
    }), r
  }

  function L(e, t) {
    if (e.indexOf) return e.indexOf(t);
    for (var n = 0; n < e.length; n++)
      if (t === e[n]) return n;
    return -1
  }

  function A(e, t) {
    var n = L(e, t);
    return 0 <= n && e.splice(n, 1), t
  }

  function O(e, t, n, r) {
    if (N(e) || e && e.$evalAsync && e.$watch) throw tr("cpws");
    if (t) {
      if (e === t) throw tr("cpi");
      n = n || [], r = r || [];
      if (b(e)) {
        var i = L(n, e);
        if (-1 !== i) return r[i];
        n.push(e), r.push(t)
      }
      if (or(e))
        for (var o = t.length = 0; o < e.length; o++) i = O(e[o], null, n, r), b(e[o]) && (n.push(e[o]), r.push(i)), t.push(i);
      else {
        var u = t.$$hashKey;
        or(t) ? t.length = 0 : s(t, function(e, n) {
          delete t[n]
        });
        for (o in e) i = O(e[o], null, n, r), b(e[o]) && (n.push(e[o]), r.push(i)), t[o] = i;
        l(t, u)
      }
    } else if (t = e) or(e) ? t = O(e, [], n, r) : S(e) ? t = new Date(e.getTime()) : T(e) ? (t = RegExp(e.source, e.toString().match(/[^\/]*$/)[0]), t.lastIndex = e.lastIndex) : b(e) && (t = O(e, {}, n, r));
    return t
  }

  function M(e, t) {
    if (or(e)) {
      t = t || [];
      for (var n = 0; n < e.length; n++) t[n] = e[n]
    } else if (b(e))
      for (n in t = t || {}, e) !$n.call(e, n) || "$" === n.charAt(0) && "$" === n.charAt(1) || (t[n] = e[n]);
    return t || e
  }

  function _(e, t) {
    if (e === t) return !0;
    if (null === e || null === t) return !1;
    if (e !== e && t !== t) return !0;
    var r = typeof e,
      i;
    if (r == typeof t && "object" == r) {
      if (!or(e)) {
        if (S(e)) return S(t) ? isNaN(e.getTime()) && isNaN(t.getTime()) || e.getTime() === t.getTime() : !1;
        if (T(e) && T(t)) return e.toString() == t.toString();
        if (e && e.$evalAsync && e.$watch || t && t.$evalAsync && t.$watch || N(e) || N(t) || or(t)) return !1;
        r = {};
        for (i in e)
          if ("$" !== i.charAt(0) && !x(e[i])) {
            if (!_(e[i], t[i])) return !1;
            r[i] = !0
          }
        for (i in t)
          if (!r.hasOwnProperty(i) && "$" !== i.charAt(0) && t[i] !== n && !x(t[i])) return !1;
        return !0
      }
      if (!or(t)) return !1;
      if ((r = e.length) == t.length) {
        for (i = 0; i < r; i++)
          if (!_(e[i], t[i])) return !1;
        return !0
      }
    }
    return !1
  }

  function D(e, t) {
    var n = 2 < arguments.length ? Yn.call(arguments, 2) : [];
    return !x(t) || t instanceof RegExp ? t : n.length ? function() {
      return arguments.length ? t.apply(e, n.concat(Yn.call(arguments, 0))) : t.apply(e, n)
    } : function() {
      return arguments.length ? t.apply(e, arguments) : t.call(e)
    }
  }

  function P(e, r) {
    var i = r;
    return "string" == typeof e && "$" === e.charAt(0) ? i = n : N(r) ? i = "$WINDOW" : r && t === r ? i = "$DOCUMENT" : r && r.$evalAsync && r.$watch && (i = "$SCOPE"), i
  }

  function H(e, t) {
    return "undefined" == typeof e ? n : JSON.stringify(e, P, t ? "  " : null)
  }

  function B(e) {
    return w(e) ? JSON.parse(e) : e
  }

  function j(e) {
    return "function" == typeof e ? e = !0 : e && 0 !== e.length ? (e = Vn("" + e), e = "f" != e && "0" != e && "false" != e && "no" != e && "n" != e && "[]" != e) : e = !1, e
  }

  function F(e) {
    e = Qn(e).clone();
    try {
      e.empty()
    } catch (t) {}
    var n = Qn("<div>").append(e).html();
    try {
      return 3 === e[0].nodeType ? Vn(n) : n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/, function(e, t) {
        return "<" + Vn(t)
      })
    } catch (r) {
      return Vn(n)
    }
  }

  function I(e) {
    try {
      return decodeURIComponent(e)
    } catch (t) {}
  }

  function q(e) {
    var t = {},
      n, r;
    return s((e || "").split("&"), function(e) {
      e && (n = e.replace(/\+/g, "%20").split("="), r = I(n[0]), y(r) && (e = y(n[1]) ? I(n[1]) : !0, $n.call(t, r) ? or(t[r]) ? t[r].push(e) : t[r] = [t[r], e] : t[r] = e))
    }), t
  }

  function R(e) {
    var t = [];
    return s(e, function(e, n) {
      or(e) ? s(e, function(e) {
        t.push(z(n, !0) + (!0 === e ? "" : "=" + z(e, !0)))
      }) : t.push(z(n, !0) + (!0 === e ? "" : "=" + z(e, !0)))
    }), t.length ? t.join("&") : ""
  }

  function U(e) {
    return z(e, !0).replace(/%26/gi, "&").replace(/%3D/gi, "=").replace(/%2B/gi, "+")
  }

  function z(e, t) {
    return encodeURIComponent(e).replace(/%40/gi, "@").replace(/%3A/gi, ":").replace(/%24/g, "$").replace(/%2C/gi, ",").replace(/%20/g, t ? "%20" : "+")
  }

  function W(e, n) {
    function r(e) {
      e && i.push(e)
    }
    var i = [e],
      o, u, a = ["ng:app", "ng-app", "x-ng-app", "data-ng-app"],
      f = /\sng[:\-]app(:\s*([\w\d_]+);?)?\s/;
    s(a, function(n) {
      a[n] = !0, r(t.getElementById(n)), n = n.replace(":", "\\:"), e.querySelectorAll && (s(e.querySelectorAll("." + n), r), s(e.querySelectorAll("." + n + "\\:"), r), s(e.querySelectorAll("[" + n + "]"), r))
    }), s(i, function(e) {
      if (!o) {
        var t = f.exec(" " + e.className + " ");
        t ? (o = e, u = (t[2] || "").replace(/\s+/g, ",")) : s(e.attributes, function(t) {
          !o && a[t.name] && (o = e, u = t.value)
        })
      }
    }), o && n(o, u ? [u] : [])
  }

  function X(n, r) {
    var i = function() {
        n = Qn(n);
        if (n.injector()) {
          var e = n[0] === t ? "document" : F(n);
          throw tr("btstrpd", e.replace(/</, "&lt;").replace(/>/, "&gt;"))
        }
        return r = r || [], r.unshift(["$provide", function(e) {
          e.value("$rootElement", n)
        }]), r.unshift("ng"), e = Et(r), e.invoke(["$rootScope", "$rootElement", "$compile", "$injector", "$animate", function(e, t, n, r, i) {
          e.$apply(function() {
            t.data("$injector", r), n(t)(e)
          })
        }]), e
      },
      o = /^NG_DEFER_BOOTSTRAP!/;
    if (e && !o.test(e.name)) return i();
    e.name = e.name.replace(o, ""), nr.resumeBootstrap = function(e) {
      s(e, function(e) {
        r.push(e)
      }), i()
    }
  }

  function V(e, t) {
    return t = t || "_", e.replace(fr, function(e, n) {
      return (n ? t : "") + e.toLowerCase()
    })
  }

  function $(e, t, n) {
    if (!e) throw tr("areq", t || "?", n || "required");
    return e
  }

  function J(e, t, n) {
    return n && or(e) && (e = e[e.length - 1]), $(x(e), t, "not a function, got " + (e && "object" == typeof e ? e.constructor.name || "Object" : typeof e)), e
  }

  function K(e, t) {
    if ("hasOwnProperty" === e) throw tr("badname", t)
  }

  function Q(e, t, n) {
    if (!t) return e;
    t = t.split(".");
    for (var r, i = e, s = t.length, o = 0; o < s; o++) r = t[o], e && (e = (i = e)[r]);
    return !n && x(e) ? D(i, e) : e
  }

  function G(e) {
    var t = e[0];
    e = e[e.length - 1];
    if (t === e) return Qn(t);
    var n = [t];
    do {
      t = t.nextSibling;
      if (!t) break;
      n.push(t)
    } while (t !== e);
    return Qn(n)
  }

  function Y(e) {
    var t = r("$injector"),
      n = r("ng");
    return e = e.angular || (e.angular = {}), e.$$minErr = e.$$minErr || r, e.module || (e.module = function() {
      var e = {};
      return function(r, i, s) {
        if ("hasOwnProperty" === r) throw n("badname", "module");
        return i && e.hasOwnProperty(r) && (e[r] = null), e[r] || (e[r] = function() {
          function e(e, t, r) {
            return function() {
              return n[r || "push"]([e, t, arguments]), a
            }
          }
          if (!i) throw t("nomod", r);
          var n = [],
            o = [],
            u = e("$injector", "invoke"),
            a = {
              _invokeQueue: n,
              _runBlocks: o,
              requires: i,
              name: r,
              provider: e("$provide", "provider"),
              factory: e("$provide", "factory"),
              service: e("$provide", "service"),
              value: e("$provide", "value"),
              constant: e("$provide", "constant", "unshift"),
              animation: e("$animateProvider", "register"),
              filter: e("$filterProvider", "register"),
              controller: e("$controllerProvider", "register"),
              directive: e("$compileProvider", "directive"),
              config: u,
              run: function(e) {
                return o.push(e), this
              }
            };
          return s && u(s), a
        }())
      }
    }())
  }

  function Z(t) {
    c(t, {
      bootstrap: X,
      copy: O,
      extend: c,
      equals: _,
      element: Qn,
      forEach: s,
      injector: Et,
      noop: d,
      bind: D,
      toJson: H,
      fromJson: B,
      identity: v,
      isUndefined: g,
      isDefined: y,
      isString: w,
      isFunction: x,
      isObject: b,
      isNumber: E,
      isElement: C,
      isArray: or,
      version: lr,
      isDate: S,
      lowercase: Vn,
      uppercase: Jn,
      callbacks: {
        counter: 0
      },
      $$minErr: r,
      $$csp: ar
    }), rr = Y(e);
    try {
      rr("ngLocale")
    } catch (n) {
      rr("ngLocale", []).provider("$locale", zt)
    }
    rr("ng", ["ngLocale"], ["$provide", function(e) {
      e.provider({
        $$sanitizeUri: mn
      }), e.provider("$compile", Lt).directive({
        a: ui,
        input: yi,
        textarea: yi,
        form: ci,
        script: es,
        select: rs,
        style: ss,
        option: is,
        ngBind: Oi,
        ngBindHtml: _i,
        ngBindTemplate: Mi,
        ngClass: Di,
        ngClassEven: Hi,
        ngClassOdd: Pi,
        ngCloak: Bi,
        ngController: ji,
        ngForm: hi,
        ngHide: Ji,
        ngIf: qi,
        ngInclude: Ri,
        ngInit: zi,
        ngNonBindable: Wi,
        ngPluralize: Xi,
        ngRepeat: Vi,
        ngShow: $i,
        ngStyle: Ki,
        ngSwitch: Qi,
        ngSwitchWhen: Gi,
        ngSwitchDefault: Yi,
        ngOptions: ns,
        ngTransclude: Zi,
        ngModel: Ti,
        ngList: ki,
        ngChange: Ni,
        required: Ci,
        ngRequired: Ci,
        ngValue: Ai
      }).directive({
        ngInclude: Ui
      }).directive(ai).directive(Fi), e.provider({
        $anchorScroll: St,
        $animate: _r,
        $browser: Nt,
        $cacheFactory: Ct,
        $controller: Mt,
        $document: _t,
        $exceptionHandler: Dt,
        $filter: Cn,
        $interpolate: Rt,
        $interval: Ut,
        $http: jt,
        $httpBackend: It,
        $location: tn,
        $log: nn,
        $parse: cn,
        $rootScope: vn,
        $q: hn,
        $sce: wn,
        $sceDelegate: bn,
        $sniffer: En,
        $templateCache: kt,
        $timeout: Sn,
        $window: Nn,
        $$rAF: dn,
        $$asyncCallback: xt
      })
    }])
  }

  function et(e) {
    return e.replace(vr, function(e, t, n, r) {
      return r ? n.toUpperCase() : n
    }).replace(mr, "Moz$1")
  }

  function tt(e, t, n, r) {
    function i(e) {
      var i = n && e ? [this.filter(e)] : [this],
        o = t,
        u, a, f, l, c, h;
      if (!r || null != e)
        for (; i.length;)
          for (u = i.shift(), a = 0, f = u.length; a < f; a++)
            for (l = Qn(u[a]), o ? l.triggerHandler("$destroy") : o = !o, c = 0, l = (h = l.children()).length; c < l; c++) i.push(Gn(h[c]));
      return s.apply(this, arguments)
    }
    var s = Gn.fn[e],
      s = s.$original || s;
    i.$original = s, Gn.fn[e] = i
  }

  function nt(e) {
    if (e instanceof nt) return e;
    w(e) && (e = ur(e));
    if (!(this instanceof nt)) {
      if (w(e) && "<" != e.charAt(0)) throw gr("nosel");
      return new nt(e)
    }
    if (w(e)) {
      var n = e;
      e = t;
      var r;
      if (r = yr.exec(n)) e = [e.createElement(r[1])];
      else {
        var i = e,
          s;
        e = i.createDocumentFragment(), r = [];
        if (br.test(n)) {
          i = e.appendChild(i.createElement("div")), s = (wr.exec(n) || ["", ""])[1].toLowerCase(), s = Sr[s] || Sr._default, i.innerHTML = "<div>&#160;</div>" + s[1] + n.replace(Er, "<$1></$2>") + s[2], i.removeChild(i.firstChild);
          for (n = s[0]; n--;) i = i.lastChild;
          n = 0;
          for (s = i.childNodes.length; n < s; ++n) r.push(i.childNodes[n]);
          i = e.firstChild, i.textContent = ""
        } else r.push(i.createTextNode(n));
        e.textContent = "", e.innerHTML = "", e = r
      }
      ht(this, e), Qn(t.createDocumentFragment()).append(this)
    } else ht(this, e)
  }

  function rt(e) {
    return e.cloneNode(!0)
  }

  function it(e) {
    ot(e);
    var t = 0;
    for (e = e.childNodes || []; t < e.length; t++) it(e[t])
  }

  function st(e, t, n, r) {
    if (y(r)) throw gr("offargs");
    var i = ut(e, "events");
    ut(e, "handle") && (g(t) ? s(i, function(t, n) {
      dr(e, n, t), delete i[n]
    }) : s(t.split(" "), function(t) {
      g(n) ? (dr(e, t, i[t]), delete i[t]) : A(i[t] || [], n)
    }))
  }

  function ot(e, t) {
    var r = e.ng339,
      i = cr[r];
    i && (t ? delete cr[r].data[t] : (i.handle && (i.events.$destroy && i.handle({}, "$destroy"), st(e)), delete cr[r], e.ng339 = n))
  }

  function ut(e, t, n) {
    var r = e.ng339,
      r = cr[r || -1];
    if (!y(n)) return r && r[t];
    r || (e.ng339 = r = ++hr, r = cr[r] = {}), r[t] = n
  }

  function at(e, t, n) {
    var r = ut(e, "data"),
      i = y(n),
      s = !i && y(t),
      o = s && !b(t);
    r || o || ut(e, "data", r = {});
    if (i) r[t] = n;
    else {
      if (!s) return r;
      if (o) return r && r[t];
      c(r, t)
    }
  }

  function ft(e, t) {
    return e.getAttribute ? -1 < (" " + (e.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").indexOf(" " + t + " ") : !1
  }

  function lt(e, t) {
    t && e.setAttribute && s(t.split(" "), function(t) {
      e.setAttribute("class", ur((" " + (e.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ").replace(" " + ur(t) + " ", " ")))
    })
  }

  function ct(e, t) {
    if (t && e.setAttribute) {
      var n = (" " + (e.getAttribute("class") || "") + " ").replace(/[\n\t]/g, " ");
      s(t.split(" "), function(e) {
        e = ur(e), -1 === n.indexOf(" " + e + " ") && (n += e + " ")
      }), e.setAttribute("class", ur(n))
    }
  }

  function ht(e, t) {
    if (t) {
      t = t.nodeName || !y(t.length) || N(t) ? [t] : t;
      for (var n = 0; n < t.length; n++) e.push(t[n])
    }
  }

  function pt(e, t) {
    return dt(e, "$" + (t || "ngController") + "Controller")
  }

  function dt(e, t, r) {
    9 == e.nodeType && (e = e.documentElement);
    for (t = or(t) ? t : [t]; e;) {
      for (var i = 0, s = t.length; i < s; i++)
        if ((r = Qn.data(e, t[i])) !== n) return r;
      e = e.parentNode || 11 === e.nodeType && e.host
    }
  }

  function vt(e) {
    for (var t = 0, n = e.childNodes; t < n.length; t++) it(n[t]);
    for (; e.firstChild;) e.removeChild(e.firstChild)
  }

  function mt(e, t) {
    var n = Tr[t.toLowerCase()];
    return n && Nr[e.nodeName] && n
  }

  function gt(e, n) {
    var r = function(r, i) {
      r.preventDefault || (r.preventDefault = function() {
        r.returnValue = !1
      }), r.stopPropagation || (r.stopPropagation = function() {
        r.cancelBubble = !0
      }), r.target || (r.target = r.srcElement || t);
      if (g(r.defaultPrevented)) {
        var o = r.preventDefault;
        r.preventDefault = function() {
          r.defaultPrevented = !0, o.call(r)
        }, r.defaultPrevented = !1
      }
      r.isDefaultPrevented = function() {
        return r.defaultPrevented || !1 === r.returnValue
      };
      var u = M(n[i || r.type] || []);
      s(u, function(t) {
        t.call(e, r)
      }), 8 >= Kn ? (r.preventDefault = null, r.stopPropagation = null, r.isDefaultPrevented = null) : (delete r.preventDefault, delete r.stopPropagation, delete r.isDefaultPrevented)
    };
    return r.elem = e, r
  }

  function yt(e, t) {
    var r = typeof e,
      i;
    return "function" == r || "object" == r && null !== e ? "function" == typeof(i = e.$$hashKey) ? i = e.$$hashKey() : i === n && (i = e.$$hashKey = (t || f)()) : i = e, r + ":" + i
  }

  function bt(e, t) {
    if (t) {
      var n = 0;
      this.nextUid = function() {
        return ++n
      }
    }
    s(e, this.put, this)
  }

  function wt(e) {
    var t, n;
    return "function" == typeof e ? (t = e.$inject) || (t = [], e.length && (n = e.toString().replace(Ar, ""), n = n.match(Cr), s(n[1].split(kr), function(e) {
      e.replace(Lr, function(e, n, r) {
        t.push(r)
      })
    })), e.$inject = t) : or(e) ? (n = e.length - 1, J(e[n], "fn"), t = e.slice(0, n)) : J(e, "fn", !0), t
  }

  function Et(e) {
    function t(e) {
      return function(t, n) {
        if (!b(t)) return e(t, n);
        s(t, a(e))
      }
    }

    function n(e, t) {
      K(e, "service");
      if (x(t) || or(t)) t = p.instantiate(t);
      if (!t.$get) throw Or("pget", e);
      return h[e + f] = t
    }

    function r(e, t) {
      return n(e, {
        $get: t
      })
    }

    function i(e) {
      var t = [],
        n, r, o, u;
      return s(e, function(e) {
        if (!c.get(e)) {
          c.put(e, !0);
          try {
            if (w(e))
              for (n = rr(e), t = t.concat(i(n.requires)).concat(n._runBlocks), r = n._invokeQueue, o = 0, u = r.length; o < u; o++) {
                var s = r[o],
                  a = p.get(s[0]);
                a[s[1]].apply(a, s[2])
              } else x(e) ? t.push(p.invoke(e)) : or(e) ? t.push(p.invoke(e)) : J(e, "module")
          } catch (f) {
            throw or(e) && (e = e[e.length - 1]), f.message && f.stack && -1 == f.stack.indexOf(f.message) && (f = f.message + "\n" + f.stack), Or("modulerr", e, f.stack || f.message || f)
          }
        }
      }), t
    }

    function o(e, t) {
      function n(n) {
        if (e.hasOwnProperty(n)) {
          if (e[n] === u) throw Or("cdep", n + " <- " + l.join(" <- "));
          return e[n]
        }
        try {
          return l.unshift(n), e[n] = u, e[n] = t(n)
        } catch (r) {
          throw e[n] === u && delete e[n], r
        } finally {
          l.shift()
        }
      }

      function r(e, t, r) {
        var i = [],
          s = wt(e),
          o, u, a;
        u = 0;
        for (o = s.length; u < o; u++) {
          a = s[u];
          if ("string" != typeof a) throw Or("itkn", a);
          i.push(r && r.hasOwnProperty(a) ? r[a] : n(a))
        }
        return or(e) && (e = e[o]), e.apply(t, i)
      }
      return {
        invoke: r,
        instantiate: function(e, t) {
          var n = function() {},
            i;
          return n.prototype = (or(e) ? e[e.length - 1] : e).prototype, n = new n, i = r(e, n, t), b(i) || x(i) ? i : n
        },
        get: n,
        annotate: wt,
        has: function(t) {
          return h.hasOwnProperty(t + f) || e.hasOwnProperty(t)
        }
      }
    }
    var u = {},
      f = "Provider",
      l = [],
      c = new bt([], !0),
      h = {
        $provide: {
          provider: t(n),
          factory: t(r),
          service: t(function(e, t) {
            return r(e, ["$injector", function(e) {
              return e.instantiate(t)
            }])
          }),
          value: t(function(e, t) {
            return r(e, m(t))
          }),
          constant: t(function(e, t) {
            K(e, "constant"), h[e] = t, v[e] = t
          }),
          decorator: function(e, t) {
            var n = p.get(e + f),
              r = n.$get;
            n.$get = function() {
              var e = g.invoke(r, n);
              return g.invoke(t, null, {
                $delegate: e
              })
            }
          }
        }
      },
      p = h.$injector = o(h, function() {
        throw Or("unpr", l.join(" <- "))
      }),
      v = {},
      g = v.$injector = o(v, function(e) {
        return e = p.get(e + f), g.invoke(e.$get, e)
      });
    return s(i(e), function(e) {
      g.invoke(e || d)
    }), g
  }

  function St() {
    var e = !0;
    this.disableAutoScrolling = function() {
      e = !1
    }, this.$get = ["$window", "$location", "$rootScope", function(t, n, r) {
      function i(e) {
        var t = null;
        return s(e, function(e) {
          t || "a" !== Vn(e.nodeName) || (t = e)
        }), t
      }

      function o() {
        var e = n.hash(),
          r;
        e ? (r = u.getElementById(e)) ? r.scrollIntoView() : (r = i(u.getElementsByName(e))) ? r.scrollIntoView() : "top" === e && t.scrollTo(0, 0) : t.scrollTo(0, 0)
      }
      var u = t.document;
      return e && r.$watch(function() {
        return n.hash()
      }, function() {
        r.$evalAsync(o)
      }), o
    }]
  }

  function xt() {
    this.$get = ["$$rAF", "$timeout", function(e, t) {
      return e.supported ? function(t) {
        return e(t)
      } : function(e) {
        return t(e, 0, !1)
      }
    }]
  }

  function Tt(e, t, r, i) {
    function o(e) {
      try {
        e.apply(null, Yn.call(arguments, 1))
      } finally {
        if (y--, 0 === y)
          for (; b.length;) try {
            b.pop()()
          } catch (t) {
            r.error(t)
          }
      }
    }

    function u(e, t) {
      (function n() {
        s(E, function(e) {
          e()
        }), S = t(n, e)
      })()
    }

    function a() {
      x != f.url() && (x = f.url(), s(C, function(e) {
        e(f.url())
      }))
    }
    var f = this,
      l = t[0],
      c = e.location,
      h = e.history,
      p = e.setTimeout,
      v = e.clearTimeout,
      m = {};
    f.isMock = !1;
    var y = 0,
      b = [];
    f.$$completeOutstandingRequest = o, f.$$incOutstandingRequestCount = function() {
      y++
    }, f.notifyWhenNoOutstandingRequests = function(e) {
      s(E, function(e) {
        e()
      }), 0 === y ? e() : b.push(e)
    };
    var E = [],
      S;
    f.addPollFn = function(e) {
      return g(S) && u(100, p), E.push(e), e
    };
    var x = c.href,
      T = t.find("base"),
      N = null;
    f.url = function(t, n) {
      c !== e.location && (c = e.location), h !== e.history && (h = e.history);
      if (!t) return N || c.href.replace(/%27/g, "'");
      if (x != t) {
        var r = x && Jt(x) === Jt(t);
        return x = t, !r && i.history ? n ? h.replaceState(null, "", t) : (h.pushState(null, "", t), T.attr("href", T.attr("href"))) : (r || (N = t), n ? c.replace(t) : c.href = t), f
      }
    };
    var C = [],
      k = !1;
    f.onUrlChange = function(t) {
      return k || (i.history && Qn(e).on("popstate", a), i.hashchange ? Qn(e).on("hashchange", a) : f.addPollFn(a), k = !0), C.push(t), t
    }, f.$$checkUrlChange = a, f.baseHref = function() {
      var e = T.attr("href");
      return e ? e.replace(/^(https?\:)?\/\/[^\/]*/, "") : ""
    };
    var L = {},
      A = "",
      O = f.baseHref();
    f.cookies = function(e, t) {
      var i, s, o, u;
      if (!e) {
        if (l.cookie !== A)
          for (A = l.cookie, i = A.split("; "), L = {}, o = 0; o < i.length; o++) s = i[o], u = s.indexOf("="), 0 < u && (e = unescape(s.substring(0, u)), L[e] === n && (L[e] = unescape(s.substring(u + 1))));
        return L
      }
      t === n ? l.cookie = escape(e) + "=;path=" + O + ";expires=Thu, 01 Jan 1970 00:00:00 GMT" : w(t) && (i = (l.cookie = escape(e) + "=" + escape(t) + ";path=" + O).length + 1, 4096 < i && r.warn("Cookie '" + e + "' possibly not set or overflowed because it was too large (" + i + " > 4096 bytes)!"))
    }, f.defer = function(e, t) {
      var n;
      return y++, n = p(function() {
        delete m[n], o(e)
      }, t || 0), m[n] = !0, n
    }, f.defer.cancel = function(e) {
      return m[e] ? (delete m[e], v(e), o(d), !0) : !1
    }
  }

  function Nt() {
    this.$get = ["$window", "$log", "$sniffer", "$document", function(e, t, n, r) {
      return new Tt(e, r, t, n)
    }]
  }

  function Ct() {
    this.$get = function() {
      function e(e, n) {
        function i(e) {
          e != h && (p ? p == e && (p = e.n) : p = e, s(e.n, e.p), s(e, h), h = e, h.n = null)
        }

        function s(e, t) {
          e != t && (e && (e.p = t), t && (t.n = e))
        }
        if (e in t) throw r("$cacheFactory")("iid", e);
        var o = 0,
          u = c({}, n, {
            id: e
          }),
          a = {},
          f = n && n.capacity || Number.MAX_VALUE,
          l = {},
          h = null,
          p = null;
        return t[e] = {
          put: function(e, t) {
            if (f < Number.MAX_VALUE) {
              var n = l[e] || (l[e] = {
                key: e
              });
              i(n)
            }
            if (!g(t)) return e in a || o++, a[e] = t, o > f && this.remove(p.key), t
          },
          get: function(e) {
            if (f < Number.MAX_VALUE) {
              var t = l[e];
              if (!t) return;
              i(t)
            }
            return a[e]
          },
          remove: function(e) {
            if (f < Number.MAX_VALUE) {
              var t = l[e];
              if (!t) return;
              t == h && (h = t.p), t == p && (p = t.n), s(t.n, t.p), delete l[e]
            }
            delete a[e], o--
          },
          removeAll: function() {
            a = {}, o = 0, l = {}, h = p = null
          },
          destroy: function() {
            l = u = a = null, delete t[e]
          },
          info: function() {
            return c({}, u, {
              size: o
            })
          }
        }
      }
      var t = {};
      return e.info = function() {
        var e = {};
        return s(t, function(t, n) {
          e[n] = t.info()
        }), e
      }, e.get = function(e) {
        return t[e]
      }, e
    }
  }

  function kt() {
    this.$get = ["$cacheFactory", function(e) {
      return e("templates")
    }]
  }

  function Lt(e, r) {
    var i = {},
      o = "Directive",
      u = /^\s*directive\:\s*([\d\w_\-]+)\s+(.*)$/,
      f = /(([\d\w_\-]+)(?:\:([^;]+))?;?)/,
      l = /^(on[a-z]+|formaction)$/;
    this.directive = function h(t, n) {
      return K(t, "directive"), w(t) ? ($(n, "directiveFactory"), i.hasOwnProperty(t) || (i[t] = [], e.factory(t + o, ["$injector", "$exceptionHandler", function(e, n) {
        var r = [];
        return s(i[t], function(i, s) {
          try {
            var o = e.invoke(i);
            x(o) ? o = {
              compile: m(o)
            } : !o.compile && o.link && (o.compile = m(o.link)), o.priority = o.priority || 0, o.index = s, o.name = o.name || t, o.require = o.require || o.controller && o.name, o.restrict = o.restrict || "A", r.push(o)
          } catch (u) {
            n(u)
          }
        }), r
      }])), i[t].push(n)) : s(t, a(h)), this
    }, this.aHrefSanitizationWhitelist = function(e) {
      return y(e) ? (r.aHrefSanitizationWhitelist(e), this) : r.aHrefSanitizationWhitelist()
    }, this.imgSrcSanitizationWhitelist = function(e) {
      return y(e) ? (r.imgSrcSanitizationWhitelist(e), this) : r.imgSrcSanitizationWhitelist()
    }, this.$get = ["$injector", "$interpolate", "$exceptionHandler", "$http", "$templateCache", "$parse", "$controller", "$rootScope", "$document", "$sce", "$animate", "$$sanitizeUri", function(e, r, a, h, d, m, g, y, E, S, T, N) {
      function C(e, t, n, r, i) {
        e instanceof Qn || (e = Qn(e)), s(e, function(t, n) {
          3 == t.nodeType && t.nodeValue.match(/\S+/) && (e[n] = Qn(t).wrap("<span></span>").parent()[0])
        });
        var o = L(e, t, e, n, r, i);
        return k(e, "ng-scope"),
          function(t, n, r, i) {
            $(t, "scope");
            var u = n ? xr.clone.call(e) : e;
            s(r, function(e, t) {
              u.data("$" + t + "Controller", e)
            }), r = 0;
            for (var a = u.length; r < a; r++) {
              var f = u[r].nodeType;
              1 !== f && 9 !== f || u.eq(r).data("$scope", t)
            }
            return n && n(u, t), o && o(t, u, u, i), u
          }
      }

      function k(e, t) {
        try {
          e.addClass(t)
        } catch (n) {}
      }

      function L(e, t, r, i, s, o) {
        function u(e, r, i, s) {
          var o, u, f, l, c, h, p;
          o = r.length;
          var d = Array(o);
          for (l = 0; l < o; l++) d[l] = r[l];
          h = l = 0;
          for (c = a.length; l < c; h++) u = d[h], r = a[l++], o = a[l++], r ? (r.scope ? (f = e.$new(), Qn.data(u, "$scope", f)) : f = e, p = r.transcludeOnThisElement ? A(e, r.transclude, s) : !r.templateOnThisElement && s ? s : !s && t ? A(e, t) : null, r(o, f, u, i, p)) : o && o(e, u.childNodes, n, s)
        }
        for (var a = [], f, l, c, h, p = 0; p < e.length; p++) f = new Q, l = O(e[p], [], f, 0 === p ? i : n, s), (o = l.length ? H(l, e[p], f, t, r, null, [], [], o) : null) && o.scope && k(f.$$element, "ng-scope"), f = o && o.terminal || !(c = e[p].childNodes) || !c.length ? null : L(c, o ? (o.transcludeOnThisElement || !o.templateOnThisElement) && o.transclude : t), a.push(o, f), h = h || o || f, o = null;
        return h ? u : null
      }

      function A(e, t, n) {
        return function(r, i, s) {
          var o = !1;
          return r || (r = e.$new(), o = r.$$transcluded = !0), i = t(r, i, s, n), o && i.on("$destroy", function() {
            r.$destroy()
          }), i
        }
      }

      function O(e, t, n, r, i) {
        var s = n.$attr,
          o;
        switch (e.nodeType) {
          case 1:
            j(t, At(ir(e).toLowerCase()), "E", r, i);
            for (var a, l, c, h = e.attributes, p = 0, d = h && h.length; p < d; p++) {
              var v = !1,
                m = !1;
              a = h[p];
              if (!Kn || 8 <= Kn || a.specified) {
                o = a.name, l = ur(a.value), a = At(o);
                if (c = et.test(a)) o = V(a.substr(6), "-");
                var g = a.replace(/(Start|End)$/, "");
                a === g + "Start" && (v = o, m = o.substr(0, o.length - 5) + "end", o = o.substr(0, o.length - 6)), a = At(o.toLowerCase()), s[a] = o;
                if (c || !n.hasOwnProperty(a)) n[a] = l, mt(e, a) && (n[a] = !0);
                X(e, t, l, a), j(t, a, "A", r, i, v, m)
              }
            }
            e = e.className;
            if (w(e) && "" !== e)
              for (; o = f.exec(e);) a = At(o[2]), j(t, a, "C", r, i) && (n[a] = ur(o[3])), e = e.substr(o.index + o[0].length);
            break;
          case 3:
            z(t, e.nodeValue);
            break;
          case 8:
            try {
              if (o = u.exec(e.nodeValue)) a = At(o[1]), j(t, a, "M", r, i) && (n[a] = ur(o[2]))
            } catch (y) {}
        }
        return t.sort(R), t
      }

      function D(e, t, n) {
        var r = [],
          i = 0;
        if (t && e.hasAttribute && e.hasAttribute(t)) {
          do {
            if (!e) throw Dr("uterdir", t, n);
            1 == e.nodeType && (e.hasAttribute(t) && i++, e.hasAttribute(n) && i--), r.push(e), e = e.nextSibling
          } while (0 < i)
        } else r.push(e);
        return Qn(r)
      }

      function P(e, t, n) {
        return function(r, i, s, o, u) {
          return i = D(i[0], t, n), e(r, i, s, o, u)
        }
      }

      function H(e, i, o, u, f, l, c, h, p) {
        function d(e, t, n, r) {
          if (e) {
            n && (e = P(e, n, r)), e.require = W.require, e.directiveName = X;
            if (N === W || W.$$isolateScope) e = K(e, {
              isolateScope: !0
            });
            c.push(e)
          }
          if (t) {
            n && (t = P(t, n, r)), t.require = W.require, t.directiveName = X;
            if (N === W || W.$$isolateScope) t = K(t, {
              isolateScope: !0
            });
            h.push(t)
          }
        }

        function v(e, t, n, r) {
          var i, o = "data",
            u = !1;
          if (w(t)) {
            for (;
              "^" == (i = t.charAt(0)) || "?" == i;) t = t.substr(1), "^" == i && (o = "inheritedData"), u = u || "?" == i;
            i = null, r && "data" === o && (i = r[t]), i = i || n[o]("$" + t + "Controller");
            if (!i && !u) throw Dr("ctreq", t, e)
          } else or(t) && (i = [], s(t, function(t) {
            i.push(v(e, t, n, r))
          }));
          return i
        }

        function y(e, t, u, f, l) {
          function p(e, t) {
            var r;
            return 2 > arguments.length && (t = e, e = n), R && (r = x), l(e, t, r)
          }
          var d, y, b, w, E, S, x = {},
            C;
          d = i === u ? o : M(o, new Q(Qn(u), o.$attr)), y = d.$$element;
          if (N) {
            var A = /^\s*([@=&])(\??)\s*(\w*)\s*$/;
            S = t.$new(!0), !L || L !== N && L !== N.$$originalDirective ? y.data("$isolateScopeNoTemplate", S) : y.data("$isolateScope", S), k(y, "ng-isolate-scope"), s(N.scope, function(e, n) {
              var i = e.match(A) || [],
                s = i[3] || n,
                o = "?" == i[2],
                i = i[1],
                u, a, f, l;
              S.$$isolateBindings[n] = i + s;
              switch (i) {
                case "@":
                  d.$observe(s, function(e) {
                    S[n] = e
                  }), d.$$observers[s].$$scope = t, d[s] && (S[n] = r(d[s])(t));
                  break;
                case "=":
                  if (o && !d[s]) break;
                  a = m(d[s]), l = a.literal ? _ : function(e, t) {
                    return e === t || e !== e && t !== t
                  }, f = a.assign || function() {
                    throw u = S[n] = a(t), Dr("nonassign", d[s], N.name)
                  }, u = S[n] = a(t), S.$watch(function() {
                    var e = a(t);
                    return l(e, S[n]) || (l(e, u) ? f(t, e = S[n]) : S[n] = e), u = e
                  }, null, a.literal);
                  break;
                case "&":
                  a = m(d[s]), S[n] = function(e) {
                    return a(t, e)
                  };
                  break;
                default:
                  throw Dr("iscp", N.name, n, e)
              }
            })
          }
          C = l && p, T && s(T, function(e) {
            var n = {
                $scope: e === N || e.$$isolateScope ? S : t,
                $element: y,
                $attrs: d,
                $transclude: C
              },
              r;
            E = e.controller, "@" == E && (E = d[e.name]), r = g(E, n), x[e.name] = r, R || y.data("$" + e.name + "Controller", r), e.controllerAs && (n.$scope[e.controllerAs] = r)
          }), f = 0;
          for (b = c.length; f < b; f++) try {
            w = c[f], w(w.isolateScope ? S : t, y, d, w.require && v(w.directiveName, w.require, y, x), C)
          } catch (O) {
            a(O, F(y))
          }
          f = t, N && (N.template || null === N.templateUrl) && (f = S), e && e(f, u.childNodes, n, l);
          for (f = h.length - 1; 0 <= f; f--) try {
            w = h[f], w(w.isolateScope ? S : t, y, d, w.require && v(w.directiveName, w.require, y, x), C)
          } catch (D) {
            a(D, F(y))
          }
        }
        p = p || {};
        for (var E = -Number.MAX_VALUE, S, T = p.controllerDirectives, N = p.newIsolateScopeDirective, L = p.templateDirective, A = p.nonTlbTranscludeDirective, H = !1, j = !1, R = p.hasElementTranscludeDirective, z = o.$$element = Qn(i), W, X, V, $ = u, G, Y = 0, et = e.length; Y < et; Y++) {
          W = e[Y];
          var tt = W.$$start,
            nt = W.$$end;
          tt && (z = D(i, tt, nt)), V = n;
          if (E > W.priority) break;
          if (V = W.scope) S = S || W, W.templateUrl || (U("new/isolated scope", N, W, z), b(V) && (N = W));
          X = W.name, !W.templateUrl && W.controller && (V = W.controller, T = T || {}, U("'" + X + "' controller", T[X], W, z), T[X] = W);
          if (V = W.transclude) H = !0, W.$$tlb || (U("transclusion", A, W, z), A = W), "element" == V ? (R = !0, E = W.priority, V = z, z = o.$$element = Qn(t.createComment(" " + X + ": " + o[X] + " ")), i = z[0], J(f, Yn.call(V, 0), i), $ = C(V, u, E, l && l.name, {
            nonTlbTranscludeDirective: A
          })) : (V = Qn(rt(i)).contents(), z.empty(), $ = C(V, u));
          if (W.template)
            if (j = !0, U("template", L, W, z), L = W, V = x(W.template) ? W.template(z, o) : W.template, V = Z(V), W.replace) {
              l = W, V = br.test(V) ? Qn(ur(V)) : [], i = V[0];
              if (1 != V.length || 1 !== i.nodeType) throw Dr("tplrt", X, "");
              J(f, z, i), et = {
                $attr: {}
              }, V = O(i, [], et);
              var it = e.splice(Y + 1, e.length - (Y + 1));
              N && B(V), e = e.concat(V).concat(it), I(o, et), et = e.length
            } else z.html(V);
          if (W.templateUrl) j = !0, U("template", L, W, z), L = W, W.replace && (l = W), y = q(e.splice(Y, e.length - Y), z, o, f, H && $, c, h, {
            controllerDirectives: T,
            newIsolateScopeDirective: N,
            templateDirective: L,
            nonTlbTranscludeDirective: A
          }), et = e.length;
          else if (W.compile) try {
            G = W.compile(z, o, $), x(G) ? d(null, G, tt, nt) : G && d(G.pre, G.post, tt, nt)
          } catch (st) {
            a(st, F(z))
          }
          W.terminal && (y.terminal = !0, E = Math.max(E, W.priority))
        }
        return y.scope = S && !0 === S.scope, y.transcludeOnThisElement = H, y.templateOnThisElement = j, y.transclude = $, p.hasElementTranscludeDirective = R, y
      }

      function B(e) {
        for (var t = 0, n = e.length; t < n; t++) e[t] = p(e[t], {
          $$isolateScope: !0
        })
      }

      function j(t, r, s, u, f, l, c) {
        if (r === f) return null;
        f = null;
        if (i.hasOwnProperty(r)) {
          var h;
          r = e.get(r + o);
          for (var d = 0, v = r.length; d < v; d++) try {
            h = r[d], (u === n || u > h.priority) && -1 != h.restrict.indexOf(s) && (l && (h = p(h, {
              $$start: l,
              $$end: c
            })), t.push(h), f = h)
          } catch (m) {
            a(m)
          }
        }
        return f
      }

      function I(e, t) {
        var n = t.$attr,
          r = e.$attr,
          i = e.$$element;
        s(e, function(r, i) {
          "$" != i.charAt(0) && (t[i] && t[i] !== r && (r += ("style" === i ? ";" : " ") + t[i]), e.$set(i, r, !0, n[i]))
        }), s(t, function(t, s) {
          "class" == s ? (k(i, t), e["class"] = (e["class"] ? e["class"] + " " : "") + t) : "style" == s ? (i.attr("style", i.attr("style") + ";" + t), e.style = (e.style ? e.style + ";" : "") + t) : "$" == s.charAt(0) || e.hasOwnProperty(s) || (e[s] = t, r[s] = n[s])
        })
      }

      function q(e, t, n, r, i, o, u, a) {
        var f = [],
          l, p, v = t[0],
          m = e.shift(),
          g = c({}, m, {
            templateUrl: null,
            transclude: null,
            replace: null,
            $$originalDirective: m
          }),
          y = x(m.templateUrl) ? m.templateUrl(t, n) : m.templateUrl;
        return t.empty(), h.get(S.getTrustedResourceUrl(y), {
            cache: d
          }).success(function(c) {
            var h, d;
            c = Z(c);
            if (m.replace) {
              c = br.test(c) ? Qn(ur(c)) : [], h = c[0];
              if (1 != c.length || 1 !== h.nodeType) throw Dr("tplrt", m.name, y);
              c = {
                $attr: {}
              }, J(r, t, h);
              var w = O(h, [], c);
              b(m.scope) && B(w), e = w.concat(e), I(n, c)
            } else h = v, t.html(c);
            e.unshift(g), l = H(e, h, n, i, t, m, o, u, a), s(r, function(e, n) {
              e == h && (r[n] = t[0])
            });
            for (p = L(t[0].childNodes, i); f.length;) {
              c = f.shift(), d = f.shift();
              var E = f.shift(),
                S = f.shift(),
                w = t[0];
              if (d !== v) {
                var x = d.className;
                a.hasElementTranscludeDirective && m.replace || (w = rt(h)), J(E, Qn(d), w), k(Qn(w), x)
              }
              d = l.transcludeOnThisElement ? A(c, l.transclude, S) : S, l(p, c, w, r, d)
            }
            f = null
          }).error(function(e, t, n, r) {
            throw Dr("tpload", r.url)
          }),
          function(e, t, n, r, i) {
            e = i, f ? (f.push(t), f.push(n), f.push(r), f.push(e)) : (l.transcludeOnThisElement && (e = A(t, l.transclude, i)), l(p, t, n, r, e))
          }
      }

      function R(e, t) {
        var n = t.priority - e.priority;
        return 0 !== n ? n : e.name !== t.name ? e.name < t.name ? -1 : 1 : e.index - t.index
      }

      function U(e, t, n, r) {
        if (t) throw Dr("multidir", t.name, n.name, e, F(r))
      }

      function z(e, t) {
        var n = r(t, !0);
        n && e.push({
          priority: 0,
          compile: function(e) {
            var t = e.parent().length;
            return t && k(e.parent(), "ng-binding"),
              function(e, r) {
                var i = r.parent(),
                  s = i.data("$binding") || [];
                s.push(n), i.data("$binding", s), t || k(i, "ng-binding"), e.$watch(n, function(e) {
                  r[0].nodeValue = e
                })
              }
          }
        })
      }

      function W(e, t) {
        if ("srcdoc" == t) return S.HTML;
        var n = ir(e);
        if ("xlinkHref" == t || "FORM" == n && "action" == t || "IMG" != n && ("src" == t || "ngSrc" == t)) return S.RESOURCE_URL
      }

      function X(e, t, n, i) {
        var s = r(n, !0);
        if (s) {
          if ("multiple" === i && "SELECT" === ir(e)) throw Dr("selmulti", F(e));
          t.push({
            priority: 100,
            compile: function() {
              return {
                pre: function(t, n, o) {
                  n = o.$$observers || (o.$$observers = {});
                  if (l.test(i)) throw Dr("nodomevents");
                  if (s = r(o[i], !0, W(e, i))) o[i] = s(t), (n[i] || (n[i] = [])).$$inter = !0, (o.$$observers && o.$$observers[i].$$scope || t).$watch(s, function(e, t) {
                    "class" === i && e != t ? o.$updateClass(e, t) : o.$set(i, e)
                  })
                }
              }
            }
          })
        }
      }

      function J(e, n, r) {
        var i = n[0],
          s = n.length,
          o = i.parentNode,
          u, a;
        if (e)
          for (u = 0, a = e.length; u < a; u++)
            if (e[u] == i) {
              e[u++] = r, a = u + s - 1;
              for (var f = e.length; u < f; u++, a++) a < f ? e[u] = e[a] : delete e[u];
              e.length -= s - 1;
              break
            }
        o && o.replaceChild(r, i), e = t.createDocumentFragment(), e.appendChild(i), r[Qn.expando] = i[Qn.expando], i = 1;
        for (s = n.length; i < s; i++) o = n[i], Qn(o).remove(), e.appendChild(o), delete n[i];
        n[0] = r, n.length = 1
      }

      function K(e, t) {
        return c(function() {
          return e.apply(null, arguments)
        }, e, t)
      }
      var Q = function(e, t) {
        this.$$element = e, this.$attr = t || {}
      };
      Q.prototype = {
        $normalize: At,
        $addClass: function(e) {
          e && 0 < e.length && T.addClass(this.$$element, e)
        },
        $removeClass: function(e) {
          e && 0 < e.length && T.removeClass(this.$$element, e)
        },
        $updateClass: function(e, t) {
          var n = Ot(e, t),
            r = Ot(t, e);
          0 === n.length ? T.removeClass(this.$$element, r) : 0 === r.length ? T.addClass(this.$$element, n) : T.setClass(this.$$element, n, r)
        },
        $set: function(e, t, r, i) {
          var o = mt(this.$$element[0], e);
          o && (this.$$element.prop(e, t), i = o), this[e] = t, i ? this.$attr[e] = i : (i = this.$attr[e]) || (this.$attr[e] = i = V(e, "-")), o = ir(this.$$element);
          if ("A" === o && "href" === e || "IMG" === o && "src" === e) this[e] = t = N(t, "src" === e);
          !1 !== r && (null === t || t === n ? this.$$element.removeAttr(i) : this.$$element.attr(i, t)), (r = this.$$observers) && s(r[e], function(e) {
            try {
              e(t)
            } catch (n) {
              a(n)
            }
          })
        },
        $observe: function(e, t) {
          var n = this,
            r = n.$$observers || (n.$$observers = {}),
            i = r[e] || (r[e] = []);
          return i.push(t), y.$evalAsync(function() {
            i.$$inter || t(n[e])
          }), t
        }
      };
      var G = r.startSymbol(),
        Y = r.endSymbol(),
        Z = "{{" == G || "}}" == Y ? v : function(e) {
          return e.replace(/\{\{/g, G).replace(/}}/g, Y)
        },
        et = /^ngAttr[A-Z]/;
      return C
    }]
  }

  function At(e) {
    return et(e.replace(Pr, ""))
  }

  function Ot(e, t) {
    var n = "",
      r = e.split(/\s+/),
      i = t.split(/\s+/),
      s = 0;
    e: for (; s < r.length; s++) {
      for (var o = r[s], u = 0; u < i.length; u++)
        if (o == i[u]) continue e;
      n += (0 < n.length ? " " : "") + o
    }
    return n
  }

  function Mt() {
    var e = {},
      t = /^(\S+)(\s+as\s+(\w+))?$/;
    this.register = function(t, n) {
      K(t, "controller"), b(t) ? c(e, t) : e[t] = n
    }, this.$get = ["$injector", "$window", function(n, i) {
      return function(s, o) {
        var u, a, f;
        w(s) && (u = s.match(t), a = u[1], f = u[3], s = e.hasOwnProperty(a) ? e[a] : Q(o.$scope, a, !0) || Q(i, a, !0), J(s, a, !0)), u = n.instantiate(s, o);
        if (f) {
          if (!o || "object" != typeof o.$scope) throw r("$controller")("noscp", a || s.name, f);
          o.$scope[f] = u
        }
        return u
      }
    }]
  }

  function _t() {
    this.$get = ["$window", function(e) {
      return Qn(e.document)
    }]
  }

  function Dt() {
    this.$get = ["$log", function(e) {
      return function(t, n) {
        e.error.apply(e, arguments)
      }
    }]
  }

  function Pt(e) {
    var t = {},
      n, r, i;
    return e ? (s(e.split("\n"), function(e) {
      i = e.indexOf(":"), n = Vn(ur(e.substr(0, i))), r = ur(e.substr(i + 1)), n && (t[n] = t[n] ? t[n] + ", " + r : r)
    }), t) : t
  }

  function Ht(e) {
    var t = b(e) ? e : n;
    return function(n) {
      return t || (t = Pt(e)), n ? t[Vn(n)] || null : t
    }
  }

  function Bt(e, t, n) {
    return x(n) ? n(e, t) : (s(n, function(n) {
      e = n(e, t)
    }), e)
  }

  function jt() {
    var e = /^\s*(\[|\{[^\{])/,
      t = /[\}\]]\s*$/,
      r = /^\)\]\}',?\n/,
      i = {
        "Content-Type": "application/json;charset=utf-8"
      },
      o = this.defaults = {
        transformResponse: [function(n) {
          return w(n) && (n = n.replace(r, ""), e.test(n) && t.test(n) && (n = B(n))), n
        }],
        transformRequest: [function(e) {
          return b(e) && "[object File]" !== er.call(e) && "[object Blob]" !== er.call(e) ? H(e) : e
        }],
        headers: {
          common: {
            Accept: "application/json, text/plain, */*"
          },
          post: M(i),
          put: M(i),
          patch: M(i)
        },
        xsrfCookieName: "XSRF-TOKEN",
        xsrfHeaderName: "X-XSRF-TOKEN"
      },
      a = this.interceptors = [],
      f = this.responseInterceptors = [];
    this.$get = ["$httpBackend", "$browser", "$cacheFactory", "$rootScope", "$q", "$injector", function(e, t, r, i, l, h) {
      function p(e) {
        function t(e) {
          var t = c({}, e, {
            data: Bt(e.data, e.headers, r.transformResponse)
          });
          return 200 <= e.status && 300 > e.status ? t : l.reject(t)
        }
        var r = {
            method: "get",
            transformRequest: o.transformRequest,
            transformResponse: o.transformResponse
          },
          i = function(e) {
            var t = o.headers,
              n = c({}, e.headers),
              r, i, t = c({}, t.common, t[Vn(e.method)]);
            e: for (r in t) {
              e = Vn(r);
              for (i in n)
                if (Vn(i) === e) continue e;
              n[r] = t[r]
            }
            return function(e) {
              var t;
              s(e, function(n, r) {
                x(n) && (t = n(), null != t ? e[r] = t : delete e[r])
              })
            }(n), n
          }(e);
        c(r, e), r.headers = i, r.method = Jn(r.method);
        var u = [function(e) {
            i = e.headers;
            var n = Bt(e.data, Ht(i), e.transformRequest);
            return g(n) && s(i, function(e, t) {
              "content-type" === Vn(t) && delete i[t]
            }), g(e.withCredentials) && !g(o.withCredentials) && (e.withCredentials = o.withCredentials), d(e, n, i).then(t, t)
          }, n],
          a = l.when(r);
        for (s(E, function(e) {
            (e.request || e.requestError) && u.unshift(e.request, e.requestError), (e.response || e.responseError) && u.push(e.response, e.responseError)
          }); u.length;) {
          e = u.shift();
          var f = u.shift(),
            a = a.then(e, f)
        }
        return a.success = function(e) {
          return a.then(function(t) {
            e(t.data, t.status, t.headers, r)
          }), a
        }, a.error = function(e) {
          return a.then(null, function(t) {
            e(t.data, t.status, t.headers, r)
          }), a
        }, a
      }

      function d(r, s, u) {
        function a(e, t, n, r) {
          w && (200 <= e && 300 > e ? w.put(S, [e, t, Pt(n), r]) : w.remove(S)), f(t, e, n, r), i.$$phase || i.$apply()
        }

        function f(e, t, n, i) {
          t = Math.max(t, 0), (200 <= t && 300 > t ? h.resolve : h.reject)({
            data: e,
            status: t,
            headers: Ht(n),
            config: r,
            statusText: i
          })
        }

        function c() {
          var e = L(p.pendingRequests, r); - 1 !== e && p.pendingRequests.splice(e, 1)
        }
        var h = l.defer(),
          d = h.promise,
          w, E, S = v(r.url, r.params);
        p.pendingRequests.push(r), d.then(c, c), !r.cache && !o.cache || !1 === r.cache || "GET" !== r.method && "JSONP" !== r.method || (w = b(r.cache) ? r.cache : b(o.cache) ? o.cache : m);
        if (w)
          if (E = w.get(S), y(E)) {
            if (E && x(E.then)) return E.then(c, c), E;
            or(E) ? f(E[1], E[0], M(E[2]), E[3]) : f(E, 200, {}, "OK")
          } else w.put(S, d);
        return g(E) && ((E = Tn(r.url) ? t.cookies()[r.xsrfCookieName || o.xsrfCookieName] : n) && (u[r.xsrfHeaderName || o.xsrfHeaderName] = E), e(r.method, S, s, a, u, r.timeout, r.withCredentials, r.responseType)), d
      }

      function v(e, t) {
        if (!t) return e;
        var n = [];
        return u(t, function(e, t) {
          null === e || g(e) || (or(e) || (e = [e]), s(e, function(e) {
            b(e) && (e = S(e) ? e.toISOString() : H(e)), n.push(z(t) + "=" + z(e))
          }))
        }), 0 < n.length && (e += (-1 == e.indexOf("?") ? "?" : "&") + n.join("&")), e
      }
      var m = r("$http"),
        E = [];
      return s(a, function(e) {
          E.unshift(w(e) ? h.get(e) : h.invoke(e))
        }), s(f, function(e, t) {
          var n = w(e) ? h.get(e) : h.invoke(e);
          E.splice(t, 0, {
            response: function(e) {
              return n(l.when(e))
            },
            responseError: function(e) {
              return n(l.reject(e))
            }
          })
        }), p.pendingRequests = [],
        function(e) {
          s(arguments, function(e) {
            p[e] = function(t, n) {
              return p(c(n || {}, {
                method: e,
                url: t
              }))
            }
          })
        }("get", "delete", "head", "jsonp"),
        function(e) {
          s(arguments, function(e) {
            p[e] = function(t, n, r) {
              return p(c(r || {}, {
                method: e,
                url: t,
                data: n
              }))
            }
          })
        }("post", "put", "patch"), p.defaults = o, p
    }]
  }

  function Ft(t) {
    if (8 >= Kn && (!t.match(/^(get|post|head|put|delete|options)$/i) || !e.XMLHttpRequest)) return new e.ActiveXObject("Microsoft.XMLHTTP");
    if (e.XMLHttpRequest) return new e.XMLHttpRequest;
    throw r("$httpBackend")("noxhr")
  }

  function It() {
    this.$get = ["$browser", "$window", "$document", function(e, t, n) {
      return qt(e, Ft, e.defer, t.angular.callbacks, n[0])
    }]
  }

  function qt(e, t, n, r, i) {
    function o(e, t, n) {
      var s = i.createElement("script"),
        o = null;
      return s.type = "text/javascript", s.src = e, s.async = !0, o = function(e) {
        dr(s, "load", o), dr(s, "error", o), i.body.removeChild(s), s = null;
        var u = -1,
          a = "unknown";
        e && ("load" !== e.type || r[t].called || (e = {
          type: "error"
        }), a = e.type, u = "error" === e.type ? 404 : 200), n && n(u, a)
      }, pr(s, "load", o), pr(s, "error", o), 8 >= Kn && (s.onreadystatechange = function() {
        w(s.readyState) && /loaded|complete/.test(s.readyState) && (s.onreadystatechange = null, o({
          type: "load"
        }))
      }), i.body.appendChild(s), o
    }
    var u = -1;
    return function(i, a, f, l, c, h, p, v) {
      function m() {
        b = u, E && E(), S && S.abort()
      }

      function g(t, r, i, s, o) {
        N && n.cancel(N), E = S = null, 0 === r && (r = i ? 200 : "file" == xn(a).protocol ? 404 : 0), t(1223 === r ? 204 : r, i, s, o || ""), e.$$completeOutstandingRequest(d)
      }
      var b;
      e.$$incOutstandingRequestCount(), a = a || e.url();
      if ("jsonp" == Vn(i)) {
        var w = "_" + (r.counter++).toString(36);
        r[w] = function(e) {
          r[w].data = e, r[w].called = !0
        };
        var E = o(a.replace("JSON_CALLBACK", "angular.callbacks." + w), w, function(e, t) {
          g(l, e, r[w].data, "", t), r[w] = d
        })
      } else {
        var S = t(i);
        S.open(i, a, !0), s(c, function(e, t) {
          y(e) && S.setRequestHeader(t, e)
        }), S.onreadystatechange = function() {
          if (S && 4 == S.readyState) {
            var e = null,
              t = null,
              n = "";
            b !== u && (e = S.getAllResponseHeaders(), t = "response" in S ? S.response : S.responseText), b === u && 10 > Kn || (n = S.statusText), g(l, b || S.status, t, e, n)
          }
        }, p && (S.withCredentials = !0);
        if (v) try {
          S.responseType = v
        } catch (T) {
          if ("json" !== v) throw T
        }
        S.send(f || null)
      }
      if (0 < h) var N = n(m, h);
      else h && x(h.then) && h.then(m)
    }
  }

  function Rt() {
    var e = "{{",
      t = "}}";
    this.startSymbol = function(t) {
      return t ? (e = t, this) : e
    }, this.endSymbol = function(e) {
      return e ? (t = e, this) : t
    }, this.$get = ["$parse", "$exceptionHandler", "$sce", function(n, r, i) {
      function s(s, a, f) {
        for (var l, c, h = 0, p = [], d = s.length, v = !1, m = []; h < d;) - 1 != (l = s.indexOf(e, h)) && -1 != (c = s.indexOf(t, l + o)) ? (h != l && p.push(s.substring(h, l)), p.push(h = n(v = s.substring(l + o, c))), h.exp = v, h = c + u, v = !0) : (h != d && p.push(s.substring(h)), h = d);
        (d = p.length) || (p.push(""), d = 1);
        if (f && 1 < p.length) throw Hr("noconcat", s);
        if (!a || v) return m.length = d, h = function(e) {
          try {
            for (var t = 0, n = d, o; t < n; t++) {
              if ("function" == typeof(o = p[t]))
                if (o = o(e), o = f ? i.getTrusted(f, o) : i.valueOf(o), null == o) o = "";
                else switch (typeof o) {
                  case "string":
                    break;
                  case "number":
                    o = "" + o;
                    break;
                  default:
                    o = H(o)
                }
                m[t] = o
            }
            return m.join("")
          } catch (u) {
            e = Hr("interr", s, u.toString()), r(e)
          }
        }, h.exp = s, h.parts = p, h
      }
      var o = e.length,
        u = t.length;
      return s.startSymbol = function() {
        return e
      }, s.endSymbol = function() {
        return t
      }, s
    }]
  }

  function Ut() {
    this.$get = ["$rootScope", "$window", "$q", function(e, t, n) {
      function r(r, s, o, u) {
        var a = t.setInterval,
          f = t.clearInterval,
          l = n.defer(),
          c = l.promise,
          h = 0,
          p = y(u) && !u;
        return o = y(o) ? o : 0, c.then(null, null, r), c.$$intervalId = a(function() {
          l.notify(h++), 0 < o && h >= o && (l.resolve(h), f(c.$$intervalId), delete i[c.$$intervalId]), p || e.$apply()
        }, s), i[c.$$intervalId] = l, c
      }
      var i = {};
      return r.cancel = function(e) {
        return e && e.$$intervalId in i ? (i[e.$$intervalId].reject("canceled"), t.clearInterval(e.$$intervalId), delete i[e.$$intervalId], !0) : !1
      }, r
    }]
  }

  function zt() {
    this.$get = function() {
      return {
        id: "en-us",
        NUMBER_FORMATS: {
          DECIMAL_SEP: ".",
          GROUP_SEP: ",",
          PATTERNS: [{
            minInt: 1,
            minFrac: 0,
            maxFrac: 3,
            posPre: "",
            posSuf: "",
            negPre: "-",
            negSuf: "",
            gSize: 3,
            lgSize: 3
          }, {
            minInt: 1,
            minFrac: 2,
            maxFrac: 2,
            posPre: "¤",
            posSuf: "",
            negPre: "(¤",
            negSuf: ")",
            gSize: 3,
            lgSize: 3
          }],
          CURRENCY_SYM: "$"
        },
        DATETIME_FORMATS: {
          MONTH: "January February March April May June July August September October November December".split(" "),
          SHORTMONTH: "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),
          DAY: "Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
          SHORTDAY: "Sun Mon Tue Wed Thu Fri Sat".split(" "),
          AMPMS: ["AM", "PM"],
          medium: "MMM d, y h:mm:ss a",
          "short": "M/d/yy h:mm a",
          fullDate: "EEEE, MMMM d, y",
          longDate: "MMMM d, y",
          mediumDate: "MMM d, y",
          shortDate: "M/d/yy",
          mediumTime: "h:mm:ss a",
          shortTime: "h:mm a"
        },
        pluralCat: function(e) {
          return 1 === e ? "one" : "other"
        }
      }
    }
  }

  function Wt(e) {
    e = e.split("/");
    for (var t = e.length; t--;) e[t] = U(e[t]);
    return e.join("/")
  }

  function Xt(e, t, n) {
    e = xn(e, n), t.$$protocol = e.protocol, t.$$host = e.hostname, t.$$port = h(e.port) || jr[e.protocol] || null
  }

  function Vt(e, t, n) {
    var r = "/" !== e.charAt(0);
    r && (e = "/" + e), e = xn(e, n), t.$$path = decodeURIComponent(r && "/" === e.pathname.charAt(0) ? e.pathname.substring(1) : e.pathname), t.$$search = q(e.search), t.$$hash = decodeURIComponent(e.hash), t.$$path && "/" != t.$$path.charAt(0) && (t.$$path = "/" + t.$$path)
  }

  function $t(e, t) {
    if (0 === t.indexOf(e)) return t.substr(e.length)
  }

  function Jt(e) {
    var t = e.indexOf("#");
    return -1 == t ? e : e.substr(0, t)
  }

  function Kt(e) {
    return e.substr(0, Jt(e).lastIndexOf("/") + 1)
  }

  function Qt(e, t) {
    this.$$html5 = !0, t = t || "";
    var r = Kt(e);
    Xt(e, this, e), this.$$parse = function(t) {
      var n = $t(r, t);
      if (!w(n)) throw Fr("ipthprfx", t, r);
      Vt(n, this, e), this.$$path || (this.$$path = "/"), this.$$compose()
    }, this.$$compose = function() {
      var e = R(this.$$search),
        t = this.$$hash ? "#" + U(this.$$hash) : "";
      this.$$url = Wt(this.$$path) + (e ? "?" + e : "") + t, this.$$absUrl = r + this.$$url.substr(1)
    }, this.$$parseLinkUrl = function(i, s) {
      var o, u;
      return (o = $t(e, i)) !== n ? (u = o, u = (o = $t(t, o)) !== n ? r + ($t("/", o) || o) : e + u) : (o = $t(r, i)) !== n ? u = r + o : r == i + "/" && (u = r), u && this.$$parse(u), !!u
    }
  }

  function Gt(e, t) {
    var n = Kt(e);
    Xt(e, this, e), this.$$parse = function(r) {
      var i = $t(e, r) || $t(n, r),
        i = "#" == i.charAt(0) ? $t(t, i) : this.$$html5 ? i : "";
      if (!w(i)) throw Fr("ihshprfx", r, t);
      Vt(i, this, e), r = this.$$path;
      var s = /^\/[A-Z]:(\/.*)/;
      0 === i.indexOf(e) && (i = i.replace(e, "")), s.exec(i) || (r = (i = s.exec(r)) ? i[1] : r), this.$$path = r, this.$$compose()
    }, this.$$compose = function() {
      var n = R(this.$$search),
        r = this.$$hash ? "#" + U(this.$$hash) : "";
      this.$$url = Wt(this.$$path) + (n ? "?" + n : "") + r, this.$$absUrl = e + (this.$$url ? t + this.$$url : "")
    }, this.$$parseLinkUrl = function(t, n) {
      return Jt(e) == Jt(t) ? (this.$$parse(t), !0) : !1
    }
  }

  function Yt(e, t) {
    this.$$html5 = !0, Gt.apply(this, arguments);
    var n = Kt(e);
    this.$$parseLinkUrl = function(r, i) {
      var s, o;
      return e == Jt(r) ? s = r : (o = $t(n, r)) ? s = e + t + o : n === r + "/" && (s = n), s && this.$$parse(s), !!s
    }, this.$$compose = function() {
      var n = R(this.$$search),
        r = this.$$hash ? "#" + U(this.$$hash) : "";
      this.$$url = Wt(this.$$path) + (n ? "?" + n : "") + r, this.$$absUrl = e + t + this.$$url
    }
  }

  function Zt(e) {
    return function() {
      return this[e]
    }
  }

  function en(e, t) {
    return function(n) {
      return g(n) ? this[e] : (this[e] = t(n), this.$$compose(), this)
    }
  }

  function tn() {
    var t = "",
      n = !1;
    this.hashPrefix = function(e) {
      return y(e) ? (t = e, this) : t
    }, this.html5Mode = function(e) {
      return y(e) ? (n = e, this) : n
    }, this.$get = ["$rootScope", "$browser", "$sniffer", "$rootElement", function(r, i, s, o) {
      function u(e) {
        r.$broadcast("$locationChangeSuccess", a.absUrl(), e)
      }
      var a, f = i.baseHref(),
        l = i.url();
      n ? (f = l.substring(0, l.indexOf("/", l.indexOf("//") + 2)) + (f || "/"), s = s.history ? Qt : Yt) : (f = Jt(l), s = Gt), a = new s(f, "#" + t), a.$$parseLinkUrl(l, l);
      var c = /^\s*(javascript|mailto):/i;
      o.on("click", function(t) {
        if (!t.ctrlKey && !t.metaKey && 2 != t.which) {
          for (var n = Qn(t.target);
            "a" !== Vn(n[0].nodeName);)
            if (n[0] === o[0] || !(n = n.parent())[0]) return;
          var s = n.prop("href"),
            u = n.attr("href") || n.attr("xlink:href");
          b(s) && "[object SVGAnimatedString]" === s.toString() && (s = xn(s.animVal).href), c.test(s) || !s || n.attr("target") || t.isDefaultPrevented() || !a.$$parseLinkUrl(s, u) || (t.preventDefault(), a.absUrl() != i.url() && (r.$apply(), e.angular["ff-684208-preventDefault"] = !0))
        }
      }), a.absUrl() != l && i.url(a.absUrl(), !0), i.onUrlChange(function(e) {
        a.absUrl() != e && (r.$evalAsync(function() {
          var t = a.absUrl();
          a.$$parse(e), r.$broadcast("$locationChangeStart", e, t).defaultPrevented ? (a.$$parse(t), i.url(t)) : u(t)
        }), r.$$phase || r.$digest())
      });
      var h = 0;
      return r.$watch(function() {
        var e = i.url(),
          t = a.$$replace;
        return h && e == a.absUrl() || (h++, r.$evalAsync(function() {
          r.$broadcast("$locationChangeStart", a.absUrl(), e).defaultPrevented ? a.$$parse(e) : (i.url(a.absUrl(), t), u(e))
        })), a.$$replace = !1, h
      }), a
    }]
  }

  function nn() {
    var e = !0,
      t = this;
    this.debugEnabled = function(t) {
      return y(t) ? (e = t, this) : e
    }, this.$get = ["$window", function(n) {
      function r(e) {
        return e instanceof Error && (e.stack ? e = e.message && -1 === e.stack.indexOf(e.message) ? "Error: " + e.message + "\n" + e.stack : e.stack : e.sourceURL && (e = e.message + "\n" + e.sourceURL + ":" + e.line)), e
      }

      function i(e) {
        var t = n.console || {},
          i = t[e] || t.log || d;
        e = !1;
        try {
          e = !!i.apply
        } catch (o) {}
        return e ? function() {
          var e = [];
          return s(arguments, function(t) {
            e.push(r(t))
          }), i.apply(t, e)
        } : function(e, t) {
          i(e, null == t ? "" : t)
        }
      }
      return {
        log: i("log"),
        info: i("info"),
        warn: i("warn"),
        error: i("error"),
        debug: function() {
          var n = i("debug");
          return function() {
            e && n.apply(t, arguments)
          }
        }()
      }
    }]
  }

  function rn(e, t) {
    if ("__defineGetter__" === e || "__defineSetter__" === e || "__lookupGetter__" === e || "__lookupSetter__" === e || "__proto__" === e) throw Ir("isecfld", t);
    return e
  }

  function sn(e, t) {
    if (e) {
      if (e.constructor === e) throw Ir("isecfn", t);
      if (e.document && e.location && e.alert && e.setInterval) throw Ir("isecwindow", t);
      if (e.children && (e.nodeName || e.prop && e.attr && e.find)) throw Ir("isecdom", t);
      if (e === Object) throw Ir("isecobj", t)
    }
    return e
  }

  function on(e, t, r, i, s) {
    sn(e, i), s = s || {}, t = t.split(".");
    for (var o, u = 0; 1 < t.length; u++) {
      o = rn(t.shift(), i);
      var a = sn(e[o], i);
      a || (a = {}, e[o] = a), e = a, e.then && s.unwrapPromises && (Rr(i), "$$v" in e || function(e) {
        e.then(function(t) {
          e.$$v = t
        })
      }(e), e.$$v === n && (e.$$v = {}), e = e.$$v)
    }
    return o = rn(t.shift(), i), sn(e[o], i), e[o] = r
  }

  function un(e) {
    return "constructor" == e
  }

  function an(e, t, r, i, s, o, u) {
    rn(e, o), rn(t, o), rn(r, o), rn(i, o), rn(s, o);
    var a = function(e) {
        return sn(e, o)
      },
      f = u.expensiveChecks,
      l = f || un(e) ? a : v,
      c = f || un(t) ? a : v,
      h = f || un(r) ? a : v,
      p = f || un(i) ? a : v,
      d = f || un(s) ? a : v;
    return u.unwrapPromises ? function(u, a) {
      var f = a && a.hasOwnProperty(e) ? a : u,
        v;
      return null == f ? f : ((f = l(f[e])) && f.then && (Rr(o), "$$v" in f || (v = f, v.$$v = n, v.then(function(e) {
        v.$$v = l(e)
      })), f = l(f.$$v)), t ? null == f ? n : ((f = c(f[t])) && f.then && (Rr(o), "$$v" in f || (v = f, v.$$v = n, v.then(function(e) {
        v.$$v = c(e)
      })), f = c(f.$$v)), r ? null == f ? n : ((f = h(f[r])) && f.then && (Rr(o), "$$v" in f || (v = f, v.$$v = n, v.then(function(e) {
        v.$$v = h(e)
      })), f = h(f.$$v)), i ? null == f ? n : ((f = p(f[i])) && f.then && (Rr(o), "$$v" in f || (v = f, v.$$v = n, v.then(function(e) {
        v.$$v = p(e)
      })), f = p(f.$$v)), s ? null == f ? n : ((f = d(f[s])) && f.then && (Rr(o), "$$v" in f || (v = f, v.$$v = n, v.then(function(e) {
        v.$$v = d(e)
      })), f = d(f.$$v)), f) : f) : f) : f) : f)
    } : function(o, u) {
      var a = u && u.hasOwnProperty(e) ? u : o;
      return null == a ? a : (a = l(a[e]), t ? null == a ? n : (a = c(a[t]), r ? null == a ? n : (a = h(a[r]), i ? null == a ? n : (a = p(a[i]), s ? null == a ? n : a = d(a[s]) : a) : a) : a) : a)
    }
  }

  function fn(e, t) {
    return function(n, r) {
      return e(n, r, Rr, sn, t)
    }
  }

  function ln(e, t, r) {
    var i = t.expensiveChecks,
      o = i ? Qr : Kr;
    if (o.hasOwnProperty(e)) return o[e];
    var u = e.split("."),
      a = u.length,
      f;
    if (t.csp) f = 6 > a ? an(u[0], u[1], u[2], u[3], u[4], r, t) : function(e, i) {
      var s = 0,
        o;
      do o = an(u[s++], u[s++], u[s++], u[s++], u[s++], r, t)(e, i), i = n, e = o; while (s < a);
      return o
    };
    else {
      var l = "var p;\n";
      i && (l += "s = eso(s, fe);\nl = eso(l, fe);\n");
      var c = i;
      s(u, function(e, n) {
        rn(e, r);
        var s = (n ? "s" : '((l&&l.hasOwnProperty("' + e + '"))?l:s)') + '["' + e + '"]',
          o = i || un(e);
        o && (s = "eso(" + s + ", fe)", c = !0), l += "if(s == null) return undefined;\ns=" + s + ";\n", t.unwrapPromises && (l += 'if (s && s.then) {\n pw("' + r.replace(/(["\r\n])/g, "\\$1") + '");\n if (!("$$v" in s)) {\n p=s;\n p.$$v = undefined;\n p.then(function(v) {p.$$v=' + (o ? "eso(v)" : "v") + ";});\n}\n s=" + (o ? "eso(s.$$v)" : "s.$$v") + "\n}\n")
      }), l += "return s;", f = new Function("s", "l", "pw", "eso", "fe", l), f.toString = m(l);
      if (c || t.unwrapPromises) f = fn(f, r)
    }
    return "hasOwnProperty" !== e && (o[e] = f), f
  }

  function cn() {
    var e = {},
      t = {},
      n = {
        csp: !1,
        unwrapPromises: !1,
        logPromiseWarnings: !0,
        expensiveChecks: !1
      };
    this.unwrapPromises = function(e) {
      return y(e) ? (n.unwrapPromises = !!e, this) : n.unwrapPromises
    }, this.logPromiseWarnings = function(e) {
      return y(e) ? (n.logPromiseWarnings = e, this) : n.logPromiseWarnings
    }, this.$get = ["$filter", "$sniffer", "$log", function(r, i, s) {
      n.csp = i.csp;
      var o = {
        csp: n.csp,
        unwrapPromises: n.unwrapPromises,
        logPromiseWarnings: n.logPromiseWarnings,
        expensiveChecks: !0
      };
      return Rr = function(e) {
          n.logPromiseWarnings && !qr.hasOwnProperty(e) && (qr[e] = !0, s.warn("[$parse] Promise found in the expression `" + e + "`. Automatic unwrapping of promises in Angular expressions is deprecated."))
        },
        function(i, s) {
          var u;
          switch (typeof i) {
            case "string":
              var a = s ? t : e;
              if (a.hasOwnProperty(i)) return a[i];
              u = s ? o : n;
              var f = new $r(u);
              return u = (new Jr(f, r, u)).parse(i), "hasOwnProperty" !== i && (a[i] = u), u;
            case "function":
              return i;
            default:
              return d
          }
        }
    }]
  }

  function hn() {
    this.$get = ["$rootScope", "$exceptionHandler", function(e, t) {
      return pn(function(t) {
        e.$evalAsync(t)
      }, t)
    }]
  }

  function pn(e, t) {
    function r(e) {
      return e
    }

    function i(e) {
      return a(e)
    }
    var o = function() {
        var s = [],
          a, l;
        return l = {
          resolve: function(t) {
            if (s) {
              var r = s;
              s = n, a = u(t), r.length && e(function() {
                for (var e, t = 0, n = r.length; t < n; t++) e = r[t], a.then(e[0], e[1], e[2])
              })
            }
          },
          reject: function(e) {
            l.resolve(f(e))
          },
          notify: function(t) {
            if (s) {
              var n = s;
              s.length && e(function() {
                for (var e, r = 0, i = n.length; r < i; r++) e = n[r], e[2](t)
              })
            }
          },
          promise: {
            then: function(e, n, u) {
              var f = o(),
                l = function(n) {
                  try {
                    f.resolve((x(e) ? e : r)(n))
                  } catch (i) {
                    f.reject(i), t(i)
                  }
                },
                c = function(e) {
                  try {
                    f.resolve((x(n) ? n : i)(e))
                  } catch (r) {
                    f.reject(r), t(r)
                  }
                },
                h = function(e) {
                  try {
                    f.notify((x(u) ? u : r)(e))
                  } catch (n) {
                    t(n)
                  }
                };
              return s ? s.push([l, c, h]) : a.then(l, c, h), f.promise
            },
            "catch": function(e) {
              return this.then(null, e)
            },
            "finally": function(e) {
              function t(e, t) {
                var n = o();
                return t ? n.resolve(e) : n.reject(e), n.promise
              }

              function n(n, i) {
                var s = null;
                try {
                  s = (e || r)()
                } catch (o) {
                  return t(o, !1)
                }
                return s && x(s.then) ? s.then(function() {
                  return t(n, i)
                }, function(e) {
                  return t(e, !1)
                }) : t(n, i)
              }
              return this.then(function(e) {
                return n(e, !0)
              }, function(e) {
                return n(e, !1)
              })
            }
          }
        }
      },
      u = function(t) {
        return t && x(t.then) ? t : {
          then: function(n) {
            var r = o();
            return e(function() {
              r.resolve(n(t))
            }), r.promise
          }
        }
      },
      a = function(e) {
        var t = o();
        return t.reject(e), t.promise
      },
      f = function(n) {
        return {
          then: function(r, s) {
            var u = o();
            return e(function() {
              try {
                u.resolve((x(s) ? s : i)(n))
              } catch (e) {
                u.reject(e), t(e)
              }
            }), u.promise
          }
        }
      };
    return {
      defer: o,
      reject: a,
      when: function(n, s, f, l) {
        var c = o(),
          h, p = function(e) {
            try {
              return (x(s) ? s : r)(e)
            } catch (n) {
              return t(n), a(n)
            }
          },
          d = function(e) {
            try {
              return (x(f) ? f : i)(e)
            } catch (n) {
              return t(n), a(n)
            }
          },
          v = function(e) {
            try {
              return (x(l) ? l : r)(e)
            } catch (n) {
              t(n)
            }
          };
        return e(function() {
          u(n).then(function(e) {
            h || (h = !0, c.resolve(u(e).then(p, d, v)))
          }, function(e) {
            h || (h = !0, c.resolve(d(e)))
          }, function(e) {
            h || c.notify(v(e))
          })
        }), c.promise
      },
      all: function(e) {
        var t = o(),
          n = 0,
          r = or(e) ? [] : {};
        return s(e, function(e, i) {
          n++, u(e).then(function(e) {
            r.hasOwnProperty(i) || (r[i] = e, --n || t.resolve(r))
          }, function(e) {
            r.hasOwnProperty(i) || t.reject(e)
          })
        }), 0 === n && t.resolve(r), t.promise
      }
    }
  }

  function dn() {
    this.$get = ["$window", "$timeout", function(e, t) {
      var n = e.requestAnimationFrame || e.webkitRequestAnimationFrame || e.mozRequestAnimationFrame,
        r = e.cancelAnimationFrame || e.webkitCancelAnimationFrame || e.mozCancelAnimationFrame || e.webkitCancelRequestAnimationFrame,
        i = !!n,
        s = i ? function(e) {
          var t = n(e);
          return function() {
            r(t)
          }
        } : function(e) {
          var n = t(e, 16.66, !1);
          return function() {
            t.cancel(n)
          }
        };
      return s.supported = i, s
    }]
  }

  function vn() {
    var e = 10,
      t = r("$rootScope"),
      n = null;
    this.digestTtl = function(t) {
      return arguments.length && (e = t), e
    }, this.$get = ["$injector", "$exceptionHandler", "$parse", "$browser", function(r, o, u, a) {
      function l() {
        this.$id = f(), this.$$phase = this.$parent = this.$$watchers = this.$$nextSibling = this.$$prevSibling = this.$$childHead = this.$$childTail = null, this["this"] = this.$root = this, this.$$destroyed = !1, this.$$asyncQueue = [], this.$$postDigestQueue = [], this.$$listeners = {}, this.$$listenerCount = {}, this.$$isolateBindings = {}
      }

      function c(e) {
        if (m.$$phase) throw t("inprog", m.$$phase);
        m.$$phase = e
      }

      function h(e, t) {
        var n = u(e);
        return J(n, t), n
      }

      function p(e, t, n) {
        do e.$$listenerCount[n] -= t, 0 === e.$$listenerCount[n] && delete e.$$listenerCount[n]; while (e = e.$parent)
      }

      function v() {}
      l.prototype = {
        constructor: l,
        $new: function(e) {
          return e ? (e = new l, e.$root = this.$root, e.$$asyncQueue = this.$$asyncQueue, e.$$postDigestQueue = this.$$postDigestQueue) : (this.$$childScopeClass || (this.$$childScopeClass = function() {
            this.$$watchers = this.$$nextSibling = this.$$childHead = this.$$childTail = null, this.$$listeners = {}, this.$$listenerCount = {}, this.$id = f(), this.$$childScopeClass = null
          }, this.$$childScopeClass.prototype = this), e = new this.$$childScopeClass), e["this"] = e, e.$parent = this, e.$$prevSibling = this.$$childTail, this.$$childHead ? this.$$childTail = this.$$childTail.$$nextSibling = e : this.$$childHead = this.$$childTail = e, e
        },
        $watch: function(e, t, r) {
          var i = h(e, "watch"),
            s = this.$$watchers,
            o = {
              fn: t,
              last: v,
              get: i,
              exp: e,
              eq: !!r
            };
          n = null;
          if (!x(t)) {
            var u = h(t || d, "listener");
            o.fn = function(e, t, n) {
              u(n)
            }
          }
          if ("string" == typeof e && i.constant) {
            var a = o.fn;
            o.fn = function(e, t, n) {
              a.call(this, e, t, n), A(s, o)
            }
          }
          return s || (s = this.$$watchers = []), s.unshift(o),
            function() {
              A(s, o), n = null
            }
        },
        $watchCollection: function(e, t) {
          var n = this,
            r, s, o, a = 1 < t.length,
            f = 0,
            l = u(e),
            c = [],
            h = {},
            p = !0,
            d = 0;
          return this.$watch(function() {
            r = l(n);
            var e, t, o;
            if (b(r))
              if (i(r))
                for (s !== c && (s = c, d = s.length = 0, f++), e = r.length, d !== e && (f++, s.length = d = e), t = 0; t < e; t++) o = s[t] !== s[t] && r[t] !== r[t], o || s[t] === r[t] || (f++, s[t] = r[t]);
              else {
                s !== h && (s = h = {}, d = 0, f++), e = 0;
                for (t in r) r.hasOwnProperty(t) && (e++, s.hasOwnProperty(t) ? (o = s[t] !== s[t] && r[t] !== r[t], o || s[t] === r[t] || (f++, s[t] = r[t])) : (d++, s[t] = r[t], f++));
                if (d > e)
                  for (t in f++, s) s.hasOwnProperty(t) && !r.hasOwnProperty(t) && (d--, delete s[t])
              }
            else s !== r && (s = r, f++);
            return f
          }, function() {
            p ? (p = !1, t(r, r, n)) : t(r, o, n);
            if (a)
              if (b(r))
                if (i(r)) {
                  o = Array(r.length);
                  for (var e = 0; e < r.length; e++) o[e] = r[e]
                } else
                  for (e in o = {}, r) $n.call(r, e) && (o[e] = r[e]);
            else o = r
          })
        },
        $digest: function() {
          var r, i, s, u, f = this.$$asyncQueue,
            l = this.$$postDigestQueue,
            h, p, d = e,
            g, y = [],
            b, w, E;
          c("$digest"), a.$$checkUrlChange(), n = null;
          do {
            p = !1;
            for (g = this; f.length;) {
              try {
                E = f.shift(), E.scope.$eval(E.expression)
              } catch (S) {
                m.$$phase = null, o(S)
              }
              n = null
            }
            e: do {
              if (u = g.$$watchers)
                for (h = u.length; h--;) try {
                  if (r = u[h])
                    if ((i = r.get(g)) !== (s = r.last) && !(r.eq ? _(i, s) : "number" == typeof i && "number" == typeof s && isNaN(i) && isNaN(s))) p = !0, n = r, r.last = r.eq ? O(i, null) : i, r.fn(i, s === v ? i : s, g), 5 > d && (b = 4 - d, y[b] || (y[b] = []), w = x(r.exp) ? "fn: " + (r.exp.name || r.exp.toString()) : r.exp, w += "; newVal: " + H(i) + "; oldVal: " + H(s), y[b].push(w));
                    else if (r === n) {
                    p = !1;
                    break e
                  }
                } catch (T) {
                  m.$$phase = null, o(T)
                }
              if (!(u = g.$$childHead || g !== this && g.$$nextSibling))
                for (; g !== this && !(u = g.$$nextSibling);) g = g.$parent
            } while (g = u);
            if ((p || f.length) && !(d--)) throw m.$$phase = null, t("infdig", e, H(y))
          } while (p || f.length);
          for (m.$$phase = null; l.length;) try {
            l.shift()()
          } catch (N) {
            o(N)
          }
        },
        $destroy: function() {
          if (!this.$$destroyed) {
            var e = this.$parent;
            this.$broadcast("$destroy"), this.$$destroyed = !0, this !== m && (s(this.$$listenerCount, D(null, p, this)), e.$$childHead == this && (e.$$childHead = this.$$nextSibling), e.$$childTail == this && (e.$$childTail = this.$$prevSibling), this.$$prevSibling && (this.$$prevSibling.$$nextSibling = this.$$nextSibling), this.$$nextSibling && (this.$$nextSibling.$$prevSibling = this.$$prevSibling), this.$parent = this.$$nextSibling = this.$$prevSibling = this.$$childHead = this.$$childTail = this.$root = null, this.$$listeners = {}, this.$$watchers = this.$$asyncQueue = this.$$postDigestQueue = [], this.$destroy = this.$digest = this.$apply = d, this.$on = this.$watch = function() {
              return d
            })
          }
        },
        $eval: function(e, t) {
          return u(e)(this, t)
        },
        $evalAsync: function(e) {
          m.$$phase || m.$$asyncQueue.length || a.defer(function() {
            m.$$asyncQueue.length && m.$digest()
          }), this.$$asyncQueue.push({
            scope: this,
            expression: e
          })
        },
        $$postDigest: function(e) {
          this.$$postDigestQueue.push(e)
        },
        $apply: function(e) {
          try {
            return c("$apply"), this.$eval(e)
          } catch (t) {
            o(t)
          } finally {
            m.$$phase = null;
            try {
              m.$digest()
            } catch (n) {
              throw o(n), n
            }
          }
        },
        $on: function(e, t) {
          var n = this.$$listeners[e];
          n || (this.$$listeners[e] = n = []), n.push(t);
          var r = this;
          do r.$$listenerCount[e] || (r.$$listenerCount[e] = 0), r.$$listenerCount[e]++; while (r = r.$parent);
          var i = this;
          return function() {
            var r = L(n, t); - 1 !== r && (n[r] = null, p(i, 1, e))
          }
        },
        $emit: function(e, t) {
          var n = [],
            r, i = this,
            s = !1,
            u = {
              name: e,
              targetScope: i,
              stopPropagation: function() {
                s = !0
              },
              preventDefault: function() {
                u.defaultPrevented = !0
              },
              defaultPrevented: !1
            },
            a = [u].concat(Yn.call(arguments, 1)),
            f, l;
          do {
            r = i.$$listeners[e] || n, u.currentScope = i, f = 0;
            for (l = r.length; f < l; f++)
              if (r[f]) try {
                r[f].apply(null, a)
              } catch (c) {
                o(c)
              } else r.splice(f, 1), f--, l--;
            if (s) break;
            i = i.$parent
          } while (i);
          return u
        },
        $broadcast: function(e, t) {
          for (var n = this, r = this, i = {
              name: e,
              targetScope: this,
              preventDefault: function() {
                i.defaultPrevented = !0
              },
              defaultPrevented: !1
            }, s = [i].concat(Yn.call(arguments, 1)), u, a; n = r;) {
            i.currentScope = n, r = n.$$listeners[e] || [], u = 0;
            for (a = r.length; u < a; u++)
              if (r[u]) try {
                r[u].apply(null, s)
              } catch (f) {
                o(f)
              } else r.splice(u, 1), u--, a--;
            if (!(r = n.$$listenerCount[e] && n.$$childHead || n !== this && n.$$nextSibling))
              for (; n !== this && !(r = n.$$nextSibling);) n = n.$parent
          }
          return i
        }
      };
      var m = new l;
      return m
    }]
  }

  function mn() {
    var e = /^\s*(https?|ftp|mailto|tel|file):/,
      t = /^\s*((https?|ftp|file):|data:image\/)/;
    this.aHrefSanitizationWhitelist = function(t) {
      return y(t) ? (e = t, this) : e
    }, this.imgSrcSanitizationWhitelist = function(e) {
      return y(e) ? (t = e, this) : t
    }, this.$get = function() {
      return function(n, r) {
        var i = r ? t : e,
          s;
        if (!Kn || 8 <= Kn)
          if (s = xn(n).href, "" !== s && !s.match(i)) return "unsafe:" + s;
        return n
      }
    }
  }

  function gn(e) {
    if ("self" === e) return e;
    if (w(e)) {
      if (-1 < e.indexOf("***")) throw Gr("iwcard", e);
      return e = e.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g, "\\$1").replace(/\x08/g, "\\x08").replace("\\*\\*", ".*").replace("\\*", "[^:/.?&;]*"), RegExp("^" + e + "$")
    }
    if (T(e)) return RegExp("^" + e.source + "$");
    throw Gr("imatcher")
  }

  function yn(e) {
    var t = [];
    return y(e) && s(e, function(e) {
      t.push(gn(e))
    }), t
  }

  function bn() {
    this.SCE_CONTEXTS = Yr;
    var e = ["self"],
      t = [];
    this.resourceUrlWhitelist = function(t) {
      return arguments.length && (e = yn(t)), e
    }, this.resourceUrlBlacklist = function(e) {
      return arguments.length && (t = yn(e)), t
    }, this.$get = ["$injector", function(r) {
      function i(e) {
        var t = function(e) {
          this.$$unwrapTrustedValue = function() {
            return e
          }
        };
        return e && (t.prototype = new e), t.prototype.valueOf = function() {
          return this.$$unwrapTrustedValue()
        }, t.prototype.toString = function() {
          return this.$$unwrapTrustedValue().toString()
        }, t
      }
      var s = function(e) {
        throw Gr("unsafe")
      };
      r.has("$sanitize") && (s = r.get("$sanitize"));
      var o = i(),
        u = {};
      return u[Yr.HTML] = i(o), u[Yr.CSS] = i(o), u[Yr.URL] = i(o), u[Yr.JS] = i(o), u[Yr.RESOURCE_URL] = i(u[Yr.URL]), {
        trustAs: function(e, t) {
          var r = u.hasOwnProperty(e) ? u[e] : null;
          if (!r) throw Gr("icontext", e, t);
          if (null === t || t === n || "" === t) return t;
          if ("string" != typeof t) throw Gr("itype", e);
          return new r(t)
        },
        getTrusted: function(r, i) {
          if (null === i || i === n || "" === i) return i;
          var o = u.hasOwnProperty(r) ? u[r] : null;
          if (o && i instanceof o) return i.$$unwrapTrustedValue();
          if (r === Yr.RESOURCE_URL) {
            var o = xn(i.toString()),
              a, f, l = !1;
            a = 0;
            for (f = e.length; a < f; a++)
              if ("self" === e[a] ? Tn(o) : e[a].exec(o.href)) {
                l = !0;
                break
              }
            if (l)
              for (a = 0, f = t.length; a < f; a++)
                if ("self" === t[a] ? Tn(o) : t[a].exec(o.href)) {
                  l = !1;
                  break
                }
            if (l) return i;
            throw Gr("insecurl", i.toString())
          }
          if (r === Yr.HTML) return s(i);
          throw Gr("unsafe")
        },
        valueOf: function(e) {
          return e instanceof o ? e.$$unwrapTrustedValue() : e
        }
      }
    }]
  }

  function wn() {
    var e = !0;
    this.enabled = function(t) {
      return arguments.length && (e = !!t), e
    }, this.$get = ["$parse", "$sniffer", "$sceDelegate", function(t, n, r) {
      if (e && n.msie && 8 > n.msieDocumentMode) throw Gr("iequirks");
      var i = M(Yr);
      i.isEnabled = function() {
        return e
      }, i.trustAs = r.trustAs, i.getTrusted = r.getTrusted, i.valueOf = r.valueOf, e || (i.trustAs = i.getTrusted = function(e, t) {
        return t
      }, i.valueOf = v), i.parseAs = function(e, n) {
        var r = t(n);
        return r.literal && r.constant ? r : function(t, n) {
          return i.getTrusted(e, r(t, n))
        }
      };
      var o = i.parseAs,
        u = i.getTrusted,
        a = i.trustAs;
      return s(Yr, function(e, t) {
        var n = Vn(t);
        i[et("parse_as_" + n)] = function(t) {
          return o(e, t)
        }, i[et("get_trusted_" + n)] = function(t) {
          return u(e, t)
        }, i[et("trust_as_" + n)] = function(t) {
          return a(e, t)
        }
      }), i
    }]
  }

  function En() {
    this.$get = ["$window", "$document", function(e, t) {
      var n = {},
        r = h((/android (\d+)/.exec(Vn((e.navigator || {}).userAgent)) || [])[1]),
        i = /Boxee/i.test((e.navigator || {}).userAgent),
        s = t[0] || {},
        o = s.documentMode,
        u, a = /^(Moz|webkit|O|ms)(?=[A-Z])/,
        f = s.body && s.body.style,
        l = !1,
        c = !1;
      if (f) {
        for (var p in f)
          if (l = a.exec(p)) {
            u = l[0], u = u.substr(0, 1).toUpperCase() + u.substr(1);
            break
          }
        u || (u = "WebkitOpacity" in f && "webkit"), l = "transition" in f || u + "Transition" in f, c = "animation" in f || u + "Animation" in f, !r || l && c || (l = w(s.body.style.webkitTransition), c = w(s.body.style.webkitAnimation))
      }
      return {
        history: !(!e.history || !e.history.pushState || 4 > r || i),
        hashchange: "onhashchange" in e && (!o || 7 < o),
        hasEvent: function(e) {
          if ("input" == e && 9 == Kn) return !1;
          if (g(n[e])) {
            var t = s.createElement("div");
            n[e] = "on" + e in t
          }
          return n[e]
        },
        csp: ar(),
        vendorPrefix: u,
        transitions: l,
        animations: c,
        android: r,
        msie: Kn,
        msieDocumentMode: o
      }
    }]
  }

  function Sn() {
    this.$get = ["$rootScope", "$browser", "$q", "$exceptionHandler", function(e, t, n, r) {
      function i(i, o, u) {
        var a = n.defer(),
          f = a.promise,
          l = y(u) && !u;
        return o = t.defer(function() {
          try {
            a.resolve(i())
          } catch (t) {
            a.reject(t), r(t)
          } finally {
            delete s[f.$$timeoutId]
          }
          l || e.$apply()
        }, o), f.$$timeoutId = o, s[o] = a, f
      }
      var s = {};
      return i.cancel = function(e) {
        return e && e.$$timeoutId in s ? (s[e.$$timeoutId].reject("canceled"), delete s[e.$$timeoutId], t.defer.cancel(e.$$timeoutId)) : !1
      }, i
    }]
  }

  function xn(e, t) {
    var n = e;
    return Kn && (Zr.setAttribute("href", n), n = Zr.href), Zr.setAttribute("href", n), {
      href: Zr.href,
      protocol: Zr.protocol ? Zr.protocol.replace(/:$/, "") : "",
      host: Zr.host,
      search: Zr.search ? Zr.search.replace(/^\?/, "") : "",
      hash: Zr.hash ? Zr.hash.replace(/^#/, "") : "",
      hostname: Zr.hostname,
      port: Zr.port,
      pathname: "/" === Zr.pathname.charAt(0) ? Zr.pathname : "/" + Zr.pathname
    }
  }

  function Tn(e) {
    return e = w(e) ? xn(e) : e, e.protocol === ei.protocol && e.host === ei.host
  }

  function Nn() {
    this.$get = m(e)
  }

  function Cn(e) {
    function t(r, i) {
      if (b(r)) {
        var o = {};
        return s(r, function(e, n) {
          o[n] = t(n, e)
        }), o
      }
      return e.factory(r + n, i)
    }
    var n = "Filter";
    this.register = t, this.$get = ["$injector", function(e) {
      return function(t) {
        return e.get(t + n)
      }
    }], t("currency", Ln), t("date", Pn), t("filter", kn), t("json", Hn), t("limitTo", Bn), t("lowercase", si), t("number", An), t("orderBy", jn), t("uppercase", oi)
  }

  function kn() {
    return function(e, t, n) {
      if (!or(e)) return e;
      var r = typeof n,
        i = [];
      i.check = function(e) {
        for (var t = 0; t < i.length; t++)
          if (!i[t](e)) return !1;
        return !0
      }, "function" !== r && (n = "boolean" === r && n ? function(e, t) {
        return nr.equals(e, t)
      } : function(e, t) {
        if (e && t && "object" == typeof e && "object" == typeof t) {
          for (var r in e)
            if ("$" !== r.charAt(0) && $n.call(e, r) && n(e[r], t[r])) return !0;
          return !1
        }
        return t = ("" + t).toLowerCase(), -1 < ("" + e).toLowerCase().indexOf(t)
      });
      var s = function(e, t) {
        if ("string" == typeof t && "!" === t.charAt(0)) return !s(e, t.substr(1));
        switch (typeof e) {
          case "boolean":
          case "number":
          case "string":
            return n(e, t);
          case "object":
            switch (typeof t) {
              case "object":
                return n(e, t);
              default:
                for (var r in e)
                  if ("$" !== r.charAt(0) && s(e[r], t)) return !0
            }
            return !1;
          case "array":
            for (r = 0; r < e.length; r++)
              if (s(e[r], t)) return !0;
            return !1;
          default:
            return !1
        }
      };
      switch (typeof t) {
        case "boolean":
        case "number":
        case "string":
          t = {
            $: t
          };
        case "object":
          for (var o in t)(function(e) {
            "undefined" != typeof t[e] && i.push(function(n) {
              return s("$" == e ? n : n && n[e], t[e])
            })
          })(o);
          break;
        case "function":
          i.push(t);
          break;
        default:
          return e
      }
      r = [];
      for (o = 0; o < e.length; o++) {
        var u = e[o];
        i.check(u) && r.push(u)
      }
      return r
    }
  }

  function Ln(e) {
    var t = e.NUMBER_FORMATS;
    return function(e, n) {
      return g(n) && (n = t.CURRENCY_SYM), On(e, t.PATTERNS[1], t.GROUP_SEP, t.DECIMAL_SEP, 2).replace(/\u00A4/g, n)
    }
  }

  function An(e) {
    var t = e.NUMBER_FORMATS;
    return function(e, n) {
      return On(e, t.PATTERNS[0], t.GROUP_SEP, t.DECIMAL_SEP, n)
    }
  }

  function On(e, t, n, r, i) {
    if (null == e || !isFinite(e) || b(e)) return "";
    var s = 0 > e;
    e = Math.abs(e);
    var o = e + "",
      u = "",
      a = [],
      f = !1;
    if (-1 !== o.indexOf("e")) {
      var l = o.match(/([\d\.]+)e(-?)(\d+)/);
      l && "-" == l[2] && l[3] > i + 1 ? (o = "0", e = 0) : (u = o, f = !0)
    }
    if (f) 0 < i && -1 < e && 1 > e && (u = e.toFixed(i));
    else {
      o = (o.split(ti)[1] || "").length, g(i) && (i = Math.min(Math.max(t.minFrac, o), t.maxFrac)), e = +(Math.round(+(e.toString() + "e" + i)).toString() + "e" + -i), 0 === e && (s = !1), e = ("" + e).split(ti), o = e[0], e = e[1] || "";
      var l = 0,
        c = t.lgSize,
        h = t.gSize;
      if (o.length >= c + h)
        for (l = o.length - c, f = 0; f < l; f++) 0 === (l - f) % h && 0 !== f && (u += n), u += o.charAt(f);
      for (f = l; f < o.length; f++) 0 === (o.length - f) % c && 0 !== f && (u += n), u += o.charAt(f);
      for (; e.length < i;) e += "0";
      i && "0" !== i && (u += r + e.substr(0, i))
    }
    return a.push(s ? t.negPre : t.posPre), a.push(u), a.push(s ? t.negSuf : t.posSuf), a.join("")
  }

  function Mn(e, t, n) {
    var r = "";
    0 > e && (r = "-", e = -e);
    for (e = "" + e; e.length < t;) e = "0" + e;
    return n && (e = e.substr(e.length - t)), r + e
  }

  function _n(e, t, n, r) {
    return n = n || 0,
      function(i) {
        i = i["get" + e]();
        if (0 < n || i > -n) i += n;
        return 0 === i && -12 == n && (i = 12), Mn(i, t, r)
      }
  }

  function Dn(e, t) {
    return function(n, r) {
      var i = n["get" + e](),
        s = Jn(t ? "SHORT" + e : e);
      return r[s][i]
    }
  }

  function Pn(e) {
    function t(e) {
      var t;
      if (t = e.match(n)) {
        e = new Date(0);
        var r = 0,
          i = 0,
          s = t[8] ? e.setUTCFullYear : e.setFullYear,
          o = t[8] ? e.setUTCHours : e.setHours;
        t[9] && (r = h(t[9] + t[10]), i = h(t[9] + t[11])), s.call(e, h(t[1]), h(t[2]) - 1, h(t[3])), r = h(t[4] || 0) - r, i = h(t[5] || 0) - i, s = h(t[6] || 0), t = Math.round(1e3 * parseFloat("0." + (t[7] || 0))), o.call(e, r, i, s, t)
      }
      return e
    }
    var n = /^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;
    return function(n, r) {
      var i = "",
        o = [],
        u, a;
      r = r || "mediumDate", r = e.DATETIME_FORMATS[r] || r, w(n) && (n = ii.test(n) ? h(n) : t(n)), E(n) && (n = new Date(n));
      if (!S(n)) return n;
      for (; r;)(a = ri.exec(r)) ? (o = o.concat(Yn.call(a, 1)), r = o.pop()) : (o.push(r), r = null);
      return s(o, function(t) {
        u = ni[t], i += u ? u(n, e.DATETIME_FORMATS) : t.replace(/(^'|'$)/g, "").replace(/''/g, "'")
      }), i
    }
  }

  function Hn() {
    return function(e) {
      return H(e, !0)
    }
  }

  function Bn() {
    return function(e, t) {
      if (!or(e) && !w(e)) return e;
      t = Infinity === Math.abs(Number(t)) ? Number(t) : h(t);
      if (w(e)) return t ? 0 <= t ? e.slice(0, t) : e.slice(t, e.length) : "";
      var n = [],
        r, i;
      t > e.length ? t = e.length : t < -e.length && (t = -e.length), 0 < t ? (r = 0, i = t) : (r = e.length + t, i = e.length);
      for (; r < i; r++) n.push(e[r]);
      return n
    }
  }

  function jn(e) {
    return function(t, n, r) {
      function s(e, t) {
        return j(t) ? function(t, n) {
          return e(n, t)
        } : e
      }

      function o(e, t) {
        var n = typeof e,
          r = typeof t;
        return n == r ? (S(e) && S(t) && (e = e.valueOf(), t = t.valueOf()), "string" == n && (e = e.toLowerCase(), t = t.toLowerCase()), e === t ? 0 : e < t ? -1 : 1) : n < r ? -1 : 1
      }
      return i(t) ? (n = or(n) ? n : [n], 0 === n.length && (n = ["+"]), n = k(n, function(t) {
        var n = !1,
          r = t || v;
        if (w(t)) {
          if ("+" == t.charAt(0) || "-" == t.charAt(0)) n = "-" == t.charAt(0), t = t.substring(1);
          if ("" === t) return s(function(e, t) {
            return o(e, t)
          }, n);
          r = e(t);
          if (r.constant) {
            var i = r();
            return s(function(e, t) {
              return o(e[i], t[i])
            }, n)
          }
        }
        return s(function(e, t) {
          return o(r(e), r(t))
        }, n)
      }), Yn.call(t).sort(s(function(e, t) {
        for (var r = 0; r < n.length; r++) {
          var i = n[r](e, t);
          if (0 !== i) return i
        }
        return 0
      }, r))) : t
    }
  }

  function Fn(e) {
    return x(e) && (e = {
      link: e
    }), e.restrict = e.restrict || "AC", m(e)
  }

  function In(e, t, n, r) {
    function i(t, n) {
      n = n ? "-" + V(n, "-") : "", r.setClass(e, (t ? bi : wi) + n, (t ? wi : bi) + n)
    }
    var o = this,
      u = e.parent().controller("form") || fi,
      a = 0,
      f = o.$error = {},
      l = [];
    o.$name = t.name || t.ngForm, o.$dirty = !1, o.$pristine = !0, o.$valid = !0, o.$invalid = !1, u.$addControl(o), e.addClass(Ei), i(!0), o.$addControl = function(e) {
      K(e.$name, "input"), l.push(e), e.$name && (o[e.$name] = e)
    }, o.$removeControl = function(e) {
      e.$name && o[e.$name] === e && delete o[e.$name], s(f, function(t, n) {
        o.$setValidity(n, !0, e)
      }), A(l, e)
    }, o.$setValidity = function(e, t, n) {
      var r = f[e];
      if (t) r && (A(r, n), r.length || (a--, a || (i(t), o.$valid = !0, o.$invalid = !1), f[e] = !1, i(!0, e), u.$setValidity(e, !0, o)));
      else {
        a || i(t);
        if (r) {
          if (-1 != L(r, n)) return
        } else f[e] = r = [], a++, i(!1, e), u.$setValidity(e, !1, o);
        r.push(n), o.$valid = !1, o.$invalid = !0
      }
    }, o.$setDirty = function() {
      r.removeClass(e, Ei), r.addClass(e, Si), o.$dirty = !0, o.$pristine = !1, u.$setDirty()
    }, o.$setPristine = function() {
      r.removeClass(e, Si), r.addClass(e, Ei), o.$dirty = !1, o.$pristine = !0, s(l, function(e) {
        e.$setPristine()
      })
    }
  }

  function qn(e, t, r, i) {
    return e.$setValidity(t, r), r ? i : n
  }

  function Rn(e, t) {
    var n, r;
    if (t)
      for (n = 0; n < t.length; ++n)
        if (r = t[n], e[r]) return !0;
    return !1
  }

  function Un(e, t, n, r, i) {
    b(i) && (e.$$hasNativeValidators = !0, e.$parsers.push(function(s) {
      if (e.$error[t] || Rn(i, r) || !Rn(i, n)) return s;
      e.$setValidity(t, !1)
    }))
  }

  function zn(e, t, n, i, s, o) {
    var u = t.prop(Xn),
      a = t[0].placeholder,
      f = {},
      l = Vn(t[0].type);
    i.$$validityState = u;
    if (!s.android) {
      var c = !1;
      t.on("compositionstart", function(e) {
        c = !0
      }), t.on("compositionend", function() {
        c = !1, p()
      })
    }
    var p = function(r) {
      if (!c) {
        var s = t.val();
        if (Kn && "input" === (r || f).type && t[0].placeholder !== a) a = t[0].placeholder;
        else if ("password" !== l && j(n.ngTrim || "T") && (s = ur(s)), r = u && i.$$hasNativeValidators, i.$viewValue !== s || "" === s && r) e.$root.$$phase ? i.$setViewValue(s) : e.$apply(function() {
          i.$setViewValue(s)
        })
      }
    };
    if (s.hasEvent("input")) t.on("input", p);
    else {
      var d, v = function() {
        d || (d = o.defer(function() {
          p(), d = null
        }))
      };
      t.on("keydown", function(e) {
        e = e.keyCode, 91 === e || 15 < e && 19 > e || 37 <= e && 40 >= e || v()
      }), s.hasEvent("paste") && t.on("paste cut", v)
    }
    t.on("change", p), i.$render = function() {
      t.val(i.$isEmpty(i.$viewValue) ? "" : i.$viewValue)
    };
    var m = n.ngPattern;
    m && ((s = m.match(/^\/(.*)\/([gim]*)$/)) ? (m = RegExp(s[1], s[2]), s = function(e) {
      return qn(i, "pattern", i.$isEmpty(e) || m.test(e), e)
    }) : s = function(n) {
      var s = e.$eval(m);
      if (!s || !s.test) throw r("ngPattern")("noregexp", m, s, F(t));
      return qn(i, "pattern", i.$isEmpty(n) || s.test(n), n)
    }, i.$formatters.push(s), i.$parsers.push(s));
    if (n.ngMinlength) {
      var g = h(n.ngMinlength);
      s = function(e) {
        return qn(i, "minlength", i.$isEmpty(e) || e.length >= g, e)
      }, i.$parsers.push(s), i.$formatters.push(s)
    }
    if (n.ngMaxlength) {
      var y = h(n.ngMaxlength);
      s = function(e) {
        return qn(i, "maxlength", i.$isEmpty(e) || e.length <= y, e)
      }, i.$parsers.push(s), i.$formatters.push(s)
    }
  }

  function Wn(e, t) {
    return e = "ngClass" + e, ["$animate", function(n) {
      function r(e, t) {
        var n = [],
          r = 0;
        e: for (; r < e.length; r++) {
          for (var i = e[r], s = 0; s < t.length; s++)
            if (i == t[s]) continue e;
          n.push(i)
        }
        return n
      }

      function i(e) {
        if (!or(e)) {
          if (w(e)) return e.split(" ");
          if (b(e)) {
            var t = [];
            return s(e, function(e, n) {
              e && (t = t.concat(n.split(" ")))
            }), t
          }
        }
        return e
      }
      return {
        restrict: "AC",
        link: function(o, u, a) {
          function f(e, t) {
            var n = u.data("$classCounts") || {},
              r = [];
            return s(e, function(e) {
              if (0 < t || n[e]) n[e] = (n[e] || 0) + t, n[e] === +(0 < t) && r.push(e)
            }), u.data("$classCounts", n), r.join(" ")
          }

          function l(e) {
            if (!0 === t || o.$index % 2 === t) {
              var s = i(e || []);
              if (!c) {
                var l = f(s, 1);
                a.$addClass(l)
              } else if (!_(e, c)) {
                var h = i(c),
                  l = r(s, h),
                  s = r(h, s),
                  s = f(s, -1),
                  l = f(l, 1);
                0 === l.length ? n.removeClass(u, s) : 0 === s.length ? n.addClass(u, l) : n.setClass(u, l, s)
              }
            }
            c = M(e)
          }
          var c;
          o.$watch(a[e], l, !0), a.$observe("class", function(t) {
            l(o.$eval(a[e]))
          }), "ngClass" !== e && o.$watch("$index", function(n, r) {
            var s = n & 1;
            if (s !== (r & 1)) {
              var u = i(o.$eval(a[e]));
              s === t ? (s = f(u, 1), a.$addClass(s)) : (s = f(u, -1), a.$removeClass(s))
            }
          })
        }
      }
    }]
  }
  var Xn = "validity",
    Vn = function(e) {
      return w(e) ? e.toLowerCase() : e
    },
    $n = Object.prototype.hasOwnProperty,
    Jn = function(e) {
      return w(e) ? e.toUpperCase() : e
    },
    Kn, Qn, Gn, Yn = [].slice,
    Zn = [].push,
    er = Object.prototype.toString,
    tr = r("ng"),
    nr = e.angular || (e.angular = {}),
    rr, ir, sr = ["0", "0", "0"];
  Kn = h((/msie (\d+)/.exec(Vn(navigator.userAgent)) || [])[1]), isNaN(Kn) && (Kn = h((/trident\/.*; rv:(\d+)/.exec(Vn(navigator.userAgent)) || [])[1])), d.$inject = [], v.$inject = [];
  var or = function() {
      return x(Array.isArray) ? Array.isArray : function(e) {
        return "[object Array]" === er.call(e)
      }
    }(),
    ur = function() {
      return String.prototype.trim ? function(e) {
        return w(e) ? e.trim() : e
      } : function(e) {
        return w(e) ? e.replace(/^\s\s*/, "").replace(/\s\s*$/, "") : e
      }
    }();
  ir = 9 > Kn ? function(e) {
    return e = e.nodeName ? e : e[0], e.scopeName && "HTML" != e.scopeName ? Jn(e.scopeName + ":" + e.nodeName) : e.nodeName
  } : function(e) {
    return e.nodeName ? e.nodeName : e[0].nodeName
  };
  var ar = function() {
      if (y(ar.isActive_)) return ar.isActive_;
      var e = !!t.querySelector("[ng-csp]") || !!t.querySelector("[data-ng-csp]");
      if (!e) try {
        new Function("")
      } catch (n) {
        e = !0
      }
      return ar.isActive_ = e
    },
    fr = /[A-Z]/g,
    lr = {
      full: "1.2.28",
      major: 1,
      minor: 2,
      dot: 28,
      codeName: "finnish-disembarkation"
    };
  nt.expando = "ng339";
  var cr = nt.cache = {},
    hr = 1,
    pr = e.document.addEventListener ? function(e, t, n) {
      e.addEventListener(t, n, !1)
    } : function(e, t, n) {
      e.attachEvent("on" + t, n)
    },
    dr = e.document.removeEventListener ? function(e, t, n) {
      e.removeEventListener(t, n, !1)
    } : function(e, t, n) {
      e.detachEvent("on" + t, n)
    };
  nt._data = function(e) {
    return this.cache[e[this.expando]] || {}
  };
  var vr = /([\:\-\_]+(.))/g,
    mr = /^moz([A-Z])/,
    gr = r("jqLite"),
    yr = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
    br = /<|&#?\w+;/,
    wr = /<([\w:]+)/,
    Er = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
    Sr = {
      option: [1, '<select multiple="multiple">', "</select>"],
      thead: [1, "<table>", "</table>"],
      col: [2, "<table><colgroup>", "</colgroup></table>"],
      tr: [2, "<table><tbody>", "</tbody></table>"],
      td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
      _default: [0, "", ""]
    };
  Sr.optgroup = Sr.option, Sr.tbody = Sr.tfoot = Sr.colgroup = Sr.caption = Sr.thead, Sr.th = Sr.td;
  var xr = nt.prototype = {
      ready: function(n) {
        function r() {
          i || (i = !0, n())
        }
        var i = !1;
        "complete" === t.readyState ? setTimeout(r) : (this.on("DOMContentLoaded", r), nt(e).on("load", r))
      },
      toString: function() {
        var e = [];
        return s(this, function(t) {
          e.push("" + t)
        }), "[" + e.join(", ") + "]"
      },
      eq: function(e) {
        return 0 <= e ? Qn(this[e]) : Qn(this[this.length + e])
      },
      length: 0,
      push: Zn,
      sort: [].sort,
      splice: [].splice
    },
    Tr = {};
  s("multiple selected checked disabled readOnly required open".split(" "), function(e) {
    Tr[Vn(e)] = e
  });
  var Nr = {};
  s("input select option textarea button form details".split(" "), function(e) {
    Nr[Jn(e)] = !0
  }), s({
    data: at,
    removeData: ot
  }, function(e, t) {
    nt[t] = e
  }), s({
    data: at,
    inheritedData: dt,
    scope: function(e) {
      return Qn.data(e, "$scope") || dt(e.parentNode || e, ["$isolateScope", "$scope"])
    },
    isolateScope: function(e) {
      return Qn.data(e, "$isolateScope") || Qn.data(e, "$isolateScopeNoTemplate")
    },
    controller: pt,
    injector: function(e) {
      return dt(e, "$injector")
    },
    removeAttr: function(e, t) {
      e.removeAttribute(t)
    },
    hasClass: ft,
    css: function(e, t, r) {
      t = et(t);
      if (!y(r)) {
        var i;
        return 8 >= Kn && (i = e.currentStyle && e.currentStyle[t], "" === i && (i = "auto")), i = i || e.style[t], 8 >= Kn && (i = "" === i ? n : i), i
      }
      e.style[t] = r
    },
    attr: function(e, t, r) {
      var i = Vn(t);
      if (Tr[i]) {
        if (!y(r)) return e[t] || (e.attributes.getNamedItem(t) || d).specified ? i : n;
        r ? (e[t] = !0, e.setAttribute(t, i)) : (e[t] = !1, e.removeAttribute(i))
      } else if (y(r)) e.setAttribute(t, r);
      else if (e.getAttribute) return e = e.getAttribute(t, 2), null === e ? n : e
    },
    prop: function(e, t, n) {
      if (!y(n)) return e[t];
      e[t] = n
    },
    text: function() {
      function e(e, n) {
        var r = t[e.nodeType];
        if (g(n)) return r ? e[r] : "";
        e[r] = n
      }
      var t = [];
      return 9 > Kn ? (t[1] = "innerText", t[3] = "nodeValue") : t[1] = t[3] = "textContent", e.$dv = "", e
    }(),
    val: function(e, t) {
      if (g(t)) {
        if ("SELECT" === ir(e) && e.multiple) {
          var n = [];
          return s(e.options, function(e) {
            e.selected && n.push(e.value || e.text)
          }), 0 === n.length ? null : n
        }
        return e.value
      }
      e.value = t
    },
    html: function(e, t) {
      if (g(t)) return e.innerHTML;
      for (var n = 0, r = e.childNodes; n < r.length; n++) it(r[n]);
      e.innerHTML = t
    },
    empty: vt
  }, function(e, t) {
    nt.prototype[t] = function(t, r) {
      var i, s, o = this.length;
      if (e !== vt && (2 == e.length && e !== ft && e !== pt ? t : r) === n) {
        if (b(t)) {
          for (i = 0; i < o; i++)
            if (e === at) e(this[i], t);
            else
              for (s in t) e(this[i], s, t[s]);
          return this
        }
        i = e.$dv, o = i === n ? Math.min(o, 1) : o;
        for (s = 0; s < o; s++) {
          var u = e(this[s], t, r);
          i = i ? i + u : u
        }
        return i
      }
      for (i = 0; i < o; i++) e(this[i], t, r);
      return this
    }
  }), s({
    removeData: ot,
    dealoc: it,
    on: function os(e, n, r, i) {
      if (y(i)) throw gr("onargs");
      var o = ut(e, "events"),
        u = ut(e, "handle");
      o || ut(e, "events", o = {}), u || ut(e, "handle", u = gt(e, o)), s(n.split(" "), function(n) {
        var i = o[n];
        if (!i) {
          if ("mouseenter" == n || "mouseleave" == n) {
            var s = t.body.contains || t.body.compareDocumentPosition ? function(e, t) {
              var n = 9 === e.nodeType ? e.documentElement : e,
                r = t && t.parentNode;
              return e === r || !!r && 1 === r.nodeType && !!(n.contains ? n.contains(r) : e.compareDocumentPosition && e.compareDocumentPosition(r) & 16)
            } : function(e, t) {
              if (t)
                for (; t = t.parentNode;)
                  if (t === e) return !0;
              return !1
            };
            o[n] = [], os(e, {
              mouseleave: "mouseout",
              mouseenter: "mouseover"
            }[n], function(e) {
              var t = e.relatedTarget;
              t && (t === this || s(this, t)) || u(e, n)
            })
          } else pr(e, n, u), o[n] = [];
          i = o[n]
        }
        i.push(r)
      })
    },
    off: st,
    one: function(e, t, n) {
      e = Qn(e), e.on(t, function r() {
        e.off(t, n), e.off(t, r)
      }), e.on(t, n)
    },
    replaceWith: function(e, t) {
      var n, r = e.parentNode;
      it(e), s(new nt(t), function(t) {
        n ? r.insertBefore(t, n.nextSibling) : r.replaceChild(t, e), n = t
      })
    },
    children: function(e) {
      var t = [];
      return s(e.childNodes, function(e) {
        1 === e.nodeType && t.push(e)
      }), t
    },
    contents: function(e) {
      return e.contentDocument || e.childNodes || []
    },
    append: function(e, t) {
      s(new nt(t), function(t) {
        1 !== e.nodeType && 11 !== e.nodeType || e.appendChild(t)
      })
    },
    prepend: function(e, t) {
      if (1 === e.nodeType) {
        var n = e.firstChild;
        s(new nt(t), function(t) {
          e.insertBefore(t, n)
        })
      }
    },
    wrap: function(e, t) {
      t = Qn(t)[0];
      var n = e.parentNode;
      n && n.replaceChild(t, e), t.appendChild(e)
    },
    remove: function(e) {
      it(e);
      var t = e.parentNode;
      t && t.removeChild(e)
    },
    after: function(e, t) {
      var n = e,
        r = e.parentNode;
      s(new nt(t), function(e) {
        r.insertBefore(e, n.nextSibling), n = e
      })
    },
    addClass: ct,
    removeClass: lt,
    toggleClass: function(e, t, n) {
      t && s(t.split(" "), function(t) {
        var r = n;
        g(r) && (r = !ft(e, t)), (r ? ct : lt)(e, t)
      })
    },
    parent: function(e) {
      return (e = e.parentNode) && 11 !== e.nodeType ? e : null
    },
    next: function(e) {
      if (e.nextElementSibling) return e.nextElementSibling;
      for (e = e.nextSibling; null != e && 1 !== e.nodeType;) e = e.nextSibling;
      return e
    },
    find: function(e, t) {
      return e.getElementsByTagName ? e.getElementsByTagName(t) : []
    },
    clone: rt,
    triggerHandler: function(e, t, n) {
      var r, i;
      r = t.type || t;
      var o = (ut(e, "events") || {})[r];
      o && (r = {
        preventDefault: function() {
          this.defaultPrevented = !0
        },
        isDefaultPrevented: function() {
          return !0 === this.defaultPrevented
        },
        stopPropagation: d,
        type: r,
        target: e
      }, t.type && (r = c(r, t)), t = M(o), i = n ? [r].concat(n) : [r], s(t, function(t) {
        t.apply(e, i)
      }))
    }
  }, function(e, t) {
    nt.prototype[t] = function(t, n, r) {
      for (var i, s = 0; s < this.length; s++) g(i) ? (i = e(this[s], t, n, r), y(i) && (i = Qn(i))) : ht(i, e(this[s], t, n, r));
      return y(i) ? i : this
    }, nt.prototype.bind = nt.prototype.on, nt.prototype.unbind = nt.prototype.off
  }), bt.prototype = {
    put: function(e, t) {
      this[yt(e, this.nextUid)] = t
    },
    get: function(e) {
      return this[yt(e, this.nextUid)]
    },
    remove: function(e) {
      var t = this[e = yt(e, this.nextUid)];
      return delete this[e], t
    }
  };
  var Cr = /^function\s*[^\(]*\(\s*([^\)]*)\)/m,
    kr = /,/,
    Lr = /^\s*(_?)(\S+?)\1\s*$/,
    Ar = /((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,
    Or = r("$injector"),
    Mr = r("$animate"),
    _r = ["$provide", function(e) {
      this.$$selectors = {}, this.register = function(t, n) {
        var r = t + "-animation";
        if (t && "." != t.charAt(0)) throw Mr("notcsel", t);
        this.$$selectors[t.substr(1)] = r, e.factory(r, n)
      }, this.classNameFilter = function(e) {
        return 1 === arguments.length && (this.$$classNameFilter = e instanceof RegExp ? e : null), this.$$classNameFilter
      }, this.$get = ["$timeout", "$$asyncCallback", function(e, t) {
        return {
          enter: function(e, n, r, i) {
            r ? r.after(e) : (n && n[0] || (n = r.parent()), n.append(e)), i && t(i)
          },
          leave: function(e, n) {
            e.remove(), n && t(n)
          },
          move: function(e, t, n, r) {
            this.enter(e, t, n, r)
          },
          addClass: function(e, n, r) {
            n = w(n) ? n : or(n) ? n.join(" ") : "", s(e, function(e) {
              ct(e, n)
            }), r && t(r)
          },
          removeClass: function(e, n, r) {
            n = w(n) ? n : or(n) ? n.join(" ") : "", s(e, function(e) {
              lt(e, n)
            }), r && t(r)
          },
          setClass: function(e, n, r, i) {
            s(e, function(e) {
              ct(e, n), lt(e, r)
            }), i && t(i)
          },
          enabled: d
        }
      }]
    }],
    Dr = r("$compile");
  Lt.$inject = ["$provide", "$$sanitizeUriProvider"];
  var Pr = /^(x[\:\-_]|data[\:\-_])/i,
    Hr = r("$interpolate"),
    Br = /^([^\?#]*)(\?([^#]*))?(#(.*))?$/,
    jr = {
      http: 80,
      https: 443,
      ftp: 21
    },
    Fr = r("$location");
  Yt.prototype = Gt.prototype = Qt.prototype = {
    $$html5: !1,
    $$replace: !1,
    absUrl: Zt("$$absUrl"),
    url: function(e) {
      return g(e) ? this.$$url : (e = Br.exec(e), e[1] && this.path(decodeURIComponent(e[1])), (e[2] || e[1]) && this.search(e[3] || ""), this.hash(e[5] || ""), this)
    },
    protocol: Zt("$$protocol"),
    host: Zt("$$host"),
    port: Zt("$$port"),
    path: en("$$path", function(e) {
      return e = null !== e ? e.toString() : "", "/" == e.charAt(0) ? e : "/" + e
    }),
    search: function(e, t) {
      switch (arguments.length) {
        case 0:
          return this.$$search;
        case 1:
          if (w(e) || E(e)) e = e.toString(), this.$$search = q(e);
          else {
            if (!b(e)) throw Fr("isrcharg");
            s(e, function(t, n) {
              null == t && delete e[n]
            }), this.$$search = e
          }
          break;
        default:
          g(t) || null === t ? delete this.$$search[e] : this.$$search[e] = t
      }
      return this.$$compose(), this
    },
    hash: en("$$hash", function(e) {
      return null !== e ? e.toString() : ""
    }),
    replace: function() {
      return this.$$replace = !0, this
    }
  };
  var Ir = r("$parse"),
    qr = {},
    Rr, Ur = Function.prototype.call,
    zr = Function.prototype.apply,
    Wr = Function.prototype.bind,
    Xr = {
      "null": function() {
        return null
      },
      "true": function() {
        return !0
      },
      "false": function() {
        return !1
      },
      "undefined": d,
      "+": function(e, t, r, i) {
        return r = r(e, t), i = i(e, t), y(r) ? y(i) ? r + i : r : y(i) ? i : n
      },
      "-": function(e, t, n, r) {
        return n = n(e, t), r = r(e, t), (y(n) ? n : 0) - (y(r) ? r : 0)
      },
      "*": function(e, t, n, r) {
        return n(e, t) * r(e, t)
      },
      "/": function(e, t, n, r) {
        return n(e, t) / r(e, t)
      },
      "%": function(e, t, n, r) {
        return n(e, t) % r(e, t)
      },
      "^": function(e, t, n, r) {
        return n(e, t) ^ r(e, t)
      },
      "=": d,
      "===": function(e, t, n, r) {
        return n(e, t) === r(e, t)
      },
      "!==": function(e, t, n, r) {
        return n(e, t) !== r(e, t)
      },
      "==": function(e, t, n, r) {
        return n(e, t) == r(e, t)
      },
      "!=": function(e, t, n, r) {
        return n(e, t) != r(e, t)
      },
      "<": function(e, t, n, r) {
        return n(e, t) < r(e, t)
      },
      ">": function(e, t, n, r) {
        return n(e, t) > r(e, t)
      },
      "<=": function(e, t, n, r) {
        return n(e, t) <= r(e, t)
      },
      ">=": function(e, t, n, r) {
        return n(e, t) >= r(e, t)
      },
      "&&": function(e, t, n, r) {
        return n(e, t) && r(e, t)
      },
      "||": function(e, t, n, r) {
        return n(e, t) || r(e, t)
      },
      "&": function(e, t, n, r) {
        return n(e, t) & r(e, t)
      },
      "|": function(e, t, n, r) {
        return r(e, t)(e, t, n(e, t))
      },
      "!": function(e, t, n) {
        return !n(e, t)
      }
    },
    Vr = {
      n: "\n",
      f: "\f",
      r: "\r",
      t: "  ",
      v: "",
      "'": "'",
      '"': '"'
    },
    $r = function(e) {
      this.options = e
    };
  $r.prototype = {
    constructor: $r,
    lex: function(e) {
      this.text = e, this.index = 0, this.ch = n, this.lastCh = ":";
      for (this.tokens = []; this.index < this.text.length;) {
        this.ch = this.text.charAt(this.index);
        if (this.is("\"'")) this.readString(this.ch);
        else if (this.isNumber(this.ch) || this.is(".") && this.isNumber(this.peek())) this.readNumber();
        else if (this.isIdent(this.ch)) this.readIdent();
        else if (this.is("(){}[].,;:?")) this.tokens.push({
          index: this.index,
          text: this.ch
        }), this.index++;
        else {
          if (this.isWhitespace(this.ch)) {
            this.index++;
            continue
          }
          e = this.ch + this.peek();
          var t = e + this.peek(2),
            r = Xr[this.ch],
            i = Xr[e],
            s = Xr[t];
          s ? (this.tokens.push({
            index: this.index,
            text: t,
            fn: s
          }), this.index += 3) : i ? (this.tokens.push({
            index: this.index,
            text: e,
            fn: i
          }), this.index += 2) : r ? (this.tokens.push({
            index: this.index,
            text: this.ch,
            fn: r
          }), this.index += 1) : this.throwError("Unexpected next character ", this.index, this.index + 1)
        }
        this.lastCh = this.ch
      }
      return this.tokens
    },
    is: function(e) {
      return -1 !== e.indexOf(this.ch)
    },
    was: function(e) {
      return -1 !== e.indexOf(this.lastCh)
    },
    peek: function(e) {
      return e = e || 1, this.index + e < this.text.length ? this.text.charAt(this.index + e) : !1
    },
    isNumber: function(e) {
      return "0" <= e && "9" >= e
    },
    isWhitespace: function(e) {
      return " " === e || "\r" === e || "  " === e || "\n" === e || "" === e || " " === e
    },
    isIdent: function(e) {
      return "a" <= e && "z" >= e || "A" <= e && "Z" >= e || "_" === e || "$" === e
    },
    isExpOperator: function(e) {
      return "-" === e || "+" === e || this.isNumber(e)
    },
    throwError: function(e, t, n) {
      throw n = n || this.index, t = y(t) ? "s " + t + "-" + this.index + " [" + this.text.substring(t, n) + "]" : " " + n, Ir("lexerr", e, t, this.text)
    },
    readNumber: function() {
      for (var e = "", t = this.index; this.index < this.text.length;) {
        var n = Vn(this.text.charAt(this.index));
        if ("." == n || this.isNumber(n)) e += n;
        else {
          var r = this.peek();
          if ("e" == n && this.isExpOperator(r)) e += n;
          else if (this.isExpOperator(n) && r && this.isNumber(r) && "e" == e.charAt(e.length - 1)) e += n;
          else {
            if (!this.isExpOperator(n) || r && this.isNumber(r) || "e" != e.charAt(e.length - 1)) break;
            this.throwError("Invalid exponent")
          }
        }
        this.index++
      }
      e *= 1, this.tokens.push({
        index: t,
        text: e,
        literal: !0,
        constant: !0,
        fn: function() {
          return e
        }
      })
    },
    readIdent: function() {
      for (var e = this, t = "", n = this.index, r, i, s, o; this.index < this.text.length;) {
        o = this.text.charAt(this.index);
        if ("." !== o && !this.isIdent(o) && !this.isNumber(o)) break;
        "." === o && (r = this.index), t += o, this.index++
      }
      if (r)
        for (i = this.index; i < this.text.length;) {
          o = this.text.charAt(i);
          if ("(" === o) {
            s = t.substr(r - n + 1), t = t.substr(0, r - n), this.index = i;
            break
          }
          if (!this.isWhitespace(o)) break;
          i++
        }
      n = {
        index: n,
        text: t
      };
      if (Xr.hasOwnProperty(t)) n.fn = Xr[t], n.literal = !0, n.constant = !0;
      else {
        var u = ln(t, this.options, this.text);
        n.fn = c(function(e, t) {
          return u(e, t)
        }, {
          assign: function(n, r) {
            return on(n, t, r, e.text, e.options)
          }
        })
      }
      this.tokens.push(n), s && (this.tokens.push({
        index: r,
        text: "."
      }), this.tokens.push({
        index: r + 1,
        text: s
      }))
    },
    readString: function(e) {
      var t = this.index;
      this.index++;
      for (var n = "", r = e, i = !1; this.index < this.text.length;) {
        var s = this.text.charAt(this.index),
          r = r + s;
        if (i) "u" === s ? (i = this.text.substring(this.index + 1, this.index + 5), i.match(/[\da-f]{4}/i) || this.throwError("Invalid unicode escape [\\u" + i + "]"), this.index += 4, n += String.fromCharCode(parseInt(i, 16))) : n += Vr[s] || s, i = !1;
        else if ("\\" === s) i = !0;
        else {
          if (s === e) {
            this.index++, this.tokens.push({
              index: t,
              text: r,
              string: n,
              literal: !0,
              constant: !0,
              fn: function() {
                return n
              }
            });
            return
          }
          n += s
        }
        this.index++
      }
      this.throwError("Unterminated quote", t)
    }
  };
  var Jr = function(e, t, n) {
    this.lexer = e, this.$filter = t, this.options = n
  };
  Jr.ZERO = c(function() {
    return 0
  }, {
    constant: !0
  }), Jr.prototype = {
    constructor: Jr,
    parse: function(e) {
      return this.text = e, this.tokens = this.lexer.lex(e), e = this.statements(), 0 !== this.tokens.length && this.throwError("is an unexpected token", this.tokens[0]), e.literal = !!e.literal, e.constant = !!e.constant, e
    },
    primary: function() {
      var e;
      if (this.expect("(")) e = this.filterChain(), this.consume(")");
      else if (this.expect("[")) e = this.arrayDeclaration();
      else if (this.expect("{")) e = this.object();
      else {
        var t = this.expect();
        (e = t.fn) || this.throwError("not a primary expression", t), e.literal = !!t.literal, e.constant = !!t.constant
      }
      for (var n; t = this.expect("(", "[", ".");) "(" === t.text ? (e = this.functionCall(e, n), n = null) : "[" === t.text ? (n = e, e = this.objectIndex(e)) : "." === t.text ? (n = e, e = this.fieldAccess(e)) : this.throwError("IMPOSSIBLE");
      return e
    },
    throwError: function(e, t) {
      throw Ir("syntax", t.text, e, t.index + 1, this.text, this.text.substring(t.index))
    },
    peekToken: function() {
      if (0 === this.tokens.length) throw Ir("ueoe", this.text);
      return this.tokens[0]
    },
    peek: function(e, t, n, r) {
      if (0 < this.tokens.length) {
        var i = this.tokens[0],
          s = i.text;
        if (s === e || s === t || s === n || s === r || !(e || t || n || r)) return i
      }
      return !1
    },
    expect: function(e, t, n, r) {
      return (e = this.peek(e, t, n, r)) ? (this.tokens.shift(), e) : !1
    },
    consume: function(e) {
      this.expect(e) || this.throwError("is unexpected, expecting [" + e + "]", this.peek())
    },
    unaryFn: function(e, t) {
      return c(function(n, r) {
        return e(n, r, t)
      }, {
        constant: t.constant
      })
    },
    ternaryFn: function(e, t, n) {
      return c(function(r, i) {
        return e(r, i) ? t(r, i) : n(r, i)
      }, {
        constant: e.constant && t.constant && n.constant
      })
    },
    binaryFn: function(e, t, n) {
      return c(function(r, i) {
        return t(r, i, e, n)
      }, {
        constant: e.constant && n.constant
      })
    },
    statements: function() {
      for (var e = [];;)
        if (0 < this.tokens.length && !this.peek("}", ")", ";", "]") && e.push(this.filterChain()), !this.expect(";")) return 1 === e.length ? e[0] : function(t, n) {
          for (var r, i = 0; i < e.length; i++) {
            var s = e[i];
            s && (r = s(t, n))
          }
          return r
        }
    },
    filterChain: function() {
      for (var e = this.expression(), t;;) {
        if (!(t = this.expect("|"))) return e;
        e = this.binaryFn(e, t.fn, this.filter())
      }
    },
    filter: function() {
      for (var e = this.expect(), t = this.$filter(e.text), n = [];;) {
        if (!(e = this.expect(":"))) {
          var r = function(e, r, i) {
            i = [i];
            for (var s = 0; s < n.length; s++) i.push(n[s](e, r));
            return t.apply(e, i)
          };
          return function() {
            return r
          }
        }
        n.push(this.expression())
      }
    },
    expression: function() {
      return this.assignment()
    },
    assignment: function() {
      var e = this.ternary(),
        t, n;
      return (n = this.expect("=")) ? (e.assign || this.throwError("implies assignment but [" + this.text.substring(0, n.index) + "] can not be assigned to", n), t = this.ternary(), function(n, r) {
        return e.assign(n, t(n, r), r)
      }) : e
    },
    ternary: function() {
      var e = this.logicalOR(),
        t, n;
      if (!this.expect("?")) return e;
      t = this.assignment();
      if (n = this.expect(":")) return this.ternaryFn(e, t, this.assignment());
      this.throwError("expected :", n)
    },
    logicalOR: function() {
      for (var e = this.logicalAND(), t;;) {
        if (!(t = this.expect("||"))) return e;
        e = this.binaryFn(e, t.fn, this.logicalAND())
      }
    },
    logicalAND: function() {
      var e = this.equality(),
        t;
      if (t = this.expect("&&")) e = this.binaryFn(e, t.fn, this.logicalAND());
      return e
    },
    equality: function() {
      var e = this.relational(),
        t;
      if (t = this.expect("==", "!=", "===", "!==")) e = this.binaryFn(e, t.fn, this.equality());
      return e
    },
    relational: function() {
      var e = this.additive(),
        t;
      if (t = this.expect("<", ">", "<=", ">=")) e = this.binaryFn(e, t.fn, this.relational());
      return e
    },
    additive: function() {
      for (var e = this.multiplicative(), t; t = this.expect("+", "-");) e = this.binaryFn(e, t.fn, this.multiplicative());
      return e
    },
    multiplicative: function() {
      for (var e = this.unary(), t; t = this.expect("*", "/", "%");) e = this.binaryFn(e, t.fn, this.unary());
      return e
    },
    unary: function() {
      var e;
      return this.expect("+") ? this.primary() : (e = this.expect("-")) ? this.binaryFn(Jr.ZERO, e.fn, this.unary()) : (e = this.expect("!")) ? this.unaryFn(e.fn, this.unary()) : this.primary()
    },
    fieldAccess: function(e) {
      var t = this,
        n = this.expect().text,
        r = ln(n, this.options, this.text);
      return c(function(t, n, i) {
        return r(i || e(t, n))
      }, {
        assign: function(r, i, s) {
          return (s = e(r, s)) || e.assign(r, s = {}), on(s, n, i, t.text, t.options)
        }
      })
    },
    objectIndex: function(e) {
      var t = this,
        r = this.expression();
      return this.consume("]"), c(function(i, s) {
        var o = e(i, s),
          u = r(i, s),
          a;
        return rn(u, t.text), o ? ((o = sn(o[u], t.text)) && o.then && t.options.unwrapPromises && (a = o, "$$v" in o || (a.$$v = n, a.then(function(e) {
          a.$$v = e
        })), o = o.$$v), o) : n
      }, {
        assign: function(n, i, s) {
          var o = rn(r(n, s), t.text);
          return (s = sn(e(n, s), t.text)) || e.assign(n, s = {}), s[o] = i
        }
      })
    },
    functionCall: function(e, t) {
      var n = [];
      if (")" !== this.peekToken().text)
        do n.push(this.expression()); while (this.expect(","));
      this.consume(")");
      var r = this;
      return function(i, s) {
        for (var o = [], u = t ? t(i, s) : i, a = 0; a < n.length; a++) o.push(sn(n[a](i, s), r.text));
        a = e(i, s, u) || d, sn(u, r.text);
        var f = r.text;
        if (a) {
          if (a.constructor === a) throw Ir("isecfn", f);
          if (a === Ur || a === zr || Wr && a === Wr) throw Ir("isecff", f)
        }
        return o = a.apply ? a.apply(u, o) : a(o[0], o[1], o[2], o[3], o[4]), sn(o, r.text)
      }
    },
    arrayDeclaration: function() {
      var e = [],
        t = !0;
      if ("]" !== this.peekToken().text)
        do {
          if (this.peek("]")) break;
          var n = this.expression();
          e.push(n), n.constant || (t = !1)
        } while (this.expect(","));
      return this.consume("]"), c(function(t, n) {
        for (var r = [], i = 0; i < e.length; i++) r.push(e[i](t, n));
        return r
      }, {
        literal: !0,
        constant: t
      })
    },
    object: function() {
      var e = [],
        t = !0;
      if ("}" !== this.peekToken().text)
        do {
          if (this.peek("}")) break;
          var n = this.expect(),
            n = n.string || n.text;
          this.consume(":");
          var r = this.expression();
          e.push({
            key: n,
            value: r
          }), r.constant || (t = !1)
        } while (this.expect(","));
      return this.consume("}"), c(function(t, n) {
        for (var r = {}, i = 0; i < e.length; i++) {
          var s = e[i];
          r[s.key] = s.value(t, n)
        }
        return r
      }, {
        literal: !0,
        constant: t
      })
    }
  };
  var Kr = {},
    Qr = {},
    Gr = r("$sce"),
    Yr = {
      HTML: "html",
      CSS: "css",
      URL: "url",
      RESOURCE_URL: "resourceUrl",
      JS: "js"
    },
    Zr = t.createElement("a"),
    ei = xn(e.location.href, !0);
  Cn.$inject = ["$provide"], Ln.$inject = ["$locale"], An.$inject = ["$locale"];
  var ti = ".",
    ni = {
      yyyy: _n("FullYear", 4),
      yy: _n("FullYear", 2, 0, !0),
      y: _n("FullYear", 1),
      MMMM: Dn("Month"),
      MMM: Dn("Month", !0),
      MM: _n("Month", 2, 1),
      M: _n("Month", 1, 1),
      dd: _n("Date", 2),
      d: _n("Date", 1),
      HH: _n("Hours", 2),
      H: _n("Hours", 1),
      hh: _n("Hours", 2, -12),
      h: _n("Hours", 1, -12),
      mm: _n("Minutes", 2),
      m: _n("Minutes", 1),
      ss: _n("Seconds", 2),
      s: _n("Seconds", 1),
      sss: _n("Milliseconds", 3),
      EEEE: Dn("Day"),
      EEE: Dn("Day", !0),
      a: function(e, t) {
        return 12 > e.getHours() ? t.AMPMS[0] : t.AMPMS[1]
      },
      Z: function(e) {
        return e = -1 * e.getTimezoneOffset(), e = (0 <= e ? "+" : "") + (Mn(Math[0 < e ? "floor" : "ceil"](e / 60), 2) + Mn(Math.abs(e % 60), 2))
      }
    },
    ri = /((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,
    ii = /^\-?\d+$/;
  Pn.$inject = ["$locale"];
  var si = m(Vn),
    oi = m(Jn);
  jn.$inject = ["$parse"];
  var ui = m({
      restrict: "E",
      compile: function(e, n) {
        8 >= Kn && (n.href || n.name || n.$set("href", ""), e.append(t.createComment("IE fix")));
        if (!n.href && !n.xlinkHref && !n.name) return function(e, t) {
          var n = "[object SVGAnimatedString]" === er.call(t.prop("href")) ? "xlink:href" : "href";
          t.on("click", function(e) {
            t.attr(n) || e.preventDefault()
          })
        }
      }
    }),
    ai = {};
  s(Tr, function(e, t) {
    if ("multiple" != e) {
      var n = At("ng-" + t);
      ai[n] = function() {
        return {
          priority: 100,
          link: function(e, r, i) {
            e.$watch(i[n], function(e) {
              i.$set(t, !!e)
            })
          }
        }
      }
    }
  }), s(["src", "srcset", "href"], function(e) {
    var t = At("ng-" + e);
    ai[t] = function() {
      return {
        priority: 99,
        link: function(n, r, i) {
          var s = e,
            o = e;
          "href" === e && "[object SVGAnimatedString]" === er.call(r.prop("href")) && (o = "xlinkHref", i.$attr[o] = "xlink:href", s = null), i.$observe(t, function(t) {
            t ? (i.$set(o, t), Kn && s && r.prop(s, i[o])) : "href" === e && i.$set(o, null)
          })
        }
      }
    }
  });
  var fi = {
    $addControl: d,
    $removeControl: d,
    $setValidity: d,
    $setDirty: d,
    $setPristine: d
  };
  In.$inject = ["$element", "$attrs", "$scope", "$animate"];
  var li = function(e) {
      return ["$timeout", function(t) {
        return {
          name: "form",
          restrict: e ? "EAC" : "E",
          controller: In,
          compile: function() {
            return {
              pre: function(e, r, i, s) {
                if (!i.action) {
                  var o = function(e) {
                    e.preventDefault ? e.preventDefault() : e.returnValue = !1
                  };
                  pr(r[0], "submit", o), r.on("$destroy", function() {
                    t(function() {
                      dr(r[0], "submit", o)
                    }, 0, !1)
                  })
                }
                var u = r.parent().controller("form"),
                  a = i.name || i.ngForm;
                a && on(e, a, s, a), u && r.on("$destroy", function() {
                  u.$removeControl(s), a && on(e, a, n, a), c(s, fi)
                })
              }
            }
          }
        }
      }]
    },
    ci = li(),
    hi = li(!0),
    pi = /^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,
    di = /^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,
    vi = /^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,
    mi = {
      text: zn,
      number: function(e, t, r, i, s, o) {
        zn(e, t, r, i, s, o), i.$parsers.push(function(e) {
          var t = i.$isEmpty(e);
          return t || vi.test(e) ? (i.$setValidity("number", !0), "" === e ? null : t ? e : parseFloat(e)) : (i.$setValidity("number", !1), n)
        }), Un(i, "number", gi, null, i.$$validityState), i.$formatters.push(function(e) {
          return i.$isEmpty(e) ? "" : "" + e
        }), r.min && (e = function(e) {
          var t = parseFloat(r.min);
          return qn(i, "min", i.$isEmpty(e) || e >= t, e)
        }, i.$parsers.push(e), i.$formatters.push(e)), r.max && (e = function(e) {
          var t = parseFloat(r.max);
          return qn(i, "max", i.$isEmpty(e) || e <= t, e)
        }, i.$parsers.push(e), i.$formatters.push(e)), i.$formatters.push(function(e) {
          return qn(i, "number", i.$isEmpty(e) || E(e), e)
        })
      },
      url: function(e, t, n, r, i, s) {
        zn(e, t, n, r, i, s), e = function(e) {
          return qn(r, "url", r.$isEmpty(e) || pi.test(e), e)
        }, r.$formatters.push(e), r.$parsers.push(e)
      },
      email: function(e, t, n, r, i, s) {
        zn(e, t, n, r, i, s), e = function(e) {
          return qn(r, "email", r.$isEmpty(e) || di.test(e), e)
        }, r.$formatters.push(e), r.$parsers.push(e)
      },
      radio: function(e, t, n, r) {
        g(n.name) && t.attr("name", f()), t.on("click", function() {
          t[0].checked && e.$apply(function() {
            r.$setViewValue(n.value)
          })
        }), r.$render = function() {
          t[0].checked = n.value == r.$viewValue
        }, n.$observe("value", r.$render)
      },
      checkbox: function(e, t, n, r) {
        var i = n.ngTrueValue,
          s = n.ngFalseValue;
        w(i) || (i = !0), w(s) || (s = !1), t.on("click", function() {
          e.$apply(function() {
            r.$setViewValue(t[0].checked)
          })
        }), r.$render = function() {
          t[0].checked = r.$viewValue
        }, r.$isEmpty = function(e) {
          return e !== i
        }, r.$formatters.push(function(e) {
          return e === i
        }), r.$parsers.push(function(e) {
          return e ? i : s
        })
      },
      hidden: d,
      button: d,
      submit: d,
      reset: d,
      file: d
    },
    gi = ["badInput"],
    yi = ["$browser", "$sniffer", function(e, t) {
      return {
        restrict: "E",
        require: "?ngModel",
        link: function(n, r, i, s) {
          s && (mi[Vn(i.type)] || mi.text)(n, r, i, s, t, e)
        }
      }
    }],
    bi = "ng-valid",
    wi = "ng-invalid",
    Ei = "ng-pristine",
    Si = "ng-dirty",
    xi = ["$scope", "$exceptionHandler", "$attrs", "$element", "$parse", "$animate", function(e, t, n, i, o, u) {
      function a(e, t) {
        t = t ? "-" + V(t, "-") : "", u.removeClass(i, (e ? wi : bi) + t), u.addClass(i, (e ? bi : wi) + t)
      }
      this.$modelValue = this.$viewValue = Number.NaN, this.$parsers = [], this.$formatters = [], this.$viewChangeListeners = [], this.$pristine = !0, this.$dirty = !1, this.$valid = !0, this.$invalid = !1, this.$name = n.name;
      var f = o(n.ngModel),
        l = f.assign;
      if (!l) throw r("ngModel")("nonassign", n.ngModel, F(i));
      this.$render = d, this.$isEmpty = function(e) {
        return g(e) || "" === e || null === e || e !== e
      };
      var c = i.inheritedData("$formController") || fi,
        h = 0,
        p = this.$error = {};
      i.addClass(Ei), a(!0), this.$setValidity = function(e, t) {
        p[e] !== !t && (t ? (p[e] && h--, h || (a(!0), this.$valid = !0, this.$invalid = !1)) : (a(!1), this.$invalid = !0, this.$valid = !1, h++), p[e] = !t, a(t, e), c.$setValidity(e, t, this))
      }, this.$setPristine = function() {
        this.$dirty = !1, this.$pristine = !0, u.removeClass(i, Si), u.addClass(i, Ei)
      }, this.$setViewValue = function(n) {
        this.$viewValue = n, this.$pristine && (this.$dirty = !0, this.$pristine = !1, u.removeClass(i, Ei), u.addClass(i, Si), c.$setDirty()), s(this.$parsers, function(e) {
          n = e(n)
        }), this.$modelValue !== n && (this.$modelValue = n, l(e, n), s(this.$viewChangeListeners, function(e) {
          try {
            e()
          } catch (n) {
            t(n)
          }
        }))
      };
      var v = this;
      e.$watch(function() {
        var t = f(e);
        if (v.$modelValue !== t) {
          var n = v.$formatters,
            r = n.length;
          for (v.$modelValue = t; r--;) t = n[r](t);
          v.$viewValue !== t && (v.$viewValue = t, v.$render())
        }
        return t
      })
    }],
    Ti = function() {
      return {
        require: ["ngModel", "^?form"],
        controller: xi,
        link: function(e, t, n, r) {
          var i = r[0],
            s = r[1] || fi;
          s.$addControl(i), e.$on("$destroy", function() {
            s.$removeControl(i)
          })
        }
      }
    },
    Ni = m({
      require: "ngModel",
      link: function(e, t, n, r) {
        r.$viewChangeListeners.push(function() {
          e.$eval(n.ngChange)
        })
      }
    }),
    Ci = function() {
      return {
        require: "?ngModel",
        link: function(e, t, n, r) {
          if (r) {
            n.required = !0;
            var i = function(e) {
              if (!n.required || !r.$isEmpty(e)) return r.$setValidity("required", !0), e;
              r.$setValidity("required", !1)
            };
            r.$formatters.push(i), r.$parsers.unshift(i), n.$observe("required", function() {
              i(r.$viewValue)
            })
          }
        }
      }
    },
    ki = function() {
      return {
        require: "ngModel",
        link: function(e, t, r, i) {
          var o = (e = /\/(.*)\//.exec(r.ngList)) && RegExp(e[1]) || r.ngList || ",";
          i.$parsers.push(function(e) {
            if (!g(e)) {
              var t = [];
              return e && s(e.split(o), function(e) {
                e && t.push(ur(e))
              }), t
            }
          }), i.$formatters.push(function(e) {
            return or(e) ? e.join(", ") : n
          }), i.$isEmpty = function(e) {
            return !e || !e.length
          }
        }
      }
    },
    Li = /^(true|false|\d+)$/,
    Ai = function() {
      return {
        priority: 100,
        compile: function(e, t) {
          return Li.test(t.ngValue) ? function(e, t, n) {
            n.$set("value", e.$eval(n.ngValue))
          } : function(e, t, n) {
            e.$watch(n.ngValue, function(e) {
              n.$set("value", e)
            })
          }
        }
      }
    },
    Oi = Fn({
      compile: function(e) {
        return e.addClass("ng-binding"),
          function(e, t, r) {
            t.data("$binding", r.ngBind), e.$watch(r.ngBind, function(e) {
              t.text(e == n ? "" : e)
            })
          }
      }
    }),
    Mi = ["$interpolate", function(e) {
      return function(t, n, r) {
        t = e(n.attr(r.$attr.ngBindTemplate)), n.addClass("ng-binding").data("$binding", t), r.$observe("ngBindTemplate", function(e) {
          n.text(e)
        })
      }
    }],
    _i = ["$sce", "$parse", function(e, t) {
      return {
        compile: function(n) {
          return n.addClass("ng-binding"),
            function(n, r, i) {
              r.data("$binding", i.ngBindHtml);
              var s = t(i.ngBindHtml);
              n.$watch(function() {
                return (s(n) || "").toString()
              }, function(t) {
                r.html(e.getTrustedHtml(s(n)) || "")
              })
            }
        }
      }
    }],
    Di = Wn("", !0),
    Pi = Wn("Odd", 0),
    Hi = Wn("Even", 1),
    Bi = Fn({
      compile: function(e, t) {
        t.$set("ngCloak", n), e.removeClass("ng-cloak")
      }
    }),
    ji = [function() {
      return {
        scope: !0,
        controller: "@",
        priority: 500
      }
    }],
    Fi = {},
    Ii = {
      blur: !0,
      focus: !0
    };
  s("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "), function(e) {
    var t = At("ng-" + e);
    Fi[t] = ["$parse", "$rootScope", function(n, r) {
      return {
        compile: function(i, s) {
          var o = n(s[t], !0);
          return function(t, n) {
            n.on(e, function(n) {
              var i = function() {
                o(t, {
                  $event: n
                })
              };
              Ii[e] && r.$$phase ? t.$evalAsync(i) : t.$apply(i)
            })
          }
        }
      }
    }]
  });
  var qi = ["$animate", function(e) {
      return {
        transclude: "element",
        priority: 600,
        terminal: !0,
        restrict: "A",
        $$tlb: !0,
        link: function(n, r, i, s, o) {
          var u, a, f;
          n.$watch(i.ngIf, function(s) {
            j(s) ? a || (a = n.$new(), o(a, function(n) {
              n[n.length++] = t.createComment(" end ngIf: " + i.ngIf + " "), u = {
                clone: n
              }, e.enter(n, r.parent(), r)
            })) : (f && (f.remove(), f = null), a && (a.$destroy(), a = null), u && (f = G(u.clone), e.leave(f, function() {
              f = null
            }), u = null))
          })
        }
      }
    }],
    Ri = ["$http", "$templateCache", "$anchorScroll", "$animate", "$sce", function(e, t, n, r, i) {
      return {
        restrict: "ECA",
        priority: 400,
        terminal: !0,
        transclude: "element",
        controller: nr.noop,
        compile: function(s, o) {
          var u = o.ngInclude || o.src,
            a = o.onload || "",
            f = o.autoscroll;
          return function(s, o, l, c, h) {
            var p = 0,
              d, v, m, g = function() {
                v && (v.remove(), v = null), d && (d.$destroy(), d = null), m && (r.leave(m, function() {
                  v = null
                }), v = m, m = null)
              };
            s.$watch(i.parseAsResourceUrl(u), function(i) {
              var u = function() {
                  !y(f) || f && !s.$eval(f) || n()
                },
                l = ++p;
              i ? (e.get(i, {
                cache: t
              }).success(function(e) {
                if (l === p) {
                  var t = s.$new();
                  c.template = e, e = h(t, function(e) {
                    g(), r.enter(e, null, o, u)
                  }), d = t, m = e, d.$emit("$includeContentLoaded"), s.$eval(a)
                }
              }).error(function() {
                l === p && g()
              }), s.$emit("$includeContentRequested")) : (g(), c.template = null)
            })
          }
        }
      }
    }],
    Ui = ["$compile", function(e) {
      return {
        restrict: "ECA",
        priority: -400,
        require: "ngInclude",
        link: function(t, n, r, i) {
          n.html(i.template), e(n.contents())(t)
        }
      }
    }],
    zi = Fn({
      priority: 450,
      compile: function() {
        return {
          pre: function(e, t, n) {
            e.$eval(n.ngInit)
          }
        }
      }
    }),
    Wi = Fn({
      terminal: !0,
      priority: 1e3
    }),
    Xi = ["$locale", "$interpolate", function(e, t) {
      var n = /{}/g;
      return {
        restrict: "EA",
        link: function(r, i, o) {
          var u = o.count,
            a = o.$attr.when && i.attr(o.$attr.when),
            f = o.offset || 0,
            l = r.$eval(a) || {},
            c = {},
            h = t.startSymbol(),
            p = t.endSymbol(),
            d = /^when(Minus)?(.+)$/;
          s(o, function(e, t) {
            d.test(t) && (l[Vn(t.replace("when", "").replace("Minus", "-"))] = i.attr(o.$attr[t]))
          }), s(l, function(e, r) {
            c[r] = t(e.replace(n, h + u + "-" + f + p))
          }), r.$watch(function() {
            var t = parseFloat(r.$eval(u));
            return isNaN(t) ? "" : (t in l || (t = e.pluralCat(t - f)), c[t](r, i, !0))
          }, function(e) {
            i.text(e)
          })
        }
      }
    }],
    Vi = ["$parse", "$animate", function(e, n) {
      var o = r("ngRepeat");
      return {
        transclude: "element",
        priority: 1e3,
        terminal: !0,
        $$tlb: !0,
        link: function(r, u, a, f, l) {
          var c = a.ngRepeat,
            h = c.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),
            p, d, v, m, g, y, b = {
              $id: yt
            };
          if (!h) throw o("iexp", c);
          a = h[1], f = h[2], (h = h[3]) ? (p = e(h), d = function(e, t, n) {
            return y && (b[y] = e), b[g] = t, b.$index = n, p(r, b)
          }) : (v = function(e, t) {
            return yt(t)
          }, m = function(e) {
            return e
          }), h = a.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/);
          if (!h) throw o("iidexp", a);
          g = h[3] || h[1], y = h[2];
          var w = {};
          r.$watchCollection(f, function(e) {
            var a, f, h = u[0],
              p, b = {},
              E, S, x, T, N, C, k, L = [];
            if (i(e)) C = e, N = d || v;
            else {
              N = d || m, C = [];
              for (x in e) e.hasOwnProperty(x) && "$" != x.charAt(0) && C.push(x);
              C.sort()
            }
            E = C.length, f = L.length = C.length;
            for (a = 0; a < f; a++)
              if (x = e === C ? a : C[a], T = e[x], p = N(x, T, a), K(p, "`track by` id"), w.hasOwnProperty(p)) k = w[p], delete w[p], b[p] = k, L[a] = k;
              else {
                if (b.hasOwnProperty(p)) throw s(L, function(e) {
                  e && e.scope && (w[e.id] = e)
                }), o("dupes", c, p, H(T));
                L[a] = {
                  id: p
                }, b[p] = !1
              }
            for (x in w) w.hasOwnProperty(x) && (k = w[x], a = G(k.clone), n.leave(a), s(a, function(e) {
              e.$$NG_REMOVED = !0
            }), k.scope.$destroy());
            a = 0;
            for (f = C.length; a < f; a++) {
              x = e === C ? a : C[a], T = e[x], k = L[a], L[a - 1] && (h = L[a - 1].clone[L[a - 1].clone.length - 1]);
              if (k.scope) {
                S = k.scope, p = h;
                do p = p.nextSibling; while (p && p.$$NG_REMOVED);
                k.clone[0] != p && n.move(G(k.clone), null, Qn(h)), h = k.clone[k.clone.length - 1]
              } else S = r.$new();
              S[g] = T, y && (S[y] = x), S.$index = a, S.$first = 0 === a, S.$last = a === E - 1, S.$middle = !S.$first && !S.$last, S.$odd = !(S.$even = 0 === (a & 1)), k.scope || l(S, function(e) {
                e[e.length++] = t.createComment(" end ngRepeat: " + c + " "), n.enter(e, null, Qn(h)), h = e, k.scope = S, k.clone = e, b[k.id] = k
              })
            }
            w = b
          })
        }
      }
    }],
    $i = ["$animate", function(e) {
      return function(t, n, r) {
        t.$watch(r.ngShow, function(t) {
          e[j(t) ? "removeClass" : "addClass"](n, "ng-hide")
        })
      }
    }],
    Ji = ["$animate", function(e) {
      return function(t, n, r) {
        t.$watch(r.ngHide, function(t) {
          e[j(t) ? "addClass" : "removeClass"](n, "ng-hide")
        })
      }
    }],
    Ki = Fn(function(e, t, n) {
      e.$watch(n.ngStyle, function(e, n) {
        n && e !== n && s(n, function(e, n) {
          t.css(n, "")
        }), e && t.css(e)
      }, !0)
    }),
    Qi = ["$animate", function(e) {
      return {
        restrict: "EA",
        require: "ngSwitch",
        controller: ["$scope", function() {
          this.cases = {}
        }],
        link: function(t, n, r, i) {
          var o = [],
            u = [],
            a = [],
            f = [];
          t.$watch(r.ngSwitch || r.on, function(n) {
            var l, c;
            l = 0;
            for (c = a.length; l < c; ++l) a[l].remove();
            l = a.length = 0;
            for (c = f.length; l < c; ++l) {
              var h = u[l];
              f[l].$destroy(), a[l] = h, e.leave(h, function() {
                a.splice(l, 1)
              })
            }
            u.length = 0, f.length = 0;
            if (o = i.cases["!" + n] || i.cases["?"]) t.$eval(r.change), s(o, function(n) {
              var r = t.$new();
              f.push(r), n.transclude(r, function(t) {
                var r = n.element;
                u.push(t), e.enter(t, r.parent(), r)
              })
            })
          })
        }
      }
    }],
    Gi = Fn({
      transclude: "element",
      priority: 800,
      require: "^ngSwitch",
      link: function(e, t, n, r, i) {
        r.cases["!" + n.ngSwitchWhen] = r.cases["!" + n.ngSwitchWhen] || [], r.cases["!" + n.ngSwitchWhen].push({
          transclude: i,
          element: t
        })
      }
    }),
    Yi = Fn({
      transclude: "element",
      priority: 800,
      require: "^ngSwitch",
      link: function(e, t, n, r, i) {
        r.cases["?"] = r.cases["?"] || [], r.cases["?"].push({
          transclude: i,
          element: t
        })
      }
    }),
    Zi = Fn({
      link: function(e, t, n, i, s) {
        if (!s) throw r("ngTransclude")("orphan", F(t));
        s(function(e) {
          t.empty(), t.append(e)
        })
      }
    }),
    es = ["$templateCache", function(e) {
      return {
        restrict: "E",
        terminal: !0,
        compile: function(t, n) {
          "text/ng-template" == n.type && e.put(n.id, t[0].text)
        }
      }
    }],
    ts = r("ngOptions"),
    ns = m({
      terminal: !0
    }),
    rs = ["$compile", "$parse", function(e, r) {
      var i = /^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,
        u = {
          $setViewValue: d
        };
      return {
        restrict: "E",
        require: ["select", "?ngModel"],
        controller: ["$element", "$scope", "$attrs", function(e, t, n) {
          var r = this,
            i = {},
            s = u,
            o;
          r.databound = n.ngModel, r.init = function(e, t, n) {
            s = e, o = n
          }, r.addOption = function(t) {
            K(t, '"option value"'), i[t] = !0, s.$viewValue == t && (e.val(t), o.parent() && o.remove())
          }, r.removeOption = function(e) {
            this.hasOption(e) && (delete i[e], s.$viewValue == e && this.renderUnknownOption(e))
          }, r.renderUnknownOption = function(t) {
            t = "? " + yt(t) + " ?", o.val(t), e.prepend(o), e.val(t), o.prop("selected", !0)
          }, r.hasOption = function(e) {
            return i.hasOwnProperty(e)
          }, t.$on("$destroy", function() {
            r.renderUnknownOption = d
          })
        }],
        link: function(u, a, f, l) {
          function c(e, t, n, r) {
            n.$render = function() {
              var e = n.$viewValue;
              r.hasOption(e) ? (x.parent() && x.remove(), t.val(e), "" === e && w.prop("selected", !0)) : g(e) && w ? t.val("") : r.renderUnknownOption(e)
            }, t.on("change", function() {
              e.$apply(function() {
                x.parent() && x.remove(), n.$setViewValue(t.val())
              })
            })
          }

          function h(e, t, n) {
            var r;
            n.$render = function() {
              var e = new bt(n.$viewValue);
              s(t.find("option"), function(t) {
                t.selected = y(e.get(t.value))
              })
            }, e.$watch(function() {
              _(r, n.$viewValue) || (r = M(n.$viewValue), n.$render())
            }), t.on("change", function() {
              e.$apply(function() {
                var e = [];
                s(t.find("option"), function(t) {
                  t.selected && e.push(t.value)
                }), n.$setViewValue(e)
              })
            })
          }

          function p(t, s, u) {
            function a() {
              var e = {
                  "": []
                },
                n = [""],
                r, i, a, f, m;
              a = u.$modelValue, f = w(t) || [];
              var N = h ? o(f) : f,
                C, k, L;
              k = {}, L = !1;
              if (v)
                if (i = u.$modelValue, x && or(i))
                  for (L = new bt([]), r = {}, m = 0; m < i.length; m++) r[c] = i[m], L.put(x(t, r), i[m]);
                else L = new bt(i);
              m = L;
              var A, O;
              for (L = 0; C = N.length, L < C; L++) {
                i = L;
                if (h) {
                  i = N[L];
                  if ("$" === i.charAt(0)) continue;
                  k[h] = i
                }
                k[c] = f[i], r = p(t, k) || "", (i = e[r]) || (i = e[r] = [], n.push(r)), v ? r = y(m.remove(x ? x(t, k) : g(t, k))) : (x ? (r = {}, r[c] = a, r = x(t, r) === x(t, k)) : r = a === g(t, k), m = m || r), A = l(t, k), A = y(A) ? A : "", i.push({
                  id: x ? x(t, k) : h ? N[L] : L,
                  label: A,
                  selected: r
                })
              }
              v || (b || null === a ? e[""].unshift({
                id: "",
                label: "",
                selected: !m
              }) : m || e[""].unshift({
                id: "?",
                label: "",
                selected: !0
              })), k = 0;
              for (N = n.length; k < N; k++) {
                r = n[k], i = e[r], T.length <= k ? (a = {
                  element: S.clone().attr("label", r),
                  label: i.label
                }, f = [a], T.push(f), s.append(a.element)) : (f = T[k], a = f[0], a.label != r && a.element.attr("label", a.label = r)), A = null, L = 0;
                for (C = i.length; L < C; L++) r = i[L], (m = f[L + 1]) ? (A = m.element, m.label !== r.label && (A.text(m.label = r.label), A.prop("label", m.label)), m.id !== r.id && A.val(m.id = r.id), A[0].selected !== r.selected && (A.prop("selected", m.selected = r.selected), Kn && A.prop("selected", m.selected))) : ("" === r.id && b ? O = b : (O = E.clone()).val(r.id).prop("selected", r.selected).attr("selected", r.selected).prop("label", r.label).text(r.label), f.push({
                  element: O,
                  label: r.label,
                  id: r.id,
                  selected: r.selected
                }), d.addOption(r.label, O), A ? A.after(O) : a.element.append(O), A = O);
                for (L++; f.length > L;) r = f.pop(), d.removeOption(r.label), r.element.remove()
              }
              for (; T.length > k;) T.pop()[0].element.remove()
            }
            var f;
            if (!(f = m.match(i))) throw ts("iexp", m, F(s));
            var l = r(f[2] || f[1]),
              c = f[4] || f[6],
              h = f[5],
              p = r(f[3] || ""),
              g = r(f[2] ? f[1] : c),
              w = r(f[7]),
              x = f[8] ? r(f[8]) : null,
              T = [
                [{
                  element: s,
                  label: ""
                }]
              ];
            b && (e(b)(t), b.removeClass("ng-scope"), b.remove()), s.empty(), s.on("change", function() {
              t.$apply(function() {
                var e, r = w(t) || [],
                  i = {},
                  o, f, l, p, d, m, y;
                if (v) {
                  for (f = [], p = 0, m = T.length; p < m; p++)
                    for (e = T[p], l = 1, d = e.length; l < d; l++)
                      if ((o = e[l].element)[0].selected) {
                        o = o.val(), h && (i[h] = o);
                        if (x)
                          for (y = 0; y < r.length && (i[c] = r[y], x(t, i) != o); y++);
                        else i[c] = r[o];
                        f.push(g(t, i))
                      }
                } else if (o = s.val(), "?" == o) f = n;
                else if ("" === o) f = null;
                else if (x) {
                  for (y = 0; y < r.length; y++)
                    if (i[c] = r[y], x(t, i) == o) {
                      f = g(t, i);
                      break
                    }
                } else i[c] = r[o], h && (i[h] = o), f = g(t, i);
                u.$setViewValue(f), a()
              })
            }), u.$render = a, t.$watchCollection(w, a), t.$watchCollection(function() {
              var e = {},
                n = w(t);
              if (n) {
                for (var r = Array(n.length), i = 0, s = n.length; i < s; i++) e[c] = n[i], r[i] = l(t, e);
                return r
              }
            }, a), v && t.$watchCollection(function() {
              return u.$modelValue
            }, a)
          }
          if (l[1]) {
            var d = l[0];
            l = l[1];
            var v = f.multiple,
              m = f.ngOptions,
              b = !1,
              w, E = Qn(t.createElement("option")),
              S = Qn(t.createElement("optgroup")),
              x = E.clone();
            f = 0;
            for (var T = a.children(), N = T.length; f < N; f++)
              if ("" === T[f].value) {
                w = b = T.eq(f);
                break
              }
            d.init(l, b, x), v && (l.$isEmpty = function(e) {
              return !e || 0 === e.length
            }), m ? p(u, a, l) : v ? h(u, a, l) : c(u, a, l, d)
          }
        }
      }
    }],
    is = ["$interpolate", function(e) {
      var t = {
        addOption: d,
        removeOption: d
      };
      return {
        restrict: "E",
        priority: 100,
        compile: function(n, r) {
          if (g(r.value)) {
            var i = e(n.text(), !0);
            i || r.$set("value", n.text())
          }
          return function(e, n, r) {
            var s = n.parent(),
              o = s.data("$selectController") || s.parent().data("$selectController");
            o && o.databound ? n.prop("selected", !1) : o = t, i ? e.$watch(i, function(e, t) {
              r.$set("value", e), e !== t && o.removeOption(t), o.addOption(e)
            }) : o.addOption(r.value), n.on("$destroy", function() {
              o.removeOption(r.value)
            })
          }
        }
      }
    }],
    ss = m({
      restrict: "E",
      terminal: !0
    });
  e.angular.bootstrap ? console.log("WARNING: Tried to load angular more than once.") : ((Gn = e.jQuery) && Gn.fn.on ? (Qn = Gn, c(Gn.fn, {
    scope: xr.scope,
    isolateScope: xr.isolateScope,
    controller: xr.controller,
    injector: xr.injector,
    inheritedData: xr.inheritedData
  }), tt("remove", !0, !0, !1), tt("empty", !1, !1, !1), tt("html", !1, !1, !0)) : Qn = nt, nr.element = Qn, Z(nr), Qn(t).ready(function() {
    W(t, X)
  }))
})(window, document), !window.angular.$$csp() && window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide{display:none !important;}ng\\:form{display:block;}.ng-animate-block-transitions{transition:0s all!important;-webkit-transition:0s all!important;}.ng-hide-add-active,.ng-hide-remove{display:block!important;}</style>');
! function(e, t) {
  "object" == typeof exports && "undefined" != typeof module ? t(exports, require("angular")) : "function" == typeof define && define.amd ? define(["exports", "angular"], t) : t(e["@uirouter/angularjs"] = e["@uirouter/angularjs"] || {}, e.angular)
}(this, function(e, t) {
  "use strict";

  function n(e) {
    function t(n) {
      return n.length >= r ? e.apply(null, n) : function() {
        return t(n.concat([].slice.apply(arguments)))
      }
    }
    var n = [].slice.apply(arguments, [1]),
      r = e.length;
    return t(n)
  }

  function r() {
    var e = arguments,
      t = e.length - 1;
    return function() {
      for (var n = t, r = e[t].apply(this, arguments); n--;) r = e[n].call(this, r);
      return r
    }
  }

  function i() {
    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
    return r.apply(null, [].slice.call(arguments).reverse())
  }

  function s(e, t) {
    return function() {
      for (var n = [], r = 0; r < arguments.length; r++) n[r] = arguments[r];
      return e.apply(null, n) && t.apply(null, n)
    }
  }

  function o(e, t) {
    return function() {
      for (var n = [], r = 0; r < arguments.length; r++) n[r] = arguments[r];
      return e.apply(null, n) || t.apply(null, n)
    }
  }

  function u(e, t) {
    return function(n) {
      return n[e].apply(n, t)
    }
  }

  function a(e) {
    return function(t) {
      for (var n = 0; n < e.length; n++)
        if (e[n][0](t)) return e[n][1](t)
    }
  }

  function f(e) {
    if (en(e) && e.length) {
      var t = e.slice(0, -1),
        n = e.slice(-1);
      return !t.filter(Bt(Yt)).length && !n.filter(Bt(Qt)).length
    }
    return Qt(e)
  }

  function l(e) {
    return e
  }

  function c() {}

  function h(e, t, n, r, i) {
    void 0 === i && (i = !1);
    var s = function(t) {
        return e()[t].bind(n())
      },
      o = function(e) {
        return function() {
          return t[e] = s(e), t[e].apply(null, arguments)
        }
      };
    return r = r || Object.keys(e()), r.reduce(function(e, t) {
      return e[t] = i ? o(t) : s(t), e
    }, t)
  }

  function p(e, t) {
    return -1 !== e.indexOf(t)
  }

  function d(e, t) {
    var n = e.indexOf(t);
    return n >= 0 && e.splice(n, 1), e
  }

  function v(e, t) {
    return e.push(t), t
  }

  function m(e) {
    for (var t = [], n = 1; n < arguments.length; n++) t[n - 1] = arguments[n];
    var r = t.concat({}).reverse(),
      i = dn.apply(null, r);
    return dn({}, i, y(e || {}, Object.keys(i)))
  }

  function g(e, t) {
    var n = [];
    for (var r in e.path) {
      if (e.path[r] !== t.path[r]) break;
      n.push(e.path[r])
    }
    return n
  }

  function y(e, t) {
    var n = {};
    for (var r in e) - 1 !== t.indexOf(r) && (n[r] = e[r]);
    return n
  }

  function b(e, t) {
    return Object.keys(e).filter(Bt(gn(t))).reduce(function(t, n) {
      return t[n] = e[n], t
    }, {})
  }

  function w(e, t) {
    return x(e, Dt(t))
  }

  function E(e, t) {
    var n = en(e),
      r = n ? [] : {},
      i = n ? function(e) {
        return r.push(e)
      } : function(e, t) {
        return r[t] = e
      };
    return pn(e, function(e, n) {
      t(e, n) && i(e, n)
    }), r
  }

  function S(e, t) {
    var n;
    return pn(e, function(e, r) {
      n || t(e, r) && (n = e)
    }), n
  }

  function x(e, t) {
    var n = en(e) ? [] : {};
    return pn(e, function(e, r) {
      return n[r] = t(e, r)
    }), n
  }

  function T(e, t) {
    return e.push(t), e
  }

  function N(e, t) {
    return void 0 === t && (t = "assert failure"),
      function(n) {
        var r = e(n);
        if (!r) throw new Error(Qt(t) ? t(n) : t);
        return r
      }
  }

  function C() {
    for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
    if (0 === e.length) return [];
    var n, r = e.reduce(function(e, t) {
        return Math.min(t.length, e)
      }, 9007199254740991),
      i = [];
    for (n = 0; n < r; n++) switch (e.length) {
      case 1:
        i.push([e[0][n]]);
        break;
      case 2:
        i.push([e[0][n], e[1][n]]);
        break;
      case 3:
        i.push([e[0][n], e[1][n], e[2][n]]);
        break;
      case 4:
        i.push([e[0][n], e[1][n], e[2][n], e[3][n]]);
        break;
      default:
        i.push(e.map(function(e) {
          return e[n]
        }))
    }
    return i
  }

  function k(e, t) {
    var n, r;
    if (en(t) && (n = t[0], r = t[1]), !Yt(n)) throw new Error("invalid parameters to applyPairs");
    return e[n] = r, e
  }

  function L(e) {
    return e.length && e[e.length - 1] || void 0
  }

  function A(e, t) {
    return t && Object.keys(t).forEach(function(e) {
      return delete t[e]
    }), t || (t = {}), dn(t, e)
  }

  function O(e, t, n) {
    if (en(e)) return e.forEach(t, n);
    Object.keys(e).forEach(function(n) {
      return t(e[n], n)
    })
  }

  function M(e) {
    for (var t = 1; t < arguments.length; t++) {
      var n = arguments[t];
      if (n)
        for (var r = Object.keys(n), i = 0; i < r.length; i++) e[r[i]] = n[r[i]]
    }
    return e
  }

  function _(e, t) {
    if (e === t) return !0;
    if (null === e || null === t) return !1;
    if (e !== e && t !== t) return !0;
    var n = typeof e;
    if (n !== typeof t || "object" !== n) return !1;
    var r = [e, t];
    if (jt(en)(r)) return D(e, t);
    if (jt(tn)(r)) return e.getTime() === t.getTime();
    if (jt(nn)(r)) return e.toString() === t.toString();
    if (jt(Qt)(r)) return !0;
    if ([Qt, en, tn, nn].map(Ft).reduce(function(e, t) {
        return e || !!t(r)
      }, !1)) return !1;
    var i, s = {};
    for (i in e) {
      if (!_(e[i], t[i])) return !1;
      s[i] = !0
    }
    for (i in t)
      if (!s[i]) return !1;
    return !0
  }

  function D(e, t) {
    return e.length === t.length && C(e, t).reduce(function(e, t) {
      return e && _(t[0], t[1])
    }, !0)
  }

  function P(e) {
    return e ? "[ui-view#" + e.id + " tag in template from '" + (e.creationContext && e.creationContext.name || "(root)") + "' state]: fqn: '" + e.fqn + "', name: '" + e.name + "@" + e.creationContext + "')" : "ui-view (defunct)"
  }

  function H(t) {
    return Gt(t) ? e.Category[t] : e.Category[e.Category[t]]
  }

  function B(e, t) {
    function n(e) {
      for (var t = r, n = 0; n < t.length; n++) {
        var i = new Ut(t[n]);
        if (i && i.matches(e.name) || !i && t[n] === e.name) return !0
      }
      return !1
    }
    var r = Yt(t) ? [t] : t;
    return !!(Qt(r) ? r : n)(e)
  }

  function j(e, t, n) {
    function r(e, r, i) {
      void 0 === i && (i = {});
      var o = new Qn(t, n, r, e, i);
      return s.push(o),
        function() {
          o._deregistered = !0, yn(s)(o)
        }
    }
    var i = e._registeredHooks = e._registeredHooks || {},
      s = i[n.name] = [];
    return e[n.name] = r, r
  }

  function F(e) {
    return void 0 === e && (e = !1),
      function(t, n) {
        var r = e ? -1 : 1,
          i = (t.node.state.path.length - n.node.state.path.length) * r;
        return 0 !== i ? i : n.hook.priority - t.hook.priority
      }
  }

  function I(e, t) {
    function n(e) {
      return en(e) ? e : $t(e) ? [e] : []
    }

    function r(e) {
      switch (e.length) {
        case 0:
          return;
        case 1:
          return "auto" === t ? e[0] : e;
        default:
          return e
      }
    }

    function i(e, t) {
      return function(i) {
        if (en(i) && 0 === i.length) return i;
        var s = n(i),
          o = x(s, e);
        return !0 === t ? 0 === E(o, function(e) {
          return !e
        }).length : r(o)
      }
    }

    function s(e) {
      return function(t, r) {
        var i = n(t),
          s = n(r);
        if (i.length !== s.length) return !1;
        for (var o = 0; o < i.length; o++)
          if (!e(i[o], s[o])) return !1;
        return !0
      }
    }
    var o = this;
    ["encode", "decode", "equals", "$normalize"].forEach(function(t) {
      var n = e[t].bind(e),
        r = "equals" === t ? s : i;
      o[t] = r(n)
    }), dn(this, {
      dynamic: e.dynamic,
      name: e.name,
      pattern: e.pattern,
      inherit: e.inherit,
      is: i(e.is.bind(e), !0),
      $arrayMode: t
    })
  }

  function q(e) {
    function t() {
      return e.value
    }
    return e = er(e) && {
      value: e
    } || e, t.__cacheable = !0, dn(e, {
      $$fn: f(e.value) ? e.value : t
    })
  }

  function R(t, n, r, i, s) {
    if (t.type && n && "string" !== n.name) throw new Error("Param '" + i + "' has two type configurations.");
    if (t.type && n && "string" === n.name && s.type(t.type)) return s.type(t.type);
    if (n) return n;
    if (!t.type) {
      var o = r === e.DefType.CONFIG ? "any" : r === e.DefType.PATH ? "path" : r === e.DefType.SEARCH ? "query" : "string";
      return s.type(o)
    }
    return t.type instanceof Yn ? t.type : s.type(t.type)
  }

  function U(e, t, n) {
    var r = e.squash;
    if (!t || !1 === r) return !1;
    if (!$t(r) || null == r) return n;
    if (!0 === r || Yt(r)) return r;
    throw new Error("Invalid squash policy: '" + r + "'. Valid policies: false, true, or arbitrary string")
  }

  function z(e, t, n, r) {
    var i, s, o = [{
      from: "",
      to: n || t ? void 0 : ""
    }, {
      from: null,
      to: n || t ? void 0 : ""
    }];
    return i = en(e.replace) ? e.replace : [], Yt(r) && i.push({
      from: r,
      to: void 0
    }), s = x(i, Dt("from")), E(o, function(e) {
      return -1 === s.indexOf(e.from)
    }).concat(i)
  }

  function W(e, t) {
    return t.length <= e ? t : t.substr(0, e - 3) + "..."
  }

  function X(e, t) {
    for (; t.length < e;) t += " ";
    return t
  }

  function V(e) {
    return e.replace(/^([A-Z])/, function(e) {
      return e.toLowerCase()
    }).replace(/([A-Z])/g, function(e) {
      return "-" + e.toLowerCase()
    })
  }

  function $(e) {
    var t = J(e),
      n = t.match(/^(function [^ ]+\([^)]*\))/),
      r = n ? n[1] : t,
      i = e.name || "";
    return i && r.match(/function \(/) ? "function " + i + r.substr(9) : r
  }

  function J(e) {
    var t = en(e) ? e.slice(-1)[0] : e;
    return t && t.toString() || "undefined"
  }

  function K(e) {
    function t(e) {
      if (Zt(e)) {
        if (-1 !== n.indexOf(e)) return "[circular ref]";
        n.push(e)
      }
      return mr(e)
    }
    var n = [];
    return JSON.stringify(e, function(e, n) {
      return t(n)
    }).replace(/\\"/g, '"')
  }

  function Q(e) {
    var t = new RegExp("(" + e + ")", "g");
    return function(e) {
      return e.split(t).filter(l)
    }
  }

  function G(e, t) {
    return Yt(L(e)) && Yt(t) ? e.slice(0, -1).concat(L(e) + t) : T(e, t)
  }

  function Y(e) {
    return e.name
  }

  function Z(e) {
    return e.self.$$state = function() {
      return e
    }, e.self
  }

  function et(e) {
    return e.parent && e.parent.data && (e.data = e.self.data = mn(e.parent.data, e.data)), e.data
  }

  function tt(e) {
    return e.parent ? e.parent.path.concat(e) : [e]
  }

  function nt(e) {
    var t = e.parent ? dn({}, e.parent.includes) : {};
    return t[e.name] = !0, t
  }

  function rt(e) {
    var t = function(e) {
        var t = un.$injector;
        return e.$inject || t && t.annotate(e, t.strictDi) || "deferred"
      },
      n = function(e) {
        return !!e.token && !!e.resolveFn
      },
      r = function(e) {
        return !(!e.provide && !e.token || !(e.useValue || e.useFactory || e.useExisting || e.useClass))
      },
      s = function(e) {
        return !!(e && e.val && (Yt(e.val) || en(e.val) || Qt(e.val)))
      },
      o = function(e) {
        return e.provide || e.token
      },
      u = a([
        [Dt("resolveFn"), function(e) {
          return new sr(o(e), e.resolveFn, e.deps, e.policy)
        }],
        [Dt("useFactory"), function(e) {
          return new sr(o(e), e.useFactory, e.deps || e.dependencies, e.policy)
        }],
        [Dt("useClass"), function(e) {
          return new sr(o(e), function() {
            return new e.useClass
          }, [], e.policy)
        }],
        [Dt("useValue"), function(e) {
          return new sr(o(e), function() {
            return e.useValue
          }, [], e.policy, e.useValue)
        }],
        [Dt("useExisting"), function(e) {
          return new sr(o(e), l, [e.useExisting], e.policy)
        }]
      ]),
      f = a([
        [i(Dt("val"), Yt), function(e) {
          return new sr(e.token, l, [e.val], e.policy)
        }],
        [i(Dt("val"), en), function(e) {
          return new sr(e.token, L(e.val), e.val.slice(0, -1), e.policy)
        }],
        [i(Dt("val"), Qt), function(e) {
          return new sr(e.token, e.val, t(e.val), e.policy)
        }]
      ]),
      c = a([
        [It(sr), function(e) {
          return e
        }],
        [n, u],
        [r, u],
        [s, f],
        [Rt(!0), function(e) {
          throw new Error("Invalid resolve value: " + K(e))
        }]
      ]),
      h = e.resolve;
    return (en(h) ? h : function(e, t) {
      return Object.keys(e || {}).map(function(n) {
        return {
          token: n,
          val: e[n],
          deps: void 0,
          policy: t[n]
        }
      })
    }(h, e.resolvePolicy || {})).map(c)
  }

  function it(e, t) {
    var n = ["", ""],
      r = e.replace(/[\\\[\]\^$*+?.()|{}]/g, "\\$&");
    if (!t) return r;
    switch (t.squash) {
      case !1:
        n = ["(", ")" + (t.isOptional ? "?" : "")];
        break;
      case !0:
        r = r.replace(/\/$/, ""), n = ["(?:/(", ")|/)?"];
        break;
      default:
        n = ["(" + t.squash + "|", ")?"]
    }
    return r + n[0] + t.type.pattern.source + n[1]
  }

  function st(e, t, n, r) {
    return "/" === r ? e : t ? r.slice(0, -1) + e : n ? r.slice(1) + e : e
  }

  function ot(e) {
    if (!(Qt(e) || Yt(e) || It($n)(e) || $n.isDef(e))) throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property");
    return Qt(e) ? e : Rt(e)
  }

  function ut(e) {
    e.addResolvable({
      token: $r,
      deps: [],
      resolveFn: function() {
        return e.router
      },
      data: e.router
    }, ""), e.addResolvable({
      token: dr,
      deps: [],
      resolveFn: function() {
        return e
      },
      data: e
    }, ""), e.addResolvable({
      token: "$transition$",
      deps: [],
      resolveFn: function() {
        return e
      },
      data: e
    }, ""), e.addResolvable({
      token: "$stateParams",
      deps: [],
      resolveFn: function() {
        return e.params()
      },
      data: e.params()
    }, ""), e.entering().forEach(function(t) {
      e.addResolvable({
        token: "$state$",
        deps: [],
        resolveFn: function() {
          return t
        },
        data: t
      }, t)
    })
  }

  function at(e) {
    return function(t, n) {
      return (0, n.$$state()[e])(t, n)
    }
  }

  function ft(e, t) {
    function n(t) {
      return t && Array.isArray(t.states) && t.states.forEach(function(t) {
        return e.router.stateRegistry.register(t)
      }), t
    }
    var r = t.$$state().lazyLoad,
      i = r._promise;
    if (!i) {
      var s = function(e) {
          return delete t.lazyLoad, delete t.$$state().lazyLoad, delete r._promise, e
        },
        o = function(e) {
          return delete r._promise, un.$q.reject(e)
        };
      i = r._promise = un.$q.when(r(e, t)).then(n).then(s, o)
    }
    return i
  }

  function lt(e) {
    var t = e._ignoredReason();
    if (t) {
      Vn.traceTransitionIgnored(e);
      var n = e.router.globals.transition;
      return "SameAsCurrent" === t && n && n.abort(), qn.ignored().toPromise()
    }
  }

  function ct(e) {
    if (!e.valid()) throw new Error(e.error())
  }

  function ht(e) {
    var t = function(e) {
        return e || ""
      },
      n = ki(e).map(t),
      r = n[0],
      i = n[1],
      s = Li(r).map(t);
    return {
      path: s[0],
      search: s[1],
      hash: i,
      url: e
    }
  }

  function pt(e, t, n, r) {
    return function(i) {
      function s(e) {
        e.dispose(o), e.dispose(u)
      }
      var o = i.locationService = new n(i),
        u = i.locationConfig = new r(i, t);
      return {
        name: e,
        service: o,
        configuration: u,
        dispose: s
      }
    }
  }

  function dt(e) {
    return un.$injector = Ni, un.$q = xi, {
      name: "vanilla.services",
      $q: xi,
      $injector: Ni,
      dispose: function() {
        return null
      }
    }
  }

  function vt() {
    var e = null;
    return function(t, n) {
      return e = e || un.$injector.get("$templateFactory"), [new Yi(t, n, e)]
    }
  }

  function mt(e) {
    if (!e.parent) return {};
    var t = ["templateProvider", "templateUrl", "template", "notify", "async"],
      n = ["controller", "controllerProvider", "controllerAs", "resolveAs"],
      r = ["component", "bindings", "componentProvider"],
      i = t.concat(n),
      s = r.concat(i);
    if ($t(e.views) && Qi(s, e)) throw new Error("State '" + e.name + "' has a 'views' object. It cannot also have \"view properties\" at the state level.  Move the following properties into a view (in the 'views' object):  " + s.filter(function(t) {
      return $t(e[t])
    }).join(", "));
    var o = {},
      u = e.views || {
        $default: y(e, s)
      };
    return pn(u, function(t, n) {
      if (n = n || "$default", Yt(t) && (t = {
          component: t
        }), t = dn({}, t), Qi(r, t) && Qi(i, t)) throw new Error("Cannot combine: " + r.join("|") + " with: " + i.join("|") + " in stateview: '" + n + "@" + e.name + "'");
      t.resolveAs = t.resolveAs || "$resolve", t.$type = "ng1", t.$context = e, t.$name = n;
      var s = jr.normalizeUIViewTarget(t.$context, t.$name);
      t.$uiViewName = s.uiViewName, t.$uiViewContextAnchor = s.uiViewContextAnchor, o[n] = t
    }), o
  }

  function gt(e) {
    var t = un.$injector.get(e + "Directive");
    if (!t || !t.length) throw new Error("Unable to find component named '" + e + "'");
    return t.map(es).reduce(Cn, [])
  }

  function yt(e) {
    function t(e, t, r, i, s, o) {
      return n._runtimeServices(i, e, r, t), delete cs.router, delete cs.$get, cs
    }
    cs = this.router = new $r, cs.stateProvider = new ns(cs.stateRegistry, cs.stateService), cs.stateRegistry.decorator("views", mt), cs.stateRegistry.decorator("onExit", rs("onExit")), cs.stateRegistry.decorator("onRetain", rs("onRetain")), cs.stateRegistry.decorator("onEnter", rs("onEnter")), cs.viewService._pluginapi._viewConfigFactory("ng1", vt());
    var n = cs.locationService = cs.locationConfig = new is(e);
    return is.monkeyPatchPathParameterType(cs), cs.router = cs, cs.$get = t, t.$inject = ["$location", "$browser", "$sniffer", "$rootScope", "$http", "$templateCache"], cs
  }

  function bt(e, t, n) {
    un.$injector = e, un.$q = t, n.stateRegistry.get().map(function(e) {
      return e.$$state().resolvables
    }).reduce(Cn, []).filter(function(e) {
      return "deferred" === e.deps
    }).forEach(function(t) {
      return t.deps = e.annotate(t.resolveFn)
    })
  }

  function wt(e) {
    e.$watch(function() {
      Vn.approximateDigests++
    })
  }

  function Et(e) {
    var t, n = e.match(/^\s*({[^}]*})\s*$/);
    if (n && (e = "(" + n[1] + ")"), !(t = e.replace(/\n/g, " ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/)) || 4 !== t.length) throw new Error("Invalid state ref '" + e + "'");
    return {
      state: t[1] || null,
      paramExpr: t[3] || null
    }
  }

  function St(e) {
    var t = e.parent().inheritedData("$uiView"),
      n = Ht("$cfg.path")(t);
    return n ? L(n).state.name : void 0
  }

  function xt(e, t, n) {
    var r = n.uiState || e.current.name,
      i = dn(Ct(t, e), n.uiStateOpts || {}),
      s = e.href(r, n.uiStateParams, i);
    return {
      uiState: r,
      uiStateParams: n.uiStateParams,
      uiStateOpts: i,
      href: s
    }
  }

  function Tt(e) {
    var t = "[object SVGAnimatedString]" === Object.prototype.toString.call(e.prop("href")),
      n = "FORM" === e[0].nodeName;
    return {
      attr: n ? "action" : t ? "xlink:href" : "href",
      isAnchor: "A" === e.prop("tagName").toUpperCase(),
      clickable: !n
    }
  }

  function Nt(e, t, n, r, i) {
    return function(s) {
      var o = s.which || s.button,
        u = i();
      if (!(o > 1 || s.ctrlKey || s.metaKey || s.shiftKey || e.attr("target"))) {
        var a = n(function() {
          t.go(u.uiState, u.uiStateParams, u.uiStateOpts)
        });
        s.preventDefault();
        var f = r.isAnchor && !u.href ? 1 : 0;
        s.preventDefault = function() {
          f-- <= 0 && n.cancel(a)
        }
      }
    }
  }

  function Ct(e, t) {
    return {
      relative: St(e) || t.$current,
      inherit: !0,
      source: "sref"
    }
  }

  function kt(e, t, n, r) {
    var i;
    r && (i = r.events), en(i) || (i = ["click"]);
    for (var s = e.on ? "on" : "bind", o = 0, u = i; o < u.length; o++) {
      var a = u[o];
      e[s](a, n)
    }
    t.$on("$destroy", function() {
      for (var t = e.off ? "off" : "unbind", r = 0, s = i; r < s.length; r++) {
        var o = s[r];
        e[t](o, n)
      }
    })
  }

  function Lt(e) {
    var t = function(t, n, r) {
      return e.is(t, n, r)
    };
    return t.$stateful = !0, t
  }

  function At(e) {
    var t = function(t, n, r) {
      return e.includes(t, n, r)
    };
    return t.$stateful = !0, t
  }

  function Ot(e, n, r, i, s, o) {
    var u = Ht("viewDecl.controllerAs"),
      a = Ht("viewDecl.resolveAs");
    return {
      restrict: "ECA",
      priority: -400,
      compile: function(i) {
        var o = i.html();
        return i.empty(),
          function(i, f) {
            var l = f.data("$uiView");
            if (!l) return f.html(o), void e(f.contents())(i);
            var c = l.$cfg || {
                viewDecl: {},
                getTemplate: t.noop
              },
              h = c.path && new cr(c.path);
            f.html(c.getTemplate(f, h) || o), Vn.traceUIViewFill(l.$uiView, f.html());
            var p = e(f.contents()),
              d = c.controller,
              v = u(c),
              m = a(c),
              g = h && ms(h);
            if (i[m] = g, d) {
              var y = n(d, dn({}, g, {
                $scope: i,
                $element: f
              }));
              v && (i[v] = y, i[v][m] = g), f.data("$ngControllerController", y), f.children().data("$ngControllerController", y), Mt(s, r, y, i, c)
            }
            if (Yt(c.viewDecl.component)) var b = c.viewDecl.component,
              w = V(b),
              E = new RegExp("^(x-|data-)?" + w + "$", "i"),
              S = function() {
                var e = [].slice.call(f[0].children).filter(function(e) {
                  return e && e.tagName && E.exec(e.tagName)
                });
                return e && Ki.element(e).data("$" + b + "Controller")
              },
              x = i.$watch(S, function(e) {
                e && (Mt(s, r, e, i, c), x())
              });
            p(i)
          }
      }
    }
  }

  function Mt(e, t, n, r, i) {
    !Qt(n.$onInit) || i.viewDecl.component && ws || n.$onInit();
    var s = L(i.path).state.self,
      o = {
        bind: n
      };
    if (Qt(n.uiOnParamsChanged)) {
      var u = new cr(i.path),
        a = u.getResolvable("$transition$").data,
        f = function(e) {
          if (e !== a && -1 === e.exiting().indexOf(s)) {
            var t = e.params("to"),
              r = e.params("from"),
              i = e.treeChanges().to.map(function(e) {
                return e.paramSchema
              }).reduce(Cn, []),
              o = e.treeChanges().from.map(function(e) {
                return e.paramSchema
              }).reduce(Cn, []),
              u = i.filter(function(e) {
                var n = o.indexOf(e);
                return -1 === n || !o[n].type.equals(t[e.id], r[e.id])
              });
            if (u.length) {
              var f = u.map(function(e) {
                  return e.id
                }),
                l = E(t, function(e, t) {
                  return -1 !== f.indexOf(t)
                });
              n.uiOnParamsChanged(l, e)
            }
          }
        };
      r.$on("$destroy", t.onSuccess({}, f, o))
    }
    if (Qt(n.uiCanExit)) {
      var l = Es++,
        c = function(e) {
          return !!e && (e._uiCanExitIds && !0 === e._uiCanExitIds[l] || c(e.redirectedFrom()))
        },
        h = function(t) {
          var r, i = t._uiCanExitIds = t._uiCanExitIds || {};
          return c(t) || (r = e.when(n.uiCanExit(t)), r.then(function(e) {
            return i[l] = !1 !== e
          })), r
        },
        p = {
          exiting: s.name
        };
      r.$on("$destroy", t.onBefore(p, h, o))
    }
  }

  function _t() {
    var e = !1;
    this.useAnchorScroll = function() {
      e = !0
    }, this.$get = ["$anchorScroll", "$timeout", function(t, n) {
      return e ? t : function(e) {
        return n(function() {
          e[0].scrollIntoView()
        }, 0, !1)
      }
    }]
  }
  var Dt = function(e) {
      return function(t) {
        return t && t[e]
      }
    },
    Pt = n(function(e, t, n) {
      return n && n[e] === t
    }),
    Ht = function(e) {
      return i.apply(null, e.split(".").map(Dt))
    },
    Bt = function(e) {
      return function() {
        for (var t = [], n = 0; n < arguments.length; n++) t[n] = arguments[n];
        return !e.apply(null, t)
      }
    },
    jt = function(e) {
      return function(t) {
        return t.reduce(function(t, n) {
          return t && !!e(n)
        }, !0)
      }
    },
    Ft = function(e) {
      return function(t) {
        return t.reduce(function(t, n) {
          return t || !!e(n)
        }, !1)
      }
    },
    It = function(e) {
      return function(t) {
        return null != t && t.constructor === e || t instanceof e
      }
    },
    qt = function(e) {
      return function(t) {
        return e === t
      }
    },
    Rt = function(e) {
      return function() {
        return e
      }
    },
    Ut = function() {
      function e(e) {
        this.text = e, this.glob = e.split(".");
        var t = this.text.split(".").map(function(e) {
          return "**" === e ? "(?:|(?:\\.[^.]*)*)" : "*" === e ? "\\.[^.]*" : "\\." + e
        }).join("");
        this.regexp = new RegExp("^" + t + "$")
      }
      return e.prototype.matches = function(e) {
        return this.regexp.test("." + e)
      }, e.is = function(e) {
        return !!/[!,*]+/.exec(e)
      }, e.fromString = function(t) {
        return e.is(t) ? new e(t) : null
      }, e
    }(),
    zt = function() {
      function e(t) {
        return e.create(t || {})
      }
      return e.create = function(t) {
        t = e.isStateClass(t) ? new t : t;
        var n = mn(mn(t, e.prototype));
        return t.$$state = function() {
          return n
        }, n.self = t, n.__stateObjectCache = {
          nameGlob: Ut.fromString(n.name)
        }, n
      }, e.prototype.is = function(e) {
        return this === e || this.self === e || this.fqn() === e
      }, e.prototype.fqn = function() {
        if (!(this.parent && this.parent instanceof this.constructor)) return this.name;
        var e = this.parent.fqn();
        return e ? e + "." + this.name : this.name
      }, e.prototype.root = function() {
        return this.parent && this.parent.root() || this
      }, e.prototype.parameters = function(e) {
        return e = m(e, {
          inherit: !0,
          matchingKeys: null
        }), (e.inherit && this.parent && this.parent.parameters() || []).concat(xn(this.params)).filter(function(t) {
          return !e.matchingKeys || e.matchingKeys.hasOwnProperty(t.id)
        })
      }, e.prototype.parameter = function(e, t) {
        return void 0 === t && (t = {}), this.url && this.url.parameter(e, t) || S(xn(this.params), Pt("id", e)) || t.inherit && this.parent && this.parent.parameter(e)
      }, e.prototype.toString = function() {
        return this.fqn()
      }, e
    }();
  zt.isStateClass = function(e) {
    return Qt(e) && !0 === e.__uiRouterState
  }, zt.isState = function(e) {
    return Zt(e.__stateObjectCache)
  };
  var Wt = Object.prototype.toString,
    Xt = function(e) {
      return function(t) {
        return typeof t === e
      }
    },
    Vt = Xt("undefined"),
    $t = Bt(Vt),
    Jt = function(e) {
      return null === e
    },
    Kt = o(Jt, Vt),
    Qt = Xt("function"),
    Gt = Xt("number"),
    Yt = Xt("string"),
    Zt = function(e) {
      return null !== e && "object" == typeof e
    },
    en = Array.isArray,
    tn = function(e) {
      return "[object Date]" === Wt.call(e)
    },
    nn = function(e) {
      return "[object RegExp]" === Wt.call(e)
    },
    rn = zt.isState,
    sn = s(Zt, i(Dt("then"), Qt)),
    on = function(e) {
      return function() {
        throw new Error(e + "(): No coreservices implementation for UI-Router is loaded.")
      }
    },
    un = {
      $q: void 0,
      $injector: void 0
    },
    an = "undefined" == typeof window ? {} : window,
    fn = an.angular || {},
    ln = fn.fromJson || JSON.parse.bind(JSON),
    cn = fn.toJson || JSON.stringify.bind(JSON),
    hn = fn.copy || A,
    pn = fn.forEach || O,
    dn = Object.assign || M,
    vn = fn.equals || _,
    mn = function(e, t) {
      return dn(Object.create(e), t)
    },
    gn = n(p),
    yn = n(d),
    bn = n(v),
    wn = function(e) {
      return e.slice().forEach(function(t) {
        "function" == typeof t && t(), yn(e, t)
      })
    },
    En = function(e, t) {
      return dn(e, t)
    },
    Sn = x,
    xn = function(e) {
      return Object.keys(e).map(function(t) {
        return e[t]
      })
    },
    Tn = function(e, t) {
      return e && t
    },
    Nn = function(e, t) {
      return e || t
    },
    Cn = function(e, t) {
      return e.concat(t)
    },
    kn = function(e, t) {
      return en(t) ? e.concat(t.reduce(kn, [])) : T(e, t)
    },
    Ln = function(e, t) {
      return gn(e, t) ? e : T(e, t)
    },
    An = function(e) {
      return e.reduce(Cn, [])
    },
    On = function(e) {
      return e.reduce(kn, [])
    },
    Mn = N,
    _n = N,
    Dn = function(e) {
      return Object.keys(e).map(function(t) {
        return [t, e[t]]
      })
    },
    Pn = function(e, t) {
      return void 0 === t && (t = Rt(!0)),
        function(n, r) {
          return t(n) && t(r) ? e(n) - e(r) : 0
        }
    },
    Hn = function() {
      for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
      return function(t, n) {
        return e.reduce(function(e, r) {
          return e || r(t, n)
        }, 0)
      }
    },
    Bn = function(e) {
      return e.catch(function(e) {
        return 0
      }) && e
    },
    jn = function(e) {
      return Bn(un.$q.reject(e))
    },
    Fn = function() {
      function e(e, t) {
        void 0 === e && (e = []), void 0 === t && (t = null), this._items = e, this._limit = t
      }
      return e.prototype.enqueue = function(e) {
        var t = this._items;
        return t.push(e), this._limit && t.length > this._limit && t.shift(), e
      }, e.prototype.dequeue = function() {
        if (this.size()) return this._items.splice(0, 1)[0]
      }, e.prototype.clear = function() {
        var e = this._items;
        return this._items = [], e
      }, e.prototype.size = function() {
        return this._items.length
      }, e.prototype.remove = function(e) {
        var t = this._items.indexOf(e);
        return t > -1 && this._items.splice(t, 1)[0]
      }, e.prototype.peekTail = function() {
        return this._items[this._items.length - 1]
      }, e.prototype.peekHead = function() {
        if (this.size()) return this._items[0]
      }, e
    }();
  ! function(e) {
    e[e.SUPERSEDED = 2] = "SUPERSEDED", e[e.ABORTED = 3] = "ABORTED", e[e.INVALID = 4] = "INVALID", e[e.IGNORED = 5] = "IGNORED", e[e.ERROR = 6] = "ERROR"
  }(e.RejectType || (e.RejectType = {}));
  var In = 0,
    qn = function() {
      function t(e, t, n) {
        this.$id = In++, this.type = e, this.message = t, this.detail = n
      }
      return t.prototype.toString = function() {
        var e = function(e) {
            return e && e.toString !== Object.prototype.toString ? e.toString() : K(e)
          }(this.detail),
          t = this;
        return "Transition Rejection($id: " + t.$id + " type: " + t.type + ", message: " + t.message + ", detail: " + e + ")"
      }, t.prototype.toPromise = function() {
        return dn(jn(this), {
          _transitionRejection: this
        })
      }, t.isRejectionPromise = function(e) {
        return e && "function" == typeof e.then && It(t)(e._transitionRejection)
      }, t.superseded = function(n, r) {
        var i = new t(e.RejectType.SUPERSEDED, "The transition has been superseded by a different transition", n);
        return r && r.redirected && (i.redirected = !0), i
      }, t.redirected = function(e) {
        return t.superseded(e, {
          redirected: !0
        })
      }, t.invalid = function(n) {
        return new t(e.RejectType.INVALID, "This transition is invalid", n)
      }, t.ignored = function(n) {
        return new t(e.RejectType.IGNORED, "The transition was ignored", n)
      }, t.aborted = function(n) {
        return new t(e.RejectType.ABORTED, "The transition has been aborted", n)
      }, t.errored = function(n) {
        return new t(e.RejectType.ERROR, "The transition errored", n)
      }, t.normalize = function(e) {
        return It(t)(e) ? e : t.errored(e)
      }, t
    }(),
    Rn = function(e) {
      return "[ViewConfig#" + e.$id + " from '" + (e.viewDecl.$context.name || "(root)") + "' state]: target ui-view: '" + e.viewDecl.$uiViewName + "@" + e.viewDecl.$uiViewContextAnchor + "'"
    };
  ! function(e) {
    e[e.RESOLVE = 0] = "RESOLVE", e[e.TRANSITION = 1] = "TRANSITION", e[e.HOOK = 2] = "HOOK", e[e.UIVIEW = 3] = "UIVIEW", e[e.VIEWCONFIG = 4] = "VIEWCONFIG"
  }(e.Category || (e.Category = {}));
  var Un = Ht("$id"),
    zn = Ht("router.$id"),
    Wn = function(e) {
      return "Transition #" + Un(e) + "-" + zn(e)
    },
    Xn = function() {
      function t() {
        this._enabled = {}, this.approximateDigests = 0
      }
      return t.prototype._set = function(t, n) {
        var r = this;
        n.length || (n = Object.keys(e.Category).map(function(e) {
          return parseInt(e, 10)
        }).filter(function(e) {
          return !isNaN(e)
        }).map(function(t) {
          return e.Category[t]
        })), n.map(H).forEach(function(e) {
          return r._enabled[e] = t
        })
      }, t.prototype.enable = function() {
        for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
        this._set(!0, e)
      }, t.prototype.disable = function() {
        for (var e = [], t = 0; t < arguments.length; t++) e[t] = arguments[t];
        this._set(!1, e)
      }, t.prototype.enabled = function(e) {
        return !!this._enabled[H(e)]
      }, t.prototype.traceTransitionStart = function(t) {
        this.enabled(e.Category.TRANSITION) && console.log(Wn(t) + ": Started  -> " + K(t))
      }, t.prototype.traceTransitionIgnored = function(t) {
        this.enabled(e.Category.TRANSITION) && console.log(Wn(t) + ": Ignored  <> " + K(t))
      }, t.prototype.traceHookInvocation = function(t, n, r) {
        if (this.enabled(e.Category.HOOK)) {
          var i = Ht("traceData.hookType")(r) || "internal",
            s = Ht("traceData.context.state.name")(r) || Ht("traceData.context")(r) || "unknown",
            o = $(t.registeredHook.callback);
          console.log(Wn(n) + ":   Hook -> " + i + " context: " + s + ", " + W(200, o))
        }
      }, t.prototype.traceHookResult = function(t, n, r) {
        this.enabled(e.Category.HOOK) && console.log(Wn(n) + ":   <- Hook returned: " + W(200, K(t)))
      }, t.prototype.traceResolvePath = function(t, n, r) {
        this.enabled(e.Category.RESOLVE) && console.log(Wn(r) + ":         Resolving " + t + " (" + n + ")")
      }, t.prototype.traceResolvableResolved = function(t, n) {
        this.enabled(e.Category.RESOLVE) && console.log(Wn(n) + ":               <- Resolved  " + t + " to: " + W(200, K(t.data)))
      }, t.prototype.traceError = function(t, n) {
        this.enabled(e.Category.TRANSITION) && console.log(Wn(n) + ": <- Rejected " + K(n) + ", reason: " + t)
      }, t.prototype.traceSuccess = function(t, n) {
        this.enabled(e.Category.TRANSITION) && console.log(Wn(n) + ": <- Success  " + K(n) + ", final state: " + t.name)
      }, t.prototype.traceUIViewEvent = function(t, n, r) {
        void 0 === r && (r = ""), this.enabled(e.Category.UIVIEW) && console.log("ui-view: " + X(30, t) + " " + P(n) + r)
      }, t.prototype.traceUIViewConfigUpdated = function(t, n) {
        this.enabled(e.Category.UIVIEW) && this.traceUIViewEvent("Updating", t, " with ViewConfig from context='" + n + "'")
      }, t.prototype.traceUIViewFill = function(t, n) {
        this.enabled(e.Category.UIVIEW) && this.traceUIViewEvent("Fill", t, " with: " + W(200, n))
      }, t.prototype.traceViewServiceEvent = function(t, n) {
        this.enabled(e.Category.VIEWCONFIG) && console.log("VIEWCONFIG: " + t + " " + Rn(n))
      }, t.prototype.traceViewServiceUIViewEvent = function(t, n) {
        this.enabled(e.Category.VIEWCONFIG) && console.log("VIEWCONFIG: " + t + " " + P(n))
      }, t
    }(),
    Vn = new Xn;
  ! function(e) {
    e[e.CREATE = 0] = "CREATE", e[e.BEFORE = 1] = "BEFORE", e[e.RUN = 2] = "RUN", e[e.SUCCESS = 3] = "SUCCESS", e[e.ERROR = 4] = "ERROR"
  }(e.TransitionHookPhase || (e.TransitionHookPhase = {})),
  function(e) {
    e[e.TRANSITION = 0] = "TRANSITION", e[e.STATE = 1] = "STATE"
  }(e.TransitionHookScope || (e.TransitionHookScope = {}));
  var $n = function() {
    function e(e, t, n, r) {
      void 0 === r && (r = {}), this._identifier = e, this._definition = t, this._options = r, this._params = n || {}
    }
    return e.prototype.name = function() {
      return this._definition && this._definition.name || this._identifier
    }, e.prototype.identifier = function() {
      return this._identifier
    }, e.prototype.params = function() {
      return this._params
    }, e.prototype.$state = function() {
      return this._definition
    }, e.prototype.state = function() {
      return this._definition && this._definition.self
    }, e.prototype.options = function() {
      return this._options
    }, e.prototype.exists = function() {
      return !!this._definition && !!this._definition.self
    }, e.prototype.valid = function() {
      return !this.error()
    }, e.prototype.error = function() {
      var e = this.options().relative;
      if (!this._definition && e) {
        var t = e.name ? e.name : e;
        return "Could not resolve '" + this.name() + "' from state '" + t + "'"
      }
      return this._definition ? this._definition.self ? void 0 : "State '" + this.name() + "' has an invalid definition" : "No such state '" + this.name() + "'"
    }, e.prototype.toString = function() {
      return "'" + this.name() + "'" + cn(this.params())
    }, e
  }();
  $n.isDef = function(e) {
    return e && e.state && (Yt(e.state) || Yt(e.state.name))
  };
  var Jn = {
      current: c,
      transition: null,
      traceData: {},
      bind: null
    },
    Kn = function() {
      function t(t, n, r, i) {
        var s = this;
        this.transition = t, this.stateContext = n, this.registeredHook = r, this.options = i, this.isSuperseded = function() {
          return s.type.hookPhase === e.TransitionHookPhase.RUN && !s.options.transition.isActive()
        }, this.options = m(i, Jn), this.type = r.eventType
      }
      return t.prototype.logError = function(e) {
        this.transition.router.stateService.defaultErrorHandler()(e)
      }, t.prototype.invokeHook = function() {
        var e = this,
          t = this.registeredHook;
        if (!t._deregistered) {
          var n = this.getNotCurrentRejection();
          if (n) return n;
          var r = this.options;
          Vn.traceHookInvocation(this, this.transition, r);
          var i = function(e) {
              return qn.normalize(e).toPromise()
            },
            s = function(n) {
              return t.eventType.getErrorHandler(e)(n)
            },
            o = function(n) {
              return t.eventType.getResultHandler(e)(n)
            };
          try {
            var u = function() {
              return t.callback.call(r.bind, e.transition, e.stateContext)
            }();
            return !this.type.synchronous && sn(u) ? u.catch(i).then(o, s) : o(u)
          } catch (e) {
            return s(qn.normalize(e))
          }
        }
      }, t.prototype.handleHookResult = function(e) {
        var t = this,
          n = this.getNotCurrentRejection();
        return n || (sn(e) ? e.then(function(e) {
          return t.handleHookResult(e)
        }) : (Vn.traceHookResult(e, this.transition, this.options), !1 === e ? qn.aborted("Hook aborted transition").toPromise() : It($n)(e) ? qn.redirected(e).toPromise() : void 0))
      }, t.prototype.getNotCurrentRejection = function() {
        var e = this.transition.router;
        return e._disposed ? qn.aborted("UIRouter instance #" + e.$id + " has been stopped (disposed)").toPromise() : this.transition._aborted ? qn.aborted().toPromise() : this.isSuperseded() ? qn.superseded(this.options.current()).toPromise() : void 0
      }, t.prototype.toString = function() {
        var e = this,
          t = e.options,
          n = e.registeredHook;
        return (Ht("traceData.hookType")(t) || "internal") + " context: " + (Ht("traceData.context.state.name")(t) || Ht("traceData.context")(t) || "unknown") + ", " + W(200, J(n.callback))
      }, t.chain = function(e, t) {
        var n = function(e, t) {
          return e.then(function() {
            return t.invokeHook()
          })
        };
        return e.reduce(n, t || un.$q.when())
      }, t.invokeHooks = function(e, n) {
        for (var r = 0; r < e.length; r++) {
          var i = e[r].invokeHook();
          if (sn(i)) {
            var s = e.slice(r + 1);
            return t.chain(s, i).then(n)
          }
        }
        return n()
      }, t.runAllHooks = function(e) {
        e.forEach(function(e) {
          return e.invokeHook()
        })
      }, t
    }();
  Kn.HANDLE_RESULT = function(e) {
    return function(t) {
      return e.handleHookResult(t)
    }
  }, Kn.LOG_REJECTED_RESULT = function(e) {
    return function(t) {
      sn(t) && t.catch(function(t) {
        return e.logError(qn.normalize(t))
      })
    }
  }, Kn.LOG_ERROR = function(e) {
    return function(t) {
      return e.logError(t)
    }
  }, Kn.REJECT_ERROR = function(e) {
    return function(e) {
      return jn(e)
    }
  }, Kn.THROW_ERROR = function(e) {
    return function(e) {
      throw e
    }
  };
  var Qn = function() {
      function t(e, t, n, r, i) {
        void 0 === i && (i = {}), this.tranSvc = e, this.eventType = t, this.callback = n, this.matchCriteria = r, this.priority = i.priority || 0, this.bind = i.bind || null, this._deregistered = !1
      }
      return t.prototype._matchingNodes = function(e, t) {
        if (!0 === t) return e;
        var n = e.filter(function(e) {
          return B(e.state, t)
        });
        return n.length ? n : null
      }, t.prototype._getDefaultMatchCriteria = function() {
        return x(this.tranSvc._pluginapi._getPathTypes(), function() {
          return !0
        })
      }, t.prototype._getMatchingNodes = function(t) {
        var n = this,
          r = dn(this._getDefaultMatchCriteria(), this.matchCriteria);
        return xn(this.tranSvc._pluginapi._getPathTypes()).reduce(function(i, s) {
          var o = s.scope === e.TransitionHookScope.STATE,
            u = t[s.name] || [],
            a = o ? u : [L(u)];
          return i[s.name] = n._matchingNodes(a, r[s.name]), i
        }, {})
      }, t.prototype.matches = function(e) {
        var t = this._getMatchingNodes(e);
        return xn(t).every(l) ? t : null
      }, t
    }(),
    Gn = function() {
      function t(e) {
        this.transition = e
      }
      return t.prototype.buildHooksForPhase = function(e) {
        var t = this;
        return this.transition.router.transitionService._pluginapi._getEvents(e).map(function(e) {
          return t.buildHooks(e)
        }).reduce(Cn, []).filter(l)
      }, t.prototype.buildHooks = function(t) {
        var n = this.transition,
          r = n.treeChanges(),
          i = this.getMatchingHooks(t, r);
        if (!i) return [];
        var s = {
            transition: n,
            current: n.options().current
          },
          o = function(i) {
            return i.matches(r)[t.criteriaMatchPath.name].map(function(r) {
              var o = dn({
                  bind: i.bind,
                  traceData: {
                    hookType: t.name,
                    context: r
                  }
                }, s),
                u = t.criteriaMatchPath.scope === e.TransitionHookScope.STATE ? r.state.self : null,
                a = new Kn(n, u, i, o);
              return {
                hook: i,
                node: r,
                transitionHook: a
              }
            })
          };
        return i.map(o).reduce(Cn, []).sort(F(t.reverseSort)).map(function(e) {
          return e.transitionHook
        })
      }, t.prototype.getMatchingHooks = function(t, n) {
        var r = t.hookPhase === e.TransitionHookPhase.CREATE,
          i = this.transition.router.transitionService;
        return (r ? [i] : [this.transition, i]).map(function(e) {
          return e.getHooks(t.name)
        }).filter(Mn(en, "broken event named: " + t.name)).reduce(Cn, []).filter(function(e) {
          return e.matches(n)
        })
      }, t
    }(),
    Yn = function() {
      function e(e) {
        this.pattern = /.*/, this.inherit = !0, dn(this, e)
      }
      return e.prototype.is = function(e, t) {
        return !0
      }, e.prototype.encode = function(e, t) {
        return e
      }, e.prototype.decode = function(e, t) {
        return e
      }, e.prototype.equals = function(e, t) {
        return e == t
      }, e.prototype.$subPattern = function() {
        var e = this.pattern.toString();
        return e.substr(1, e.length - 2)
      }, e.prototype.toString = function() {
        return "{ParamType:" + this.name + "}"
      }, e.prototype.$normalize = function(e) {
        return this.is(e) ? e : this.decode(e)
      }, e.prototype.$asArray = function(e, t) {
        if (!e) return this;
        if ("auto" === e && !t) throw new Error("'auto' array mode is for query parameters only");
        return new I(this, e)
      }, e
    }(),
    Zn = Object.prototype.hasOwnProperty,
    er = function(e) {
      return 0 === ["value", "type", "squash", "array", "dynamic"].filter(Zn.bind(e || {})).length
    };
  ! function(e) {
    e[e.PATH = 0] = "PATH", e[e.SEARCH = 1] = "SEARCH", e[e.CONFIG = 2] = "CONFIG"
  }(e.DefType || (e.DefType = {}));
  var tr = function() {
      function t(t, n, r, i, s) {
        r = q(r), n = R(r, n, i, t, s.paramTypes);
        var o = function() {
          var n = {
              array: i === e.DefType.SEARCH && "auto"
            },
            s = t.match(/\[\]$/) ? {
              array: !0
            } : {};
          return dn(n, s, r).array
        }();
        n = o ? n.$asArray(o, i === e.DefType.SEARCH) : n;
        var u = void 0 !== r.value || i === e.DefType.SEARCH,
          a = $t(r.dynamic) ? !!r.dynamic : !!n.dynamic,
          f = $t(r.raw) ? !!r.raw : !!n.raw,
          l = U(r, u, s.defaultSquashPolicy()),
          c = z(r, o, u, l),
          h = $t(r.inherit) ? !!r.inherit : !!n.inherit;
        dn(this, {
          id: t,
          type: n,
          location: i,
          isOptional: u,
          dynamic: a,
          raw: f,
          squash: l,
          replace: c,
          inherit: h,
          array: o,
          config: r
        })
      }
      return t.prototype.isDefaultValue = function(e) {
        return this.isOptional && this.type.equals(this.value(), e)
      }, t.prototype.value = function(e) {
        var t = this;
        return e = function(e) {
          for (var n = 0, r = t.replace; n < r.length; n++) {
            var i = r[n];
            if (i.from === e) return i.to
          }
          return e
        }(e), Vt(e) ? function() {
          if (t._defaultValueCache) return t._defaultValueCache.defaultValue;
          if (!un.$injector) throw new Error("Injectable functions cannot be called at configuration time");
          var e = un.$injector.invoke(t.config.$$fn);
          if (null !== e && void 0 !== e && !t.type.is(e)) throw new Error("Default value (" + e + ") for parameter '" + t.id + "' is not an instance of ParamType (" + t.type.name + ")");
          return t.config.$$fn.__cacheable && (t._defaultValueCache = {
            defaultValue: e
          }), e
        }() : this.type.$normalize(e)
      }, t.prototype.isSearch = function() {
        return this.location === e.DefType.SEARCH
      }, t.prototype.validates = function(e) {
        if ((Vt(e) || null === e) && this.isOptional) return !0;
        var t = this.type.$normalize(e);
        if (!this.type.is(t)) return !1;
        var n = this.type.encode(t);
        return !Yt(n) || !!this.type.pattern.exec(n)
      }, t.prototype.toString = function() {
        return "{Param:" + this.id + " " + this.type + " squash: '" + this.squash + "' optional: " + this.isOptional + "}"
      }, t.values = function(e, t) {
        void 0 === t && (t = {});
        for (var n = {}, r = 0, i = e; r < i.length; r++) {
          var s = i[r];
          n[s.id] = s.value(t[s.id])
        }
        return n
      }, t.changed = function(e, t, n) {
        return void 0 === t && (t = {}), void 0 === n && (n = {}), e.filter(function(e) {
          return !e.type.equals(t[e.id], n[e.id])
        })
      }, t.equals = function(e, n, r) {
        return void 0 === n && (n = {}), void 0 === r && (r = {}), 0 === t.changed(e, n, r).length
      }, t.validates = function(e, t) {
        return void 0 === t && (t = {}), e.map(function(e) {
          return e.validates(t[e.id])
        }).reduce(Tn, !0)
      }, t
    }(),
    nr = function() {
      function e(t) {
        if (t instanceof e) {
          var n = t;
          this.state = n.state, this.paramSchema = n.paramSchema.slice(), this.paramValues = dn({}, n.paramValues), this.resolvables = n.resolvables.slice(), this.views = n.views && n.views.slice()
        } else {
          var r = t;
          this.state = r, this.paramSchema = r.parameters({
            inherit: !1
          }), this.paramValues = {}, this.resolvables = r.resolvables.map(function(e) {
            return e.clone()
          })
        }
      }
      return e.prototype.applyRawParams = function(e) {
        var t = function(t) {
          return [t.id, t.value(e[t.id])]
        };
        return this.paramValues = this.paramSchema.reduce(function(e, n) {
          return k(e, t(n))
        }, {}), this
      }, e.prototype.parameter = function(e) {
        return S(this.paramSchema, Pt("id", e))
      }, e.prototype.equals = function(e, t) {
        var n = this.diff(e, t);
        return n && 0 === n.length
      }, e.prototype.diff = function(e, t) {
        if (this.state !== e.state) return !1;
        var n = t ? t(this) : this.paramSchema;
        return tr.changed(n, this.paramValues, e.paramValues)
      }, e.clone = function(t) {
        return new e(t)
      }, e
    }(),
    rr = function() {
      function e() {}
      return e.makeTargetState = function(e) {
        var t = L(e).state;
        return new $n(t, t, e.map(Dt("paramValues")).reduce(En, {}))
      }, e.buildPath = function(e) {
        var t = e.params();
        return e.$state().path.map(function(e) {
          return (new nr(e)).applyRawParams(t)
        })
      }, e.buildToPath = function(t, n) {
        var r = e.buildPath(n);
        return n.options().inherit ? e.inheritParams(t, r, Object.keys(n.params())) : r
      }, e.applyViewConfigs = function(t, n, r) {
        n.filter(function(e) {
          return gn(r, e.state)
        }).forEach(function(r) {
          var i = xn(r.state.views || {}),
            s = e.subPath(n, function(e) {
              return e === r
            }),
            o = i.map(function(e) {
              return t.createViewConfig(s, e)
            });
          r.views = o.reduce(Cn, [])
        })
      }, e.inheritParams = function(e, t, n) {
        function r(e, t) {
          var n = S(e, Pt("state", t));
          return dn({}, n && n.paramValues)
        }

        function i(t) {
          var i = dn({}, t && t.paramValues),
            o = y(i, n);
          i = b(i, n);
          var u = b(r(e, t.state) || {}, s),
            a = dn(i, u, o);
          return (new nr(t.state)).applyRawParams(a)
        }
        void 0 === n && (n = []);
        var s = e.map(function(e) {
          return e.paramSchema
        }).reduce(Cn, []).filter(function(e) {
          return !e.inherit
        }).map(Dt("id"));
        return t.map(i)
      }, e.treeChanges = function(t, n, r) {
        function i(e, t) {
          var r = nr.clone(e);
          return r.paramValues = n[t].paramValues, r
        }
        for (var s = 0, o = Math.min(t.length, n.length); s < o && t[s].state !== r && function(t, n) {
            return t.equals(n, e.nonDynamicParams)
          }(t[s], n[s]);) s++;
        var u, a, f, l, c;
        u = t, a = u.slice(0, s), f = u.slice(s);
        var h = a.map(i);
        return l = n.slice(s), c = h.concat(l), {
          from: u,
          to: c,
          retained: a,
          exiting: f,
          entering: l
        }
      }, e.matching = function(e, t, n) {
        var r = !1;
        return C(e, t).reduce(function(e, t) {
          var i = t[0],
            s = t[1];
          return r = r || !i.equals(s, n), r ? e : e.concat(i)
        }, [])
      }, e.equals = function(t, n, r) {
        return t.length === n.length && e.matching(t, n, r).length === t.length
      }, e.subPath = function(e, t) {
        var n = S(e, t),
          r = e.indexOf(n);
        return -1 === r ? void 0 : e.slice(0, r + 1)
      }, e
    }();
  rr.nonDynamicParams = function(e) {
    return e.state.parameters({
      inherit: !1
    }).filter(function(e) {
      return !e.dynamic
    })
  }, rr.paramValues = function(e) {
    return e.reduce(function(e, t) {
      return dn(e, t.paramValues)
    }, {})
  };
  var ir = {
      when: "LAZY",
      async: "WAIT"
    },
    sr = function() {
      function e(t, n, r, i, s) {
        if (this.resolved = !1, this.promise = void 0, t instanceof e) dn(this, t);
        else if (Qt(n)) {
          if (null == t || void 0 == t) throw new Error("new Resolvable(): token argument is required");
          if (!Qt(n)) throw new Error("new Resolvable(): resolveFn argument must be a function");
          this.token = t, this.policy = i, this.resolveFn = n, this.deps = r || [], this.data = s, this.resolved = void 0 !== s, this.promise = this.resolved ? un.$q.when(this.data) : void 0
        } else if (Zt(t) && t.token && Qt(t.resolveFn)) {
          var o = t;
          return new e(o.token, o.resolveFn, o.deps, o.policy, o.data)
        }
      }
      return e.prototype.getPolicy = function(e) {
        var t = this.policy || {},
          n = e && e.resolvePolicy || {};
        return {
          when: t.when || n.when || ir.when,
          async: t.async || n.async || ir.async
        }
      }, e.prototype.resolve = function(e, t) {
        var n = this,
          r = un.$q,
          i = function() {
            return r.all(e.getDependencies(n).map(function(n) {
              return n.get(e, t)
            }))
          },
          s = function(e) {
            return n.resolveFn.apply(null, e)
          },
          o = function(e) {
            var t = e.cache(1);
            return t.take(1).toPromise().then(function() {
              return t
            })
          },
          u = e.findNode(this),
          a = u && u.state,
          f = "RXWAIT" === this.getPolicy(a).async ? o : l,
          c = function(e) {
            return n.data = e, n.resolved = !0, Vn.traceResolvableResolved(n, t), n.data
          };
        return this.promise = r.when().then(i).then(s).then(f).then(c)
      }, e.prototype.get = function(e, t) {
        return this.promise || this.resolve(e, t)
      }, e.prototype.toString = function() {
        return "Resolvable(token: " + K(this.token) + ", requires: [" + this.deps.map(K) + "])"
      }, e.prototype.clone = function() {
        return new e(this)
      }, e
    }();
  sr.fromData = function(e, t) {
    return new sr(e, function() {
      return t
    }, null, null, t)
  };
  var or = {
      when: {
        LAZY: "LAZY",
        EAGER: "EAGER"
      },
      async: {
        WAIT: "WAIT",
        NOWAIT: "NOWAIT",
        RXWAIT: "RXWAIT"
      }
    },
    ur = or.when,
    ar = [ur.EAGER, ur.LAZY],
    fr = [ur.EAGER],
    lr = "Native Injector",
    cr = function() {
      function e(e) {
        this._path = e
      }
      return e.prototype.getTokens = function() {
        return this._path.reduce(function(e, t) {
          return e.concat(t.resolvables.map(function(e) {
            return e.token
          }))
        }, []).reduce(Ln, [])
      }, e.prototype.getResolvable = function(e) {
        return L(this._path.map(function(e) {
          return e.resolvables
        }).reduce(Cn, []).filter(function(t) {
          return t.token === e
        }))
      }, e.prototype.getPolicy = function(e) {
        var t = this.findNode(e);
        return e.getPolicy(t.state)
      }, e.prototype.subContext = function(t) {
        return new e(rr.subPath(this._path, function(e) {
          return e.state === t
        }))
      }, e.prototype.addResolvables = function(e, t) {
        var n = S(this._path, Pt("state", t)),
          r = e.map(function(e) {
            return e.token
          });
        n.resolvables = n.resolvables.filter(function(e) {
          return -1 === r.indexOf(e.token)
        }).concat(e)
      }, e.prototype.resolvePath = function(e, t) {
        var n = this;
        void 0 === e && (e = "LAZY");
        var r = gn(ar, e) ? e : "LAZY",
          i = r === or.when.EAGER ? fr : ar;
        Vn.traceResolvePath(this._path, e, t);
        var s = function(e, t) {
            return function(r) {
              return gn(e, n.getPolicy(r)[t])
            }
          },
          o = this._path.reduce(function(e, r) {
            var o = r.resolvables.filter(s(i, "when")),
              u = o.filter(s(["NOWAIT"], "async")),
              a = o.filter(Bt(s(["NOWAIT"], "async"))),
              f = n.subContext(r.state),
              l = function(e) {
                return e.get(f, t).then(function(t) {
                  return {
                    token: e.token,
                    value: t
                  }
                })
              };
            return u.forEach(l), e.concat(a.map(l))
          }, []);
        return un.$q.all(o)
      }, e.prototype.injector = function() {
        return this._injector || (this._injector = new hr(this))
      }, e.prototype.findNode = function(e) {
        return S(this._path, function(t) {
          return gn(t.resolvables, e)
        })
      }, e.prototype.getDependencies = function(e) {
        var t = this,
          n = this.findNode(e),
          r = rr.subPath(this._path, function(e) {
            return e === n
          }) || this._path,
          i = r.reduce(function(e, t) {
            return e.concat(t.resolvables)
          }, []).filter(function(t) {
            return t !== e
          }),
          s = function(e) {
            var n = i.filter(function(t) {
              return t.token === e
            });
            if (n.length) return L(n);
            var r = t.injector().getNative(e);
            if (!r) throw new Error("Could not find Dependency Injection token: " + K(e));
            return new sr(e, function() {
              return r
            }, [], r)
          };
        return e.deps.map(s)
      }, e
    }(),
    hr = function() {
      function e(e) {
        this.context = e, this.native = this.get(lr) || un.$injector
      }
      return e.prototype.get = function(e) {
        var t = this.context.getResolvable(e);
        if (t) {
          if ("NOWAIT" === this.context.getPolicy(t).async) return t.get(this.context);
          if (!t.resolved) throw new Error("Resolvable async .get() not complete:" + K(t.token));
          return t.data
        }
        return this.native && this.native.get(e)
      }, e.prototype.getAsync = function(e) {
        var t = this.context.getResolvable(e);
        return t ? t.get(this.context) : un.$q.when(this.native.get(e))
      }, e.prototype.getNative = function(e) {
        return this.native && this.native.get(e)
      }, e
    }(),
    pr = Dt("self"),
    dr = function() {
      function t(t, n, r) {
        var i = this;
        if (this._deferred = un.$q.defer(), this.promise = this._deferred.promise, this._registeredHooks = {}, this._hookBuilder = new Gn(this), this.isActive = function() {
            return i.router.globals.transition === i
          }, this.router = r, this._targetState = n, !n.valid()) throw new Error(n.error());
        this._options = dn({
          current: Rt(this)
        }, n.options()), this.$id = r.transitionService._transitionCount++;
        var s = rr.buildToPath(t, n);
        this._treeChanges = rr.treeChanges(t, s, this._options.reloadState), this.createTransitionHookRegFns();
        var o = this._hookBuilder.buildHooksForPhase(e.TransitionHookPhase.CREATE);
        Kn.invokeHooks(o, function() {
          return null
        }), this.applyViewConfigs(r)
      }
      return t.prototype.onBefore = function(e, t, n) {}, t.prototype.onStart = function(e, t, n) {}, t.prototype.onExit = function(e, t, n) {}, t.prototype.onRetain = function(e, t, n) {}, t.prototype.onEnter = function(e, t, n) {}, t.prototype.onFinish = function(e, t, n) {}, t.prototype.onSuccess = function(e, t, n) {}, t.prototype.onError = function(e, t, n) {}, t.prototype.createTransitionHookRegFns = function() {
        var t = this;
        this.router.transitionService._pluginapi._getEvents().filter(function(t) {
          return t.hookPhase !== e.TransitionHookPhase.CREATE
        }).forEach(function(e) {
          return j(t, t.router.transitionService, e)
        })
      }, t.prototype.getHooks = function(e) {
        return this._registeredHooks[e]
      }, t.prototype.applyViewConfigs = function(e) {
        var t = this._treeChanges.entering.map(function(e) {
          return e.state
        });
        rr.applyViewConfigs(e.transitionService.$view, this._treeChanges.to, t)
      }, t.prototype.$from = function() {
        return L(this._treeChanges.from).state
      }, t.prototype.$to = function() {
        return L(this._treeChanges.to).state
      }, t.prototype.from = function() {
        return this.$from().self
      }, t.prototype.to = function() {
        return this.$to().self
      }, t.prototype.targetState = function() {
        return this._targetState
      }, t.prototype.is = function(e) {
        return e instanceof t ? this.is({
          to: e.$to().name,
          from: e.$from().name
        }) : !(e.to && !B(this.$to(), e.to) || e.from && !B(this.$from(), e.from))
      }, t.prototype.params = function(e) {
        return void 0 === e && (e = "to"), Object.freeze(this._treeChanges[e].map(Dt("paramValues")).reduce(En, {}))
      }, t.prototype.injector = function(e, t) {
        void 0 === t && (t = "to");
        var n = this._treeChanges[t];
        return e && (n = rr.subPath(n, function(t) {
          return t.state === e || t.state.name === e
        })), (new cr(n)).injector()
      }, t.prototype.getResolveTokens = function(e) {
        return void 0 === e && (e = "to"), (new cr(this._treeChanges[e])).getTokens()
      }, t.prototype.addResolvable = function(e, t) {
        void 0 === t && (t = ""), e = It(sr)(e) ? e : new sr(e);
        var n = "string" == typeof t ? t : t.name,
          r = this._treeChanges.to,
          i = S(r, function(e) {
            return e.state.name === n
          });
        (new cr(r)).addResolvables([e], i.state)
      }, t.prototype.redirectedFrom = function() {
        return this._options.redirectedFrom || null
      }, t.prototype.originalTransition = function() {
        var e = this.redirectedFrom();
        return e && e.originalTransition() || this
      }, t.prototype.options = function() {
        return this._options
      }, t.prototype.entering = function() {
        return x(this._treeChanges.entering, Dt("state")).map(pr)
      }, t.prototype.exiting = function() {
        return x(this._treeChanges.exiting, Dt("state")).map(pr).reverse()
      }, t.prototype.retained = function() {
        return x(this._treeChanges.retained, Dt("state")).map(pr)
      }, t.prototype.views = function(e, t) {
        void 0 === e && (e = "entering");
        var n = this._treeChanges[e];
        return n = t ? n.filter(Pt("state", t)) : n, n.map(Dt("views")).filter(l).reduce(Cn, [])
      }, t.prototype.treeChanges = function(e) {
        return e ? this._treeChanges[e] : this._treeChanges
      }, t.prototype.redirect = function(e) {
        for (var t = 1, n = this; null != (n = n.redirectedFrom());)
          if (++t > 20) throw new Error("Too many consecutive Transition redirects (20+)");
        var r = {
          redirectedFrom: this,
          source: "redirect"
        };
        "url" === this.options().source && !1 !== e.options().location && (r.location = "replace");
        var i = dn({}, this.options(), e.options(), r);
        e = new $n(e.identifier(), e.$state(), e.params(), i);
        var s = this.router.transitionService.create(this._treeChanges.from, e),
          o = this._treeChanges.entering,
          u = s._treeChanges.entering;
        return rr.matching(u, o, rr.nonDynamicParams).filter(Bt(function(e) {
          return function(t) {
            return e && t.state.includes[e.name]
          }
        }(e.options().reloadState))).forEach(function(e, t) {
          e.resolvables = o[t].resolvables
        }), s
      }, t.prototype._changedParams = function() {
        var e = this._treeChanges;
        if (!this._options.reload && !e.exiting.length && !e.entering.length && e.to.length === e.from.length && !C(e.to, e.from).map(function(e) {
            return e[0].state !== e[1].state
          }).reduce(Nn, !1)) {
          var t = e.to.map(function(e) {
              return e.paramSchema
            }),
            n = [e.to, e.from].map(function(e) {
              return e.map(function(e) {
                return e.paramValues
              })
            });
          return C(t, n[0], n[1]).map(function(e) {
            var t = e[0],
              n = e[1],
              r = e[2];
            return tr.changed(t, n, r)
          }).reduce(Cn, [])
        }
      }, t.prototype.dynamic = function() {
        var e = this._changedParams();
        return !!e && e.map(function(e) {
          return e.dynamic
        }).reduce(Nn, !1)
      }, t.prototype.ignored = function() {
        return !!this._ignoredReason()
      }, t.prototype._ignoredReason = function() {
        var e = this.router.globals.transition,
          t = this._options.reloadState,
          n = function(e, n) {
            if (e.length !== n.length) return !1;
            var r = rr.matching(e, n);
            return e.length === r.filter(function(e) {
              return !t || !e.state.includes[t.name]
            }).length
          },
          r = this.treeChanges(),
          i = e && e.treeChanges();
        return i && n(i.to, r.to) && n(i.exiting, r.exiting) ? "SameAsPending" : 0 === r.exiting.length && 0 === r.entering.length && n(r.from, r.to) ? "SameAsCurrent" : void 0
      }, t.prototype.run = function() {
        var t = this,
          n = Kn.runAllHooks,
          r = function(e) {
            return t._hookBuilder.buildHooksForPhase(e)
          },
          i = function() {
            Vn.traceSuccess(t.$to(), t), t.success = !0, t._deferred.resolve(t.to()), n(r(e.TransitionHookPhase.SUCCESS))
          },
          s = function(i) {
            Vn.traceError(i, t), t.success = !1, t._deferred.reject(i), t._error = i, n(r(e.TransitionHookPhase.ERROR))
          },
          o = function() {
            var t = r(e.TransitionHookPhase.RUN),
              n = function() {
                return un.$q.when(void 0)
              };
            return Kn.invokeHooks(t, n)
          },
          u = function() {
            var e = t.router.globals;
            return e.lastStartedTransitionId = t.$id, e.transition = t, e.transitionHistory.enqueue(t), Vn.traceTransitionStart(t), un.$q.when(void 0)
          },
          a = r(e.TransitionHookPhase.BEFORE);
        return Kn.invokeHooks(a, u).then(o).then(i, s), this.promise
      }, t.prototype.valid = function() {
        return !this.error() || void 0 !== this.success
      }, t.prototype.abort = function() {
        Vt(this.success) && (this._aborted = !0)
      }, t.prototype.error = function() {
        var e = this.$to();
        return e.self.abstract ? "Cannot transition to abstract state '" + e.name + "'" : tr.validates(e.parameters(), this.params()) ? !1 === this.success ? this._error : void 0 : "Param values not valid for state '" + e.name + "'"
      }, t.prototype.toString = function() {
        var e = this.from(),
          t = this.to(),
          n = function(e) {
            return null !== e["#"] && void 0 !== e["#"] ? e : b(e, ["#"])
          };
        return "Transition#" + this.$id + "( '" + (Zt(e) ? e.name : e) + "'" + cn(n(this._treeChanges.from.map(Dt("paramValues")).reduce(En, {}))) + " -> " + (this.valid() ? "" : "(X) ") + "'" + (Zt(t) ? t.name : t) + "'" + cn(n(this.params())) + " )"
      }, t
    }();
  dr.diToken = dr;
  var vr = null,
    mr = function(e) {
      var t = qn.isRejectionPromise;
      return (vr = vr || a([
        [Bt($t), Rt("undefined")],
        [Jt, Rt("null")],
        [sn, Rt("[Promise]")],
        [t, function(e) {
          return e._transitionRejection.toString()
        }],
        [It(qn), u("toString")],
        [It(dr), u("toString")],
        [It(sr), u("toString")],
        [f, $],
        [Rt(!0), l]
      ]))(e)
    },
    gr = function(e) {
      return function(t) {
        if (!t) return ["", ""];
        var n = t.indexOf(e);
        return -1 === n ? [t, ""] : [t.substr(0, n), t.substr(n + 1)]
      }
    },
    yr = function() {
      function e() {
        this.enqueue = !0, this.typeQueue = [], this.defaultTypes = y(e.prototype, ["hash", "string", "query", "path", "int", "bool", "date", "json", "any"]);
        var t = function(e, t) {
          return new Yn(dn({
            name: t
          }, e))
        };
        this.types = mn(x(this.defaultTypes, t), {})
      }
      return e.prototype.dispose = function() {
        this.types = {}
      }, e.prototype.type = function(e, t, n) {
        if (!$t(t)) return this.types[e];
        if (this.types.hasOwnProperty(e)) throw new Error("A type named '" + e + "' has already been defined.");
        return this.types[e] = new Yn(dn({
          name: e
        }, t)), n && (this.typeQueue.push({
          name: e,
          def: n
        }), this.enqueue || this._flushTypeQueue()), this
      }, e.prototype._flushTypeQueue = function() {
        for (; this.typeQueue.length;) {
          var e = this.typeQueue.shift();
          if (e.pattern) throw new Error("You cannot override a type's .pattern at runtime.");
          dn(this.types[e.name], un.$injector.invoke(e.def))
        }
      }, e
    }();
  ! function() {
    var e = function(e) {
      var t = function(e) {
          return null != e ? e.toString() : e
        },
        n = {
          encode: t,
          decode: t,
          is: It(String),
          pattern: /.*/,
          equals: function(e, t) {
            return e == t
          }
        };
      return dn({}, n, e)
    };
    dn(yr.prototype, {
      string: e({}),
      path: e({
        pattern: /[^\/]*/
      }),
      query: e({}),
      hash: e({
        inherit: !1
      }),
      "int": e({
        decode: function(e) {
          return parseInt(e, 10)
        },
        is: function(e) {
          return !Kt(e) && this.decode(e.toString()) === e
        },
        pattern: /-?\d+/
      }),
      bool: e({
        encode: function(e) {
          return e && 1 || 0
        },
        decode: function(e) {
          return 0 !== parseInt(e, 10)
        },
        is: It(Boolean),
        pattern: /0|1/
      }),
      date: e({
        encode: function(e) {
          return this.is(e) ? [e.getFullYear(), ("0" + (e.getMonth() + 1)).slice(-2), ("0" + e.getDate()).slice(-2)].join("-") : void 0
        },
        decode: function(e) {
          if (this.is(e)) return e;
          var t = this.capture.exec(e);
          return t ? new Date(t[1], t[2] - 1, t[3]) : void 0
        },
        is: function(e) {
          return e instanceof Date && !isNaN(e.valueOf())
        },
        equals: function(e, t) {
          return ["getFullYear", "getMonth", "getDate"].reduce(function(n, r) {
            return n && e[r]() === t[r]()
          }, !0)
        },
        pattern: /[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,
        capture: /([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/
      }),
      json: e({
        encode: cn,
        decode: ln,
        is: It(Object),
        equals: vn,
        pattern: /[^\/]*/
      }),
      any: e({
        encode: l,
        decode: l,
        is: function() {
          return !0
        },
        equals: vn
      })
    })
  }();
  var br = function() {
      function e(e) {
        void 0 === e && (e = {}), dn(this, e)
      }
      return e.prototype.$inherit = function(e, t, n) {
        var r, i = g(t, n),
          s = {},
          o = [];
        for (var u in i)
          if (i[u] && i[u].params && (r = Object.keys(i[u].params), r.length))
            for (var a in r) o.indexOf(r[a]) >= 0 || (o.push(r[a]), s[r[a]] = this[r[a]]);
        return dn({}, s, e)
      }, e
    }(),
    wr = function(e) {
      if (!Yt(e)) return !1;
      var t = "^" === e.charAt(0);
      return {
        val: t ? e.substring(1) : e,
        root: t
      }
    },
    Er = function(e, t) {
      return function(n) {
        var r = n;
        r && r.url && r.name && r.name.match(/\.\*\*$/) && (r.url += "{remainder:any}");
        var i = wr(r.url),
          s = n.parent,
          o = i ? e.compile(i.val, {
            params: n.params || {},
            paramMap: function(e, t) {
              return !1 === r.reloadOnSearch && t && (e = dn(e || {}, {
                dynamic: !0
              })), e
            }
          }) : r.url;
        if (!o) return null;
        if (!e.isMatcher(o)) throw new Error("Invalid url '" + o + "' in state '" + n + "'");
        return i && i.root ? o : (s && s.navigable || t()).url.append(o)
      }
    },
    Sr = function(e) {
      return function(t) {
        return !e(t) && t.url ? t : t.parent ? t.parent.navigable : null
      }
    },
    xr = function(e) {
      return function(t) {
        var n = function(t, n) {
            return e.fromConfig(n, null, t)
          },
          r = t.url && t.url.parameters({
            inherit: !1
          }) || [],
          i = xn(Sn(b(t.params || {}, r.map(Dt("id"))), n));
        return r.concat(i).map(function(e) {
          return [e.id, e]
        }).reduce(k, {})
      }
    },
    Tr = function() {
      function e(e, t) {
        function n(t) {
          return s(t) ? null : e.find(r.parentName(t)) || i()
        }
        this.matcher = e;
        var r = this,
          i = function() {
            return e.find("")
          },
          s = function(e) {
            return "" === e.name
          };
        this.builders = {
          name: [Y],
          self: [Z],
          parent: [n],
          data: [et],
          url: [Er(t, i)],
          navigable: [Sr(s)],
          params: [xr(t.paramFactory)],
          views: [],
          path: [tt],
          includes: [nt],
          resolvables: [rt]
        }
      }
      return e.prototype.builder = function(e, t) {
        var n = this.builders,
          r = n[e] || [];
        return Yt(e) && !$t(t) ? r.length > 1 ? r : r[0] : Yt(e) && Qt(t) ? (n[e] = r, n[e].push(t), function() {
          return n[e].splice(n[e].indexOf(t, 1)) && null
        }) : void 0
      }, e.prototype.build = function(e) {
        var t = this,
          n = t.matcher,
          r = t.builders,
          i = this.parentName(e);
        if (i && !n.find(i, void 0, !1)) return null;
        for (var s in r)
          if (r.hasOwnProperty(s)) {
            var o = r[s].reduce(function(e, t) {
              return function(n) {
                return t(n, e)
              }
            }, c);
            e[s] = o(e)
          }
        return e
      }, e.prototype.parentName = function(e) {
        var t = e.name || "",
          n = t.split(".");
        if (n.length > 1) {
          if (e.parent) throw new Error("States that specify the 'parent:' property should not have a '.' in their name (" + t + ")");
          return "**" === n.pop() && n.pop(), n.join(".")
        }
        return e.parent ? Yt(e.parent) ? e.parent : e.parent.name : ""
      }, e.prototype.name = function(e) {
        var t = e.name;
        if (-1 !== t.indexOf(".") || !e.parent) return t;
        var n = Yt(e.parent) ? e.parent : e.parent.name;
        return n ? n + "." + t : t
      }, e
    }(),
    Nr = function() {
      function e(e) {
        this._states = e
      }
      return e.prototype.isRelative = function(e) {
        return e = e || "", 0 === e.indexOf(".") || 0 === e.indexOf("^")
      }, e.prototype.find = function(e, t, n) {
        if (void 0 === n && (n = !0), e || "" === e) {
          var r = Yt(e),
            i = r ? e : e.name;
          this.isRelative(i) && (i = this.resolvePath(i, t));
          var s = this._states[i];
          if (s && (r || !(r || s !== e && s.self !== e))) return s;
          if (r && n) {
            var o = xn(this._states),
              u = o.filter(function(e) {
                return e.__stateObjectCache.nameGlob && e.__stateObjectCache.nameGlob.matches(i)
              });
            return u.length > 1 && console.log("stateMatcher.find: Found multiple matches for " + i + " using glob: ", u.map(function(e) {
              return e.name
            })), u[0]
          }
        }
      }, e.prototype.resolvePath = function(e, t) {
        if (!t) throw new Error("No reference point given for path '" + e + "'");
        for (var n = this.find(t), r = e.split("."), i = 0, s = r.length, o = n; i < s; i++)
          if ("" !== r[i] || 0 !== i) {
            if ("^" !== r[i]) break;
            if (!o.parent) throw new Error("Path '" + e + "' not valid for state '" + n.name + "'");
            o = o.parent
          } else o = n;
        var u = r.slice(i).join(".");
        return o.name + (o.name && u ? "." : "") + u
      }, e
    }(),
    Cr = function() {
      function e(e, t, n, r, i) {
        this.$registry = e, this.$urlRouter = t, this.states = n, this.builder = r, this.listeners = i, this.queue = [], this.matcher = e.matcher
      }
      return e.prototype.dispose = function() {
        this.queue = []
      }, e.prototype.register = function(e) {
        var t = this.queue,
          n = zt.create(e),
          r = n.name;
        if (!Yt(r)) throw new Error("State must have a valid name");
        if (this.states.hasOwnProperty(r) || gn(t.map(Dt("name")), r)) throw new Error("State '" + r + "' is already defined");
        return t.push(n), this.flush(), n
      }, e.prototype.flush = function() {
        for (var e = this, t = this, n = t.queue, r = t.states, i = t.builder, s = [], o = [], u = {}, a = function(t) {
            return e.states.hasOwnProperty(t) && e.states[t]
          }; n.length > 0;) {
          var f = n.shift(),
            l = f.name,
            c = i.build(f),
            h = o.indexOf(f);
          if (c) {
            var p = a(l);
            if (p && p.name === l) throw new Error("State '" + l + "' is already defined");
            var d = a(l + ".**");
            d && this.$registry.deregister(d), r[l] = f, this.attachRoute(f), h >= 0 && o.splice(h, 1), s.push(f)
          } else {
            var v = u[l];
            if (u[l] = n.length, h >= 0 && v === n.length) return n.push(f), r;
            h < 0 && o.push(f), n.push(f)
          }
        }
        return s.length && this.listeners.forEach(function(e) {
          return e("registered", s.map(function(e) {
            return e.self
          }))
        }), r
      }, e.prototype.attachRoute = function(e) {
        !e.abstract && e.url && this.$urlRouter.rule(this.$urlRouter.urlRuleFactory.create(e))
      }, e
    }(),
    kr = function() {
      function e(e) {
        this._router = e, this.states = {}, this.listeners = [], this.matcher = new Nr(this.states), this.builder = new Tr(this.matcher, e.urlMatcherFactory), this.stateQueue = new Cr(this, e.urlRouter, this.states, this.builder, this.listeners), this._registerRoot()
      }
      return e.prototype._registerRoot = function() {
        var e = {
          name: "",
          url: "^",
          views: null,
          params: {
            "#": {
              value: null,
              type: "hash",
              dynamic: !0
            }
          },
          "abstract": !0
        };
        (this._root = this.stateQueue.register(e)).navigable = null
      }, e.prototype.dispose = function() {
        var e = this;
        this.stateQueue.dispose(), this.listeners = [], this.get().forEach(function(t) {
          return e.get(t) && e.deregister(t)
        })
      }, e.prototype.onStatesChanged = function(e) {
        return this.listeners.push(e),
          function() {
            yn(this.listeners)(e)
          }.bind(this)
      }, e.prototype.root = function() {
        return this._root
      }, e.prototype.register = function(e) {
        return this.stateQueue.register(e)
      }, e.prototype._deregisterTree = function(e) {
        var t = this,
          n = this.get().map(function(e) {
            return e.$$state()
          }),
          r = function(e) {
            var t = n.filter(function(t) {
              return -1 !== e.indexOf(t.parent)
            });
            return 0 === t.length ? t : t.concat(r(t))
          },
          i = r([e]),
          s = [e].concat(i).reverse();
        return s.forEach(function(e) {
          var n = t._router.urlRouter;
          n.rules().filter(Pt("state", e)).forEach(n.removeRule.bind(n)), delete t.states[e.name]
        }), s
      }, e.prototype.deregister = function(e) {
        var t = this.get(e);
        if (!t) throw new Error("Can't deregister state; not found: " + e);
        var n = this._deregisterTree(t.$$state());
        return this.listeners.forEach(function(e) {
          return e("deregistered", n.map(function(e) {
            return e.self
          }))
        }), n
      }, e.prototype.get = function(e, t) {
        var n = this;
        if (0 === arguments.length) return Object.keys(this.states).map(function(e) {
          return n.states[e].self
        });
        var r = this.matcher.find(e, t);
        return r && r.self || null
      }, e.prototype.decorator = function(e, t) {
        return this.builder.builder(e, t)
      }, e
    }(),
    Lr = function(e, t, n) {
      return e[t] = e[t] || n()
    },
    Ar = Q("/"),
    Or = function() {
      function t(e, n, r, i) {
        var s = this;
        this.config = i, this._cache = {
          path: [this]
        }, this._children = [], this._params = [], this._segments = [], this._compiled = [], this.pattern = e, this.config = m(this.config, {
          params: {},
          strict: !0,
          caseInsensitive: !1,
          paramMap: l
        });
        for (var o, u, a, f = /([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g, c = /([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g, h = 0, p = [], d = function(n) {
            if (!t.nameValidator.test(n)) throw new Error("Invalid parameter name '" + n + "' in pattern '" + e + "'");
            if (S(s._params, Pt("id", n))) throw new Error("Duplicate parameter name '" + n + "' in pattern '" + e + "'")
          }, v = function(t, r) {
            var i = t[2] || t[3],
              o = r ? t[4] : t[4] || ("*" === t[1] ? ".*" : null);
            return {
              id: i,
              regexp: o,
              cfg: s.config.params[i],
              segment: e.substring(h, t.index),
              type: o ? n.type(o) || function(e) {
                return mn(n.type(r ? "query" : "path"), {
                  pattern: new RegExp(e, s.config.caseInsensitive ? "i" : void 0)
                })
              }(o) : null
            }
          };
          (o = f.exec(e)) && (u = v(o, !1), !(u.segment.indexOf("?") >= 0));) d(u.id), this._params.push(r.fromPath(u.id, u.type, this.config.paramMap(u.cfg, !1))), this._segments.push(u.segment), p.push([u.segment, L(this._params)]), h = f.lastIndex;
        a = e.substring(h);
        var g = a.indexOf("?");
        if (g >= 0) {
          var y = a.substring(g);
          if (a = a.substring(0, g), y.length > 0)
            for (h = 0; o = c.exec(y);) u = v(o, !0), d(u.id), this._params.push(r.fromSearch(u.id, u.type, this.config.paramMap(u.cfg, !0))), h = f.lastIndex
        }
        this._segments.push(a), this._compiled = p.map(function(e) {
          return it.apply(null, e)
        }).concat(it(a))
      }
      return t.prototype.append = function(e) {
        return this._children.push(e), e._cache = {
          path: this._cache.path.concat(e),
          parent: this,
          pattern: null
        }, e
      }, t.prototype.isRoot = function() {
        return this._cache.path[0] === this
      }, t.prototype.toString = function() {
        return this.pattern
      }, t.prototype.exec = function(e, t, n, r) {
        var i = this;
        void 0 === t && (t = {}), void 0 === r && (r = {});
        var s = Lr(this._cache, "pattern", function() {
          return new RegExp(["^", An(i._cache.path.map(Dt("_compiled"))).join(""), !1 === i.config.strict ? "/?" : "", "$"].join(""), i.config.caseInsensitive ? "i" : void 0)
        }).exec(e);
        if (!s) return null;
        var o = this.parameters(),
          u = o.filter(function(e) {
            return !e.isSearch()
          }),
          a = o.filter(function(e) {
            return e.isSearch()
          }),
          f = this._cache.path.map(function(e) {
            return e._segments.length - 1
          }).reduce(function(e, t) {
            return e + t
          }),
          l = {};
        if (f !== s.length - 1) throw new Error("Unbalanced capture group in route '" + this.pattern + "'");
        for (var c = 0; c < f; c++) {
          for (var h = u[c], p = s[c + 1], d = 0; d < h.replace.length; d++) h.replace[d].from === p && (p = h.replace[d].to);
          p && !0 === h.array && (p = function(e) {
            var t = function(e) {
                return e.split("").reverse().join("")
              },
              n = function(e) {
                return e.replace(/\\-/g, "-")
              };
            return x(x(t(e).split(/-(?!\\)/), t), n).reverse()
          }(p)), $t(p) && (p = h.type.decode(p)), l[h.id] = h.value(p)
        }
        return a.forEach(function(e) {
          for (var n = t[e.id], r = 0; r < e.replace.length; r++) e.replace[r].from === n && (n = e.replace[r].to);
          $t(n) && (n = e.type.decode(n)), l[e.id] = e.value(n)
        }), n && (l["#"] = n), l
      }, t.prototype.parameters = function(e) {
        return void 0 === e && (e = {}), !1 === e.inherit ? this._params : An(this._cache.path.map(function(e) {
          return e._params
        }))
      }, t.prototype.parameter = function(e, t) {
        var n = this;
        void 0 === t && (t = {});
        var r = this._cache.parent;
        return function() {
          for (var t = 0, r = n._params; t < r.length; t++) {
            var i = r[t];
            if (i.id === e) return i
          }
        }() || !1 !== t.inherit && r && r.parameter(e, t) || null
      }, t.prototype.validates = function(e) {
        var t = function(e, t) {
          return !e || e.validates(t)
        };
        return e = e || {}, this.parameters().filter(function(t) {
          return e.hasOwnProperty(t.id)
        }).map(function(n) {
          return t(n, e[n.id])
        }).reduce(Tn, !0)
      }, t.prototype.format = function(e) {
        function n(t) {
          var n = t.value(e[t.id]),
            r = t.validates(n),
            i = t.isDefaultValue(n);
          return {
            param: t,
            value: n,
            isValid: r,
            isDefaultValue: i,
            squash: !!i && t.squash,
            encoded: t.type.encode(n)
          }
        }
        void 0 === e && (e = {});
        var r = this._cache.path,
          i = r.map(t.pathSegmentsAndParams).reduce(Cn, []).map(function(e) {
            return Yt(e) ? e : n(e)
          }),
          s = r.map(t.queryParams).reduce(Cn, []).map(n),
          o = function(e) {
            return !1 === e.isValid
          };
        if (i.concat(s).filter(o).length) return null;
        var u = i.reduce(function(e, n) {
            if (Yt(n)) return e + n;
            var r = n.squash,
              i = n.encoded,
              s = n.param;
            return !0 === r ? e.match(/\/$/) ? e.slice(0, -1) : e : Yt(r) ? e + r : !1 !== r ? e : null == i ? e : en(i) ? e + x(i, t.encodeDashes).join("-") : s.raw ? e + i : e + encodeURIComponent(i)
          }, ""),
          a = s.map(function(e) {
            var t = e.param,
              n = e.squash,
              r = e.encoded,
              i = e.isDefaultValue;
            if (!(null == r || i && !1 !== n) && (en(r) || (r = [r]), 0 !== r.length)) return t.raw || (r = x(r, encodeURIComponent)), r.map(function(e) {
              return t.id + "=" + e
            })
          }).filter(l).reduce(Cn, []).join("&");
        return u + (a ? "?" + a : "") + (e["#"] ? "#" + e["#"] : "")
      }, t.encodeDashes = function(e) {
        return encodeURIComponent(e).replace(/-/g, function(e) {
          return "%5C%" + e.charCodeAt(0).toString(16).toUpperCase()
        })
      }, t.pathSegmentsAndParams = function(t) {
        return C(t._segments, t._params.filter(function(t) {
          return t.location === e.DefType.PATH
        }).concat(void 0)).reduce(Cn, []).filter(function(e) {
          return "" !== e && $t(e)
        })
      }, t.queryParams = function(t) {
        return t._params.filter(function(t) {
          return t.location === e.DefType.SEARCH
        })
      }, t.compare = function(e, n) {
        var r, i, s = function(e) {
            return e._cache.segments = e._cache.segments || e._cache.path.map(t.pathSegmentsAndParams).reduce(Cn, []).reduce(G, []).map(function(e) {
              return Yt(e) ? Ar(e) : e
            }).reduce(Cn, [])
          },
          o = function(e) {
            return e._cache.weights = e._cache.weights || s(e).map(function(e) {
              return "/" === e ? 1 : Yt(e) ? 2 : e instanceof tr ? 3 : void 0
            })
          },
          u = C(o(e), o(n));
        for (i = 0; i < u.length; i++)
          if (0 !== (r = u[i][0] - u[i][1])) return r;
        return 0
      }, t
    }();
  Or.nameValidator = /^\w+([-.]+\w+)*(?:\[\])?$/;
  var Mr = function() {
      function t() {
        var t = this;
        this.paramTypes = new yr, this._isCaseInsensitive = !1, this._isStrictMode = !0, this._defaultSquashPolicy = !1, this._getConfig = function(e) {
          return dn({
            strict: t._isStrictMode,
            caseInsensitive: t._isCaseInsensitive
          }, e)
        }, this.paramFactory = {
          fromConfig: function(n, r, i) {
            return new tr(n, r, i, e.DefType.CONFIG, t)
          },
          fromPath: function(n, r, i) {
            return new tr(n, r, i, e.DefType.PATH, t)
          },
          fromSearch: function(n, r, i) {
            return new tr(n, r, i, e.DefType.SEARCH, t)
          }
        }, dn(this, {
          UrlMatcher: Or,
          Param: tr
        })
      }
      return t.prototype.caseInsensitive = function(e) {
        return this._isCaseInsensitive = $t(e) ? e : this._isCaseInsensitive
      }, t.prototype.strictMode = function(e) {
        return this._isStrictMode = $t(e) ? e : this._isStrictMode
      }, t.prototype.defaultSquashPolicy = function(e) {
        if ($t(e) && !0 !== e && !1 !== e && !Yt(e)) throw new Error("Invalid squash policy: " + e + ". Valid policies: false, true, arbitrary-string");
        return this._defaultSquashPolicy = $t(e) ? e : this._defaultSquashPolicy
      }, t.prototype.compile = function(e, t) {
        return new Or(e, this.paramTypes, this.paramFactory, this._getConfig(t))
      }, t.prototype.isMatcher = function(e) {
        if (!Zt(e)) return !1;
        var t = !0;
        return pn(Or.prototype, function(n, r) {
          Qt(n) && (t = t && $t(e[r]) && Qt(e[r]))
        }), t
      }, t.prototype.type = function(e, t, n) {
        var r = this.paramTypes.type(e, t, n);
        return $t(t) ? this : r
      }, t.prototype.$get = function() {
        return this.paramTypes.enqueue = !1, this.paramTypes._flushTypeQueue(), this
      }, t.prototype.dispose = function() {
        this.paramTypes.dispose()
      }, t
    }(),
    _r = function() {
      function e(e) {
        this.router = e
      }
      return e.prototype.compile = function(e) {
        return this.router.urlMatcherFactory.compile(e)
      }, e.prototype.create = function(e, t) {
        var n = this,
          r = a([
            [Yt, function(e) {
              return r(n.compile(e))
            }],
            [It(Or), function(e) {
              return n.fromUrlMatcher(e, t)
            }],
            [rn, function(e) {
              return n.fromState(e, n.router)
            }],
            [It(RegExp), function(e) {
              return n.fromRegExp(e, t)
            }],
            [Qt, function(e) {
              return new Pr(e, t)
            }]
          ]),
          i = r(e);
        if (!i) throw new Error("invalid 'what' in when()");
        return i
      }, e.prototype.fromUrlMatcher = function(e, t) {
        function n(t) {
          var n = e.exec(t.path, t.search, t.hash);
          return e.validates(n) && n
        }

        function r(t) {
          var n = e.parameters().filter(function(e) {
            return e.isOptional
          });
          return n.length ? n.filter(function(e) {
            return t[e.id]
          }).length / n.length : 1e-6
        }
        var i = t;
        Yt(t) && (t = this.router.urlMatcherFactory.compile(t)), It(Or)(t) && (i = function(e) {
          return t.format(e)
        });
        var s = {
          urlMatcher: e,
          matchPriority: r,
          type: "URLMATCHER"
        };
        return dn(new Pr(n, i), s)
      }, e.prototype.fromState = function(e, t) {
        var n = function(n) {
            var r = t.stateService,
              i = t.globals;
            r.href(e, n) !== r.href(i.current, i.params) && r.transitionTo(e, n, {
              inherit: !0,
              source: "url"
            })
          },
          r = {
            state: e,
            type: "STATE"
          };
        return dn(this.fromUrlMatcher(e.url, n), r)
      }, e.prototype.fromRegExp = function(e, t) {
        if (e.global || e.sticky) throw new Error("Rule RegExp must not be global or sticky");
        var n = function(e) {
            return t.replace(/\$(\$|\d{1,2})/, function(t, n) {
              return e["$" === n ? 0 : Number(n)]
            })
          },
          r = Yt(t) ? n : t,
          i = function(t) {
            return e.exec(t.path)
          },
          s = {
            regexp: e,
            type: "REGEXP"
          };
        return dn(new Pr(i, r), s)
      }, e
    }();
  _r.isUrlRule = function(e) {
    return e && ["type", "match", "handler"].every(function(t) {
      return $t(e[t])
    })
  };
  var Dr, Pr = function() {
      function e(e, t) {
        var n = this;
        this.match = e, this.type = "RAW", this.matchPriority = function(e) {
          return 0 - n.$id
        }, this.handler = t || l
      }
      return e
    }(),
    Hr = Dt("urlMatcher");
  Dr = Hn(Pn(i(Dt("priority"), function(e) {
    return -e
  })), Pn(i(Dt("type"), function(e) {
    return {
      STATE: 4,
      URLMATCHER: 4,
      REGEXP: 3,
      RAW: 2,
      OTHER: 1
    }[e]
  })), function(e, t) {
    return Hr(e) && Hr(t) ? Or.compare(Hr(e), Hr(t)) : 0
  }, Pn(Dt("$id"), gn(["REGEXP", "RAW", "OTHER"])));
  var Br = function() {
      function e(t) {
        this._sortFn = Dr, this._rules = [], this.interceptDeferred = !1, this._id = 0, this._sorted = !1, this._router = t, this.urlRuleFactory = new _r(t), h(Rt(e.prototype), this, Rt(this))
      }
      return e.prototype.dispose = function() {
        this.listen(!1), this._rules = [], delete this._otherwiseFn
      }, e.prototype.sort = function(e) {
        this._rules.sort(this._sortFn = e || this._sortFn), this._sorted = !0
      }, e.prototype.ensureSorted = function() {
        this._sorted || this.sort()
      }, e.prototype.match = function(e) {
        var t = this;
        this.ensureSorted(), e = dn({
          path: "",
          search: {},
          hash: ""
        }, e);
        var n = this.rules();
        this._otherwiseFn && n.push(this._otherwiseFn);
        for (var r, i = 0; i < n.length && (!r || 0 === this._sortFn(n[i], r.rule)); i++) {
          var s = function(n) {
            var r = n.match(e, t._router);
            return r && {
              match: r,
              rule: n,
              weight: n.matchPriority(r)
            }
          }(n[i]);
          r = !r || s && s.weight > r.weight ? s : r
        }
        return r
      }, e.prototype.sync = function(e) {
        if (!e || !e.defaultPrevented) {
          var t = this._router,
            n = t.urlService,
            r = t.stateService,
            i = {
              path: n.path(),
              search: n.search(),
              hash: n.hash()
            },
            s = this.match(i);
          a([
            [Yt, function(e) {
              return n.url(e, !0)
            }],
            [$n.isDef, function(e) {
              return r.go(e.state, e.params, e.options)
            }],
            [It($n), function(e) {
              return r.go(e.state(), e.params(), e.options())
            }]
          ])(s && s.rule.handler(s.match, i, t))
        }
      }, e.prototype.listen = function(e) {
        var t = this;
        if (!1 !== e) return this._stopFn = this._stopFn || this._router.urlService.onChange(function(e) {
          return t.sync(e)
        });
        this._stopFn && this._stopFn(), delete this._stopFn
      }, e.prototype.update = function(e) {
        var t = this._router.locationService;
        if (e) return void(this.location = t.path());
        t.path() !== this.location && t.url(this.location, !0)
      }, e.prototype.push = function(e, t, n) {
        var r = n && !!n.replace;
        this._router.urlService.url(e.format(t || {}), r)
      }, e.prototype.href = function(e, t, n) {
        var r = e.format(t);
        if (null == r) return null;
        n = n || {
          absolute: !1
        };
        var i = this._router.urlService.config,
          s = i.html5Mode();
        if (s || null === r || (r = "#" + i.hashPrefix() + r), r = st(r, s, n.absolute, i.baseHref()), !n.absolute || !r) return r;
        var o = !s && r ? "/" : "",
          u = i.port();
        return u = 80 === u || 443 === u ? "" : ":" + u, [i.protocol(), "://", i.host(), u, o, r].join("")
      }, e.prototype.rule = function(e) {
        var t = this;
        if (!_r.isUrlRule(e)) throw new Error("invalid rule");
        return e.$id = this._id++, e.priority = e.priority || 0, this._rules.push(e), this._sorted = !1,
          function() {
            return t.removeRule(e)
          }
      }, e.prototype.removeRule = function(e) {
        yn(this._rules, e)
      }, e.prototype.rules = function() {
        return this.ensureSorted(), this._rules.slice()
      }, e.prototype.otherwise = function(e) {
        var t = ot(e);
        this._otherwiseFn = this.urlRuleFactory.create(Rt(!0), t), this._sorted = !1
      }, e.prototype.initial = function(e) {
        var t = ot(e),
          n = function(e, t) {
            return 0 === t.globals.transitionHistory.size() && !!/^\/?$/.exec(e.path)
          };
        this.rule(this.urlRuleFactory.create(n, t))
      }, e.prototype.when = function(e, t, n) {
        var r = this.urlRuleFactory.create(e, t);
        return $t(n && n.priority) && (r.priority = n.priority), this.rule(r), r
      }, e.prototype.deferIntercept = function(e) {
        void 0 === e && (e = !0), this.interceptDeferred = e
      }, e
    }(),
    jr = function() {
      function e() {
        var e = this;
        this._uiViews = [], this._viewConfigs = [], this._viewConfigFactories = {}, this._pluginapi = {
          _rootViewContext: this._rootViewContext.bind(this),
          _viewConfigFactory: this._viewConfigFactory.bind(this),
          _registeredUIViews: function() {
            return e._uiViews
          },
          _activeViewConfigs: function() {
            return e._viewConfigs
          }
        }
      }
      return e.prototype._rootViewContext = function(e) {
        return this._rootContext = e || this._rootContext
      }, e.prototype._viewConfigFactory = function(e, t) {
        this._viewConfigFactories[e] = t
      }, e.prototype.createViewConfig = function(e, t) {
        var n = this._viewConfigFactories[t.$type];
        if (!n) throw new Error("ViewService: No view config factory registered for type " + t.$type);
        var r = n(e, t);
        return en(r) ? r : [r]
      }, e.prototype.deactivateViewConfig = function(e) {
        Vn.traceViewServiceEvent("<- Removing", e), yn(this._viewConfigs, e)
      }, e.prototype.activateViewConfig = function(e) {
        Vn.traceViewServiceEvent("-> Registering", e), this._viewConfigs.push(e)
      }, e.prototype.sync = function() {
        function t(e) {
          var t = function(e) {
            return e && e.parent ? t(e.parent) + 1 : 1
          };
          return 1e4 * e.fqn.split(".").length + t(e.creationContext)
        }

        function r(e) {
          for (var t = e.viewDecl.$context, n = 0; ++n && t.parent;) t = t.parent;
          return n
        }
        var i = this,
          s = this._uiViews.map(function(e) {
            return [e.fqn, e]
          }).reduce(k, {}),
          o = n(function(e, t, n, r) {
            return t * (e(n) - e(r))
          }),
          u = function(t) {
            var n = i._viewConfigs.filter(e.matches(s, t));
            return n.length > 1 && n.sort(o(r, -1)), [t, n[0]]
          },
          a = function(e) {
            var t = e[0],
              n = e[1]; - 1 !== i._uiViews.indexOf(t) && t.configUpdated(n)
          };
        this._uiViews.sort(o(t, 1)).map(u).forEach(a)
      }, e.prototype.registerUIView = function(e) {
        Vn.traceViewServiceUIViewEvent("-> Registering", e);
        var t = this._uiViews,
          n = function(t) {
            return t.fqn === e.fqn
          };
        return t.filter(n).length && Vn.traceViewServiceUIViewEvent("!!!! duplicate uiView named:", e), t.push(e), this.sync(),
          function() {
            if (-1 === t.indexOf(e)) return void Vn.traceViewServiceUIViewEvent("Tried removing non-registered uiView", e);
            Vn.traceViewServiceUIViewEvent("<- Deregistering", e), yn(t)(e)
          }
      }, e.prototype.available = function() {
        return this._uiViews.map(Dt("fqn"))
      }, e.prototype.active = function() {
        return this._uiViews.filter(Dt("$config")).map(Dt("name"))
      }, e.normalizeUIViewTarget = function(e, t) {
        void 0 === t && (t = "");
        var n = t.split("@"),
          r = n[0] || "$default",
          i = Yt(n[1]) ? n[1] : "^",
          s = /^(\^(?:\.\^)*)\.(.*$)/.exec(r);
        return (s && (i = s[1], r = s[2]), "!" === r.charAt(0) && (r = r.substr(1), i = ""), /^(\^(?:\.\^)*)$/.exec(i)) ? i = i.split(".").reduce(function(e, t) {
          return e.parent
        }, e).name : "." === i && (i = e.name), {
          uiViewName: r,
          uiViewContextAnchor: i
        }
      }, e
    }();
  jr.matches = function(e, t) {
    return function(n) {
      if (t.$type !== n.viewDecl.$type) return !1;
      var r = n.viewDecl,
        i = r.$uiViewName.split("."),
        s = t.fqn.split(".");
      if (!vn(i, s.slice(0 - i.length))) return !1;
      var o = 1 - i.length || void 0,
        u = s.slice(0, o).join("."),
        a = e[u].creationContext;
      return r.$uiViewContextAnchor === (a && a.name)
    }
  };
  var Fr = function() {
      function e() {
        this.params = new br, this.lastStartedTransitionId = -1, this.transitionHistory = new Fn([], 1), this.successfulTransitions = new Fn([], 1)
      }
      return e.prototype.dispose = function() {
        this.transitionHistory.clear(), this.successfulTransitions.clear(), this.transition = null
      }, e
    }(),
    Ir = function(e) {
      return e.reduce(function(e, t) {
        return e[t] = on(t), e
      }, {
        dispose: c
      })
    },
    qr = ["url", "path", "search", "hash", "onChange"],
    Rr = ["port", "protocol", "host", "baseHref", "html5Mode", "hashPrefix"],
    Ur = ["type", "caseInsensitive", "strictMode", "defaultSquashPolicy"],
    zr = ["sort", "when", "initial", "otherwise", "rules", "rule", "removeRule"],
    Wr = ["deferIntercept", "listen", "sync", "match"],
    Xr = function() {
      function e(e, t) {
        void 0 === t && (t = !0), this.router = e, this.rules = {}, this.config = {};
        var n = function() {
          return e.locationService
        };
        h(n, this, n, qr, t);
        var r = function() {
          return e.locationConfig
        };
        h(r, this.config, r, Rr, t);
        var i = function() {
          return e.urlMatcherFactory
        };
        h(i, this.config, i, Ur);
        var s = function() {
          return e.urlRouter
        };
        h(s, this.rules, s, zr), h(s, this, s, Wr)
      }
      return e.prototype.url = function(e, t, n) {}, e.prototype.path = function() {}, e.prototype.search = function() {}, e.prototype.hash = function() {}, e.prototype.onChange = function(e) {}, e.prototype.parts = function() {
        return {
          path: this.path(),
          search: this.search(),
          hash: this.hash()
        }
      }, e.prototype.dispose = function() {}, e.prototype.sync = function(e) {}, e.prototype.listen = function(e) {}, e.prototype.deferIntercept = function(e) {}, e.prototype.match = function(e) {}, e
    }();
  Xr.locationServiceStub = Ir(qr), Xr.locationConfigStub = Ir(Rr);
  var Vr = 0,
    $r = function() {
      function e(e, t) {
        void 0 === e && (e = Xr.locationServiceStub), void 0 === t && (t = Xr.locationConfigStub), this.locationService = e, this.locationConfig = t, this.$id = Vr++, this._disposed = !1, this._disposables = [], this.trace = Vn, this.viewService = new jr, this.transitionService = new Ei(this), this.globals = new Fr, this.urlMatcherFactory = new Mr, this.urlRouter = new Br(this), this.stateRegistry = new kr(this), this.stateService = new Si(this), this.urlService = new Xr(this), this._plugins = {}, this.viewService._pluginapi._rootViewContext(this.stateRegistry.root()), this.globals.$current = this.stateRegistry.root(), this.globals.current = this.globals.$current.self, this.disposable(this.globals), this.disposable(this.stateService), this.disposable(this.stateRegistry), this.disposable(this.transitionService), this.disposable(this.urlRouter), this.disposable(e), this.disposable(t)
      }
      return e.prototype.disposable = function(e) {
        this._disposables.push(e)
      }, e.prototype.dispose = function(e) {
        var t = this;
        if (e && Qt(e.dispose)) return void e.dispose(this);
        this._disposed = !0, this._disposables.slice().forEach(function(e) {
          try {
            "function" == typeof e.dispose && e.dispose(t), yn(t._disposables, e)
          } catch (e) {}
        })
      }, e.prototype.plugin = function(e, t) {
        void 0 === t && (t = {});
        var n = new e(this, t);
        if (!n.name) throw new Error("Required property `name` missing on plugin: " + n);
        return this._disposables.push(n), this._plugins[n.name] = n
      }, e.prototype.getPlugin = function(e) {
        return e ? this._plugins[e] : xn(this._plugins)
      }, e
    }(),
    Jr = function(e) {
      return e.onCreate({}, ut)
    },
    Kr = function(e) {
      function t(t) {
        if (t) return t instanceof $n ? t : Yt(t) ? r.target(t, e.params(), e.options()) : t.state || t.params ? r.target(t.state || e.to(), t.params || e.params(), e.options()) : void 0
      }
      var n = e.to().redirectTo;
      if (n) {
        var r = e.router.stateService;
        return Qt(n) ? un.$q.when(n(e)).then(t) : t(n)
      }
    },
    Qr = function(e) {
      return e.onStart({
        to: function(e) {
          return !!e.redirectTo
        }
      }, Kr)
    },
    Gr = at("onExit"),
    Yr = function(e) {
      return e.onExit({
        exiting: function(e) {
          return !!e.onExit
        }
      }, Gr)
    },
    Zr = at("onRetain"),
    ei = function(e) {
      return e.onRetain({
        retained: function(e) {
          return !!e.onRetain
        }
      }, Zr)
    },
    ti = at("onEnter"),
    ni = function(e) {
      return e.onEnter({
        entering: function(e) {
          return !!e.onEnter
        }
      }, ti)
    },
    ri = function(e) {
      return (new cr(e.treeChanges().to)).resolvePath("EAGER", e).then(c)
    },
    ii = function(e) {
      return e.onStart({}, ri, {
        priority: 1e3
      })
    },
    si = function(e, t) {
      return (new cr(e.treeChanges().to)).subContext(t.$$state()).resolvePath("LAZY", e).then(c)
    },
    oi = function(e) {
      return e.onEnter({
        entering: Rt(!0)
      }, si, {
        priority: 1e3
      })
    },
    ui = function(e) {
      var t = un.$q,
        n = e.views("entering");
      if (n.length) return t.all(n.map(function(e) {
        return t.when(e.load())
      })).then(c)
    },
    ai = function(e) {
      return e.onFinish({}, ui)
    },
    fi = function(e) {
      var t = e.views("entering"),
        n = e.views("exiting");
      if (t.length || n.length) {
        var r = e.router.viewService;
        n.forEach(function(e) {
          return r.deactivateViewConfig(e)
        }), t.forEach(function(e) {
          return r.activateViewConfig(e)
        }), r.sync()
      }
    },
    li = function(e) {
      return e.onSuccess({}, fi)
    },
    ci = function(e) {
      var t = e.router.globals,
        n = function() {
          t.successfulTransitions.enqueue(e), t.$current = e.$to(), t.current = t.$current.self, hn(e.params(), t.params)
        },
        r = function() {
          t.transition === e && (t.transition = null)
        };
      e.onSuccess({}, n, {
        priority: 1e4
      }), e.promise.then(r, r)
    },
    hi = function(e) {
      return e.onCreate({}, ci)
    },
    pi = function(e) {
      var t = e.options(),
        n = e.router.stateService,
        r = e.router.urlRouter;
      if ("url" !== t.source && t.location && n.$current.navigable) {
        var i = {
          replace: "replace" === t.location
        };
        r.push(n.$current.navigable.url, n.params, i)
      }
      r.update(!0)
    },
    di = function(e) {
      return e.onSuccess({}, pi, {
        priority: 9999
      })
    },
    vi = function(e) {
      function t() {
        if ("url" !== e.originalTransition().options().source) {
          var t = e.targetState();
          return n.stateService.target(t.identifier(), t.params(), t.options())
        }
        var r = n.urlService,
          i = r.match(r.parts()),
          s = i && i.rule;
        if (s && "STATE" === s.type) {
          var o = s.state,
            u = i.match;
          return n.stateService.target(o, u, e.options())
        }
        n.urlService.sync()
      }
      var n = e.router,
        r = e.entering().filter(function(e) {
          return !!e.$$state().lazyLoad
        }).map(function(t) {
          return ft(e, t)
        });
      return un.$q.all(r).then(t)
    },
    mi = function(e) {
      return e.onBefore({
        entering: function(e) {
          return !!e.lazyLoad
        }
      }, vi)
    },
    gi = function() {
      function e(e, t, n, r, i, s, o, u) {
        void 0 === i && (i = !1), void 0 === s && (s = Kn.HANDLE_RESULT), void 0 === o && (o = Kn.REJECT_ERROR), void 0 === u && (u = !1), this.name = e, this.hookPhase = t, this.hookOrder = n, this.criteriaMatchPath = r, this.reverseSort = i, this.getResultHandler = s, this.getErrorHandler = o, this.synchronous = u
      }
      return e
    }(),
    yi = function(e) {
      return e.onBefore({}, lt, {
        priority: -9999
      })
    },
    bi = function(e) {
      return e.onBefore({}, ct, {
        priority: -1e4
      })
    },
    wi = {
      location: !0,
      relative: null,
      inherit: !1,
      notify: !0,
      reload: !1,
      custom: {},
      current: function() {
        return null
      },
      source: "unknown"
    },
    Ei = function() {
      function t(e) {
        this._transitionCount = 0, this._eventTypes = [], this._registeredHooks = {}, this._criteriaPaths = {}, this._router = e, this.$view = e.viewService, this._deregisterHookFns = {}, this._pluginapi = h(Rt(this), {}, Rt(this), ["_definePathType", "_defineEvent", "_getPathTypes", "_getEvents", "getHooks"]), this._defineCorePaths(), this._defineCoreEvents(), this._registerCoreTransitionHooks()
      }
      return t.prototype.onCreate = function(e, t, n) {}, t.prototype.onBefore = function(e, t, n) {}, t.prototype.onStart = function(e, t, n) {}, t.prototype.onExit = function(e, t, n) {}, t.prototype.onRetain = function(e, t, n) {}, t.prototype.onEnter = function(e, t, n) {}, t.prototype.onFinish = function(e, t, n) {}, t.prototype.onSuccess = function(e, t, n) {}, t.prototype.onError = function(e, t, n) {}, t.prototype.dispose = function(e) {
        xn(this._registeredHooks).forEach(function(e) {
          return e.forEach(function(t) {
            t._deregistered = !0, yn(e, t)
          })
        })
      }, t.prototype.create = function(e, t) {
        return new dr(e, t, this._router)
      }, t.prototype._defineCoreEvents = function() {
        var t = e.TransitionHookPhase,
          n = Kn,
          r = this._criteriaPaths;
        this._defineEvent("onCreate", t.CREATE, 0, r.to, !1, n.LOG_REJECTED_RESULT, n.THROW_ERROR, !0), this._defineEvent("onBefore", t.BEFORE, 0, r.to), this._defineEvent("onStart", t.RUN, 0, r.to), this._defineEvent("onExit", t.RUN, 100, r.exiting, !0), this._defineEvent("onRetain", t.RUN, 200, r.retained), this._defineEvent("onEnter", t.RUN, 300, r.entering), this._defineEvent("onFinish", t.RUN, 400, r.to), this._defineEvent("onSuccess", t.SUCCESS, 0, r.to, !1, n.LOG_REJECTED_RESULT, n.LOG_ERROR, !0), this._defineEvent("onError", t.ERROR, 0, r.to, !1, n.LOG_REJECTED_RESULT, n.LOG_ERROR, !0)
      }, t.prototype._defineCorePaths = function() {
        var t = e.TransitionHookScope.STATE,
          n = e.TransitionHookScope.TRANSITION;
        this._definePathType("to", n), this._definePathType("from", n), this._definePathType("exiting", t), this._definePathType("retained", t), this._definePathType("entering", t)
      }, t.prototype._defineEvent = function(e, t, n, r, i, s, o, u) {
        void 0 === i && (i = !1), void 0 === s && (s = Kn.HANDLE_RESULT), void 0 === o && (o = Kn.REJECT_ERROR), void 0 === u && (u = !1);
        var a = new gi(e, t, n, r, i, s, o, u);
        this._eventTypes.push(a), j(this, this, a)
      }, t.prototype._getEvents = function(e) {
        return ($t(e) ? this._eventTypes.filter(function(t) {
          return t.hookPhase === e
        }) : this._eventTypes.slice()).sort(function(e, t) {
          var n = e.hookPhase - t.hookPhase;
          return 0 === n ? e.hookOrder - t.hookOrder : n
        })
      }, t.prototype._definePathType = function(e, t) {
        this._criteriaPaths[e] = {
          name: e,
          scope: t
        }
      }, t.prototype._getPathTypes = function() {
        return this._criteriaPaths
      }, t.prototype.getHooks = function(e) {
        return this._registeredHooks[e]
      }, t.prototype._registerCoreTransitionHooks = function() {
        var e = this._deregisterHookFns;
        e.addCoreResolves = Jr(this), e.ignored = yi(this), e.invalid = bi(this), e.redirectTo = Qr(this), e.onExit = Yr(this), e.onRetain = ei(this), e.onEnter = ni(this), e.eagerResolve = ii(this), e.lazyResolve = oi(this), e.loadViews = ai(this), e.activateViews = li(this), e.updateGlobals = hi(this), e.updateUrl = di(this), e.lazyLoad = mi(this)
      }, t
    }(),
    Si = function() {
      function t(e) {
        this.router = e, this.invalidCallbacks = [], this._defaultErrorHandler = function(e) {
          e instanceof Error && e.stack ? (console.error(e), console.error(e.stack)) : e instanceof qn ? (console.error(e.toString()), e.detail && e.detail.stack && console.error(e.detail.stack)) : console.error(e)
        };
        var n = ["current", "$current", "params", "transition"],
          r = Object.keys(t.prototype).filter(Bt(gn(n)));
        h(Rt(t.prototype), this, Rt(this), r)
      }
      return Object.defineProperty(t.prototype, "transition", {
        get: function() {
          return this.router.globals.transition
        },
        enumerable: !0,
        configurable: !0
      }), Object.defineProperty(t.prototype, "params", {
        get: function() {
          return this.router.globals.params
        },
        enumerable: !0,
        configurable: !0
      }), Object.defineProperty(t.prototype, "current", {
        get: function() {
          return this.router.globals.current
        },
        enumerable: !0,
        configurable: !0
      }), Object.defineProperty(t.prototype, "$current", {
        get: function() {
          return this.router.globals.$current
        },
        enumerable: !0,
        configurable: !0
      }), t.prototype.dispose = function() {
        this.defaultErrorHandler(c), this.invalidCallbacks = []
      }, t.prototype._handleInvalidTargetState = function(e, t) {
        function n() {
          var e = a.dequeue();
          return void 0 === e ? qn.invalid(t.error()).toPromise() : un.$q.when(e(t, i, f)).then(l).then(function(e) {
            return e || n()
          })
        }
        var r = this,
          i = rr.makeTargetState(e),
          s = this.router.globals,
          o = function() {
            return s.transitionHistory.peekTail()
          },
          u = o(),
          a = new Fn(this.invalidCallbacks.slice()),
          f = (new cr(e)).injector(),
          l = function(e) {
            if (e instanceof $n) {
              var t = e;
              return t = r.target(t.identifier(), t.params(), t.options()), t.valid() ? o() !== u ? qn.superseded().toPromise() : r.transitionTo(t.identifier(), t.params(), t.options()) : qn.invalid(t.error()).toPromise()
            }
          };
        return n()
      }, t.prototype.onInvalid = function(e) {
        return this.invalidCallbacks.push(e),
          function() {
            yn(this.invalidCallbacks)(e)
          }.bind(this)
      }, t.prototype.reload = function(e) {
        return this.transitionTo(this.current, this.params, {
          reload: !$t(e) || e,
          inherit: !1,
          notify: !1
        })
      }, t.prototype.go = function(e, t, n) {
        var r = {
            relative: this.$current,
            inherit: !0
          },
          i = m(n, r, wi);
        return this.transitionTo(e, t, i)
      }, t.prototype.target = function(e, t, n) {
        if (void 0 === n && (n = {}), Zt(n.reload) && !n.reload.name) throw new Error("Invalid reload state object");
        var r = this.router.stateRegistry;
        if (n.reloadState = !0 === n.reload ? r.root() : r.matcher.find(n.reload, n.relative), n.reload && !n.reloadState) throw new Error("No such reload state '" + (Yt(n.reload) ? n.reload : n.reload.name) + "'");
        var i = r.matcher.find(e, n.relative);
        return new $n(e, i, t, n)
      }, t.prototype.getCurrentPath = function() {
        var e = this,
          t = this.router.globals,
          n = t.successfulTransitions.peekTail();
        return n ? n.treeChanges().to : function() {
          return [new nr(e.router.stateRegistry.root())]
        }()
      }, t.prototype.transitionTo = function(t, n, r) {
        var i = this;
        void 0 === n && (n = {}), void 0 === r && (r = {});
        var s = this.router,
          o = s.globals;
        r = m(r, wi), r = dn(r, {
          current: function() {
            return o.transition
          }
        });
        var u = this.target(t, n, r),
          a = this.getCurrentPath();
        if (!u.exists()) return this._handleInvalidTargetState(a, u);
        if (!u.valid()) return jn(u.error());
        var f = function(t) {
            return function(n) {
              if (n instanceof qn) {
                var r = s.globals.lastStartedTransitionId === t.$id;
                if (n.type === e.RejectType.IGNORED) return r && s.urlRouter.update(), un.$q.when(o.current);
                var u = n.detail;
                if (n.type === e.RejectType.SUPERSEDED && n.redirected && u instanceof $n) {
                  var a = t.redirect(u);
                  return a.run().catch(f(a))
                }
                if (n.type === e.RejectType.ABORTED) return r && s.urlRouter.update(), un.$q.reject(n)
              }
              return i.defaultErrorHandler()(n), un.$q.reject(n)
            }
          },
          l = this.router.transitionService.create(a, u),
          c = l.run().catch(f(l));
        return Bn(c), dn(c, {
          transition: l
        })
      }, t.prototype.is = function(e, t, n) {
        n = m(n, {
          relative: this.$current
        });
        var r = this.router.stateRegistry.matcher.find(e, n.relative);
        if ($t(r)) {
          if (this.$current !== r) return !1;
          if (!t) return !0;
          var i = r.parameters({
            inherit: !0,
            matchingKeys: t
          });
          return tr.equals(i, tr.values(i, t), this.params)
        }
      }, t.prototype.includes = function(e, t, n) {
        n = m(n, {
          relative: this.$current
        });
        var r = Yt(e) && Ut.fromString(e);
        if (r) {
          if (!r.matches(this.$current.name)) return !1;
          e = this.$current.name
        }
        var i = this.router.stateRegistry.matcher.find(e, n.relative),
          s = this.$current.includes;
        if ($t(i)) {
          if (!$t(s[i.name])) return !1;
          if (!t) return !0;
          var o = i.parameters({
            inherit: !0,
            matchingKeys: t
          });
          return tr.equals(o, tr.values(o, t), this.params)
        }
      }, t.prototype.href = function(e, t, n) {
        n = m(n, {
          lossy: !0,
          inherit: !0,
          absolute: !1,
          relative: this.$current
        }), t = t || {};
        var r = this.router.stateRegistry.matcher.find(e, n.relative);
        if (!$t(r)) return null;
        n.inherit && (t = this.params.$inherit(t, this.$current, r));
        var i = r && n.lossy ? r.navigable : r;
        return i && void 0 !== i.url && null !== i.url ? this.router.urlRouter.href(i.url, t, {
          absolute: n.absolute
        }) : null
      }, t.prototype.defaultErrorHandler = function(e) {
        return this._defaultErrorHandler = e || this._defaultErrorHandler
      }, t.prototype.get = function(e, t) {
        var n = this.router.stateRegistry;
        return 0 === arguments.length ? n.get() : n.get(e, t || this.$current)
      }, t.prototype.lazyLoad = function(e, t) {
        var n = this.get(e);
        if (!n || !n.lazyLoad) throw new Error("Can not lazy load " + e);
        var r = this.getCurrentPath(),
          i = rr.makeTargetState(r);
        return t = t || this.router.transitionService.create(r, i), ft(t, n)
      }, t
    }(),
    xi = {
      when: function(e) {
        return new Promise(function(t, n) {
          return t(e)
        })
      },
      reject: function(e) {
        return new Promise(function(t, n) {
          n(e)
        })
      },
      defer: function() {
        var e = {};
        return e.promise = new Promise(function(t, n) {
          e.resolve = t, e.reject = n
        }), e
      },
      all: function(e) {
        if (en(e)) return Promise.all(e);
        if (Zt(e)) {
          var t = Object.keys(e).map(function(t) {
            return e[t].then(function(e) {
              return {
                key: t,
                val: e
              }
            })
          });
          return xi.all(t).then(function(e) {
            return e.reduce(function(e, t) {
              return e[t.key] = t.val, e
            }, {})
          })
        }
      }
    },
    Ti = {},
    Ni = {
      get: function(e) {
        return Ti[e]
      },
      has: function(e) {
        return null != Ni.get(e)
      },
      invoke: function(e, t, n) {
        var r = dn({}, Ti, n || {}),
          i = Ni.annotate(e),
          s = Mn(function(e) {
            return r.hasOwnProperty(e)
          }, function(e) {
            return "DI can't find injectable: '" + e + "'"
          }),
          o = i.filter(s).map(function(e) {
            return r[e]
          });
        return Qt(e) ? e.apply(t, o) : e.slice(-1)[0].apply(t, o)
      },
      annotate: function(e) {
        if (!f(e)) throw new Error("Not an injectable function: " + e);
        if (e && e.$inject) return e.$inject;
        if (en(e)) return e.slice(0, -1);
        var t = e.toString().replace(/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm, "");
        return t.slice(t.indexOf("(") + 1, t.indexOf(")")).match(/([^\s,]+)/g) || []
      }
    },
    Ci = function(e) {
      return function(t) {
        if (!t) return ["", ""];
        var n = t.indexOf(e);
        return -1 === n ? [t, ""] : [t.substr(0, n), t.substr(n + 1)]
      }
    },
    ki = Ci("#"),
    Li = Ci("?"),
    Ai = Ci("="),
    Oi = function(e) {
      return e ? e.replace(/^#/, "") : ""
    },
    Mi = function(e, t) {
      var n = t[0],
        r = t[1];
      return e.hasOwnProperty(n) ? en(e[n]) ? e[n].push(r) : e[n] = [e[n], r] : e[n] = r, e
    },
    _i = function(e) {
      return e.split("&").filter(l).map(Ai).reduce(Mi, {})
    },
    Di = function(e) {
      var t = e.path(),
        n = e.search(),
        r = e.hash(),
        i = Object.keys(n).map(function(e) {
          var t = n[e];
          return (en(t) ? t : [t]).map(function(t) {
            return e + "=" + t
          })
        }).reduce(Cn, []).join("&");
      return t + (i ? "?" + i : "") + (r ? "#" + r : "")
    },
    Pi = function() {
      function e(e, t) {
        var n = this;
        this.fireAfterUpdate = t, this._listener = function(e) {
          return n._listeners.forEach(function(t) {
            return t(e)
          })
        }, this._listeners = [], this.hash = function() {
          return ht(n._get()).hash
        }, this.path = function() {
          return ht(n._get()).path
        }, this.search = function() {
          return _i(ht(n._get()).search)
        }, this._location = window && window.location, this._history = window && window.history
      }
      return e.prototype.url = function(e, t) {
        if (void 0 === t && (t = !0), $t(e) && e !== this._get() && (this._set(null, null, e, t), this.fireAfterUpdate)) {
          var n = dn(new Event("locationchange"), {
            url: e
          });
          this._listeners.forEach(function(e) {
            return e(n)
          })
        }
        return Di(this)
      }, e.prototype.onChange = function(e) {
        var t = this;
        return this._listeners.push(e),
          function() {
            return yn(t._listeners, e)
          }
      }, e.prototype.dispose = function(e) {
        wn(this._listeners)
      }, e
    }(),
    Hi = function() {
      var e = Object.setPrototypeOf || {
        __proto__: []
      }
      instanceof Array && function(e, t) {
        e.__proto__ = t
      } || function(e, t) {
        for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
      };
      return function(t, n) {
        function r() {
          this.constructor = t
        }
        e(t, n), t.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
      }
    }(),
    Bi = function(e) {
      function t(t) {
        var n = e.call(this, t, !1) || this;
        return window.addEventListener("hashchange", n._listener, !1), n
      }
      return Hi(t, e), t.prototype._get = function() {
        return Oi(this._location.hash)
      }, t.prototype._set = function(e, t, n, r) {
        this._location.hash = n
      }, t.prototype.dispose = function(t) {
        e.prototype.dispose.call(this, t), window.removeEventListener("hashchange", this._listener)
      }, t
    }(Pi),
    ji = function() {
      var e = Object.setPrototypeOf || {
        __proto__: []
      }
      instanceof Array && function(e, t) {
        e.__proto__ = t
      } || function(e, t) {
        for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
      };
      return function(t, n) {
        function r() {
          this.constructor = t
        }
        e(t, n), t.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
      }
    }(),
    Fi = function(e) {
      function t(t) {
        return e.call(this, t, !0) || this
      }
      return ji(t, e), t.prototype._get = function() {
        return this._url
      }, t.prototype._set = function(e, t, n, r) {
        this._url = n
      }, t
    }(Pi),
    Ii = function() {
      var e = Object.setPrototypeOf || {
        __proto__: []
      }
      instanceof Array && function(e, t) {
        e.__proto__ = t
      } || function(e, t) {
        for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n])
      };
      return function(t, n) {
        function r() {
          this.constructor = t
        }
        e(t, n), t.prototype = null === n ? Object.create(n) : (r.prototype = n.prototype, new r)
      }
    }(),
    qi = function(e) {
      function t(t) {
        var n = e.call(this, t, !0) || this;
        return n._config = t.urlService.config, window.addEventListener("popstate", n._listener, !1), n
      }
      return Ii(t, e), t.prototype._get = function() {
        var e = this._location,
          t = e.pathname,
          n = e.hash,
          r = e.search;
        return r = Li(r)[1], n = ki(n)[1], t + (r ? "?" + r : "") + (n ? "$" + r : "")
      }, t.prototype._set = function(e, t, n, r) {
        var i = this,
          s = i._config,
          o = i._history,
          u = s.baseHref() + n;
        r ? o.replaceState(e, t, u) : o.pushState(e, t, u)
      }, t.prototype.dispose = function(t) {
        e.prototype.dispose.call(this, t), window.removeEventListener("popstate", this._listener)
      }, t
    }(Pi),
    Ri = function() {
      function e() {
        var e = this;
        this._baseHref = "", this._port = 80, this._protocol = "http", this._host = "localhost", this._hashPrefix = "", this.port = function() {
          return e._port
        }, this.protocol = function() {
          return e._protocol
        }, this.host = function() {
          return e._host
        }, this.baseHref = function() {
          return e._baseHref
        }, this.html5Mode = function() {
          return !1
        }, this.hashPrefix = function(t) {
          return $t(t) ? e._hashPrefix = t : e._hashPrefix
        }, this.dispose = c
      }
      return e
    }(),
    Ui = function() {
      function e(e, t) {
        void 0 === t && (t = !1), this._isHtml5 = t, this._baseHref = void 0, this._hashPrefix = ""
      }
      return e.prototype.port = function() {
        return location.port ? Number(location.port) : "https" === this.protocol() ? 443 : 80
      }, e.prototype.protocol = function() {
        return location.protocol.replace(/:/g, "")
      }, e.prototype.host = function() {
        return location.host
      }, e.prototype.html5Mode = function() {
        return this._isHtml5
      }, e.prototype.hashPrefix = function(e) {
        return $t(e) ? this._hashPrefix = e : this._hashPrefix
      }, e.prototype.baseHref = function(e) {
        return $t(e) ? this._baseHref = e : this._baseHref || this.applyDocumentBaseHref()
      }, e.prototype.applyDocumentBaseHref = function() {
        var e = document.getElementsByTagName("base");
        return this._baseHref = e.length ? e[0].href.substr(location.origin.length) : ""
      }, e.prototype.dispose = function() {}, e
    }(),
    zi = pt("vanilla.hashBangLocation", !1, Bi, Ui),
    Wi = pt("vanilla.pushStateLocation", !0, qi, Ui),
    Xi = pt("vanilla.memoryLocation", !1, Fi, Ri),
    Vi = function() {
      function e() {}
      return e.prototype.dispose = function(e) {}, e
    }(),
    $i = Object.freeze({
      fromJson: ln,
      toJson: cn,
      copy: hn,
      forEach: pn,
      extend: dn,
      equals: vn,
      identity: l,
      noop: c,
      createProxyFunctions: h,
      inherit: mn,
      inArray: gn,
      _inArray: p,
      removeFrom: yn,
      _removeFrom: d,
      pushTo: bn,
      _pushTo: v,
      deregAll: wn,
      defaults: m,
      mergeR: En,
      ancestors: g,
      pick: y,
      omit: b,
      pluck: w,
      filter: E,
      find: S,
      mapObj: Sn,
      map: x,
      values: xn,
      allTrueR: Tn,
      anyTrueR: Nn,
      unnestR: Cn,
      flattenR: kn,
      pushR: T,
      uniqR: Ln,
      unnest: An,
      flatten: On,
      assertPredicate: Mn,
      assertMap: _n,
      assertFn: N,
      pairs: Dn,
      arrayTuples: C,
      applyPairs: k,
      tail: L,
      _extend: M,
      sortBy: Pn,
      composeSort: Hn,
      silenceUncaughtInPromise: Bn,
      silentRejection: jn,
      notImplemented: on,
      services: un,
      Glob: Ut,
      curry: n,
      compose: r,
      pipe: i,
      prop: Dt,
      propEq: Pt,
      parse: Ht,
      not: Bt,
      and: s,
      or: o,
      all: jt,
      any: Ft,
      is: It,
      eq: qt,
      val: Rt,
      invoke: u,
      pattern: a,
      isUndefined: Vt,
      isDefined: $t,
      isNull: Jt,
      isNullOrUndefined: Kt,
      isFunction: Qt,
      isNumber: Gt,
      isString: Yt,
      isObject: Zt,
      isArray: en,
      isDate: tn,
      isRegExp: nn,
      isState: rn,
      isInjectable: f,
      isPromise: sn,
      Queue: Fn,
      maxLength: W,
      padString: X,
      kebobString: V,
      functionToString: $,
      fnToString: J,
      stringify: K,
      beforeAfterSubstr: gr,
      splitOnDelim: Q,
      joinNeighborsR: G,
      get Category() {
        return e.Category
      },
      Trace: Xn,
      trace: Vn,
      get DefType() {
        return e.DefType
      },
      Param: tr,
      ParamTypes: yr,
      StateParams: br,
      ParamType: Yn,
      PathNode: nr,
      PathUtils: rr,
      resolvePolicies: or,
      defaultResolvePolicy: ir,
      Resolvable: sr,
      NATIVE_INJECTOR_TOKEN: lr,
      ResolveContext: cr,
      resolvablesBuilder: rt,
      StateBuilder: Tr,
      StateObject: zt,
      StateMatcher: Nr,
      StateQueueManager: Cr,
      StateRegistry: kr,
      StateService: Si,
      TargetState: $n,
      get TransitionHookPhase() {
        return e.TransitionHookPhase
      },
      get TransitionHookScope() {
        return e.TransitionHookScope
      },
      HookBuilder: Gn,
      matchState: B,
      RegisteredHook: Qn,
      makeEvent: j,
      get RejectType() {
        return e.RejectType
      },
      Rejection: qn,
      Transition: dr,
      TransitionHook: Kn,
      TransitionEventType: gi,
      defaultTransOpts: wi,
      TransitionService: Ei,
      UrlMatcher: Or,
      UrlMatcherFactory: Mr,
      UrlRouter: Br,
      UrlRuleFactory: _r,
      BaseUrlRule: Pr,
      UrlService: Xr,
      ViewService: jr,
      UIRouterGlobals: Fr,
      UIRouter: $r,
      $q: xi,
      $injector: Ni,
      BaseLocationServices: Pi,
      HashLocationService: Bi,
      MemoryLocationService: Fi,
      PushStateLocationService: qi,
      MemoryLocationConfig: Ri,
      BrowserLocationConfig: Ui,
      splitHash: ki,
      splitQuery: Li,
      splitEqual: Ai,
      trimHashVal: Oi,
      keyValsToObjectR: Mi,
      getParams: _i,
      parseUrl: ht,
      buildUrl: Di,
      locationPluginFactory: pt,
      servicesPlugin: dt,
      hashLocationPlugin: zi,
      pushStateLocationPlugin: Wi,
      memoryLocationPlugin: Xi,
      UIRouterPluginBase: Vi
    }),
    Ji = angular,
    Ki = t && t.module ? t : Ji,
    Qi = function(e, t) {
      return e.reduce(function(e, n) {
        return e || $t(t[n])
      }, !1)
    },
    Gi = 0,
    Yi = function() {
      function e(e, t, n) {
        var r = this;
        this.path = e, this.viewDecl = t, this.factory = n, this.$id = Gi++, this.loaded = !1, this.getTemplate = function(e, t) {
          return r.component ? r.factory.makeComponentTemplate(e, t, r.component, r.viewDecl.bindings) : r.template
        }
      }
      return e.prototype.load = function() {
        var e = this,
          t = un.$q,
          n = new cr(this.path),
          r = this.path.reduce(function(e, t) {
            return dn(e, t.paramValues)
          }, {}),
          i = {
            template: t.when(this.factory.fromConfig(this.viewDecl, r, n)),
            controller: t.when(this.getController(n))
          };
        return t.all(i).then(function(t) {
          return Vn.traceViewServiceEvent("Loaded", e), e.controller = t.controller, dn(e, t.template), e
        })
      }, e.prototype.getController = function(e) {
        var t = this.viewDecl.controllerProvider;
        if (!f(t)) return this.viewDecl.controller;
        var n = un.$injector.annotate(t),
          r = en(t) ? L(t) : t;
        return (new sr("", r, n)).get(e)
      }, e
    }(),
    Zi = function() {
      function e() {
        var e = this;
        this._useHttp = Ki.version.minor < 3, this.$get = ["$http", "$templateCache", "$injector", function(t, n, r) {
          return e.$templateRequest = r.has && r.has("$templateRequest") && r.get("$templateRequest"), e.$http = t, e.$templateCache = n, e
        }]
      }
      return e.prototype.useHttpService = function(e) {
        this._useHttp = e
      }, e.prototype.fromConfig = function(e, t, n) {
        var r = function(e) {
            return un.$q.when(e).then(function(e) {
              return {
                template: e
              }
            })
          },
          i = function(e) {
            return un.$q.when(e).then(function(e) {
              return {
                component: e
              }
            })
          };
        return $t(e.template) ? r(this.fromString(e.template, t)) : $t(e.templateUrl) ? r(this.fromUrl(e.templateUrl, t)) : $t(e.templateProvider) ? r(this.fromProvider(e.templateProvider, t, n)) : $t(e.component) ? i(e.component) : $t(e.componentProvider) ? i(this.fromComponentProvider(e.componentProvider, t, n)) : r("<ui-view></ui-view>")
      }, e.prototype.fromString = function(e, t) {
        return Qt(e) ? e(t) : e
      }, e.prototype.fromUrl = function(e, t) {
        return Qt(e) && (e = e(t)), null == e ? null : this._useHttp ? this.$http.get(e, {
          cache: this.$templateCache,
          headers: {
            Accept: "text/html"
          }
        }).then(function(e) {
          return e.data
        }) : this.$templateRequest(e)
      }, e.prototype.fromProvider = function(e, t, n) {
        var r = un.$injector.annotate(e),
          i = en(e) ? L(e) : e;
        return (new sr("", i, r)).get(n)
      }, e.prototype.fromComponentProvider = function(e, t, n) {
        var r = un.$injector.annotate(e),
          i = en(e) ? L(e) : e;
        return (new sr("", i, r)).get(n)
      }, e.prototype.makeComponentTemplate = function(e, t, n, r) {
        r = r || {};
        var i = Ki.version.minor >= 3 ? "::" : "",
          s = function(e) {
            var t = V(e);
            return /^(x|data)-/.exec(t) ? "x-" + t : t
          },
          o = function(n) {
            var o = n.name,
              u = n.type,
              a = s(o);
            if (e.attr(a) && !r[o]) return a + "='" + e.attr(a) + "'";
            var f = r[o] || o;
            if ("@" === u) return a + "='{{" + i + "$resolve." + f + "}}'";
            if ("&" === u) {
              var l = t.getResolvable(f),
                c = l && l.data,
                h = c && un.$injector.annotate(c) || [];
              return a + "='$resolve." + f + (en(c) ? "[" + (c.length - 1) + "]" : "") + "(" + h.join(",") + ")'"
            }
            return a + "='" + i + "$resolve." + f + "'"
          },
          u = gt(n).map(o).join(" "),
          a = s(n);
        return "<" + a + " " + u + "></" + a + ">"
      }, e
    }(),
    es = function(e) {
      return ts(Zt(e.bindToController) ? e.bindToController : e.scope)
    },
    ts = function(e) {
      return Object.keys(e || {}).map(function(t) {
        return [t, /^([=<@&])[?]?(.*)/.exec(e[t])]
      }).filter(function(e) {
        return $t(e) && en(e[1])
      }).map(function(e) {
        return {
          name: e[1][2] || e[0],
          type: e[1][1]
        }
      })
    },
    ns = function() {
      function e(t, n) {
        this.stateRegistry = t, this.stateService = n, h(Rt(e.prototype), this, Rt(this))
      }
      return e.prototype.decorator = function(e, t) {
        return this.stateRegistry.decorator(e, t) || this
      }, e.prototype.state = function(e, t) {
        return Zt(e) ? t = e : t.name = e, this.stateRegistry.register(t), this
      }, e.prototype.onInvalid = function(e) {
        return this.stateService.onInvalid(e)
      }, e
    }(),
    rs = function(e) {
      return function(t, n) {
        function r(e, t) {
          var n = new cr(e.treeChanges(s)),
            r = dn(ms(n), {
              $state$: t,
              $transition$: e
            });
          return un.$injector.invoke(i, this, r)
        }
        var i = t[e],
          s = "onExit" === e ? "from" : "to";
        return i ? r : void 0
      }
    },
    is = function() {
      function e(e) {
        this._urlListeners = [], this.$locationProvider = e;
        var t = Rt(e);
        h(t, this, t, ["hashPrefix"])
      }
      return e.prototype.dispose = function() {}, e.prototype.onChange = function(e) {
        var t = this;
        return this._urlListeners.push(e),
          function() {
            return yn(t._urlListeners)(e)
          }
      }, e.prototype.html5Mode = function() {
        var e = this.$locationProvider.html5Mode();
        return (e = Zt(e) ? e.enabled : e) && this.$sniffer.history
      }, e.prototype.url = function(e, t, n) {
        return void 0 === t && (t = !1), e && this.$location.url(e), t && this.$location.replace(), n && this.$location.state(n), this.$location.url()
      }, e.prototype._runtimeServices = function(e, t, n, r) {
        var i = this;
        this.$location = t, this.$sniffer = n, e.$on("$locationChangeSuccess", function(e) {
          return i._urlListeners.forEach(function(t) {
            return t(e)
          })
        });
        var s = Rt(t),
          o = Rt(r);
        h(s, this, s, ["replace", "path", "search", "hash"]), h(s, this, s, ["port", "protocol", "host"]), h(o, this, o, ["baseHref"])
      }, e.monkeyPatchPathParameterType = function(e) {
        var t = e.urlMatcherFactory.type("path");
        t.encode = function(e) {
          return null != e ? e.toString().replace(/(~|\/)/g, function(e) {
            return {
              "~": "~~",
              "/": "~2F"
            }[e]
          }) : e
        }, t.decode = function(e) {
          return null != e ? e.toString().replace(/(~~|~2F)/g, function(e) {
            return {
              "~~": "~",
              "~2F": "/"
            }[e]
          }) : e
        }
      }, e
    }(),
    ss = function() {
      function e(e) {
        this._router = e, this._urlRouter = e.urlRouter
      }
      return e.prototype.$get = function() {
        var e = this._urlRouter;
        return e.update(!0), e.interceptDeferred || e.listen(), e
      }, e.prototype.rule = function(e) {
        var t = this;
        if (!Qt(e)) throw new Error("'rule' must be a function");
        var n = function() {
            return e(un.$injector, t._router.locationService)
          },
          r = new Pr(n, l);
        return this._urlRouter.rule(r), this
      }, e.prototype.otherwise = function(e) {
        var t = this,
          n = this._urlRouter;
        if (Yt(e)) n.otherwise(e);
        else {
          if (!Qt(e)) throw new Error("'rule' must be a string or function");
          n.otherwise(function() {
            return e(un.$injector, t._router.locationService)
          })
        }
        return this
      }, e.prototype.when = function(t, n) {
        return (en(n) || Qt(n)) && (n = e.injectableHandler(this._router, n)), this._urlRouter.when(t, n), this
      }, e.injectableHandler = function(e, t) {
        return function(n) {
          return un.$injector.invoke(t, null, {
            $match: n,
            $stateParams: e.globals.params
          })
        }
      }, e.prototype.deferIntercept = function(e) {
        this._urlRouter.deferIntercept(e)
      }, e
    }();
  Ki.module("ui.router.angular1", []);
  var os = Ki.module("ui.router.init", []),
    us = Ki.module("ui.router.util", ["ng", "ui.router.init"]),
    as = Ki.module("ui.router.router", ["ui.router.util"]),
    fs = Ki.module("ui.router.state", ["ui.router.router", "ui.router.util", "ui.router.angular1"]),
    ls = Ki.module("ui.router", ["ui.router.init", "ui.router.state", "ui.router.angular1"]),
    cs = (Ki.module("ui.router.compat", ["ui.router"]), null);
  yt.$inject = ["$locationProvider"];
  var hs = function(e) {
    return ["$uiRouterProvider", function(t) {
      var n = t.router[e];
      return n.$get = function() {
        return n
      }, n
    }]
  };
  bt.$inject = ["$injector", "$q", "$uiRouter"];
  var ps = function(e) {
      return e.urlRouterProvider = new ss(e)
    },
    ds = function() {
      return dn(cs.stateProvider, {
        $get: function() {
          return cs.stateService
        }
      })
    };
  wt.$inject = ["$rootScope"], os.provider("$uiRouter", yt), as.provider("$urlRouter", ["$uiRouterProvider", ps]), us.provider("$urlService", hs("urlService")), us.provider("$urlMatcherFactory", ["$uiRouterProvider", function() {
    return cs.urlMatcherFactory
  }]), us.provider("$templateFactory", function() {
    return new Zi
  }), fs.provider("$stateRegistry", hs("stateRegistry")), fs.provider("$uiRouterGlobals", hs("globals")), fs.provider("$transitions", hs("transitionService")), fs.provider("$state", ["$uiRouterProvider", ds]), fs.factory("$stateParams", ["$uiRouter", function(e) {
    return e.globals.params
  }]), ls.factory("$view", function() {
    return cs.viewService
  }), ls.service("$trace", function() {
    return Vn
  }), ls.run(wt), us.run(["$urlMatcherFactory", function(e) {}]), fs.run(["$state", function(e) {}]), as.run(["$urlRouter", function(e) {}]), os.run(bt);
  var vs, ms = function(e) {
    return e.getTokens().filter(Yt).map(function(t) {
      var n = e.getResolvable(t);
      return [t, "NOWAIT" === e.getPolicy(n).async ? n.promise : n.data]
    }).reduce(k, {})
  };
  vs = ["$uiRouter", "$timeout", function(e, t) {
    var n = e.stateService;
    return {
      restrict: "A",
      require: ["?^uiSrefActive", "?^uiSrefActiveEq"],
      link: function(r, i, s, o) {
        function u() {
          var e = p();
          c && c(), l && (c = l.$$addStateInfo(e.uiState, e.uiStateParams)), null != e.href && s.$set(f.attr, e.href)
        }
        var a, f = Tt(i),
          l = o[1] || o[0],
          c = null,
          h = {},
          p = function() {
            return xt(n, i, h)
          },
          d = Et(s.uiSref);
        h.uiState = d.state, h.uiStateOpts = s.uiSrefOpts ? r.$eval(s.uiSrefOpts) : {}, d.paramExpr && (r.$watch(d.paramExpr, function(e) {
          h.uiStateParams = dn({}, e), u()
        }, !0), h.uiStateParams = dn({}, r.$eval(d.paramExpr))), u(), r.$on("$destroy", e.stateRegistry.onStatesChanged(u)), r.$on("$destroy", e.transitionService.onSuccess({}, u)), f.clickable && (a = Nt(i, n, t, f, p), kt(i, r, a, h.uiStateOpts))
      }
    }
  }];
  var gs;
  gs = ["$uiRouter", "$timeout", function(e, t) {
    var n = e.stateService;
    return {
      restrict: "A",
      require: ["?^uiSrefActive", "?^uiSrefActiveEq"],
      link: function(r, i, s, o) {
        function u() {
          var e = d();
          h && h(), l && (h = l.$$addStateInfo(e.uiState, e.uiStateParams)), null != e.href && s.$set(f.attr, e.href)
        }
        var a, f = Tt(i),
          l = o[1] || o[0],
          h = null,
          p = {},
          d = function() {
            return xt(n, i, p)
          },
          v = ["uiState", "uiStateParams", "uiStateOpts"],
          m = v.reduce(function(e, t) {
            return e[t] = c, e
          }, {});
        v.forEach(function(e) {
          p[e] = s[e] ? r.$eval(s[e]) : null, s.$observe(e, function(t) {
            m[e](), m[e] = r.$watch(t, function(t) {
              p[e] = t, u()
            }, !0)
          })
        }), u(), r.$on("$destroy", e.stateRegistry.onStatesChanged(u)), r.$on("$destroy", e.transitionService.onSuccess({}, u)), f.clickable && (a = Nt(i, n, t, f, d), kt(i, r, a, p.uiStateOpts))
      }
    }
  }];
  var ys;
  ys = ["$state", "$stateParams", "$interpolate", "$uiRouter", function(e, t, n, r) {
    return {
      restrict: "A",
      controller: ["$scope", "$element", "$attrs", function(e, t, i) {
        function s(e) {
          e.promise.then(u)
        }

        function o(e, n, r) {
          var i = h.get(e, St(t)),
            s = {
              state: i || {
                name: e
              },
              params: n,
              activeClass: r
            };
          return c.push(s),
            function() {
              yn(c)(s)
            }
        }

        function u() {
          var n = function(e) {
              return e.split(/\s/).filter(l)
            },
            r = function(e) {
              return e.map(function(e) {
                return e.activeClass
              }).map(n).reduce(Cn, [])
            },
            i = r(c).concat(n(a)).reduce(Ln, []),
            s = r(c.filter(function(e) {
              return h.includes(e.state.name, e.params)
            })),
            o = !!c.filter(function(e) {
              return h.is(e.state.name, e.params)
            }).length,
            u = o ? n(a) : [],
            f = s.concat(u).reduce(Ln, []),
            p = i.filter(function(e) {
              return !gn(f, e)
            });
          e.$evalAsync(function() {
            f.forEach(function(e) {
              return t.addClass(e)
            }), p.forEach(function(e) {
              return t.removeClass(e)
            })
          })
        }
        var a, f, c = [];
        a = n(i.uiSrefActiveEq || "", !1)(e);
        try {
          f = e.$eval(i.uiSrefActive)
        } catch (h) {}
        f = f || n(i.uiSrefActive || "", !1)(e), Zt(f) && pn(f, function(t, n) {
          if (Yt(t)) {
            var r = Et(t);
            o(r.state, e.$eval(r.paramExpr), n)
          }
        }), this.$$addStateInfo = function(e, t) {
          if (!(Zt(f) && c.length > 0)) {
            var n = o(e, t, f);
            return u(), n
          }
        }, e.$on("$stateChangeSuccess", u), e.$on("$destroy", r.transitionService.onStart({}, s)), r.globals.transition && s(r.globals.transition), u()
      }]
    }
  }], Ki.module("ui.router.state").directive("uiSref", vs).directive("uiSrefActive", ys).directive("uiSrefActiveEq", ys).directive("uiState", gs), Lt.$inject = ["$state"], At.$inject = ["$state"], Ki.module("ui.router.state").filter("isState", Lt).filter("includedByState", At);
  var bs;
  bs = ["$view", "$animate", "$uiViewScroll", "$interpolate", "$q", function(e, t, n, r, i) {
    function s(e, n) {
      return {
        enter: function(e, n, r) {
          Ki.version.minor > 2 ? t.enter(e, null, n).then(r) : t.enter(e, null, n, r)
        },
        leave: function(e, n) {
          Ki.version.minor > 2 ? t.leave(e).then(n) : t.leave(e, n)
        }
      }
    }

    function o(e, t) {
      return e === t
    }
    var u = {
        $cfg: {
          viewDecl: {
            $context: e._pluginapi._rootViewContext()
          }
        },
        $uiView: {}
      },
      a = {
        count: 0,
        restrict: "ECA",
        terminal: !0,
        priority: 400,
        transclude: "element",
        compile: function(t, f, l) {
          return function(t, f, c) {
            function h(e) {
              (!e || e instanceof Yi) && (o(S, e) || (Vn.traceUIViewConfigUpdated(N, e && e.viewDecl && e.viewDecl.$context), S = e, d(e)))
            }

            function p() {
              if (v && (Vn.traceUIViewEvent("Removing (previous) el", v.data("$uiView")), v.remove(), v = null), g && (Vn.traceUIViewEvent("Destroying scope", N), g.$destroy(), g = null), m) {
                var e = m.data("$uiViewAnim");
                Vn.traceUIViewEvent("Animate out", e), E.leave(m, function() {
                  e.$$animLeave.resolve(), v = null
                }), v = m, m = null
              }
            }

            function d(e) {
              var r = t.$new(),
                s = i.defer(),
                o = i.defer(),
                u = {
                  $cfg: e,
                  $uiView: N
                },
                a = {
                  $animEnter: s.promise,
                  $animLeave: o.promise,
                  $$animLeave: o
                };
              r.$emit("$viewContentLoading", T);
              var c = l(r, function(e) {
                e.data("$uiViewAnim", a), e.data("$uiView", u), E.enter(e, f, function() {
                  s.resolve(), g && g.$emit("$viewContentAnimationEnded"), ($t(w) && !w || t.$eval(w)) && n(e)
                }), p()
              });
              m = c, g = r, g.$emit("$viewContentLoaded", e || S), g.$eval(b)
            }
            var v, m, g, y, b = c.onload || "",
              w = c.autoscroll,
              E = s(c, t),
              S = void 0,
              x = f.inheritedData("$uiView") || u,
              T = r(c.uiView || c.name || "")(t) || "$default",
              N = {
                $type: "ng1",
                id: a.count++,
                name: T,
                fqn: x.$uiView.fqn ? x.$uiView.fqn + "." + T : T,
                config: null,
                configUpdated: h,
                get creationContext() {
                  var e = Ht("$cfg.viewDecl.$context")(x),
                    t = Ht("$uiView.creationContext")(x);
                  return e || t
                }
              };
            Vn.traceUIViewEvent("Linking", N), f.data("$uiView", {
              $uiView: N
            }), d(), y = e.registerUIView(N), t.$on("$destroy", function() {
              Vn.traceUIViewEvent("Destroying/Unregistering", N), y()
            })
          }
        }
      };
    return a
  }], Ot.$inject = ["$compile", "$controller", "$transitions", "$view", "$q", "$timeout"];
  var ws = "function" == typeof Ki.module("ui.router").component,
    Es = 0;
  Ki.module("ui.router.state").directive("uiView", bs), Ki.module("ui.router.state").directive("uiView", Ot), Ki.module("ui.router.state").provider("$uiViewScroll", _t), e.core = $i, e.default = "ui.router", e.fromJson = ln, e.toJson = cn, e.copy = hn, e.forEach = pn, e.extend = dn, e.equals = vn, e.identity = l, e.noop = c, e.createProxyFunctions = h, e.inherit = mn, e.inArray = gn, e._inArray = p, e.removeFrom = yn, e._removeFrom = d, e.pushTo = bn, e._pushTo = v, e.deregAll = wn, e.defaults = m, e.mergeR = En, e.ancestors = g, e.pick = y, e.omit = b, e.pluck = w, e.filter = E, e.find = S, e.mapObj = Sn, e.map = x, e.values = xn, e.allTrueR = Tn, e.anyTrueR = Nn, e.unnestR = Cn, e.flattenR = kn, e.pushR = T, e.uniqR = Ln, e.unnest = An, e.flatten = On, e.assertPredicate = Mn, e.assertMap = _n, e.assertFn = N, e.pairs = Dn, e.arrayTuples = C, e.applyPairs = k, e.tail = L, e._extend = M, e.sortBy = Pn, e.composeSort = Hn, e.silenceUncaughtInPromise = Bn, e.silentRejection = jn, e.notImplemented = on, e.services = un, e.Glob = Ut, e.curry = n, e.compose = r, e.pipe = i, e.prop = Dt, e.propEq = Pt, e.parse = Ht, e.not = Bt, e.and = s, e.or = o, e.all = jt, e.any = Ft, e.is = It, e.eq = qt, e.val = Rt, e.invoke = u, e.pattern = a, e.isUndefined = Vt, e.isDefined = $t, e.isNull = Jt, e.isNullOrUndefined = Kt, e.isFunction = Qt, e.isNumber = Gt, e.isString = Yt, e.isObject = Zt, e.isArray = en, e.isDate = tn, e.isRegExp = nn, e.isState = rn, e.isInjectable = f, e.isPromise = sn, e.Queue = Fn, e.maxLength = W, e.padString = X, e.kebobString = V, e.functionToString = $, e.fnToString = J, e.stringify = K, e.beforeAfterSubstr = gr, e.splitOnDelim = Q, e.joinNeighborsR = G, e.Trace = Xn, e.trace = Vn, e.Param = tr, e.ParamTypes = yr, e.StateParams = br, e.ParamType = Yn, e.PathNode = nr, e.PathUtils = rr, e.resolvePolicies = or, e.defaultResolvePolicy = ir, e.Resolvable = sr, e.NATIVE_INJECTOR_TOKEN = lr, e.ResolveContext = cr, e.resolvablesBuilder = rt, e.StateBuilder = Tr, e.StateObject = zt, e.StateMatcher = Nr, e.StateQueueManager = Cr, e.StateRegistry = kr, e.StateService = Si, e.TargetState = $n, e.HookBuilder = Gn, e.matchState = B, e.RegisteredHook = Qn, e.makeEvent = j, e.Rejection = qn, e.Transition = dr, e.TransitionHook = Kn, e.TransitionEventType = gi, e.defaultTransOpts = wi, e.TransitionService = Ei, e.UrlMatcher = Or, e.UrlMatcherFactory = Mr, e.UrlRouter = Br, e.UrlRuleFactory = _r, e.BaseUrlRule = Pr, e.UrlService = Xr, e.ViewService = jr, e.UIRouterGlobals = Fr, e.UIRouter = $r, e.$q = xi, e.$injector = Ni, e.BaseLocationServices = Pi, e.HashLocationService = Bi, e.MemoryLocationService = Fi, e.PushStateLocationService = qi, e.MemoryLocationConfig = Ri, e.BrowserLocationConfig = Ui, e.splitHash = ki, e.splitQuery = Li, e.splitEqual = Ai, e.trimHashVal = Oi, e.keyValsToObjectR = Mi, e.getParams = _i, e.parseUrl = ht, e.buildUrl = Di, e.locationPluginFactory = pt, e.servicesPlugin = dt, e.hashLocationPlugin = zi, e.pushStateLocationPlugin = Wi, e.memoryLocationPlugin = Xi, e.UIRouterPluginBase = Vi, e.watchDigests = wt, e.getLocals = ms, e.getNg1ViewConfigFactory = vt, e.ng1ViewsBuilder = mt, e.Ng1ViewConfig = Yi, e.StateProvider = ns, e.UrlRouterProvider = ss, Object.defineProperty(e, "__esModule", {
    value: !0
  })
});
"use strict";
angular.module("ngAnimate", ["ng"]).directive("ngAnimateChildren", function() {
  var e = "$$ngAnimateChildren";
  return function(t, n, r) {
    var i = r.ngAnimateChildren;
    angular.isString(i) && i.length === 0 ? n.data(e, !0) : t.$watch(i, function(t) {
      n.data(e, !!t)
    })
  }
}).factory("$$animateReflow", ["$$rAF", "$document", function(e, t) {
  var n = t[0].body;
  return function(t) {
    return e(function() {
      t(n.offsetWidth)
    })
  }
}]).config(["$provide", "$animateProvider", function(e, t) {
  function l(e) {
    for (var t = 0; t < e.length; t++) {
      var n = e[t];
      if (n.nodeType == s) return n
    }
  }

  function c(e) {
    return e && angular.element(e)
  }

  function h(e) {
    return angular.element(l(e))
  }

  function p(e, t) {
    return l(e) == l(t)
  }
  var n = angular.noop,
    r = angular.forEach,
    i = t.$$selectors,
    s = 1,
    o = "$$ngAnimateState",
    u = "$$ngAnimateChildren",
    a = "ng-animate",
    f = {
      running: !0
    };
  e.decorator("$animate", ["$delegate", "$injector", "$sniffer", "$rootElement", "$$asyncCallback", "$rootScope", "$document", function(e, s, d, v, m, g, y) {
    function S(e) {
      var t = e.data(o) || {};
      t.running = !0, e.data(o, t)
    }

    function x(e) {
      if (e) {
        var t = [],
          n = {},
          r = e.substr(1).split(".");
        (d.transitions || d.animations) && t.push(s.get(i[""]));
        for (var o = 0; o < r.length; o++) {
          var u = r[o],
            a = i[u];
          a && !n[u] && (t.push(s.get(a)), n[u] = !0)
        }
        return t
      }
    }

    function T(e, t, i) {
      function b(e, t) {
        var n = e[t],
          r = e["before" + t.charAt(0).toUpperCase() + t.substr(1)];
        if (n || r) return t == "leave" && (r = n, n = null), g.push({
          event: t,
          fn: n
        }), d.push({
          event: t,
          fn: r
        }), !0
      }

      function w(t, s, o) {
        function c(e) {
          if (s) {
            (s[e] || n)();
            if (++l < u.length) return;
            s = null
          }
          o()
        }
        var u = [];
        r(t, function(e) {
          e.fn && u.push(e)
        });
        var l = 0;
        r(u, function(t, n) {
          var r = function() {
            c(n)
          };
          switch (t.event) {
            case "setClass":
              s.push(t.fn(e, a, f, r));
              break;
            case "addClass":
              s.push(t.fn(e, a || i, r));
              break;
            case "removeClass":
              s.push(t.fn(e, f || i, r));
              break;
            default:
              s.push(t.fn(e, r))
          }
        }), s && s.length === 0 && o()
      }
      var s = e[0];
      if (!s) return;
      var o = t == "setClass",
        u = o || t == "addClass" || t == "removeClass",
        a, f;
      angular.isArray(i) && (a = i[0], f = i[1], i = a + " " + f);
      var l = e.attr("class"),
        c = l + " " + i;
      if (!E(c)) return;
      var h = n,
        p = [],
        d = [],
        v = n,
        m = [],
        g = [],
        y = (" " + c).replace(/\s+/g, ".");
      return r(x(y), function(e) {
        var n = b(e, t);
        !n && o && (b(e, "addClass"), b(e, "removeClass"))
      }), {
        node: s,
        event: t,
        className: i,
        isClassBased: u,
        isSetClassOperation: o,
        before: function(e) {
          h = e, w(d, p, function() {
            h = n, e()
          })
        },
        after: function(e) {
          v = e, w(g, m, function() {
            v = n, e()
          })
        },
        cancel: function() {
          p && (r(p, function(e) {
            (e || n)(!0)
          }), h(!0)), m && (r(m, function(e) {
            (e || n)(!0)
          }), v(!0))
        }
      }
    }

    function N(e, t, n, i, s, u, f) {
      function N(r) {
        var i = "$animate:" + r;
        c && c[i] && c[i].length > 0 && m(function() {
          n.triggerHandler(i, {
            event: e,
            className: t
          })
        })
      }

      function C() {
        N("before")
      }

      function A() {
        N("after")
      }

      function O() {
        N("close"), f && m(function() {
          f()
        })
      }

      function M() {
        M.hasBeenRun || (M.hasBeenRun = !0, u())
      }

      function _() {
        if (!_.hasBeenRun) {
          _.hasBeenRun = !0;
          var r = n.data(o);
          r && (l && l.isClassBased ? k(n, t) : (m(function() {
            var r = n.data(o) || {};
            x == r.index && k(n, t, e)
          }), n.data(o, r))), O()
        }
      }
      var l = T(n, e, t);
      if (!l) {
        M(), C(), A(), _();
        return
      }
      t = l.className;
      var c = angular.element._data(l.node);
      c = c && c.events, i || (i = s ? s.parent() : n.parent());
      var h = n.data(o) || {},
        p = h.active || {},
        d = h.totalActive || 0,
        v = h.last,
        g;
      l.isClassBased && (g = h.running || h.disabled || v && !v.isClassBased);
      if (g || L(n, i)) {
        M(), C(), A(), _();
        return
      }
      var y = !1;
      if (d > 0) {
        var w = [];
        if (!l.isClassBased)
          if (e == "leave" && p["ng-leave"]) y = !0;
          else {
            for (var E in p) w.push(p[E]), k(n, E);
            p = {}, d = 0
          }
        else if (v.event == "setClass") w.push(v), k(n, t);
        else if (p[t]) {
          var S = p[t];
          S.event == e ? y = !0 : (w.push(S), k(n, t))
        }
        w.length > 0 && r(w, function(e) {
          e.cancel()
        })
      }
      l.isClassBased && !l.isSetClassOperation && !y && (y = e == "addClass" == n.hasClass(t));
      if (y) {
        M(), C(), A(), O();
        return
      }
      e == "leave" && n.one("$destroy", function(e) {
        var t = angular.element(this),
          n = t.data(o);
        if (n) {
          var r = n.active["ng-leave"];
          r && (r.cancel(), k(t, "ng-leave"))
        }
      }), n.addClass(a);
      var x = b++;
      d++, p[t] = l, n.data(o, {
        last: l,
        active: p,
        index: x,
        totalActive: d
      }), C(), l.before(function(r) {
        var i = n.data(o);
        r = r || !i || !i.active[t] || l.isClassBased && i.active[t].event != e, M(), r === !0 ? _() : (A(), l.after(_))
      })
    }

    function C(e) {
      var t = l(e);
      if (t) {
        var n = angular.isFunction(t.getElementsByClassName) ? t.getElementsByClassName(a) : t.querySelectorAll("." + a);
        r(n, function(e) {
          e = angular.element(e);
          var t = e.data(o);
          t && t.active && r(t.active, function(e) {
            e.cancel()
          })
        })
      }
    }

    function k(e, t) {
      if (p(e, v)) f.disabled || (f.running = !1, f.structural = !1);
      else if (t) {
        var n = e.data(o) || {},
          r = t === !0;
        !r && n.active && n.active[t] && (n.totalActive--, delete n.active[t]);
        if (r || !n.totalActive) e.removeClass(a), e.removeData(o)
      }
    }

    function L(e, t) {
      if (f.disabled) return !0;
      if (p(e, v)) return f.running;
      var n, r, i;
      do {
        if (t.length === 0) break;
        var s = p(t, v),
          a = s ? f : t.data(o) || {};
        if (a.disabled) return !0;
        s && (i = !0);
        if (n !== !1) {
          var l = t.data(u);
          angular.isDefined(l) && (n = l)
        }
        r = r || a.running || a.last && !a.last.isClassBased
      } while (t = t.parent());
      return !i || !n && r
    }
    var b = 0;
    v.data(o, f), g.$$postDigest(function() {
      g.$$postDigest(function() {
        f.running = !1
      })
    });
    var w = t.classNameFilter(),
      E = w ? function(e) {
        return w.test(e)
      } : function() {
        return !0
      };
    return {
      enter: function(t, r, i, s) {
        t = angular.element(t), r = c(r), i = c(i), S(t), e.enter(t, r, i), g.$$postDigest(function() {
          t = h(t), N("enter", "ng-enter", t, r, i, n, s)
        })
      },
      leave: function(t, n) {
        t = angular.element(t), C(t), S(t), g.$$postDigest(function() {
          N("leave", "ng-leave", h(t), null, null, function() {
            e.leave(t)
          }, n)
        })
      },
      move: function(t, r, i, s) {
        t = angular.element(t), r = c(r), i = c(i), C(t), S(t), e.move(t, r, i), g.$$postDigest(function() {
          t = h(t), N("move", "ng-move", t, r, i, n, s)
        })
      },
      addClass: function(t, n, r) {
        t = angular.element(t), t = h(t), N("addClass", n, t, null, null, function() {
          e.addClass(t, n)
        }, r)
      },
      removeClass: function(t, n, r) {
        t = angular.element(t), t = h(t), N("removeClass", n, t, null, null, function() {
          e.removeClass(t, n)
        }, r)
      },
      setClass: function(t, n, r, i) {
        t = angular.element(t), t = h(t), N("setClass", [n, r], t, null, null, function() {
          e.setClass(t, n, r)
        }, i)
      },
      enabled: function(e, t) {
        switch (arguments.length) {
          case 2:
            if (e) k(t);
            else {
              var n = t.data(o) || {};
              n.disabled = !0, t.data(o, n)
            }
            break;
          case 1:
            f.disabled = !e;
            break;
          default:
            e = !f.disabled
        }
        return !!e
      }
    }
  }]), t.register("", ["$window", "$sniffer", "$timeout", "$$animateReflow", function(e, t, i, o) {
    function k() {
      C || (C = o(function() {
        N = [], C = null, x = {}
      }))
    }

    function L(e, t) {
      C && C(), N.push(t), C = o(function() {
        r(N, function(e) {
          e()
        }), N = [], C = null, x = {}
      })
    }

    function _(e, t) {
      var n = l(e);
      e = angular.element(n), M.push(e);
      var r = Date.now() + t;
      if (r <= O) return;
      i.cancel(A), O = r, A = i(function() {
        D(M), M = []
      }, t, !1)
    }

    function D(e) {
      r(e, function(e) {
        var t = e.data(y);
        t && (t.closeAnimationFn || n)()
      })
    }

    function P(t, n) {
      var i = n ? x[n] : null;
      if (!i) {
        var o = 0,
          u = 0,
          f = 0,
          l = 0,
          h, g, y, b;
        r(t, function(t) {
          if (t.nodeType == s) {
            var n = e.getComputedStyle(t) || {};
            y = n[a + p], o = Math.max(H(y), o), b = n[a + d], h = n[a + v], u = Math.max(H(h), u), g = n[c + v], l = Math.max(H(g), l);
            var r = H(n[c + p]);
            r > 0 && (r *= parseInt(n[c + m], 10) || 1), f = Math.max(r, f)
          }
        }), i = {
          total: 0,
          transitionPropertyStyle: b,
          transitionDurationStyle: y,
          transitionDelayStyle: h,
          transitionDelay: u,
          transitionDuration: o,
          animationDelayStyle: g,
          animationDelay: l,
          animationDuration: f
        }, n && (x[n] = i)
      }
      return i
    }

    function H(e) {
      var t = 0,
        n = angular.isString(e) ? e.split(/\s*,\s*/) : [];
      return r(n, function(e) {
        t = Math.max(parseFloat(e) || 0, t)
      }), t
    }

    function B(e) {
      var t = e.parent(),
        n = t.data(g);
      return n || (t.data(g, ++T), n = T), n + "-" + l(e).getAttribute("class")
    }

    function j(e, t, r, i) {
      var s = B(t),
        o = s + " " + r,
        u = x[o] ? ++x[o].total : 0,
        a = {};
      if (u > 0) {
        var f = r + "-stagger",
          l = s + " " + f,
          c = !x[l];
        c && t.addClass(f), a = P(t, l), c && t.removeClass(f)
      }
      i = i || function(e) {
        return e()
      }, t.addClass(r);
      var h = t.data(y) || {},
        p = i(function() {
          return P(t, o)
        }),
        d = p.transitionDuration,
        v = p.animationDuration;
      if (d === 0 && v === 0) return t.removeClass(r), !1;
      t.data(y, {
        running: h.running || 0,
        itemIndex: u,
        stagger: a,
        timings: p,
        closeAnimationFn: n
      });
      var m = h.running > 0 || e == "setClass";
      return d > 0 && I(t, r, m), v > 0 && a.animationDelay > 0 && a.animationDuration === 0 && q(t), !0
    }

    function F(e) {
      return e == "ng-enter" || e == "ng-move" || e == "ng-leave"
    }

    function I(e, t, n) {
      F(t) || !n ? l(e).style[a + d] = "none" : e.addClass(b)
    }

    function q(e) {
      l(e).style[c] = "none 0s"
    }

    function R(e, t) {
      var n = a + d,
        r = l(e);
      r.style[n] && r.style[n].length > 0 && (r.style[n] = ""), e.removeClass(b)
    }

    function U(e) {
      var t = c,
        n = l(e);
      n.style[t] && n.style[t].length > 0 && (n.style[t] = "")
    }

    function z(e, t, n, i) {
      function D(e) {
        t.off(x, P), t.removeClass(a), J(t, n);
        var r = l(t);
        for (var i in N) r.style.removeProperty(N[i])
      }

      function P(e) {
        e.stopPropagation();
        var t = e.originalEvent || e,
          n = t.$manualTimeStamp || Date.now(),
          r = parseFloat(t.elapsedTime.toFixed(w));
        Math.max(n - b, 0) >= g && r >= v && i()
      }
      var s = l(t),
        o = t.data(y);
      if (s.getAttribute("class").indexOf(n) == -1 || !o) {
        i();
        return
      }
      var a = "";
      r(n.split(" "), function(e, t) {
        a += (t > 0 ? " " : "") + e + "-active"
      });
      var c = o.stagger,
        p = o.timings,
        d = o.itemIndex,
        v = Math.max(p.transitionDuration, p.animationDuration),
        m = Math.max(p.transitionDelay, p.animationDelay),
        g = m * S,
        b = Date.now(),
        x = h + " " + f,
        T = "",
        N = [];
      if (p.transitionDuration > 0) {
        var C = p.transitionPropertyStyle;
        C.indexOf("all") == -1 && (T += u + "transition-property: " + C + ";", T += u + "transition-duration: " + p.transitionDurationStyle + ";", N.push(u + "transition-property"), N.push(u + "transition-duration"))
      }
      if (d > 0) {
        if (c.transitionDelay > 0 && c.transitionDuration === 0) {
          var k = p.transitionDelayStyle;
          T += u + "transition-delay: " + W(k, c.transitionDelay, d) + "; ", N.push(u + "transition-delay")
        }
        c.animationDelay > 0 && c.animationDuration === 0 && (T += u + "animation-delay: " + W(p.animationDelayStyle, c.animationDelay, d) + "; ", N.push(u + "animation-delay"))
      }
      if (N.length > 0) {
        var L = s.getAttribute("style") || "";
        s.setAttribute("style", L + "; " + T)
      }
      t.on(x, P), t.addClass(a), o.closeAnimationFn = function() {
        D(), i()
      };
      var A = d * (Math.max(c.animationDelay, c.transitionDelay) || 0),
        O = (m + v) * E,
        M = (A + O) * S;
      return o.running++, _(t, M), D
    }

    function W(e, t, n) {
      var i = "";
      return r(e.split(","), function(e, r) {
        i += (r > 0 ? "," : "") + (n * t + parseInt(e, 10)) + "s"
      }), i
    }

    function X(e, t, n, r) {
      if (j(e, t, n, r)) return function(e) {
        e && J(t, n)
      }
    }

    function V(e, t, n, r) {
      if (t.data(y)) return z(e, t, n, r);
      J(t, n), r()
    }

    function $(e, t, r, i) {
      var s = X(e, t, r);
      if (!s) {
        k(), i();
        return
      }
      var o = s;
      return L(t, function() {
          R(t, r), U(t), o = V(e, t, r, i)
        }),
        function(e) {
          (o || n)(e)
        }
    }

    function J(e, t) {
      e.removeClass(t);
      var n = e.data(y);
      n && (n.running && n.running--, (!n.running || n.running === 0) && e.removeData(y))
    }

    function K(e, t) {
      var n = "";
      return e = angular.isArray(e) ? e : e.split(/\s+/), r(e, function(e, r) {
        e && e.length > 0 && (n += (r > 0 ? " " : "") + e + t)
      }), n
    }
    var u = "",
      a, f, c, h;
    window.ontransitionend === undefined && window.onwebkittransitionend !== undefined ? (u = "-webkit-", a = "WebkitTransition", f = "webkitTransitionEnd transitionend") : (a = "transition", f = "transitionend"), window.onanimationend === undefined && window.onwebkitanimationend !== undefined ? (u = "-webkit-", c = "WebkitAnimation", h = "webkitAnimationEnd animationend") : (c = "animation", h = "animationend");
    var p = "Duration",
      d = "Property",
      v = "Delay",
      m = "IterationCount",
      g = "$$ngAnimateKey",
      y = "$$ngAnimateCSS3Data",
      b = "ng-animate-block-transitions",
      w = 3,
      E = 1.5,
      S = 1e3,
      x = {},
      T = 0,
      N = [],
      C, A = null,
      O = 0,
      M = [];
    return {
      enter: function(e, t) {
        return $("enter", e, "ng-enter", t)
      },
      leave: function(e, t) {
        return $("leave", e, "ng-leave", t)
      },
      move: function(e, t) {
        return $("move", e, "ng-move", t)
      },
      beforeSetClass: function(e, t, n, r) {
        var i = K(n, "-remove") + " " + K(t, "-add"),
          s = X("setClass", e, i, function(r) {
            var i = e.attr("class");
            e.removeClass(n), e.addClass(t);
            var s = r();
            return e.attr("class", i), s
          });
        if (s) return L(e, function() {
          R(e, i), U(e), r()
        }), s;
        k(), r()
      },
      beforeAddClass: function(e, t, n) {
        var r = X("addClass", e, K(t, "-add"), function(n) {
          e.addClass(t);
          var r = n();
          return e.removeClass(t), r
        });
        if (r) return L(e, function() {
          R(e, t), U(e), n()
        }), r;
        k(), n()
      },
      setClass: function(e, t, n, r) {
        n = K(n, "-remove"), t = K(t, "-add");
        var i = n + " " + t;
        return V("setClass", e, i, r)
      },
      addClass: function(e, t, n) {
        return V("addClass", e, K(t, "-add"), n)
      },
      beforeRemoveClass: function(e, t, n) {
        var r = X("removeClass", e, K(t, "-remove"), function(n) {
          var r = e.attr("class");
          e.removeClass(t);
          var i = n();
          return e.attr("class", r), i
        });
        if (r) return L(e, function() {
          R(e, t), U(e), n()
        }), r;
        n()
      },
      removeClass: function(e, t, n) {
        return V("removeClass", e, K(t, "-remove"), n)
      }
    }
  }])
}]);
! function(e, t) {
  "function" == typeof define && define.amd ? define([], function() {
    return t()
  }) : "object" == typeof exports ? module.exports = t() : t()
}(this, function() {
  function e(e) {
    "use strict";
    var t = e.storageKey(),
      n = e.storage(),
      r = function() {
        var r = e.preferredLanguage();
        angular.isString(r) ? e.use(r) : n.put(t, e.use())
      };
    r.displayName = "fallbackFromIncorrectStorageValue", n ? n.get(t) ? e.use(n.get(t))["catch"](r) : r() : angular.isString(e.preferredLanguage()) && e.use(e.preferredLanguage())
  }

  function t() {
    "use strict";
    var e, t, n = null,
      r = !1,
      i = !1;
    t = {
      sanitize: function(e, t) {
        return "text" === t && (e = o(e)), e
      },
      escape: function(e, t) {
        return "text" === t && (e = s(e)), e
      },
      sanitizeParameters: function(e, t) {
        return "params" === t && (e = u(e, o)), e
      },
      escapeParameters: function(e, t) {
        return "params" === t && (e = u(e, s)), e
      }
    }, t.escaped = t.escapeParameters, this.addStrategy = function(e, n) {
      return t[e] = n, this
    }, this.removeStrategy = function(e) {
      return delete t[e], this
    }, this.useStrategy = function(e) {
      return r = !0, n = e, this
    }, this.$get = ["$injector", "$log", function(s, o) {
      var u = {},
        a = function(e, n, r) {
          return angular.forEach(r, function(r) {
            if (angular.isFunction(r)) e = r(e, n);
            else if (angular.isFunction(t[r])) e = t[r](e, n);
            else {
              if (!angular.isString(t[r])) throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '" + r + "'");
              if (!u[t[r]]) try {
                u[t[r]] = s.get(t[r])
              } catch (i) {
                throw u[t[r]] = function() {}, new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '" + r + "'")
              }
              e = u[t[r]](e, n)
            }
          }), e
        },
        f = function() {
          r || i || (o.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."), i = !0)
        };
      return s.has("$sanitize") && (e = s.get("$sanitize")), {
        useStrategy: function(e) {
          return function(t) {
            e.useStrategy(t)
          }
        }(this),
        sanitize: function(e, t, r) {
          if (n || f(), arguments.length < 3 && (r = n), !r) return e;
          var i = angular.isArray(r) ? r : [r];
          return a(e, t, i)
        }
      }
    }];
    var s = function(e) {
        var t = angular.element("<div></div>");
        return t.text(e), t.html()
      },
      o = function(t) {
        if (!e) throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");
        return e(t)
      },
      u = function(e, t) {
        if (angular.isObject(e)) {
          var n = angular.isArray(e) ? [] : {};
          return angular.forEach(e, function(e, r) {
            n[r] = u(e, t)
          }), n
        }
        return angular.isNumber(e) ? e : t(e)
      }
  }

  function n(e, t, n, r) {
    "use strict";
    var i, s, o, u, a, f, l, c, h, p, d, v, m, g, y, b = {},
      w = [],
      E = e,
      S = [],
      x = "translate-cloak",
      T = !1,
      N = !1,
      C = ".",
      k = !1,
      L = 0,
      A = !0,
      O = "default",
      M = {
        "default": function(e) {
          return (e || "").split("-").join("_")
        },
        java: function(e) {
          var t = (e || "").split("-").join("_"),
            n = t.split("_");
          return n.length > 1 ? n[0].toLowerCase() + "_" + n[1].toUpperCase() : t
        },
        bcp47: function(e) {
          var t = (e || "").split("_").join("-"),
            n = t.split("-");
          return n.length > 1 ? n[0].toLowerCase() + "-" + n[1].toUpperCase() : t
        }
      },
      _ = "2.8.0",
      D = function() {
        if (angular.isFunction(r.getLocale)) return r.getLocale();
        var e, n, i = t.$get().navigator,
          s = ["language", "browserLanguage", "systemLanguage", "userLanguage"];
        if (angular.isArray(i.languages))
          for (e = 0; e < i.languages.length; e++)
            if (n = i.languages[e], n && n.length) return n;
        for (e = 0; e < s.length; e++)
          if (n = i[s[e]], n && n.length) return n;
        return null
      };
    D.displayName = "angular-translate/service: getFirstBrowserLanguage";
    var P = function() {
      var e = D() || "";
      return M[O] && (e = M[O](e)), e
    };
    P.displayName = "angular-translate/service: getLocale";
    var H = function(e, t) {
        for (var n = 0, r = e.length; r > n; n++)
          if (e[n] === t) return n;
        return -1
      },
      B = function() {
        return this.toString().replace(/^\s+|\s+$/g, "")
      },
      j = function(e) {
        for (var t = [], n = angular.lowercase(e), r = 0, i = w.length; i > r; r++) t.push(angular.lowercase(w[r]));
        if (H(t, n) > -1) return e;
        if (s) {
          var o;
          for (var u in s) {
            var a = !1,
              f = Object.prototype.hasOwnProperty.call(s, u) && angular.lowercase(u) === angular.lowercase(e);
            if ("*" === u.slice(-1) && (a = u.slice(0, -1) === e.slice(0, u.length - 1)), (f || a) && (o = s[u], H(t, angular.lowercase(o)) > -1)) return o
          }
        }
        if (e) {
          var l = e.split("_");
          if (l.length > 1 && H(t, angular.lowercase(l[0])) > -1) return l[0]
        }
        return e
      },
      F = function(e, t) {
        if (!e && !t) return b;
        if (e && !t) {
          if (angular.isString(e)) return b[e]
        } else angular.isObject(b[e]) || (b[e] = {}), angular.extend(b[e], I(t));
        return this
      };
    this.translations = F, this.cloakClassName = function(e) {
      return e ? (x = e, this) : x
    }, this.nestedObjectDelimeter = function(e) {
      return e ? (C = e, this) : C
    };
    var I = function(e, t, n, r) {
      var i, s, o, u;
      t || (t = []), n || (n = {});
      for (i in e) Object.prototype.hasOwnProperty.call(e, i) && (u = e[i], angular.isObject(u) ? I(u, t.concat(i), n, i) : (s = t.length ? "" + t.join(C) + C + i : i, t.length && i === r && (o = "" + t.join(C), n[o] = "@:" + s), n[s] = u));
      return n
    };
    I.displayName = "flatObject", this.addInterpolation = function(e) {
      return S.push(e), this
    }, this.useMessageFormatInterpolation = function() {
      return this.useInterpolation("$translateMessageFormatInterpolation")
    }, this.useInterpolation = function(e) {
      return p = e, this
    }, this.useSanitizeValueStrategy = function(e) {
      return n.useStrategy(e), this
    }, this.preferredLanguage = function(e) {
      return e ? (q(e), this) : i
    };
    var q = function(e) {
      return e && (i = e), i
    };
    this.translationNotFoundIndicator = function(e) {
      return this.translationNotFoundIndicatorLeft(e), this.translationNotFoundIndicatorRight(e), this
    }, this.translationNotFoundIndicatorLeft = function(e) {
      return e ? (m = e, this) : m
    }, this.translationNotFoundIndicatorRight = function(e) {
      return e ? (g = e, this) : g
    }, this.fallbackLanguage = function(e) {
      return R(e), this
    };
    var R = function(e) {
      return e ? (angular.isString(e) ? (u = !0, o = [e]) : angular.isArray(e) && (u = !1, o = e), angular.isString(i) && H(o, i) < 0 && o.push(i), this) : u ? o[0] : o
    };
    this.use = function(e) {
      if (e) {
        if (!b[e] && !d) throw new Error("$translateProvider couldn't find translationTable for langKey: '" + e + "'");
        return a = e, this
      }
      return a
    };
    var U = function(e) {
      return e ? (E = e, this) : c ? c + E : E
    };
    this.storageKey = U, this.useUrlLoader = function(e, t) {
      return this.useLoader("$translateUrlLoader", angular.extend({
        url: e
      }, t))
    }, this.useStaticFilesLoader = function(e) {
      return this.useLoader("$translateStaticFilesLoader", e)
    }, this.useLoader = function(e, t) {
      return d = e, v = t || {}, this
    }, this.useLocalStorage = function() {
      return this.useStorage("$translateLocalStorage")
    }, this.useCookieStorage = function() {
      return this.useStorage("$translateCookieStorage")
    }, this.useStorage = function(e) {
      return l = e, this
    }, this.storagePrefix = function(e) {
      return e ? (c = e, this) : e
    }, this.useMissingTranslationHandlerLog = function() {
      return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")
    }, this.useMissingTranslationHandler = function(e) {
      return h = e, this
    }, this.usePostCompiling = function(e) {
      return T = !!e, this
    }, this.forceAsyncReload = function(e) {
      return N = !!e, this
    }, this.uniformLanguageTag = function(e) {
      return e ? angular.isString(e) && (e = {
        standard: e
      }) : e = {}, O = e.standard, this
    }, this.determinePreferredLanguage = function(e) {
      var t = e && angular.isFunction(e) ? e() : P();
      return i = w.length ? j(t) : t, this
    }, this.registerAvailableLanguageKeys = function(e, t) {
      return e ? (w = e, t && (s = t), this) : w
    }, this.useLoaderCache = function(e) {
      return e === !1 ? y = void 0 : e === !0 ? y = !0 : "undefined" == typeof e ? y = "$translationCache" : e && (y = e), this
    }, this.directivePriority = function(e) {
      return void 0 === e ? L : (L = e, this)
    }, this.statefulFilter = function(e) {
      return void 0 === e ? A : (A = e, this)
    }, this.$get = ["$log", "$injector", "$rootScope", "$q", function(e, t, n, r) {
      var s, c, w, O, M = t.get(p || "$translateDefaultInterpolation"),
        D = !1,
        P = {},
        W = {},
        X = function(e, t, n, u) {
          if (angular.isArray(e)) {
            var f = function(e) {
              for (var i = {}, s = [], o = function(e) {
                  var s = r.defer(),
                    o = function(t) {
                      i[e] = t, s.resolve([e, t])
                    };
                  return X(e, t, n, u).then(o, o), s.promise
                }, a = 0, f = e.length; f > a; a++) s.push(o(e[a]));
              return r.all(s).then(function() {
                return i
              })
            };
            return f(e)
          }
          var h = r.defer();
          e && (e = B.apply(e));
          var p = function() {
            var e = i ? W[i] : W[a];
            if (c = 0, l && !e) {
              var t = s.get(E);
              if (e = W[t], o && o.length) {
                var n = H(o, t);
                c = 0 === n ? 1 : 0, H(o, i) < 0 && o.push(i)
              }
            }
            return e
          }();
          if (p) {
            var d = function() {
              at(e, t, n, u).then(h.resolve, h.reject)
            };
            d.displayName = "promiseResolved", p["finally"](d, h.reject)
          } else at(e, t, n, u).then(h.resolve, h.reject);
          return h.promise
        },
        V = function(e) {
          return m && (e = [m, e].join(" ")), g && (e = [e, g].join(" ")), e
        },
        $ = function(e) {
          a = e, l && s.put(X.storageKey(), a), n.$emit("$translateChangeSuccess", {
            language: e
          }), M.setLocale(a);
          var t = function(e, t) {
            P[t].setLocale(a)
          };
          t.displayName = "eachInterpolatorLocaleSetter", angular.forEach(P, t), n.$emit("$translateChangeEnd", {
            language: e
          })
        },
        Y = function(e) {
          if (!e) throw "No language key specified for loading.";
          var i = r.defer();
          n.$emit("$translateLoadingStart", {
            language: e
          }), D = !0;
          var s = y;
          "string" == typeof s && (s = t.get(s)), D && O && O.resolve(), O = r.defer();
          var o = angular.extend({}, v, {
              key: e,
              $http: angular.extend({}, {
                cache: s,
                timeout: O.promise
              }, v.$http)
            }),
            u = function(t) {
              var r = {};
              n.$emit("$translateLoadingSuccess", {
                language: e
              }), angular.isArray(t) ? angular.forEach(t, function(e) {
                angular.extend(r, I(e))
              }) : angular.extend(r, I(t)), D = !1, i.resolve({
                key: e,
                table: r
              }), n.$emit("$translateLoadingEnd", {
                language: e
              })
            };
          u.displayName = "onLoaderSuccess";
          var a = function(e) {
            n.$emit("$translateLoadingError", {
              language: e
            }), i.reject(e), n.$emit("$translateLoadingEnd", {
              language: e
            })
          };
          return a.displayName = "onLoaderError", t.get(d)(o).then(u, a), i.promise
        };
      if (l && (s = t.get(l), !s.get || !s.put)) throw new Error("Couldn't use storage '" + l + "', missing get() or put() method!");
      if (S.length) {
        var Z = function(e) {
          var n = t.get(e);
          n.setLocale(i || a), P[n.getInterpolationIdentifier()] = n
        };
        Z.displayName = "interpolationFactoryAdder", angular.forEach(S, Z)
      }
      var et = function(e) {
          var t = r.defer();
          if (Object.prototype.hasOwnProperty.call(b, e)) t.resolve(b[e]);
          else if (W[e]) {
            var n = function(e) {
              F(e.key, e.table), t.resolve(e.table)
            };
            n.displayName = "translationTableResolver", W[e].then(n, t.reject)
          } else t.reject();
          return t.promise
        },
        tt = function(e, t, n, i) {
          var s = r.defer(),
            o = function(r) {
              if (Object.prototype.hasOwnProperty.call(r, t)) {
                i.setLocale(e);
                var o = r[t];
                "@:" === o.substr(0, 2) ? tt(e, o.substr(2), n, i).then(s.resolve, s.reject) : s.resolve(i.interpolate(r[t], n)), i.setLocale(a)
              } else s.reject()
            };
          return o.displayName = "fallbackTranslationResolver", et(e).then(o, s.reject), s.promise
        },
        nt = function(e, t, n, r) {
          var i, s = b[e];
          if (s && Object.prototype.hasOwnProperty.call(s, t)) {
            if (r.setLocale(e), i = r.interpolate(s[t], n), "@:" === i.substr(0, 2)) return nt(e, i.substr(2), n, r);
            r.setLocale(a)
          }
          return i
        },
        rt = function(e, n) {
          if (h) {
            var r = t.get(h)(e, a, n);
            return void 0 !== r ? r : e
          }
          return e
        },
        it = function(e, t, n, i, s) {
          var u = r.defer();
          if (e < o.length) {
            var a = o[e];
            tt(a, t, n, i).then(u.resolve, function() {
              it(e + 1, t, n, i, s).then(u.resolve)
            })
          } else u.resolve(s ? s : rt(t, n));
          return u.promise
        },
        st = function(e, t, n, r) {
          var i;
          if (e < o.length) {
            var s = o[e];
            i = nt(s, t, n, r), i || (i = st(e + 1, t, n, r))
          }
          return i
        },
        ot = function(e, t, n, r) {
          return it(w > 0 ? w : c, e, t, n, r)
        },
        ut = function(e, t, n) {
          return st(w > 0 ? w : c, e, t, n)
        },
        at = function(e, t, n, i) {
          var s = r.defer(),
            u = a ? b[a] : b,
            f = n ? P[n] : M;
          if (u && Object.prototype.hasOwnProperty.call(u, e)) {
            var l = u[e];
            "@:" === l.substr(0, 2) ? X(l.substr(2), t, n, i).then(s.resolve, s.reject) : s.resolve(f.interpolate(l, t))
          } else {
            var c;
            h && !D && (c = rt(e, t)), a && o && o.length ? ot(e, t, f, i).then(function(e) {
              s.resolve(e)
            }, function(e) {
              s.reject(V(e))
            }) : h && !D && c ? s.resolve(i ? i : c) : i ? s.resolve(i) : s.reject(V(e))
          }
          return s.promise
        },
        ft = function(e, t, n) {
          var r, i = a ? b[a] : b,
            s = M;
          if (P && Object.prototype.hasOwnProperty.call(P, n) && (s = P[n]), i && Object.prototype.hasOwnProperty.call(i, e)) {
            var u = i[e];
            r = "@:" === u.substr(0, 2) ? ft(u.substr(2), t, n) : s.interpolate(u, t)
          } else {
            var f;
            h && !D && (f = rt(e, t)), a && o && o.length ? (c = 0, r = ut(e, t, s)) : r = h && !D && f ? f : V(e)
          }
          return r
        },
        lt = function(e) {
          f === e && (f = void 0), W[e] = void 0
        };
      X.preferredLanguage = function(e) {
        return e && q(e), i
      }, X.cloakClassName = function() {
        return x
      }, X.nestedObjectDelimeter = function() {
        return C
      }, X.fallbackLanguage = function(e) {
        if (void 0 !== e && null !== e) {
          if (R(e), d && o && o.length)
            for (var t = 0, n = o.length; n > t; t++) W[o[t]] || (W[o[t]] = Y(o[t]));
          X.use(X.use())
        }
        return u ? o[0] : o
      }, X.useFallbackLanguage = function(e) {
        if (void 0 !== e && null !== e)
          if (e) {
            var t = H(o, e);
            t > -1 && (w = t)
          } else w = 0
      }, X.proposedLanguage = function() {
        return f
      }, X.storage = function() {
        return s
      }, X.use = function(e) {
        if (!e) return a;
        var t = r.defer();
        n.$emit("$translateChangeStart", {
          language: e
        });
        var i = j(e);
        return i && (e = i), !N && b[e] || !d || W[e] ? f === e && W[e] ? W[e].then(function(e) {
          return t.resolve(e.key), e
        }, function(e) {
          return t.reject(e), r.reject(e)
        }) : (t.resolve(e), $(e)) : (f = e, W[e] = Y(e).then(function(e) {
          return F(e.key, e.table), t.resolve(e.key), $(e.key), e
        }, function(e) {
          return n.$emit("$translateChangeError", {
            language: e
          }), t.reject(e), n.$emit("$translateChangeEnd", {
            language: e
          }), r.reject(e)
        }), W[e]["finally"](function() {
          lt(e)
        })), t.promise
      }, X.storageKey = function() {
        return U()
      }, X.isPostCompilingEnabled = function() {
        return T
      }, X.isForceAsyncReloadEnabled = function() {
        return N
      }, X.refresh = function(e) {
        function t() {
          s.resolve(), n.$emit("$translateRefreshEnd", {
            language: e
          })
        }

        function i() {
          s.reject(), n.$emit("$translateRefreshEnd", {
            language: e
          })
        }
        if (!d) throw new Error("Couldn't refresh translation table, no loader registered!");
        var s = r.defer();
        if (n.$emit("$translateRefreshStart", {
            language: e
          }), e)
          if (b[e]) {
            var u = function(n) {
              F(n.key, n.table), e === a && $(a), t()
            };
            u.displayName = "refreshPostProcessor", Y(e).then(u, i)
          } else i();
        else {
          var f = [],
            l = {};
          if (o && o.length)
            for (var c = 0, h = o.length; h > c; c++) f.push(Y(o[c])), l[o[c]] = !0;
          a && !l[a] && f.push(Y(a));
          var p = function(e) {
            b = {}, angular.forEach(e, function(e) {
              F(e.key, e.table)
            }), a && $(a), t()
          };
          p.displayName = "refreshPostProcessor", r.all(f).then(p, i)
        }
        return s.promise
      }, X.instant = function(e, t, n) {
        if (null === e || angular.isUndefined(e)) return e;
        if (angular.isArray(e)) {
          for (var r = {}, s = 0, u = e.length; u > s; s++) r[e[s]] = X.instant(e[s], t, n);
          return r
        }
        if (angular.isString(e) && e.length < 1) return e;
        e && (e = B.apply(e));
        var f, l = [];
        i && l.push(i), a && l.push(a), o && o.length && (l = l.concat(o));
        for (var c = 0, p = l.length; p > c; c++) {
          var d = l[c];
          if (b[d] && ("undefined" != typeof b[d][e] ? f = ft(e, t, n) : (m || g) && (f = V(e))), "undefined" != typeof f) break
        }
        return f || "" === f || (f = M.interpolate(e, t), h && !D && (f = rt(e, t))), f
      }, X.versionInfo = function() {
        return _
      }, X.loaderCache = function() {
        return y
      }, X.directivePriority = function() {
        return L
      }, X.statefulFilter = function() {
        return A
      }, X.isReady = function() {
        return k
      };
      var ct = r.defer();
      X.onReady = function(e) {
        var t = r.defer();
        return angular.isFunction(e) && t.promise.then(e), k ? t.resolve() : ct.promise.then(function() {
          t.resolve()
        }), t.promise
      };
      var ht = n.$on("$translateReady", function() {
          ct.resolve(), ht(), ht = null
        }),
        pt = n.$on("$translateChangeEnd", function() {
          ct.resolve(), pt(), pt = null
        });
      if (d) {
        if (angular.equals(b, {}) && X.use() && X.use(X.use()), o && o.length)
          for (var dt = function(e) {
              return F(e.key, e.table), n.$emit("$translateChangeEnd", {
                language: e.key
              }), e
            }, vt = 0, mt = o.length; mt > vt; vt++) {
            var gt = o[vt];
            (N || !b[gt]) && (W[gt] = Y(gt).then(dt))
          }
      } else n.$emit("$translateReady", {
        language: X.use()
      });
      return X
    }]
  }

  function r(e, t) {
    "use strict";
    var n, r = {},
      i = "default";
    return r.setLocale = function(e) {
      n = e
    }, r.getInterpolationIdentifier = function() {
      return i
    }, r.useSanitizeValueStrategy = function(e) {
      return t.useStrategy(e), this
    }, r.interpolate = function(n, r) {
      r = r || {}, r = t.sanitize(r, "params");
      var i = e(n)(r);
      return i = t.sanitize(i, "text")
    }, r
  }

  function i(e, t, n, r, i, o) {
    "use strict";
    var u = function() {
      return this.toString().replace(/^\s+|\s+$/g, "")
    };
    return {
      restrict: "AE",
      scope: !0,
      priority: e.directivePriority(),
      compile: function(t, a) {
        var f = a.translateValues ? a.translateValues : void 0,
          l = a.translateInterpolation ? a.translateInterpolation : void 0,
          p = t[0].outerHTML.match(/translate-value-+/i),
          v = "^(.*)(" + n.startSymbol() + ".*" + n.endSymbol() + ")(.*)",
          m = "^(.*)" + n.startSymbol() + "(.*)" + n.endSymbol() + "(.*)";
        return function(t, y, b) {
          t.interpolateParams = {}, t.preText = "", t.postText = "", t.translateNamespace = s(t);
          var w = {},
            E = function(e, n, r) {
              if (n.translateValues && angular.extend(e, i(n.translateValues)(t.$parent)), p)
                for (var s in r)
                  if (Object.prototype.hasOwnProperty.call(n, s) && "translateValue" === s.substr(0, 14) && "translateValues" !== s) {
                    var o = angular.lowercase(s.substr(14, 1)) + s.substr(15);
                    e[o] = r[s]
                  }
            },
            S = function(e) {
              if (angular.isFunction(S._unwatchOld) && (S._unwatchOld(), S._unwatchOld = void 0), angular.equals(e, "") || !angular.isDefined(e)) {
                var r = u.apply(y.text()),
                  i = r.match(v);
                if (angular.isArray(i)) {
                  t.preText = i[1], t.postText = i[3], w.translate = n(i[2])(t.$parent);
                  var s = r.match(m);
                  angular.isArray(s) && s[2] && s[2].length && (S._unwatchOld = t.$watch(s[2], function(e) {
                    w.translate = e, A()
                  }))
                } else w.translate = r
              } else w.translate = e;
              A()
            },
            x = function(e) {
              b.$observe(e, function(t) {
                w[e] = t, A()
              })
            };
          E(t.interpolateParams, b, a);
          var T = !0;
          b.$observe("translate", function(e) {
            "undefined" == typeof e ? S("") : "" === e && T || (w.translate = e, A()), T = !1
          });
          for (var N in b) b.hasOwnProperty(N) && "translateAttr" === N.substr(0, 13) && x(N);
          if (b.$observe("translateDefault", function(e) {
              t.defaultText = e
            }), f && b.$observe("translateValues", function(e) {
              e && t.$parent.$watch(function() {
                angular.extend(t.interpolateParams, i(e)(t.$parent))
              })
            }), p) {
            var C = function(e) {
              b.$observe(e, function(n) {
                var r = angular.lowercase(e.substr(14, 1)) + e.substr(15);
                t.interpolateParams[r] = n
              })
            };
            for (var L in b) Object.prototype.hasOwnProperty.call(b, L) && "translateValue" === L.substr(0, 14) && "translateValues" !== L && C(L)
          }
          var A = function() {
              for (var e in w) w.hasOwnProperty(e) && void 0 !== w[e] && O(e, w[e], t, t.interpolateParams, t.defaultText, t.translateNamespace)
            },
            O = function(t, n, r, i, s, o) {
              n ? (o && "." === n.charAt(0) && (n = o + n), e(n, i, l, s).then(function(e) {
                M(e, r, !0, t)
              }, function(e) {
                M(e, r, !1, t)
              })) : M(n, r, !1, t)
            },
            M = function(t, n, i, s) {
              if ("translate" === s) {
                i || "undefined" == typeof n.defaultText || (t = n.defaultText), y.empty().append(n.preText + t + n.postText);
                var o = e.isPostCompilingEnabled(),
                  u = "undefined" != typeof a.translateCompile,
                  f = u && "false" !== a.translateCompile;
                (o && !u || f) && r(y.contents())(n)
              } else {
                i || "undefined" == typeof n.defaultText || (t = n.defaultText);
                var l = b.$attr[s];
                "data-" === l.substr(0, 5) && (l = l.substr(5)), l = l.substr(15), y.attr(l, t)
              }
            };
          (f || p || b.translateDefault) && t.$watch("interpolateParams", A, !0);
          var _ = o.$on("$translateChangeSuccess", A);
          y.text().length ? S(b.translate ? b.translate : "") : b.translate && S(b.translate), A(), t.$on("$destroy", _)
        }
      }
    }
  }

  function s(e) {
    "use strict";
    return e.translateNamespace ? e.translateNamespace : e.$parent ? s(e.$parent) : void 0
  }

  function o(e) {
    "use strict";
    return {
      compile: function(t) {
        var n = function() {
            t.addClass(e.cloakClassName())
          },
          r = function() {
            t.removeClass(e.cloakClassName())
          };
        return e.onReady(function() {
            r()
          }), n(),
          function(t, i, s) {
            s.translateCloak && s.translateCloak.length && s.$observe("translateCloak", function(t) {
              e(t).then(r, n)
            })
          }
      }
    }
  }

  function u() {
    "use strict";
    return {
      restrict: "A",
      scope: !0,
      compile: function() {
        return {
          pre: function(e, t, n) {
            e.translateNamespace = s(e), e.translateNamespace && "." === n.translateNamespace.charAt(0) ? e.translateNamespace += n.translateNamespace : e.translateNamespace = n.translateNamespace
          }
        }
      }
    }
  }

  function s(e) {
    "use strict";
    return e.translateNamespace ? e.translateNamespace : e.$parent ? s(e.$parent) : void 0
  }

  function a(e, t) {
    "use strict";
    var n = function(n, r, i) {
      return angular.isObject(r) || (r = e(r)(this)), t.instant(n, r, i)
    };
    return t.statefulFilter() && (n.$stateful = !0), n
  }

  function f(e) {
    "use strict";
    return e("translations")
  }
  return angular.module("pascalprecht.translate", ["ng"]).run(e), e.$inject = ["$translate"], e.displayName = "runTranslate", angular.module("pascalprecht.translate").provider("$translateSanitization", t), angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider", {}).provider("$translate", n), n.$inject = ["$STORAGE_KEY", "$windowProvider", "$translateSanitizationProvider", "pascalprechtTranslateOverrider"], n.displayName = "displayName", angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation", r), r.$inject = ["$interpolate", "$translateSanitization"], r.displayName = "$translateDefaultInterpolation", angular.module("pascalprecht.translate").constant("$STORAGE_KEY", "NG_TRANSLATE_LANG_KEY"), angular.module("pascalprecht.translate").directive("translate", i), i.$inject = ["$translate", "$q", "$interpolate", "$compile", "$parse", "$rootScope"], i.displayName = "translateDirective", angular.module("pascalprecht.translate").directive("translateCloak", o), o.$inject = ["$translate"], o.displayName = "translateCloakDirective", angular.module("pascalprecht.translate").directive("translateNamespace", u), u.displayName = "translateNamespaceDirective", angular.module("pascalprecht.translate").filter("translate", a), a.$inject = ["$parse", "$translate"], a.displayName = "translateFilterFactory", angular.module("pascalprecht.translate").factory("$translationCache", f), f.$inject = ["$cacheFactory"], f.displayName = "$translationCache", "pascalprecht.translate"
});
(function(e, t) {
  typeof define == "function" && define.amd ? define([], function() {
    return t()
  }) : typeof exports == "object" ? module.exports = t() : t()
})(this, function() {
  function e(e, t) {
    "use strict";
    return function(n) {
      if (!n || !angular.isArray(n.files) && (!angular.isString(n.prefix) || !angular.isString(n.suffix))) throw new Error("Couldn't load static files, no files and prefix or suffix specified!");
      n.files || (n.files = [{
        prefix: n.prefix,
        suffix: n.suffix
      }]);
      var r = function(r) {
          if (!r || !angular.isString(r.prefix) || !angular.isString(r.suffix)) throw new Error("Couldn't load static file, no prefix or suffix specified!");
          return t(angular.extend({
            url: [r.prefix, n.key, r.suffix].join(""),
            method: "GET",
            params: ""
          }, n.$http)).then(function(e) {
            return e.data
          }, function() {
            return e.reject(n.key)
          })
        },
        i = [],
        s = n.files.length;
      for (var o = 0; o < s; o++) i.push(r({
        prefix: n.files[o].prefix,
        key: n.key,
        suffix: n.files[o].suffix
      }));
      return e.all(i).then(function(e) {
        var t = e.length,
          n = {};
        for (var r = 0; r < t; r++)
          for (var i in e[r]) n[i] = e[r][i];
        return n
      })
    }
  }
  return e.$inject = ["$q", "$http"], angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader", e), e.displayName = "$translateStaticFilesLoader", "pascalprecht.translate"
});
var app = angular.module("bncApp", ["pascalprecht.translate", "ui.router", "ngAnimate"]);

function changeSide(e) {
  var t = $(".buttons-tab .active").index() + 1,
    n = $("#tradeDiv");
  t > e ? (n.hasClass("toLeft") && n.removeClass("toLeft"), n.hasClass("toRight") || n.addClass("toRight")) : t < e && (n.hasClass("toRight") && n.removeClass("toRight"), n.hasClass("toLeft") || n.addClass("toLeft"))
}
app.config(["$httpProvider", "$translateProvider", function(e, t) {
  function n() {
    t.preferredLanguage(localStorage.lang), t.translations("en", mmen), t.translations("cn", mmcn), t.useSanitizeValueStrategy("escape")
  }
  e.interceptors.push("myInterceptor"), localStorage.lang ? n() : $.ajax({
    url: "/ip2location/countryShort.html",
    type: "GET",
    dataType: "JSON",
    async: !1,
    success: function(e) {
      e.success ? (e.ctry == "CN" ? localStorage.lang = "cn" : localStorage.lang = "en", n()) : (localStorage.lang = "en", n())
    },
    error: function() {
      localStorage.lang = "en", n()
    }
  })
}]).directive("repeatFinish", function() {
  return {
    link: function(e, t, n) {
      e.$last == 1 && e.$eval(n.repeatFinish)
    }
  }
}).controller("bncController", ["$scope", "$rootScope", "$http", "$translate", function(e, t, n, r) {
  t.notChinese = notChinese, t.siteName = r.instant("siteName"), t.gang = "-", t.accountEmail = localStorage.email, t.cur_lang = window.localStorage.lang, e.switching = function(n) {
    r.use(n), window.localStorage.lang = n, e.cur_lang = n, t.cur_lang = n, window.kline && window.kline.switchLang && window.kline.switchLang()
  }, e.isLogin = !1, t.accountEmail != "null" && (e.isLogin = !0), e.logout = function() {
    n.post("/user/loginOut.html").success(function(e) {
      if (e.success) {
        var t = new Date;
        t.setTime(t.getTime() - 1e3), document.cookie = "logined=;path=/;expires=" + t.toGMTString() + "", document.cookie = "CSRFToken=;path=/" + t.toGMTString() + "", document.cookie = "mobile=;path=/;expires=" + t.toGMTString() + "", document.cookie = "email=;path=/;expires=" + t.toGMTString() + "", window.location.href = "/indexSpa.html"
      }
    })
  }
}]).filter("T", ["$translate", function(e) {
  return function(t) {
    if (t) return e.instant(t)
  }
}]);
app.factory("mktdataStreamer", ["$http", "$interval", function(e, t) {
  return function() {
    var e = {};
    return e.isRunning = !1, e.restart = !1, e.startStream = function(t, n) {
      e.isRunning = !0, e.url = t, e.lastTradeIds = {}, e.backedMsg = [], e.buildingState = !0, e.restart = !0, e.processData = function(e) {
        n(e)
      }, e.ws ? e.ws.close() : e.ws = e._makeStream()
    }, e.stopStream = function() {
      e.restart = !1, e.ws && e.ws.close(), e.lastTradeIds = {}, e.backedMsg = [], e.buildingState = !0, e.isRunning = !1
    }, e._rolloverStream = function() {
      console.log("Rolling over stream!"), e.backedMsg = [], e.buildingState = !0, e.ws = e._makeStream()
    }, e._makeStream = function() {
      var t = new WebSocket(e.url + "/!ticker@arr");
      return t.onopen = function() {
        console.log("Socket has been opened for: market data!"), e.lastConntectTime = new Date, e._buildState()
      }, t.onclose = function(t) {
        console.log("Socket has been CLOSED for: market data!"), e.restart ? (new Date).getTime() - e.lastConntectTime.getTime() < 12e4 ? setTimeout(function() {
          console.log("streamer reconntect delay=========="), e._rolloverStream()
        }, 1e3) : (console.log("streamer reconntect now=========="), e._rolloverStream()) : (delete e.ws, console.log("Socket done!"))
      }, t.onmessage = function(t) {
        var n = JSON.parse(t.data);
        n = e.converter(n), console.log("Market data WS recv, symbol: " + n.symbol + ", lastUpdateTime: " + n.lastUpdateTime), e.buildingState ? (e.backedMsg.push(n), console.log("Adding msg to backlog: " + n.eventType)) : e.processData(n)
      }, t
    }, e._buildState = function() {
      e.buildingState = !1
    }, e.converter = function(e) {
      var t = [];
      for (var n = 0; n < e.length; n++) {
        var r = {},
          i = e[n];
        r.eventType = "trade", r.symbol = i.s, r.priceChange = i.p, r.priceChangePersent = i.P, r.weightedAvgPrice = i.w, r.price = i.c, r.open = i.o, r.high = i.h, r.low = i.l, r.volume = i.v, r.quoteVolume = i.q, r.openTime = i.O, r.closeTime = i.C, t.push(r)
      }
      return t
    }, e._isDuplicate = function(t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        if (r.eventType == "trade")
          if (e.lastTradeIds[r.symbol] == undefined || e.lastTradeIds[r.symbol] < r.tradeId) return e.lastTradeIds[r.symbol] = r.tradeId, !1
      }
      return !0
    }, e
  }
}]);
app.factory("klineStreamer", ["$http", "$interval", "$rootScope", function(e, t, n) {
  return function() {
    var e = {};
    return e.isRunning = !1, e.restart = !1, e.lastTradeId = -1, e.root_url = location.host.match("localhost") || location.host.match("192.168.0") ? "/exchange/public" : "/api/v1", e.startStream = function(t, n, r, i) {
      e.isRunning = !0, e.url = n, e.interval = r, e.lastDepthId = -2, e.lastKlineId = -1, e.backedMsg = [], e.restart = !0, e.lastConntectTime = new Date, e.symbol = t, e.lowerCaseSymbol = t.toLowerCase(), e.processData = function(t) {
        e._isDuplicate(t) || i(t)
      }, e.ws ? e.ws.close() : e.ws = e._makeStream()
    }, e.stopStream = function() {
      e.restart = !1, e.ws && e.ws.close(), e.lastDepthId = -1, e.lastKlineId = -1, e.backedMsg = [], e.isRunning = !1
    }, e._rolloverStream = function() {
      console.log("Rolling over stream!"), e.backedMsg = [], e.ws = e._makeStream()
    }, e._makeStream = function() {
      var t = new WebSocket(e.url + "/" + e.lowerCaseSymbol + "@kline_" + e.interval + ".b10");
      return n.websocketStatus = "connecting", t.onopen = function() {
        n.websocketStatus = "connected", console.log("Socket has been opened for: " + e.symbol + "!"), e.lastConntectTime = new Date
      }, t.onclose = function(t) {
        console.log("Socket has been CLOSED for: " + e.symbol + "!"), e.restart ? (n.websocketStatus = "reconnecting", (new Date).getTime() - e.lastConntectTime.getTime() < 12e4 ? setTimeout(function() {
          console.log("streamer reconntect delay=========="), e._rolloverStream()
        }, 1e3) : (console.log("streamer reconntect now=========="), e._rolloverStream())) : (delete e.ws, console.log("Socket done!"))
      }, t.onerror = function() {
        n.websocketStatus = "error"
      }, t.onmessage = function(t) {
        var n = JSON.parse(t.data);
        n = e.converter(n), console.log("WS recv: " + n), e.processData(n)
      }, t
    }, e.converter = function(e) {
      var t = {};
      return t.eventType = e.e, t.eventTime = e.E, t.symbol = e.s, t.kline = {}, t.kline.time = e.k.t, t.kline.closeTime = e.k.T, t.kline.symbol = e.k.s, t.kline.interval = e.k.i, t.kline.firstId = e.k.f, t.kline.lastId = e.k.L, t.kline.open = e.k.o, t.kline.close = e.k.c, t.kline.high = e.k.h, t.kline.low = e.k.l, t.kline.volume = e.k.v, t.kline.quoteVolume = e.k.q, t.kline.count = e.k.n, t.kline.closed = e.k.x, t
    }, e._isDuplicate = function(e) {
      return e.eventType == "kline" ? !1 : (console.log("Error! Bad data received:"), console.log(e), !0)
    }, e
  }
}]);
app.factory("tradeStreamer", ["$http", "$interval", function(e, t) {
  return function() {
    var t = {},
      n;
    return t.isRunning = !1, t.restart = !1, t.lastAggTradeId = -2, t.root_url = location.host.match("localhost") || location.host.match("192.168.0") ? "/exchange/public" : "/api/v1", t.startStream = function(e, n, r) {
      t.isRunning = !0, t.lastDepthId = -2, t.lastKlineId = -1, t.backedMsg = [], t.buildingState = !0, t.restart = !0, t.lastConntectTime, t.symbol = e, t.lowerCaseSymbol = e.toLowerCase(), t.url = n, t.processData = function(e) {
        t._isDuplicate(e) || r(e)
      }, t.ws ? t.ws.close() : t._getLastTrade(function(e) {
        console.log("Successfully Get Trades First Time"), e = t.converterGets(e);
        for (var n = 0; n < e.length; n++) n == 0 && (e[0].clean = !0), t.processData(e[n]);
        t.ws = t._makeStream()
      })
    }, t.stopStream = function() {
      t.restart = !1, t.ws && t.ws.close(), t.lastKlineId = -1, t.backedMsg = [], t.buildingState = !0, t.isRunning = !1
    }, t._rolloverStream = function() {
      console.log("Rolling over stream!"), t.backedMsg = [], t.buildingState = !0, t.ws = t._makeStream()
    }, t._makeStream = function() {
      var r = new WebSocket(t.url + "/" + t.lowerCaseSymbol + "@aggTrade.b10");
      return r.onopen = function() {
        console.log("Socket has been opened for: " + t.symbol + "!"), t.lastConntectTime = new Date, t._buildState(), clearInterval(n)
      }, r.onclose = function(e) {
        console.log("Socket has been CLOSED for: " + t.symbol + "!"), t.restart ? (new Date).getTime() - t.lastConntectTime.getTime() < 12e4 ? setTimeout(function() {
          console.log("streamer reconntect delay=========="), t._rolloverStream()
        }, 1e3) : (console.log("streamer reconntect now=========="), t._rolloverStream()) : (delete t.ws, console.log("Socket done!"))
      }, r.onmessage = function(e) {
        var n = JSON.parse(e.data);
        console.log("WS recv: " + n), n = t.converter(n), t.buildingState ? (t.backedMsg.push(n), console.log("Adding msg to backlog: " + n)) : t.processData(n)
      }, r.onerror = function(n) {
        var r = {};
        r.method = "get", r.url = t.root_url + "/aggTrades", r.params = {
          symbol: t.symbol,
          limit: 40
        }, e(r).success(function(e) {
          for (var n = 0; n < e.length; n++) {
            var r = {};
            r.eventType = "trade", r.aggTradeId = e[n].a, r.firstTradeId = e[n].f, r.lastTradeId = e[n].l, r.price = e[n].p, r.qty = e[n].q, r.time = e[n].T, r.isBuyerMaker = e[n].m, r.buyerOrderId = -1, r.sellerOrderId = -1, t.processData(r)
          }
        }), setTimeout(function() {
          console.log("streamer reconntect now=========="), t._rolloverStream()
        }, 6e4)
      }, r
    }, t._buildState = function() {
      var n = {};
      n.method = "get", n.url = t.root_url + "/aggTrades", n.params = {
        symbol: t.symbol,
        limit: 50
      }, e(n).success(function(e) {
        console.log("Successfully Get Trades Second Time"), t.lastAggTradeId = -1;
        var n = {};
        n.clean = !0;
        for (var r = 0; r < e.length; r++) n.eventType = "trade", n.aggTradeId = e[r].a, n.firstTradeId = e[r].f, n.lastTradeId = e[r].l, n.price = e[r].p, n.qty = e[r].q, n.time = e[r].T, n.isBuyerMaker = e[r].m, n.buyerOrderId = -1, n.sellerOrderId = -1, t.processData(n), n = {};
        console.log("Initial state set!"), console.log("Replaying " + t.backedMsg.length + " backed msgs!");
        var i = t.backedMsg.shift();
        while (i) t.processData(i), console.log("Replayed: " + i.eventType), i = t.backedMsg.shift();
        t.buildingState = !1, console.log("Replaying DONE! " + t.backedMsg.length + " backed msgs remain.");
        if (t.backedMsg.length != 0) {
          console.log("OMG!! ME SMASH!!! GIVE ME A REAL THREADING MODEL PLEASE!!"), i = t.backedMsg.shift();
          while (i) t.processData(i), i = t.backedMsg.shift()
        }
      })
    }, t._getLastTrade = function(n) {
      var r = {};
      r.method = "get", r.url = t.root_url + "/aggTrades", r.params = {
        symbol: t.symbol,
        limit: 40
      }, e(r).success(function(e) {
        n(e)
      })
    }, t.converterGets = function(e) {
      var t = [];
      for (var n = 0; n < e.length; n++) {
        var r = {};
        r.eventType = "trade", r.aggTradeId = e[n].a, r.firstTradeId = e[n].f, r.lastTradeId = e[n].l, r.price = e[n].p, r.qty = e[n].q, r.time = e[n].T, r.isBuyerMaker = e[n].m, r.buyerOrderId = -1, r.sellerOrderId = -1, t.push(r)
      }
      return t
    }, t.converter = function(e) {
      var t = {};
      return t.eventType = e.e == "aggTrade" && "trade", t.eventTime = e.E, t.symbol = e.s, t.kline = e.k, t.eventType == "trade" ? (t.aggTradeId = e.a, t.event = e.e, t.eventTime = e.E, t.firstTradeId = e.f, t.lastTradeId = e.l, t.price = e.p, t.qty = e.q, t.time = e.T, t.isBuyerMaker = e.m) : (console.log("Error! Bad data received:"), console.log(t)), t
    }, t._isDuplicate = function(e) {
      if (e.eventType == "trade") {
        if (e.aggTradeId > t.lastAggTradeId) return t.lastAggTradeId = e.aggTradeId, !1
      } else console.log("Error! Bad data received:"), console.log(e);
      return !0
    }, t
  }
}]);
app.factory("streamer", ["$http", "$interval", function(e, t) {
  return function() {
    var t = {},
      n;
    return t.isRunning = !1, t.restart = !1, t.root_url = location.host.match("localhost") || location.host.match("192.168.0") ? "/exchange/public" : "/api/v1", t.startStream = function(e, n, r) {
      t.isRunning = !0, t.url = n, t.lastDepthId = -2, t.backedMsg = [], t.buildingState = !0, t.restart = !0, t.lastConntectTime, t.symbol = e, t.lowerCaseSymbol = e.toLowerCase(), t.processData = function(e) {
        t._isDuplicate(e) || r(e)
      }, t.ws ? t.ws.close() : t.ws = t._makeStream()
    }, t.stopStream = function() {
      t.restart = !1, t.ws && t.ws.close(), t.lastDepthId = -2, t.backedMsg = [], t.buildingState = !0, t.isRunning = !1
    }, t._rolloverStream = function() {
      console.log("Rolling over stream!"), t.backedMsg = [], t.buildingState = !0, t.ws = t._makeStream()
    }, t._makeStream = function() {
      var r = new WebSocket(t.url + "/" + t.lowerCaseSymbol + "@depth.b10");
      return r.onopen = function() {
        console.log("Socket has been opened for: " + t.symbol + "!"), t.lastConntectTime = new Date, t._buildState(), clearInterval(n)
      }, r.onclose = function(e) {
        console.log("Socket has been CLOSED for: " + t.symbol + "!"), t.restart ? (new Date).getTime() - t.lastConntectTime.getTime() < 12e4 ? setTimeout(function() {
          console.log("streamer reconntect delay=========="), t._rolloverStream()
        }, 1e3) : (console.log("streamer reconntect now=========="), t._rolloverStream()) : (delete t.ws, console.log("Socket done!"))
      }, r.onmessage = function(e) {
        var n = JSON.parse(e.data);
        console.log("WS recv: " + n), n = t.converter(n), t.buildingState ? (t.backedMsg.push(n), console.log("Adding msg to backlog: " + n)) : t.processData(n)
      }, r.onerror = function(r) {
        n || (n = setInterval(function() {
          var n = {};
          n.method = "get", n.url = t.root_url + "/depth", n.params = {
            symbol: t.symbol,
            limit: 100
          }, e(n).success(function(e) {
            var n = {};
            n.eventType = "depthUpdate", n.updateId = e.lastUpdateId, n.bids = e.bids, n.asks = e.asks, t.processData(n)
          })
        }, 3e3)), setTimeout(function() {
          console.log("streamer reconntect now=========="), t._rolloverStream()
        }, 6e4)
      }, r
    }, t._buildState = function() {
      var n = {};
      n.method = "get", n.url = t.root_url + "/depth", n.params = {
        symbol: t.symbol
      }, e(n).success(function(e) {
        t.lastDepthId = -1;
        var n = {};
        n.eventType = "depthUpdate", n.updateId = e.lastUpdateId, n.bids = e.bids, n.asks = e.asks, n.clean = !0, console.log("GET All Depth Success "), t.processData(n), console.log("Initial state set!"), console.log("Replaying " + t.backedMsg.length + " backed msgs!");
        var r = t.backedMsg.shift();
        while (r) t.processData(r), console.log("Replayed: " + r.eventType), r = t.backedMsg.shift();
        t.buildingState = !1, console.log("Replaying DONE! " + t.backedMsg.length + " backed msgs remain.");
        if (t.backedMsg.length != 0) {
          console.log("OMG!! ME SMASH!!! GIVE ME A REAL THREADING MODEL PLEASE!!"), r = t.backedMsg.shift();
          while (r) t.processData(r), r = t.backedMsg.shift()
        }
      })
    }, t.converter = function(e) {
      var t = {};
      return t.eventType = e.e, t.eventTime = e.E, t.symbol = e.s, t.kline = e.k, t.eventType == "depthUpdate" ? (t.event = e.e, t.eventTime = e.E, t.symbol = e.s, t.updateId = e.u, t.bids = e.b, t.asks = e.a) : (console.log("Error! Bad data received:"), console.log(t)), t
    }, t._isDuplicate = function(e) {
      if (e.eventType == "depthUpdate") {
        if (e.updateId > t.lastDepthId) return t.lastDepthId = e.updateId, !1
      } else console.log("Error! Bad data received:"), console.log(e);
      return !0
    }, t
  }
}]);
(function(e) {
  var t = function(e) {
      var t = e.backingStorePixelRatio || e.mozBackingStorePixelRatio || e.msBackingStorePixelRatio || e.oBackingStorePixelRatio || e.backingStorePixelRatio || 1;
      return (window.devicePixelRatio || 1) / t
    }(e),
    n = function(e, t) {
      for (var n in e) e.hasOwnProperty(n) && t(e[n], n)
    },
    r = {
      fillRect: "all",
      clearRect: "all",
      strokeRect: "all",
      moveTo: "all",
      lineTo: "all",
      arc: [0, 1, 2],
      arcTo: "all",
      bezierCurveTo: "all",
      isPointinPath: "all",
      isPointinStroke: "all",
      quadraticCurveTo: "all",
      rect: "all",
      translate: "all",
      createRadialGradient: "all",
      createLinearGradient: "all"
    };
  if (t === 1) return;
  n(r, function(n, r) {
    e[r] = function(e) {
      return function() {
        var r, i, s = Array.prototype.slice.call(arguments);
        if (n === "all") s = s.map(function(e) {
          return e * t
        });
        else if (Array.isArray(n))
          for (r = 0, i = n.length; r < i; r++) s[n[r]] *= t;
        return e.apply(this, s)
      }
    }(e[r])
  }), e.stroke = function(e) {
    return function() {
      this.lineWidth *= t, e.apply(this, arguments), this.lineWidth /= t
    }
  }(e.stroke), e.fillText = function(e) {
    return function() {
      var n = Array.prototype.slice.call(arguments);
      n[1] *= t, n[2] *= t, this.font = this.font.replace(/(\d+)(px|em|rem|pt)/g, function(e, n, r) {
        return n * t + r
      }), n.length >= 4 && t > 1 && (n[3] *= t), e.apply(this, n), this.font = this.font.replace(/(\d+)(px|em|rem|pt)/g, function(e, n, r) {
        return n / t + r
      })
    }
  }(e.fillText), e.strokeText = function(e) {
    return function() {
      var n = Array.prototype.slice.call(arguments);
      n[1] *= t, n[2] *= t, this.font = this.font.replace(/(\d+)(px|em|rem|pt)/g, function(e, n, r) {
        return n * t + r
      }), e.apply(this, n), this.font = this.font.replace(/(\d+)(px|em|rem|pt)/g, function(e, n, r) {
        return n / t + r
      })
    }
  }(e.strokeText)
})(CanvasRenderingContext2D.prototype),
function(e) {
  e.getContext = function(e) {
    return function(t) {
      var n, r, i = e.call(this, t);
      return t === "2d" && (n = i.backingStorePixelRatio || i.mozBackingStorePixelRatio || i.msBackingStorePixelRatio || i.oBackingStorePixelRatio || i.backingStorePixelRatio || 1, r = (window.devicePixelRatio || 1) / n, r > 1 && $(this).attr("val") != "true" && (this.style.height == "" || Number(this.style.height.replace("px", "")) * r != this.height) && (this.style.height = this.height + "px", this.style.width = this.width + "px", this.width *= r, this.height *= r, $(this).attr("val", !0))), i
    }
  }(e.getContext)
}(HTMLCanvasElement.prototype);

function log10(e) {
  return Math.log(e) / Math.LN10
}

function millitime() {
  return (new Date).getTime() / 1e3
}

function hms_from_epoch_ms(e, t) {
  var n = "",
    r, i, s, o = null;
  try {
    o = new Date(e), t ? (r = o.getHours(), i = o.getMinutes(), s = o.getSeconds()) : (r = o.getUTCHours(), i = o.getUTCMinutes(), s = o.getUTCSeconds()), n += (r < 10 ? "0" + r : r) + ":", n += (i < 10 ? "0" + i : i) + ":", n += s < 10 ? "0" + s : s
  } catch (u) {
    n = "00:00:00"
  }
  return n
}

function formatted_date(e, t, n) {
  var r = new Date(e * 1e3),
    i = "";
  return n === !0 ? (t && (i = r.getFullYear() + "-"), i += r.getMonth() + 1 < 10 ? "0" : "", i += r.getMonth() + 1 + "-", i += r.getDate() < 10 ? "0" : "", i += r.getDate()) : (t && (i = r.getUTCFullYear() + "-"), i += r.getUTCMonth() + 1 < 10 ? "0" : "", i += r.getUTCMonth() + 1 + "-", i += r.getUTCDate() < 10 ? "0" : "", i += r.getUTCDate()), i
}

function timestamp(e) {
  if (e == null || typeof e == "undefined") e = !0;
  var t = new Date,
    n = "",
    r, i, s;
  return e ? (r = t.getHours(), i = t.getMinutes(), s = t.getSeconds()) : (r = t.getUTCHours(), i = t.getUTCMinutes(), s = t.getUTCSeconds()), n += (r < 10 ? "0" + r : r) + ":", n += (i < 10 ? "0" + i : i) + ":", n += s < 10 ? "0" + s : s, n
}

function hms_from_sec(e) {
  var t = "",
    n = e % 60,
    r = (e - n) / 60 % 60,
    i = (e - r * 60 - n) / 3600 % 3600;
  return t += (i < 10 ? "0" + i : i) + ":", t += (r < 10 ? "0" + r : r) + ":", t += n < 10 ? "0" + n : n, t
}

function dhms_from_sec(e) {
  var t = "",
    n, r, i, s, o = e;
  return n = Math.floor(o / 86400), o -= n * 86400, r = Math.floor(o / 3600), o -= r * 3600, i = Math.floor(o / 60), s = o - i * 60, t += n > 0 ? n + ":" : "", t += (r < 10 ? "0" + r : r) + ":", t += (i < 10 ? "0" + i : i) + ":", t += s < 10 ? "0" + s : s, t
}

function time_delta_print(e) {
  var t = "",
    n = 0,
    r = 0,
    i = 0,
    s = 0,
    o = e;
  return o |= 0, n = Math.floor(o / 86400), o -= n * 86400, r = Math.floor(o / 3600), o -= r * 3600, i = Math.floor(o / 60), s = o - i * 60, n >= 2 ? t = n + " days" : n >= 1 ? (t = n + " day, " + r + " hour", r > 1 && (t += "s")) : r >= 1 ? (t = r + " hour", r > 1 && (t += "s")) : i >= 1 ? t = i + " min" : t = s + " sec", t + " ago"
}

function numberWithCommas(e) {
  var t = e.toString().split(".");
  return t[0] = t[0].replace(/\B(?=(\d{3})+(?!\d))/g, ","), t.join(".")
}

function delayClass(e, t, n) {
  window.setTimeout(function() {
    $(e).removeClass(t)
  }, n)
}

function deepCopy(e) {
  return $.extend(!0, {}, e)
}

function AssertException(e) {
  this.message = e
}

function assert(e, t) {
  if (!e) throw new AssertException(t)
}

function stopEvent(e) {
  try {
    e.preventDefault(), e.stopPropagation()
  } catch (e) {}
}

function NoBreak(e) {
  return e.replace(/ /g, "&nbsp;")
}

function HTMLEncode(e) {
  return $("<div/>").text(e).html()
}

function HTMLDecode(e) {
  return $("<div/>").html(e).text()
}

function clearingSpan() {
  return $("<span/>").addClass("clear").html("&nbsp;")
}

function clearingSpanHTML() {
  return '<span class="clear">&nbsp;</span>'
}

function uniqueID() {
  return "id" + lastUniqueID++
}

function randInt(e) {
  return Math.floor(Math.random() * e)
}

function randRange(e, t) {
  return Math.floor(Math.random() * (t - e)) + e
}

function randomString(e) {
  typeof e != "number" && (e = 10);
  var t = 0,
    n = "";
  for (t = 0; t < e; t++) n += alphabet[randInt(alphalen)];
  return n
}

function storageSupport() {
  try {
    return "localStorage" in window && window.localStorage !== null
  } catch (e) {
    return !1
  }
}

function wsSupport() {
  try {
    return !!window.WebSocket
  } catch (e) {
    return !1
  }
}

function locationOf(e, t, n, r, i) {
  n == null && (n = 0), r == null && (r = t.length - 1), "string" == typeof i && (i == "gt" ? i = function(e, t) {
    return e > t
  } : i == "lt" && (i = function(t, n) {
    return t < n
  }));
  var s = parseInt(n + (r - n) / 2);
  return t[s] == e ? {
    index: s,
    exact: !0
  } : r - n <= 1 ? {
    index: s + 1,
    exact: !1
  } : i(t[s], e) ? locationOf(e, t, s, r, i) : locationOf(e, t, n, s, i)
}

function has_worker() {
  return !!window.Worker
}

function pixel_ratio() {
  return window.hasOwnProperty("devicePixelRatio") ? window.devicePixelRatio : 1
}
var BASE_URL = "http://localhost/rtbtc-dev/",
  DATA_URL = "http://localhost/rtbtc-dev/",
  DEBUG = !0,
  OFFLINE = !1;
"use strict";
var RTBTC_Class = function(e, t, n) {
    function i() {
      function i(e, t) {
        if (r.handlers.hasOwnProperty(e))
          for (var n = 0; n < r.handlers[e].length; n++) r.handlers[e][n][1](t)
      }

      function o(e) {
        return e == null && (e = r.currency), Exchanges.cur_int(r.exchange, e)
      }

      function u(e) {
        return e == null && (e = r.currency), Exchanges.cur_prec(r.exchange, e)
      }

      function a(e) {
        return e == null && (e = r.currency), Currency.before(e)
      }

      function f(e) {
        return e == null && (e = r.exchange), Exchanges.fullname(e)
      }

      function h(e, t, n) {
        DEBUG && s("JSON Call for " + e), $.ajax({
          url: e,
          type: "GET",
          dataType: "json",
          success: function(e, n, r) {
            "function" == typeof t && t(e)
          },
          error: function(e, t, r) {
            "function" == typeof n && n()
          }
        })
      }
      var r = {
          url: "" + e,
          debug: !!t,
          offline: !!n,
          lang: "en",
          accounts: {},
          has_api: !1,
          prefsAccount: "",
          expires: millitime() + 60,
          expires_id: -1,
          base: "",
          base_int: 1,
          base_prec: 8,
          quote: "CNY",
          quote_int: 1,
          quote_prec: 4,
          exch_fee: {
            mtgox: .0065,
            bitstamp: .005,
            btce: .002
          },
          token: "",
          version: "0.0.0",
          startTime: millitime(),
          offset: 0,
          exchange: "bitstamp",
          exch_list: ["bitstamp", "btce"],
          handlers: {},
          title: "" + window.document.title,
          ERROR: 1,
          WARNING: 2,
          MESSAGE: 3,
          windows: []
        },
        s = function(e, t) {
          switch (t) {
            case r.ERROR:
              console.error(e);
              break;
            case r.WARNING:
              console.warn(e);
              break;
            case r.MESSAGE:
            default:
              console.log(e)
          }
          if (!DEBUG) throw {}
        };
      $.ajaxSetup({
        async: !0,
        type: "POST",
        dataType: "json",
        crossDomain: !1
      });
      var l = function(e, t, n, o, u) {
          DEBUG && s("AJAX Call for " + e + ", data:"), DEBUG && null != t && s(t), $.ajax({
            url: r.url + "api/" + e,
            data: {
              payload: t,
              token: r.token,
              aid: r.accounts[r.exchange],
              t0: millitime()
            },
            success: function(t, a, f) {
              var l = millitime();
              if ("undefined" == typeof t["result"]) {
                "function" == typeof u && u();
                return
              }
              "undefined" != typeof t["timing"] && c({
                t0: parseFloat(t.timing.t0),
                t1: parseFloat(t.timing.t1),
                t2: parseFloat(t.timing.t2),
                t3: l
              }), "undefined" != typeof t["token"] && (r.token = $.trim(t.token));
              if ("undefined" != typeof t["version"]) {
                var h = $.trim(t.version);
                h != r.version && window.setTimeout(function() {
                  i("version", h)
                }, 5e3)
              }
              if (t["result"] == "success") DEBUG && s("Success data [" + e + "]:"), DEBUG && s(t.data), "function" == typeof n && n(t.data);
              else if ("undefined" != typeof t["reason"]) switch (t.reason) {
                case "session":
                case "auth":
                  DEBUG && s("Save failure: " + t.reason), !OFFLINE && window.location.reload();
                  break;
                default:
                  "function" == typeof o && (DEBUG && s("Calling failure fn with:"), DEBUG && s(t.reason), o(t.reason))
              } else "function" == typeof o && o()
            },
            error: function(e, t, n) {
              "function" == typeof u && u()
            }
          })
        },
        c = function(e) {
          if ("undefined" == typeof e["t0"] || "undefined" == typeof e["t1"] || "undefined" == typeof e["t2"] || "undefined" == typeof e["t3"]) return;
          i("timing", {
            latency: (-e.t0 + e.t1 - e.t2 + e.t3) / 2,
            processing: e.t2 - e.t1
          })
        },
        p = function() {
          r.windows.append(window.open(r.url + "s/platform/window", uniqueID()))
        },
        d = function() {
          var e = r.expires - millitime();
          if (e * 1e3 > 2147483647) return;
          DEBUG && s("Expire in " + (r.expires - millitime()) + "s"), window.clearTimeout(r.expires_id), r.expires_id = window.setTimeout(function() {
            DEBUG && s("Subscription expired. Reloading."), window.location.reload()
          }, e * 1e3)
        },
        v = [""],
        m = [""],
        g = "&nbsp;";
      for (var y = 1; y <= 30; y++) m.push(m[y - 1] + g), v.push(v[y - 1] + "0");
      return {
        token: function(e) {
          return null == e ? r.token : (r.token = e, DEBUG && s('Set RTBTC token to "' + e + '"'), this)
        },
        account: function() {
          return r.accounts[r.exchange]
        },
        accounts: function(e) {
          r.accounts = {};
          for (var t in e) {
            if (r.exch_list.indexOf(t) < 0) continue;
            r.accounts[t] = e[t], DEBUG && s("Set user account string for " + t + ' to "' + e[t] + '"')
          }
          return this
        },
        prefsAccount: function(e) {
          return null == e ? r.prefsAccount : (r.prefsAccount = e, DEBUG && s('Set user preferences account string to "' + e + '"'), this)
        },
        hasApi: function() {
          return r.accounts.hasOwnProperty(r.exchange)
        },
        startTime: function() {
          return r.startTime
        },
        offset: function(e) {
          return null == e ? r.offset : (r.offset = e.client - e.server, DEBUG && s("Got server time offset of " + r.offset + "s"), this)
        },
        expires: function(e) {
          return null == e ? r.expires : (r.expires = +e + r.offset, d(), DEBUG && s("Set expiration time to " + new Date(r.expires * 1e3)), this)
        },
        ajax: function(e, t, n, r, i) {
          return "undefined" != typeof e && l(e, t, n, r, i), this
        },
        json: function(e, t, n) {
          return "undefined" != typeof e && h(e, t, n), this
        },
        base: function() {
          return r.base
        },
        quote: function() {
          return r.quote
        },
        symbol: function() {
          return r.base + "/" + r.quote
        },
        baseInt: function() {
          return r.base_int
        },
        quoteInt: function() {
          return r.quote_int
        },
        basePrec: function() {
          return r.base_prec
        },
        quotePrec: function() {
          return r.quote_prec
        },
        instrument: function(e, t, n) {
          try {
            e = e.toLowerCase(), t = t.toUpperCase(), n = n.toUpperCase()
          } catch (o) {
            return DEBUG && s("RTBTC.instrument 1: " + e + ", " + t + ", " + n, r.ERROR), this
          }
          var u = {
            exch: "" + r.exchange,
            base: "" + r.base,
            quote: "" + r.quote
          };
          return r.exchange = e, r.base = t, r.quote = n, DEBUG && s("RTBTC:instrument(" + r.exchange + ", " + r.base + ", " + r.quote + ")"), DEBUG && s(" " + r.base + " precision : " + r.base_prec + ", int: " + r.base_int), DEBUG && s(" " + r.quote + " precision: " + r.quote_prec + ", int: " + r.quote_int), i("instrument", {
            old_instr: u,
            new_instr: {
              exch: r.exchange,
              base: r.base,
              quote: r.quote
            }
          }), this
        },
        version: function(e) {
          if (null == e) return r.version;
          r.version = e;
          var t = "";
          for (var n = 0; n < 75; n++) t += "=";
          return DEBUG && s(t), DEBUG && s("RTBTC Version " + r.version), DEBUG && s(t), DEBUG && s(" "), this
        },
        url: function() {
          return r.url
        },
        language: function(e) {
          return null == e ? r.lang : (r.lang = e, i("language", r.lang), this)
        },
        handler: function(e, t, n) {
          return r.handlers.hasOwnProperty(e) || (r.handlers[e] = []), r.handlers[e].push([t, n]), this
        },
        unregister: function(e, t, n) {
          if (!r.handlers.hasOwnProperty(e)) return;
          var i, s = typeof n == "undefined";
          for (i = r.handlers[e].length - 1; i >= 0; i--) {
            if (r.handlers[e][i][0] != t) continue;
            (s || r.handlers[e][i][1] == n) && r.handlers[e].splice(i, 1)
          }
          return this
        },
        unregisterAll: function(e) {
          var t, n;
          for (n in r.handlers) {
            if (!r.handlers.hasOwnProperty(n)) continue;
            for (t = r.handlers[n].length - 1; t >= 0; t--) r.handlers[n][t][0] == e && r.handlers[n].splice(t, 1)
          }
        },
        trigger: function(e, t) {
          i(e, t)
        },
        countdown: function(e, t) {
          $(e).each(function(e, t) {
            $(t).data("time", parseInt($(this).attr("name"))).removeAttr("name")
          });
          var n = function(e, t) {
            $(e).each(function(e, n) {
              var r = Math.max($(n).data("time"), 0),
                i = t ? dhms_from_sec(r) : hms_from_sec(r);
              return $(n).text(i), $(n).data("time", r - 1), !0
            })
          };
          window.setInterval(function() {
            n(e, t)
          }, 1e3), n(e, t)
        },
        toggle: function(e, t, n, r) {
          return $("<span/>").addClass("control-toggle").addClass(function() {
            return e ? "yes" : "no"
          }).append(function() {
            return '<i class="icon-' + (e ? "ok" : "remove") + '"></i>'
          }).data("state", e).click(function(e) {
            var i = $(e.currentTarget);
            i.data("state") ? (i.data("state", !1).removeClass("yes").addClass("no").html('<i class="icon-remove"></i>'), "function" == typeof n && n()) : (i.data("state", !0).removeClass("no").addClass("yes").html('<i class="icon-ok"></i>'), "function" == typeof t && t()), "function" == typeof r && r(), stopEvent(e)
          })
        },
        select: function(e, t, n, r) {
          var i, s, o = $("<select/>").on("change", function(t) {
            n(t.currentTarget.value), r && (t.currentTarget.value = e)
          });
          for (i = 0; i < t.length; i++) s = $("<option/>").html(t[i].text).attr("value", t[i].val), t[i]["val"] == e && s.attr("selected", "selected"), o.append(s);
          return o
        },
        numFormat: function(e, t) {
          if (typeof e == "undefined") return "";
          var n = t == null ? Settings.display.precision.price : t,
            r = e.toFixed(n),
            i = r.length,
            s = 1;
          isNaN(r) && (r = "0.0");
          while (s < t) {
            if (r.charAt(i - s) != "0") {
              if (s == 1) return r;
              break
            }
            s++
          }
          return Settings.display.zeros ? r.slice(0, i - s + 1) + '<span class="insig">' + v[s - 1] + "</span>" : r.slice(0, i - s + 1) + m[s - 1]
        },
        numFormatShort: function(e, t) {
          if (typeof e == "undefined") return "";
          var n = t == null ? Settings.display.precision.price : t,
            r = e.toFixed(n),
            i = r.length,
            s = 1;
          isNaN(r) && (r = "0.0");
          while (s < t) {
            if (r.charAt(i - s) != "0") {
              if (s == 1) return r;
              break
            }
            s++
          }
          return r.slice(0, i - s + 1)
        },
        siteTitle: function(e) {
          window.document.title = e + r.title
        },
        newWindow: function() {
          return p(), this
        },
        regUnsignedNum: new RegExp(/^\d*\.?\d*$/),
        internals: function() {
          return DEBUG ? function() {
            return r
          } : function() {
            return null
          }
        }(),
        debug: function() {
          return r.debug ? s : function(e, t) {}
        }(),
        isDebug: function() {
          return r.debug
        },
        offline: function() {
          return r.offline
        },
        ERROR: r.ERROR,
        WARNING: r.WARNING,
        MESSAGE: r.MESSAGE,
        ZEROS: v,
        SPACES: m
      }
    }
    var r = null;
    return new function() {
      this.Build = function() {
        return r == null && (r = new i, r.constructor = null), r
      }
    }
  }(BASE_URL, DEBUG, OFFLINE),
  RTBTC = RTBTC_Class.Build(),
  BTC = "&#3647;",
  BTC_U = "฿",
  BTC_INT = 1;
AssertException.prototype.toString = function() {
  return "AssertException: " + this.message
};
var lastUniqueID = 0,
  alphabet = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".split(""),
  alphalen = alphabet.length;
Object.size = function(e) {
  var t = 0,
    n;
  for (n in e) e.hasOwnProperty(n) && t++;
  return t
}, Array.prototype.indexOf || (Array.prototype.indexOf = function(e) {
  var t = this.length,
    n = Number(arguments[1]) || 0;
  n = n < 0 ? Math.ceil(n) : Math.floor(n), n < 0 && (n += t);
  for (; n < t; n++)
    if (n in this && this[n] === e) return n;
  return -1
});
var has_dataURI = function() {
  return !1
};
(function() {
  var e = new Image;
  e.onload = function() {
    this.width == 1 && this.height == 1 && (has_dataURI = function() {
      return !0
    })
  }, e.onerror = function() {}, e.src = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw=="
})(),
function() {
  var e = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
  window.reqAnimFrame = typeof e != "undefined" ? e : function(e) {
    e()
  }
}(), jQuery.cookie = function(e, t, n) {
  if (arguments.length > 1 && String(t) !== "[object Object]") {
    n = jQuery.extend({}, n);
    if (t === null || t === undefined) n.expires = -1;
    if (typeof n.expires == "number") {
      var r = n.expires,
        i = n.expires = new Date;
      i.setDate(i.getDate() + r)
    }
    return t = String(t), document.cookie = [encodeURIComponent(e), "=", n.raw ? t : encodeURIComponent(t), n.expires ? "; expires=" + n.expires.toUTCString() : "", n.path ? "; path=" + n.path : "", n.domain ? "; domain=" + n.domain : "", n.secure ? "; secure" : ""].join("")
  }
  n = t || {};
  var s, o = n.raw ? function(e) {
    return e
  } : decodeURIComponent;
  return (s = (new RegExp("(?:^|; )" + encodeURIComponent(e) + "=([^;]*)")).exec(document.cookie)) ? o(s[1]) : null
};
! function(e) {
  "use strict";
  var t = function(e, t) {
    this.init("tooltip", e, t)
  };
  t.prototype = {
    constructor: t,
    init: function(t, n, r) {
      var i, s;
      this.type = t, this.$element = e(n), this.options = this.getOptions(r), this.enabled = !0, this.options.trigger != "manual" && (i = this.options.trigger == "hover" ? "mouseenter" : "focus", s = this.options.trigger == "hover" ? "mouseleave" : "blur", this.$element.on(i, this.options.selector, e.proxy(this.enter, this)), this.$element.on(s, this.options.selector, e.proxy(this.leave, this))), this.options.selector ? this._options = e.extend({}, this.options, {
        trigger: "manual",
        selector: ""
      }) : this.fixTitle()
    },
    getOptions: function(t) {
      return t = e.extend({}, e.fn[this.type].defaults, t, this.$element.data()), t.delay && typeof t.delay == "number" && (t.delay = {
        show: t.delay,
        hide: t.delay
      }), t
    },
    enter: function(t) {
      var n = e(t.currentTarget)[this.type](this._options).data(this.type);
      !n.options.delay || !n.options.delay.show ? n.show() : (n.hoverState = "in", setTimeout(function() {
        n.hoverState == "in" && n.show()
      }, n.options.delay.show))
    },
    leave: function(t) {
      var n = e(t.currentTarget)[this.type](this._options).data(this.type);
      !n.options.delay || !n.options.delay.hide ? n.hide() : (n.hoverState = "out", setTimeout(function() {
        n.hoverState == "out" && n.hide()
      }, n.options.delay.hide))
    },
    show: function() {
      var e, t, n, r, i, s, o;
      if (this.hasContent() && this.enabled) {
        e = this.tip(), this.setContent(), this.options.animation && e.addClass("fade"), s = typeof this.options.placement == "function" ? this.options.placement.call(this, e[0], this.$element[0]) : this.options.placement, t = /in/.test(s), e.remove().css({
          top: 0,
          left: 0,
          display: "block"
        }).appendTo(t ? this.$element : document.body), n = this.getPosition(t), r = e[0].offsetWidth, i = e[0].offsetHeight;
        switch (t ? s.split(" ")[1] : s) {
          case "bottom":
            o = {
              top: n.top + n.height,
              left: n.left + n.width / 2 - r / 2
            };
            break;
          case "top":
            o = {
              top: n.top - i,
              left: n.left + n.width / 2 - r / 2
            };
            break;
          case "left":
            o = {
              top: n.top + n.height / 2 - i / 2,
              left: n.left - r
            };
            break;
          case "right":
            o = {
              top: n.top + n.height / 2 - i / 2,
              left: n.left + n.width
            }
        }
        e.css(o).addClass(s).addClass("in")
      }
    },
    setContent: function() {
      var e = this.tip();
      e.find(".tooltip-inner").html(this.getTitle()), e.removeClass("fade in top bottom left right")
    },
    hide: function() {
      function r() {
        var t = setTimeout(function() {
          n.off(e.support.transition.end).remove()
        }, 500);
        n.one(e.support.transition.end, function() {
          clearTimeout(t), n.remove()
        })
      }
      var t = this,
        n = this.tip();
      n.removeClass("in"), e.support.transition && this.$tip.hasClass("fade") ? r() : n.remove()
    },
    fixTitle: function() {
      var e = this.$element;
      (e.attr("title") || typeof e.attr("data-original-title") != "string") && e.attr("data-original-title", e.attr("title") || "").removeAttr("title")
    },
    hasContent: function() {
      return this.getTitle()
    },
    getPosition: function(t) {
      return e.extend({}, t ? {
        top: 0,
        left: 0
      } : this.$element.offset(), {
        width: this.$element[0].offsetWidth,
        height: this.$element[0].offsetHeight
      })
    },
    getTitle: function() {
      var e, t = this.$element,
        n = this.options;
      return e = t.attr("data-original-title") || (typeof n.title == "function" ? n.title.call(t[0]) : n.title), e = e.toString().replace(/(^\s*|\s*$)/, ""), e
    },
    tip: function() {
      return this.$tip = this.$tip || e(this.options.template)
    },
    validate: function() {
      this.$element[0].parentNode || (this.hide(), this.$element = null, this.options = null)
    },
    enable: function() {
      this.enabled = !0
    },
    disable: function() {
      this.enabled = !1
    },
    toggleEnabled: function() {
      this.enabled = !this.enabled
    },
    toggle: function() {
      this[this.tip().hasClass("in") ? "hide" : "show"]()
    }
  }, e.fn.tooltip = function(n) {
    return this.each(function() {
      var r = e(this),
        i = r.data("tooltip"),
        s = typeof n == "object" && n;
      i || r.data("tooltip", i = new t(this, s)), typeof n == "string" && i[n]()
    })
  }, e.fn.tooltip.Constructor = t, e.fn.tooltip.defaults = {
    animation: !0,
    delay: 0,
    selector: !1,
    placement: "top",
    trigger: "hover",
    title: "",
    template: '<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'
  }
}(window.jQuery);
var Colors = {
  c: {
    stroke: {
      fenshi: "#ffffff",
      up: "#ff0000",
      down: "#3AA60C",
      bid: "#4dd710",
      ask: "#d00017",
      grid: "#252522",
      border: "#333",
      arrow: "#fff",
      order: "#ffc200",
      majorlevel: "#666",
      minorlevel: "#666",
      crosshair: "#fff",
      i: ["#0066cc", "#ffc200", "#6600cc", "#cc0066", "#00cccc", "#CC401D", "#fff385", "#9665cc", "#cc5c79", "#cc9056", "#86ccb6"]
    },
    fill: {
      bg: "#191919",
      up: "#ff0000",
      down: "#3AA60C",
      label: "#9EA694",
      flags: "#191919",
      crosshair: "#191919",
      blankBG: "#0A0A09",
      flagtext: "#f4ffe4",
      ordertext: "#ffc200",
      slottext: "#f4ffe4"
    }
  },
  c1: {
    stroke: {
      fenshi: "#ffffff",
      up: "#d00017",
      down: "#4dd710",
      bid: "#d00017",
      ask: "#4dd710",
      grid: "#252522",
      border: "#333",
      arrow: "#fff",
      order: "#ffc200",
      majorlevel: "#666",
      minorlevel: "#666",
      crosshair: "#fff",
      i: ["#0066cc", "#ffc200", "#6600cc", "#cc0066", "#00cccc", "#CC401D", "#fff385", "#9665cc", "#cc5c79", "#cc9056", "#86ccb6"]
    },
    fill: {
      bg: "#191919",
      up: "#3AA60C",
      down: "#A10013",
      label: "#9EA694",
      flags: "#191919",
      crosshair: "#191919",
      blankBG: "#0A0A09",
      flagtext: "#f4ffe4",
      ordertext: "#ffc200",
      slottext: "#f4ffe4"
    }
  },
  f: {
    stroke: {
      up: "#00a1d9",
      down: "#ed111a",
      bid: "#ed111a",
      ask: "#00a1d9",
      grid: "#d5e4eb",
      border: "#014d65",
      order: "#014d65",
      majorlevel: "#014d65",
      minorlevel: "#014d65",
      crosshair: "#040f12",
      i: ["#00a1d9", "#ed111a", "#014d65", "#c60", "#6c0", "#0cc", "#cc0", "#0c0"]
    },
    fill: {
      bg: "#d5e4eb",
      up: "#00ACE5",
      down: "#FF121A",
      label: "#09232B",
      flags: "#F2F8FA",
      crosshair: "#fff",
      blankBG: "#fff",
      flagtext: "#040f12",
      ordertext: "#014d65",
      slottext: "#040f12"
    }
  },
  m: {
    stroke: {
      up: "#9C6",
      down: "#B40000",
      bid: "#7A1631",
      ask: "#89D12A",
      grid: "#454545",
      border: "#616161",
      order: "#014d65",
      majorlevel: "#014d65",
      minorlevel: "#014d65",
      crosshair: "#ffc200",
      i: ["#ffc200", "#0099cc", "#014d65", "#c60", "#6c0", "#0cc", "#cc0", "#0c0"]
    },
    fill: {
      bg: "#0f0f0f",
      up: "#658744",
      down: "#750000",
      label: "#F4FFE4",
      flags: "#0f0f0f",
      crosshair: "#0f0f0f",
      blankBG: "#0f0f0f",
      flagtext: "#F4FFE4",
      ordertext: "#014d65",
      slottext: "#F4FFE4"
    }
  },
  t: {
    stroke: {
      up: "#498192",
      down: "#daa102",
      bid: "#daa102",
      ask: "#498192",
      grid: "#0d1e29",
      border: "#014d65",
      order: "#014d65",
      majorlevel: "#014d65",
      minorlevel: "#014d65",
      crosshair: "#040f12",
      i: ["#498192", "#daa102", "#014d65", "#c60", "#6c0", "#0cc", "#cc0", "#0c0"]
    },
    fill: {
      bg: "#05232c",
      up: "#d6f7fb",
      down: "#f9f15f",
      label: "#daa102",
      flags: "#F2F8FA",
      crosshair: "#fff",
      blankBG: "#050b0f",
      flagtext: "#040f12",
      ordertext: "#014d65",
      slottext: "#040f12"
    }
  },
  s: {
    stroke: {
      up: "#999",
      down: "#000",
      bid: "#333",
      ask: "#999",
      grid: "#ddd",
      border: "#000",
      order: "#014d65",
      majorlevel: "#ccc",
      minorlevel: "#ddd",
      crosshair: "#000",
      i: ["#aaa", "#999", "#ccc", "#777"]
    },
    fill: {
      bg: "#fff",
      up: "#bbb",
      down: "#333",
      label: "#333",
      flags: "#fff",
      crosshair: "#fff",
      blankBG: "#fff",
      flagtext: "#000",
      ordertext: "#014d65",
      slottext: "#000"
    }
  },
  a: {
    stroke: {
      up: "#d00017",
      down: "#4dd710",
      bid: "#4dd710",
      ask: "#d00017",
      grid: "#d3d3d3",
      border: "#999999",
      order: "red",
      majorlevel: "#666",
      minorlevel: "#666",
      crosshair: "#008fdb",
      i: ["#0066cc", "#ffc200", "#6600cc", "#cc0066", "#00cccc", "#CC401D", "#fff385", "#9665cc", "#cc5c79", "#cc9056", "#86ccb6"]
    },
    fill: {
      bg: "#ffffff",
      up: "#A10013",
      down: "#3AA60C",
      label: "#999999",
      flags: "#ffffff",
      crosshair: "#ffffff",
      blankBG: "#ffffff",
      flagtext: "#999999",
      ordertext: "#ffc200",
      slottext: "#165d82"
    }
  },
  a1: {
    stroke: {
      fenshi: "#267cd1",
      up: "#f24957",
      down: "#1dbf60",
      bid: "#4dd710",
      ask: "#d00017",
      grid: "#d3d3d3",
      border: "#999999",
      arrow: "#008fbd",
      order: "red",
      opacity: !0,
      majorlevel: "#666",
      minorlevel: "#666",
      crosshair: "#008fdb",
      i: ["#ffc200", "#6600cc", "#cc0066", "#00cccc", "#CC401D", "#fff385", "#9665cc", "#cc5c79", "#cc9056", "#86ccb6"]
    },
    fill: {
      bg: "#ffffff",
      up: "#f24957",
      down: "#1dbf60",
      label: "#999999",
      flags: "#ffffff",
      crosshair: "#ffffff",
      blankBG: "#ffffff",
      flagtext: "#999999",
      ordertext: "#ffc200",
      slottext: "#165d82"
    }
  },
  a2: {
    stroke: {
      fenshi: "#267cd1",
      up: "#f24957",
      down: "#1dbf60",
      bid: "#4dd710",
      ask: "#d00017",
      grid: "#d3d3d3",
      border: "#999999",
      arrow: "#008fbd",
      order: "red",
      priceShow: !0,
      opacity: !0,
      majorlevel: "#666",
      minorlevel: "#666",
      crosshair: "#008fdb",
      i: ["#ffc200", "#6600cc", "#cc0066", "#00cccc", "#CC401D", "#fff385", "#9665cc", "#cc5c79", "#cc9056", "#86ccb6"]
    },
    fill: {
      bg: "#ffffff",
      up: "#f24957",
      down: "#1dbf60",
      label: "#999999",
      flags: "#ffffff",
      crosshair: "#ffffff",
      blankBG: "#ffffff",
      flagtext: "#999999",
      ordertext: "#ffc200",
      slottext: "#165d82"
    }
  },
  "depth-white": {
    stroke: {
      up: "#d00017",
      down: "#ff6c78",
      bid: "#4dd710",
      ask: "#ff6c78",
      grid: "#dedede",
      border: "#dedede",
      order: "#1ad1af",
      majorlevel: "blue",
      minorlevel: "blue",
      crosshair: "#deac37",
      i: ["#0066cc", "#ffc200", "#6600cc", "#cc0066", "#00cccc", "#CC401D", "#fff385", "#9665cc", "#cc5c79", "#cc9056", "#86ccb6"]
    },
    fill: {
      bg: "#ffffff",
      up: "#ff6c78",
      down: "#9ed577",
      label: "#999999",
      flags: "#191919",
      crosshair: "#fff",
      blankBG: "#ffffff",
      flagtext: "#666666",
      ordertext: "#1ad1af",
      slottext: "blue"
    }
  },
  "chart-white2": {
    stroke: {
      fenshi: "#267cd1",
      up: "#73c921",
      fillUp: "#73c921",
      down: "#ca2c78",
      bid: "#79b48a",
      ask: "#f32f3f",
      grid: "#f1f1f1",
      border: "#f1f1f1",
      arrow: "#444",
      order: "red",
      majorlevel: "#666",
      minorlevel: "#666",
      crosshair: "#008fdb",
      i: ["#ffc200", "#ffc200", "#6600cc", "#cc0066", "#00cccc", "#CC401D", "#fff385", "#9665cc", "#cc5c79", "#cc9056", "#86ccb6"]
    },
    fill: {
      bg: "#ffffff",
      up: "#73c921",
      down: "#ca2c78",
      label: "#999999",
      flags: "#ffffff",
      crosshair: "#ffffff",
      blankBG: "#ffffff",
      flagtext: "#999999",
      ordertext: "#ffc200",
      slottext: "#165d82"
    }
  },
  "depth-black-bnb": {
    stroke: {
      up: "#d00017",
      down: "#4dd710",
      bid: "#a3ff61",
      ask: "#ff3394",
      grid: "#323c45",
      border: "#333",
      order: "#ffffff",
      majorlevel: "#666",
      minorlevel: "#666",
      crosshair: "#deac37",
      i: ["#0066cc", "#ffc200", "#6600cc", "#cc0066", "#00cccc", "#CC401D", "#fff385", "#9665cc", "#cc5c79", "#cc9056", "#86ccb6"]
    },
    fill: {
      bg: "#262d33",
      up: "#ff3394",
      down: "#a3ff61",
      label: "#9EA694",
      flags: "#191919",
      crosshair: "#191919",
      blankBG: "#0A0A09",
      flagtext: "#f4ffe4",
      ordertext: "#ffffff",
      slottext: "#f4ffe4"
    }
  },
  "depth-black-mobile-bnb": {
    stroke: {
      up: "#d00017",
      down: "#4dd710",
      bid: "#a3ff61",
      ask: "#ff3394",
      grid: "#323c45",
      border: "#333",
      order: "#ffffff",
      majorlevel: "#666",
      minorlevel: "#666",
      crosshair: "#deac37",
      i: ["#0066cc", "#ffc200", "#6600cc", "#cc0066", "#00cccc", "#CC401D", "#fff385", "#9665cc", "#cc5c79", "#cc9056", "#86ccb6"]
    },
    fill: {
      bg: "#191d21",
      up: "#ff3394",
      down: "#a3ff61",
      label: "#9EA694",
      flags: "#191919",
      crosshair: "#191919",
      blankBG: "#0A0A09",
      flagtext: "#f4ffe4",
      ordertext: "#ffffff",
      slottext: "#f4ffe4"
    }
  },
  "chart-black-bnb": {
    stroke: {
      fenshi: "#ffffff",
      up: "#73c921",
      down: "#ca2c78",
      bid: "#4dd710",
      ask: "#d00017",
      grid: "#323c45",
      border: "#323c45",
      arrow: "#fff",
      order: "#ffc200",
      majorlevel: "#666",
      minorlevel: "#666",
      crosshair: "#fff",
      i: ["#0066cc", "#ffc200", "#6600cc", "#cc0066", "#00cccc", "#CC401D", "#fff385", "#9665cc", "#cc5c79", "#cc9056", "#86ccb6"]
    },
    fill: {
      bg: "#262d33",
      up: "#73c921",
      down: "#ca2c78",
      label: "#9EA694",
      flags: "#262d33",
      crosshair: "#262d33",
      blankBG: "#0A0A09",
      flagtext: "#f4ffe4",
      ordertext: "#ffc200",
      slottext: "#f4ffe4"
    }
  },
  "chart-black-mobile-bnb": {
    stroke: {
      fenshi: "#ffffff",
      up: "#73c921",
      down: "#ca2c78",
      bid: "#4dd710",
      ask: "#d00017",
      grid: "#323c45",
      border: "#323c45",
      arrow: "#fff",
      order: "#ffc200",
      majorlevel: "#666",
      minorlevel: "#666",
      crosshair: "#fff",
      i: ["#0066cc", "#ffc200", "#6600cc", "#cc0066", "#00cccc", "#CC401D", "#fff385", "#9665cc", "#cc5c79", "#cc9056", "#86ccb6"]
    },
    fill: {
      bg: "#191d21",
      up: "#73c921",
      down: "#ca2c78",
      label: "#9EA694",
      flags: "#262d33",
      crosshair: "#262d33",
      blankBG: "#0A0A09",
      flagtext: "#f4ffe4",
      ordertext: "#ffc200",
      slottext: "#f4ffe4"
    }
  },
  "depth-black-ico": {
    stroke: {
      fenshi: "#ffffff",
      up: "#4dd710",
      down: "#d00017",
      bid: "#4dd710",
      ask: "#d00017",
      grid: "#252522",
      border: "#333",
      arrow: "#fff",
      order: "#ffc200",
      majorlevel: "#666",
      minorlevel: "#666",
      crosshair: "#fff",
      i: ["#0066cc", "#ffc200", "#6600cc", "#cc0066", "#00cccc", "#CC401D", "#fff385", "#9665cc", "#cc5c79", "#cc9056", "#86ccb6"]
    },
    fill: {
      bg: "#191919",
      up: "#A10013",
      down: "#3AA60C",
      label: "#9EA694",
      flags: "#191919",
      crosshair: "#191919",
      blankBG: "#0A0A09",
      flagtext: "#f4ffe4",
      ordertext: "#ffc200",
      slottext: "#f4ffe4"
    }
  },
  "chart-black-ico": {
    stroke: {
      fenshi: "#ffffff",
      up: "#3AA60C",
      down: "#ff0000",
      bid: "#4dd710",
      ask: "#d00017",
      grid: "#323c45",
      border: "#333",
      arrow: "#fff",
      order: "#ffc200",
      majorlevel: "#666",
      minorlevel: "#666",
      crosshair: "#fff",
      i: ["#0066cc", "#ffc200", "#6600cc", "#cc0066", "#00cccc", "#CC401D", "#fff385", "#9665cc", "#cc5c79", "#cc9056", "#86ccb6"]
    },
    fill: {
      bg: "#191919",
      up: "#3AA60C",
      down: "#ff0000",
      label: "#9EA694",
      flags: "#191919",
      crosshair: "#262d33",
      blankBG: "#191919",
      flagtext: "#f4ffe4",
      ordertext: "#ffc200",
      slottext: "#f4ffe4"
    }
  },
  "chart-black-zql": {
    stroke: {
      fenshi: "#ffffff",
      up: "#3AA60C",
      down: "#ff0000",
      bid: "#4dd710",
      ask: "#d00017",
      grid: "#323c45",
      border: "#333",
      arrow: "#fff",
      order: "#ffc200",
      majorlevel: "#666",
      minorlevel: "#666",
      crosshair: "#fff",
      i: ["#0066cc", "#ffc200", "#6600cc", "#cc0066", "#00cccc", "#CC401D", "#fff385", "#9665cc", "#cc5c79", "#cc9056", "#86ccb6"]
    },
    fill: {
      bg: "#191919",
      up: "#3AA60C",
      down: "#ff0000",
      label: "#9EA694",
      flags: "#191919",
      crosshair: "#262d33",
      blankBG: "#191919",
      flagtext: "#f4ffe4",
      ordertext: "#ffc200",
      slottext: "#f4ffe4"
    }
  },
  "chart-black-mobile-zql": {
    stroke: {
      fenshi: "#ffffff",
      up: "#73c921",
      down: "#ca2c78",
      bid: "#4dd710",
      ask: "#d00017",
      grid: "#323c45",
      border: "#323c45",
      arrow: "#fff",
      order: "#ffc200",
      majorlevel: "#666",
      minorlevel: "#666",
      crosshair: "#fff",
      i: ["#0066cc", "#ffc200", "#6600cc", "#cc0066", "#00cccc", "#CC401D", "#fff385", "#9665cc", "#cc5c79", "#cc9056", "#86ccb6"]
    },
    fill: {
      bg: "#191d21",
      up: "#73c921",
      down: "#ca2c78",
      label: "#9EA694",
      flags: "#262d33",
      crosshair: "#262d33",
      blankBG: "#0A0A09",
      flagtext: "#f4ffe4",
      ordertext: "#ffc200",
      slottext: "#f4ffe4"
    }
  },
  "depth-black-zql": {
    stroke: {
      fenshi: "#ffffff",
      up: "#4dd710",
      down: "#d00017",
      bid: "#4dd710",
      ask: "#d00017",
      grid: "#252522",
      border: "#333",
      arrow: "#fff",
      order: "#ffc200",
      majorlevel: "#666",
      minorlevel: "#666",
      crosshair: "#fff",
      i: ["#0066cc", "#ffc200", "#6600cc", "#cc0066", "#00cccc", "#CC401D", "#fff385", "#9665cc", "#cc5c79", "#cc9056", "#86ccb6"]
    },
    fill: {
      bg: "#191919",
      up: "#A10013",
      down: "#3AA60C",
      label: "#9EA694",
      flags: "#191919",
      crosshair: "#191919",
      blankBG: "#0A0A09",
      flagtext: "#f4ffe4",
      ordertext: "#ffc200",
      slottext: "#f4ffe4"
    }
  },
  "depth-black-mobile-zql": {
    stroke: {
      up: "#d00017",
      down: "#4dd710",
      bid: "#a3ff61",
      ask: "#ff3394",
      grid: "#323c45",
      border: "#333",
      order: "#ffffff",
      majorlevel: "#666",
      minorlevel: "#666",
      crosshair: "#deac37",
      i: ["#0066cc", "#ffc200", "#6600cc", "#cc0066", "#00cccc", "#CC401D", "#fff385", "#9665cc", "#cc5c79", "#cc9056", "#86ccb6"]
    },
    fill: {
      bg: "#191d21",
      up: "#ff3394",
      down: "#a3ff61",
      label: "#9EA694",
      flags: "#191919",
      crosshair: "#191919",
      blankBG: "#0A0A09",
      flagtext: "#f4ffe4",
      ordertext: "#ffffff",
      slottext: "#f4ffe4"
    }
  },
  "chart-black-dae": {
    stroke: {
      fenshi: "#ffffff",
      up: "#73c921",
      down: "#ca2c78",
      bid: "#4dd710",
      ask: "#d00017",
      grid: "#323c45",
      border: "#323c45",
      arrow: "#fff",
      order: "#ffc200",
      majorlevel: "#666",
      minorlevel: "#666",
      crosshair: "#fff",
      i: ["#0066cc", "#ffc200", "#6600cc", "#cc0066", "#00cccc", "#CC401D", "#fff385", "#9665cc", "#cc5c79", "#cc9056", "#86ccb6"]
    },
    fill: {
      bg: "#191919",
      up: "#73c921",
      down: "#ca2c78",
      label: "#9EA694",
      flags: "#262d33",
      crosshair: "#262d33",
      blankBG: "#0A0A09",
      flagtext: "#f4ffe4",
      ordertext: "#ffc200",
      slottext: "#f4ffe4"
    }
  },
  "chart-black-mobile-dae": {
    stroke: {
      fenshi: "#ffffff",
      up: "#73c921",
      down: "#ca2c78",
      bid: "#4dd710",
      ask: "#d00017",
      grid: "#323c45",
      border: "#323c45",
      arrow: "#fff",
      order: "#ffc200",
      majorlevel: "#666",
      minorlevel: "#666",
      crosshair: "#fff",
      i: ["#0066cc", "#ffc200", "#6600cc", "#cc0066", "#00cccc", "#CC401D", "#fff385", "#9665cc", "#cc5c79", "#cc9056", "#86ccb6"]
    },
    fill: {
      bg: "#191d21",
      up: "#73c921",
      down: "#ca2c78",
      label: "#9EA694",
      flags: "#262d33",
      crosshair: "#262d33",
      blankBG: "#0A0A09",
      flagtext: "#f4ffe4",
      ordertext: "#ffc200",
      slottext: "#f4ffe4"
    }
  },
  "depth-black-dae": {
    stroke: {
      up: "#d00017",
      down: "#4dd710",
      bid: "#a3ff61",
      ask: "#ff3394",
      grid: "#323c45",
      border: "#333",
      order: "#ffffff",
      majorlevel: "#666",
      minorlevel: "#666",
      crosshair: "#deac37",
      i: ["#0066cc", "#ffc200", "#6600cc", "#cc0066", "#00cccc", "#CC401D", "#fff385", "#9665cc", "#cc5c79", "#cc9056", "#86ccb6"]
    },
    fill: {
      bg: "#262d33",
      up: "#ff3394",
      down: "#a3ff61",
      label: "#9EA694",
      flags: "#191919",
      crosshair: "#191919",
      blankBG: "#0A0A09",
      flagtext: "#f4ffe4",
      ordertext: "#ffffff",
      slottext: "#f4ffe4"
    }
  },
  "depth-black-mobile-dae": {
    stroke: {
      up: "#d00017",
      down: "#4dd710",
      bid: "#a3ff61",
      ask: "#ff3394",
      grid: "#323c45",
      border: "#333",
      order: "#ffffff",
      majorlevel: "#666",
      minorlevel: "#666",
      crosshair: "#deac37",
      i: ["#0066cc", "#ffc200", "#6600cc", "#cc0066", "#00cccc", "#CC401D", "#fff385", "#9665cc", "#cc5c79", "#cc9056", "#86ccb6"]
    },
    fill: {
      bg: "#191d21",
      up: "#ff3394",
      down: "#a3ff61",
      label: "#9EA694",
      flags: "#191919",
      crosshair: "#191919",
      blankBG: "#0A0A09",
      flagtext: "#f4ffe4",
      ordertext: "#ffffff",
      slottext: "#f4ffe4"
    }
  }
};
var Validator = function() {
    var e = null,
      t = null,
      n = {
        BOOL: 1,
        INT: 2,
        FLOAT: 3,
        STRING: 4
      },
      r = RTBTC.debug,
      i = function(e) {
        switch (e) {
          case n.BOOL:
            return "boolean";
          case n.INT:
            return "integer";
          case n.FLOAT:
            return "float";
          case n.STRING:
            return "string";
          default:
            return "unknown"
        }
      },
      s = function(s) {
        switch (t) {
          case n.BOOL:
            if ("boolean" == typeof s) return e = s, !0;
            break;
          case n.INT:
            if ("number" == typeof s) return e = parseInt(s), !0;
            break;
          case n.FLOAT:
            if ("number" == typeof s) return e = parseFloat(s), !0;
            break;
          case n.STRING:
            if ("string" == typeof s) return e = "" + s, !0;
            break;
          default:
        }
        return DEBUG && r("Unable to validate " + s + ' as type "' + i(t) + '". Detected type: ' + typeof s, RTBTC.ERROR), !1
      };
    return {
      create: function(r) {
        r === n.BOOL && (t = r), r === n.INT && (t = r), r === n.FLOAT && (t = r), r === n.STRING && (t = r);
        if (t == null) throw "Invalid type.";
        return {
          get: function() {
            return e
          },
          set: function(e) {
            return s(e), this
          },
          toString: function() {
            return "" + e
          }
        }
      },
      BOOL: n.BOOL,
      INT: n.INT,
      FLOAT: n.FLOAT,
      STRING: n.STRING
    }
  },
  V = new Validator;
Settings = {
  base: "BTC",
  quote: "USD",
  exchange: "mtgox",
  display: {
    precision: {
      price: 5,
      volume: 4
    },
    zeros: !0,
    grid: 5
  },
  sounds: {},
  localTime: !0,
  theme: "c",
  version: "0.0.0",
  layouts: [{
    name: "Market Overview",
    modules: [{
      m: {
        t: "order-book",
        w: 478,
        h: 478,
        x: 510,
        y: 100,
        l: !0
      },
      c: {
        g: !0,
        i: .01,
        s: !0,
        d: 50
      }
    }, {
      m: {
        t: "time-sales",
        w: 488,
        h: 178,
        x: 10,
        y: 400,
        l: !0
      },
      c: {
        f: !0,
        s: !0
      }
    }, {
      m: {
        t: "ticker",
        w: 478,
        h: 78,
        x: 510,
        y: 10,
        l: !0
      },
      c: {
        a: !0,
        h: !0,
        l: !0,
        v: !0
      }
    }, {
      m: {
        t: "orders",
        w: 488,
        h: 108,
        x: 10,
        y: 280,
        l: !0
      },
      c: {}
    }, {
      m: {
        t: "order-entry",
        w: 238,
        h: 258,
        x: 10,
        y: 10,
        l: !0
      },
      c: {
        b: !0,
        c: !0,
        l: !1
      }
    }, {
      m: {
        t: "order-entry",
        w: 238,
        h: 258,
        x: 260,
        y: 10,
        l: !0
      },
      c: {
        b: !1,
        c: !0,
        l: !1
      }
    }]
  }]
}, Settings_Helper = function() {
  var e = (new Validator).create(V.BOOL),
    t = (new Validator).create(V.INT),
    n = (new Validator).create(V.FLOAT),
    r = (new Validator).create(V.STRING),
    i = {},
    s = {
      dpp: Settings.display.precision.price,
      dpv: Settings.display.precision.volume,
      dz: Settings.display.zeros,
      dg: Settings.display.grid,
      b: Settings.base,
      q: Settings.quote,
      ex: Settings.exchange,
      lt: Settings.localTime,
      thm: Settings.theme,
      snd: Settings.sounds,
      version: Settings.version
    },
    o = RTBTC.debug,
    u = function(e, t, n) {
      return "undefined" == typeof i[e] ? t : n.set(t).set(i[e]).get()
    },
    a = function(n) {
      i = n, Settings.display.precision.price = u("dpp", s.dpp, t), Settings.display.precision.volume = u("dpv", s.dpv, t), Settings.display.zeros = u("dz", s.dz, e), Settings.display.grid = u("dg", s.dg, t), Settings.display.grid = 5, Settings.localTime = u("lt", s.lt, e), Settings.theme = u("thm", s.thm, r), Settings.version = u("version", s.version, r);
      var o = u("b", s.b, r);
      Currency.valid(o) && (Settings.base = o);
      var a = u("q", s.q, r);
      Currency.valid(a) && (Settings.quote = a);
      var f = u("ex", s.ex, r);
      Exchanges.valid(f) && (Settings.exchange = f), Settings.sounds = n.hasOwnProperty("snd") ? n.snd : {};
      if ("undefined" != typeof n["layouts"] && n.layouts.length > 0) {
        Settings.layouts = [];
        var l, c;
        for (var h = 0; h < n.layouts.length; h++) {
          l = {}, "undefined" != typeof n["layouts"][h]["name"] && n.layouts[h].name.length > 0 && (l.name = "" + n.layouts[h].name);
          if ("undefined" != typeof n["layouts"][h]["modules"]) {
            l.modules = [];
            for (var p = 0; p < n.layouts[h].modules.length; p++) c = {
              m: {},
              c: {}
            }, "undefined" != typeof n["layouts"][h]["modules"][p]["m"] && (c.m = n.layouts[h].modules[p].m), "undefined" != typeof n["layouts"][h]["modules"][p]["c"] && (c.c = n.layouts[h].modules[p].c), l.modules.push(deepCopy(c))
          }
          Settings.layouts.push(deepCopy(l))
        }
      }
    };
  return {
    process: function(e) {
      return a(e), this
    },
    save: function() {
      var e = {};
      for (var t in s) {
        if (!s.hasOwnProperty(t)) continue;
        e[t] = s[t]
      }
      return e.layouts = Settings.layouts, JSON.stringify(e)
    },
    saveToStructure: function(e, t) {
      s[e] = t
    }
  }
}();

function _(e, t) {
  return e
}
var i18n = {
  Account: {
    ru: "счет",
    de: "Konto",
    cn: "帐户",
    pl: "konto",
    vi: "T�i kho?n",
    da: "konto",
    es: "",
    sv: "",
    fi: "",
    bg: "",
    it: ""
  },
  Close: {
    ru: "?????????",
    de: "schlie�en",
    cn: "??",
    pl: "zamkn??",
    vi: "?�ng",
    da: "Luk",
    es: "",
    sv: "",
    fi: "",
    bg: "",
    it: ""
  },
  Settings: {
    ru: "?????????",
    de: "Einstellungen",
    cn: "??",
    pl: "Ustawienia",
    vi: "C�i ??t",
    da: "Indstillinger",
    es: "",
    sv: "",
    fi: "",
    bg: "",
    it: ""
  },
  Layout: {
    ru: "????????????",
    de: "Layout",
    cn: "??",
    pl: "uk?ad",
    vi: "Giao di?n",
    da: "Layout",
    es: "",
    sv: "",
    fi: "",
    bg: "",
    it: ""
  },
  Locking: {
    ru: "??????????",
    de: "Sperren",
    cn: "??",
    pl: "Blokowanie",
    vi: "kh�a",
    da: "L�sning",
    es: "",
    sv: "",
    fi: "",
    bg: "",
    it: ""
  },
  "Place Order": {
    ru: "?????????? ?????",
    de: "Bestellung aufgeben",
    cn: "???",
    pl: "Z?�? zam�wienie",
    vi: "??t th? t?",
    da: "Afgiv ordre",
    es: "",
    sv: "",
    fi: "",
    bg: "",
    it: ""
  },
  Sending: {
    ru: "??????????",
    de: "Senden",
    cn: "??",
    pl: "wysy?anie",
    vi: "g?i",
    da: "Sende",
    es: "",
    sv: "",
    fi: "",
    bg: "",
    it: ""
  },
  Bid: {
    ru: "???",
    de: "Geld",
    cn: "??",
    pl: "oferta",
    vi: "Gi� th?u",
    da: "Bud",
    es: "",
    sv: "",
    fi: "",
    bg: "",
    it: ""
  },
  Ask: {
    ru: "???",
    de: "Brief",
    "en-gb": "Offer",
    cn: "?",
    pl: "zapyta?",
    vi: "xin",
    da: "Sp�rg",
    es: "",
    sv: "",
    fi: "",
    bg: "",
    it: ""
  },
  Sum: {
    ru: "?????",
    de: "Summe",
    cn: "??",
    pl: "suma",
    vi: "Sum",
    da: "Sum",
    es: "",
    sv: "",
    fi: "",
    bg: "",
    it: ""
  },
  Size: {
    ru: "??????",
    de: "Gr��e",
    cn: "??",
    pl: "rozmiar",
    vi: "K�ch th??c",
    da: "St�rrelse",
    es: "",
    sv: "",
    fi: "",
    bg: "",
    it: ""
  }
};
var Data_Class = function() {
    function t() {
      function r() {
        DEBUG && t("Data Setup. " + (e.hasStorage ? "Has" : "Does not have") + " localStorage"), e.hasStorage && (e.storage = window.localStorage), v()
      }

      function i(e) {
        switch (e) {
          case 0:
            return "1m";
          case 60:
            return "1m";
          case 180:
            return "3m";
          case 300:
            return "5m";
          case 900:
            return "15m";
          case 1800:
            return "30m";
          case 3600:
            return "1h";
          case 7200:
            return "2h";
          case 14400:
            return "4h";
          case 21600:
            return "6h";
          case 43200:
            return "12h";
          case 86400:
            return "1d";
          case 259200:
            return "3d";
          case 604800:
            return "1w"
        }
      }

      function s(r, s) {
        if (e.lock[r]) {
          DEBUG && t("data: _load: LOCK on period " + r);
          return
        }
        e.lock[r] = !0;
        var a = n + "/klines?symbol=" + RTBTC.base() + "&interval=" + i(r),
          f = null,
          l = null;
        if (e.links[r]["prev"] != null) f = "&endTime=" + e.links[r].prev, a += f;
        else if (!s) {
          e.lock[r] = !1;
          return
        }
        RTBTC.json(a, function(e) {
          return function(t) {
            o(t, e, l)
          }
        }(r), function(e) {
          return function(t) {
            u(e)
          }
        }(r))
      }

      function o(t, n, r) {
        e.lock[n] = !1, t.length >= 0 && e._onLoaded && e._onLoaded(), t[t.length - 1];
        var i;
        t.length > 0 && (e.links[n].prev = t[0][0] - n * 1e3), RTBTC.trigger("console", "Loaded " + t.length + " chart bars.");
        if (t.length == 0) return;
        for (i = t.length - 1; i >= 0; i--) e.cache.bars[n].push([t[i][0], Number(t[i][1]), Number(t[i][2]), Number(t[i][3]), Number(t[i][4]), Number(t[i][5]), Number(t[i][7])]);
        RTBTC.trigger("barclose", n)
      }

      function u(n) {
        e.lock[n] = !1, DEBUG && t("Data: load failure for period " + n + "!")
      }

      function a() {
        var t = 100,
          n = 5e3,
          r, i, s, o, u, a, f, c, h;
        for (i = 0; i < e.offline.length; i++) {
          s = e.offline[i];
          if (s == 0) continue;
          e.cache.bars[s] = []
        }
        e.cache.ticks = [], o = millitime() - 7500, u = a = f = c = t * RTBTC.currencyInt();
        for (r = 0; r < n; r++) RTBTC.trigger("trade", l(c, o)), c = e.cache.ticks[0][1], o += 1
      }

      function f() {
        var t = e.cache.bars.hasOwnProperty(60) && e.cache.bars[60].length > 0 ? e.cache.bars[60][0][4] : 100 * RTBTC.currencyInt();
        window.setInterval(function() {
          if (Math.random() < .6) return;
          var n = e.cache.ticks.length > 0 ? e.cache.ticks[0][1] : t,
            r = l(n),
            i = n,
            s = n;
          RTBTC.trigger("trade", r), i = r["location"] == "bid" ? r.price : (1 - .0025 * Math.random()) * r.price, s = r["location"] == "ask" ? r.price : (1 + .0025 * Math.random()) * r.price, RTBTC.trigger("bidask", {
            bid: i,
            ask: s
          })
        }, 2500)
      }

      function l(e, t) {
        var n = (1 + (25e-5 - Math.random() * 5e-4)) * e | 0,
          r = Math.round((Math.random() < .1 ? Math.random() * 1e3 : Math.random() * 5) * BTC_INT);
        return n < 1 && (n = 1), typeof t == "undefined" && (t = millitime()), {
          time: t,
          price: n,
          amount: r,
          location: n > e ? "ask" : "bid",
          base: RTBTC.base(),
          quote: RTBTC.quote(),
          id: Math.random() * 1e6 | 0
        }
      }

      function c(e, t) {
        return e = +e, e - e % t
      }

      function h(t) {
        var n = [t.time, t.price, t.amount],
          r;
        e.cache.ticks.splice(0, 0, n);
        var i = e.cache.ticks.length,
          s = e.config.tradeBuffer,
          o, u, a, f;
        i > s && e.cache.ticks.splice(s - 1, s - i);
        for (f in e.cache.bars) {
          if (!e.cache.bars.hasOwnProperty(f)) continue;
          a = +f, r = c(t.time, a), e.cache["bars"][f].length == 0 || r >= e.cache.bars[f][0][0] + a ? (e.cache.bars[f].splice(0, 0, [r, n[1], n[1], n[1], n[1], n[2]]), RTBTC.trigger("barclose", f)) : r == e.cache["bars"][f][0][0] && (n[1] > e.cache.bars[f][0][2] && (e.cache.bars[f][0][2] = n[1]), n[1] < e.cache.bars[f][0][3] && (e.cache.bars[f][0][3] = n[1]), e.cache.bars[f][0][4] = n[1], e.cache.bars[f][0][5] += n[2])
        }++e.config.tradeCount % e.config.tradeSave == 0 ? m() : e.config.saveID == -1 && (e.config.saveID = window.setTimeout(m, e.config.saveTimeout))
      }

      function p(t) {
        e.cache.ticker = t
      }

      function d(t, n) {
        if (e.cache["bars"][n] != undefined)
          if (e.cache.bars[n].length > 0) {
            if (t[0] < e.cache.bars[n][0][0]) return;
            if (t[0] == e.cache["bars"][n][0][0] && t[5] <= e.cache.bars[n][0][5]) return;
            t[0] == e.cache["bars"][n][0][0] ? e.cache.bars[n][0] = t : e.cache.bars[n].splice(0, 0, t), RTBTC.trigger("barclose", n)
          } else e.cache.bars[n].splice(0, 0, t), RTBTC.trigger("barclose", n)
      }

      function v() {
        var t = RTBTC.base(),
          n = RTBTC.quote(),
          r, i, o;
        e.cache.ticks = [], e.cache.ticker = {};
        for (i = 0; i < e.offline.length; i++) r = e.offline[i], e.cache.bars[r] = [];
        for (i = 0; i < e.online.length; i++) r = e.online[i], e.links[r] = {
          prev: null,
          next: null,
          last: null
        }, e.lock[r] = !1;
        s(e.currentPeriod, !0);
        if (e.hasStorage) {
          var u = t + n + "_ticks";
          if (typeof e.storage[u] != "undefined") {
            var a = JSON.parse(e.storage[u]);
            a.hasOwnProperty("stamp") && a.stamp + e.config.ticksMaxAge > millitime() && (e.cache.ticks = a.ticks)
          }
        }
      }

      function m() {
        if (!e.hasStorage) return;
        var n = millitime(),
          r = RTBTC.exchange(),
          i = RTBTC.base(),
          s = RTBTC.quote(),
          o = r + "_" + i + s + "_ticks",
          u = e.cache.ticks.slice(0, e.config.tradeBuffer),
          a = {};
        if (u.length == 0) return;
        a.stamp = millitime(), a.ticks = u;
        try {
          e.storage[o] = JSON.stringify(a)
        } catch (f) {
          DEBUG && t("LocalStorage quota exceeded.")
        }
        window.clearTimeout(e.config.saveID), e.config.saveID = -1
      }

      function g(e, t, n, r) {
        return [e, "_", t, n, "_", r].join("")
      }
      var e = {
          cache: {
            bars: {},
            ticks: [],
            ticker: {}
          },
          links: {},
          currentPeriod: 60,
          online: [2592e3, 604800, 259200, 86400, 43200, 21600, 14400, 7200, 3600, 1800, 900, 300, 180, 60],
          offline: [2592e3, 604800, 259200, 86400, 43200, 21600, 14400, 7200, 3600, 1800, 900, 300, 180, 60],
          lock: {},
          storage: null,
          hasStorage: function() {
            return storageSupport()
          }(),
          config: {
            saveTimeout: 3e4,
            saveID: -1,
            tradeCount: 0,
            tradeSave: 100,
            tradeBuffer: 1500,
            ticksMaxAge: 300
          },
          self: null,
          debug: RTBTC.isDebug()
        },
        t = RTBTC.debug,
        n = location.host.match("localhost") || location.host.match("192.168.0") ? "/exchange/public" : "/api/v1";
      return {
        setup: function(t) {
          return t != "undifined" && e.online.indexOf(t) >= 0 && (e.currentPeriod = t), r(), this
        },
        self: function(t) {
          return e.self = t, RTBTC.handler("trade", "data", e.self.onTrade), RTBTC.handler("ticker", "data", e.self.onTicker), RTBTC.handler("instrument", "data", r), this
        },
        onTrade: function(e) {
          h(e)
        },
        onTicker: function(e) {
          p(e)
        },
        onBar: function(e, t) {
          d(e, t)
        },
        onLoaded: function(t) {
          e._onLoaded = t
        },
        data: e.cache,
        loadPrev: function(t) {
          loadPeriod = t;
          if (e.online.indexOf(t) == -1)
            for (var n = 0; n < e.online.length; n++)
              if (e.online[n] <= t) {
                loadPeriod = e.online[n];
                break
              }
          s(loadPeriod, !1)
        },
        internals: function() {
          return e.debug ? function() {
            return e
          } : function() {
            return {}
          }
        }(),
        debug: function() {
          return e.debug ? t : function(e, t) {}
        }()
      }
    }
    var e = null;
    return new function() {
      this.Build = function() {
        return e == null && (e = new t, e.constructor = null), e
      }
    }
  }(),
  Data = Data_Class.Build();
var digit = 6,
  Indicator = function() {
    function n(t) {
      if (typeof t == "undefined") return;
      if (!t.hasOwnProperty("length")) return;
      var n;
      for (n = 0; n < e.ps.length; n++) {
        if (t.length <= n) continue;
        if (t[n] < e.ps[n].bounds[0]) continue;
        if (t[n] > e.ps[n].bounds[1]) continue;
        e.p[n] = t[n]
      }
    }

    function r(t) {
      var n = _("DMI");
      return n += "(" + ~~e.p[0] + ")", t >= 0 && e.output.length > 0 && t < e.output[0].length && (n += ": ", n += e.output[2][t].toFixed(1), n += ", +DI: ", n += e.output[1][t].toFixed(1), n += ", -DI: ", n += e.output[0][t].toFixed(1)), n
    }

    function s() {
      return [{
        type: e.LINE,
        data: e.output[0]
      }, {
        type: e.LINE,
        data: e.output[1]
      }, {
        type: e.LINE,
        data: e.output[2]
      }]
    }

    function o(t, n, r) {
      var i, s = 0,
        o = 0,
        u = 0,
        a, f, l = 0,
        c = 0,
        h, p, d, v = 0;
      e.output = [
        [0],
        [0],
        [0]
      ], e.min = Infinity, e.max = -Infinity;
      for (i = Math.min(t.length - 2, r + 150 - 1); i >= n; i--) o = Math.max(t[i][2] - t[i][3], Math.abs(t[i][2] - t[i + 1][4]), Math.abs(t[i][3] - t[i + 1][4])), a = t[i][2] - t[i + 1][2] > t[i + 1][3] - t[i][3] ? Math.max(t[i][2] - t[i + 1][2], 0) : 0, f = t[i + 1][3] - t[i][3] > t[i][2] - t[i + 1][2] ? Math.max(t[i + 1][3] - t[i][3], 0) : 0, s < e.p[0] ? (u += o, l += a, c += f) : (u = u - u / e.p[0] + o, l = l - l / e.p[0] + a, c = c - c / e.p[0] + f), h = 100 * l / u, p = 100 * c / u, d = 100 * Math.abs(h - p) / (h + p + 1e-6), s < e.p[0] ? v = 0 : s < 2 * e.p[0] ? v += d / e.p[0] : v = (v * (e.p[0] - 1) + d) / e.p[0], e.output[0].splice(0, 0, p), e.output[1].splice(0, 0, h), e.output[2].splice(0, 0, v), i < r && (p < e.min && (e.min = p), h < e.min && (e.min = h), v < e.min && (e.min = v), p > e.max && (e.max = p), h > e.max && (e.max = h), v > e.max && (e.max = v)), s++
    }

    function u() {
      return {
        major: [50],
        minor: [30, 70]
      }
    }

    function a() {
      return [{
        type: e.LINE,
        data: e.output[0]
      }, {
        type: e.LINE,
        data: e.output[1]
      }, {
        type: e.LINE,
        data: e.output[2]
      }]
    }

    function f(t, n, r) {
      var i, s = e.p[0],
        o = e.p[1],
        u = 0,
        a = 0,
        f = 0,
        l = .05,
        c = [],
        h = 0,
        p = [],
        d;
      e.output = [
        [],
        [],
        []
      ];
      for (i = Math.min(t.length - 1, r + s); i >= n; i--) d = t[i][4], c.splice(0, 0, d), p.splice(0, 0, d * d), a += d, f += p[0], c.length > s && (a -= c.pop(), f -= p.pop()), u = a / c.length, c.length > 1 ? (h = c.length, l = Math.sqrt((h * f - a * a) / (h * (h - 1)))) : l = 0, e.output[0].splice(0, 0, u), e.output[1].splice(0, 0, u + o * l), e.output[2].splice(0, 0, u - o * l)
    }

    function l(t) {
      var n = _("Bands");
      return n += "(" + ~~e.p[0] + ", " + e.p[1].toFixed(1) + ")", t >= 0 && e.output.length > 0 && t < e.output[0].length && (n += ": ", n += e.output[2][t].toFixed(digit) + ", ", n += e.output[0][t].toFixed(digit) + ", ", n += e.output[1][t].toFixed(digit)), n
    }

    function c() {
      return [{
        type: e.LINE,
        data: e.output[0]
      }]
    }

    function h() {
      return {
        major: [-200, -100, 100, 200],
        minor: [0]
      }
    }

    function p(t, n, r) {
      var i, s, o, u = e.p[0],
        a, f = [],
        l = Math.min(t.length - 1, r + e.p[0]),
        c;
      e.output = [
        []
      ];
      for (i = l; i >= n; i--) {
        a = (t[i][2] + t[i][3] + t[i][4]) / 3;
        var h = 0;
        for (s = i; s <= Math.min(i + u - 1, l); s++) h += t[s][4];
        var p = h / (Math.min(i + u - 1, l) - i + 1);
        f.splice(0, 0, p), f.length > u && f.pop();
        var d = 0;
        for (o = 0; o <= f.length - 1; o++) d += Math.abs(f[o] - t[i + o][4]);
        var v = d / f.length;
        v == 0 ? c = 0 : c = (a - p) / v / .015, e.output[0].splice(0, 0, c)
      }
    }

    function d(t) {
      var n = "CCI";
      return n += "(" + ~~e.p[0] + ")", t >= 0 && e.output.length > 0 && t < e.output[0].length && (n += " " + e.output[0][t].toFixed(digit)), n
    }

    function v() {
      return [{
        type: e.LINE,
        data: e.output[0]
      }, {
        type: e.LINE,
        data: e.output[1]
      }, {
        type: e.LINE,
        data: e.output[2]
      }]
    }

    function m(t, n, r) {
      var i, s, o = e.p[0],
        u = Math.min(t.length - 1, r + o),
        a = [],
        f, l, c = t[u][2],
        h = t[u][3];
      e.output = [
        [],
        [],
        []
      ];
      for (i = u; i >= n; i--) {
        f = t[i][4], a.splice(0, 0, f), f > c && (c = f), f < h && (h = f);
        if (a.length > o) {
          l = a.pop(), h = 1e15, c = -1e15;
          for (s = 0; s < a.length; s++) a[s] > c && (c = a[s]), a[s] < h && (h = a[s])
        }
        e.output[0].splice(0, 0, (c + h) / 2), e.output[1].splice(0, 0, c), e.output[2].splice(0, 0, h)
      }
    }

    function g(t) {
      var n = _("Channel");
      return n += "(" + ~~e.p[0] + ")", t >= 0 && e.output.length > 0 && t < e.output[0].length && (n += ": ", n += e.output[2][t].toFixed(digit) + ", ", n += e.output[0][t].toFixed(digit) + ", ", n += e.output[1][t].toFixed(digit)), n
    }

    function y() {
      return [{
        type: e.LINE,
        data: e.output
      }]
    }

    function b(t, n, r) {
      var i, s, o = e.p[0],
        u = 2 / (o + 1),
        a = Math.ceil(Math.log(.01) / Math.log(1 - u));
      e.output = [t[Math.min(t.length - 1, r + a + 1)][4]];
      for (i = Math.min(t.length - 2, r + a); i >= n; i--) s = u * t[i][4] + (1 - u) * e.output[0], e.output.splice(0, 0, s)
    }

    function w(t) {
      var n = "";
      return t >= 0 && t < e.output.length && (n = _("EMA"), n += "(" + ~~e.p[0] + "): ", n += e.output[t].toFixed(digit)), n
    }

    function E() {
      return [{
        type: e.LINE,
        data: e.output
      }]
    }

    function S(t, n, r) {
      var i, s, o = e.p[0],
        u = 2 / (o + 1),
        a = 0,
        f = 0;
      e.output = [];
      for (i = Math.min(t.length - 1, r + o); i >= n; i--) {
        if (a == o - 1) {
          f = 0;
          for (var l = 0; l <= o - 1; l++) f += t[i + l][4];
          e.output.splice(0, 0, f / o)
        } else a > o - 1 ? (f = e.output[0] * o, f -= t[i + o][4], f += t[i][4], e.output.splice(0, 0, f / o)) : e.output.splice(0, 0, undefined);
        a++
      }
    }

    function x(t) {
      var n = "";
      return t >= 0 && t < e.output.length && (n = _("MA"), n += "(" + ~~e.p[0] + "): ", n += (e.output[t] || 0).toFixed(digit)), n
    }

    function T() {
      return [{
        type: e.LINE,
        data: e.output
      }]
    }

    function N() {
      return {
        major: [-500, 500],
        minor: [0]
      }
    }

    function C(t, n, r) {
      var i, s, o, u = e.p[1],
        a = 2 / (u + 1),
        f = Math.ceil(Math.log(.01) / Math.log(1 - a));
      e.min = Infinity, e.max = -Infinity, e.output = [], i = Math.min(t.length - 1, r + f + 1);
      if (--i < 0) return;
      t[i][5] == 0 ? s = 0 : s = e.p[0] * (t[i][2] - t[i][3]) / t[i][5] * (t[i][2] + t[i][3] - t[i + 1][2] - t[i + 1][3]) * .5, o = s, e.output.splice(0, 0, o), --i;
      for (; i >= n; i--) t[i][5] == 0 ? s = 0 : s = e.p[0] * (t[i][2] - t[i][3]) / t[i][5] * (t[i][2] + t[i][3] - t[i + 1][2] - t[i + 1][3]) * .5, o = a * s + (1 - a) * o, o > e.max && (e.max = o), o < e.min && (e.min = o), e.output.splice(0, 0, o);
      e.max = e.max + (e.max - e.min) * .05
    }

    function k(t) {
      var n = _("EMV");
      return t >= 0 && t < e.output.length && (n += "(" + ~~e.p[0] + ", " + ~~e.p[1] + "): ", n += e.output[t].toFixed(digit)), n
    }

    function L() {
      return [{
        type: e.LINE,
        data: e.output
      }]
    }

    function A(t, n, r) {
      var i, s, o, u, a = e.p[0],
        f = 2 / (a + 1),
        l = Math.ceil(Math.log(.01) / Math.log(1 - f));
      s = t[Math.min(t.length - 1, r + l + 1)][4], o = s, u = o;
      for (i = Math.min(t.length - 2, r + l); i >= n; i--) s = f * t[i][4] + (1 - f) * s, o = f * s + (1 - f) * o, u = f * o + (1 - f) * u, e.output.splice(0, 0, u)
    }

    function O(t) {
      var n = _("TRIX");
      return t >= 0 && t < e.output.length && (n += "(" + ~~e.p[0] + "): ", n += e.output[t].toFixed(digit)), n
    }

    function M() {
      return [{
        type: e.HIST,
        data: e.output[0]
      }, {
        type: e.LINE,
        data: e.output[1]
      }, {
        type: e.LINE,
        data: e.output[2]
      }]
    }

    function D() {
      return {
        minor: [0]
      }
    }

    function P(t, n, r) {
      var i, s = 0,
        o = 0,
        u = 0,
        a, f, l = 2 / (1 + e.p[0]),
        c = 2 / (1 + e.p[1]),
        h = 2 / (1 + e.p[2]),
        p = Math.ceil(Math.log(.01) / Math.log(1 - Math.min(l, c))),
        d = t[Math.min(t.length - 1, r + p + 1)][4];
      e.output = [
        [0],
        [0],
        [0]
      ], s = d, o = d, u = 0, e.min = 0, e.max = 0;
      for (i = Math.min(t.length - 2, r + p); i >= n; i--) d = t[i][4], s = l * d + (1 - l) * s, o = c * d + (1 - c) * o, a = s - o, u = h * a + (1 - h) * u, f = a - u, e.output[0].splice(0, 0, f), e.output[1].splice(0, 0, u), e.output[2].splice(0, 0, a), i < r && (a > e.max && (e.max = a), a < e.min && (e.min = a), f > e.max && (e.max = f), f < e.min && (e.min = f));
      e.max = e.max + (e.max - e.min) * .05, 0 == e.max && 0 == e.min && (e.max = 10, e.min = -10)
    }

    function H(t) {
      var n = _("MACD");
      return n += "(" + ~~e.p[0] + ", " + ~~e.p[1] + ", " + ~~e.p[2] + ")", t >= 0 && e.output.length > 0 && t < e.output[0].length && (n += ": ", n += e.output[0][t].toFixed(digit) + ", ", n += e.output[1][t].toFixed(digit) + ", ", n += e.output[2][t].toFixed(digit)), n
    }

    function B() {
      return {
        major: [20, 80]
      }
    }

    function j() {
      return [{
        type: e.LINE,
        data: e.output
      }]
    }

    function F() {
      return {
        minor: [0]
      }
    }

    function I(t, n, r) {
      var i, s;
      if (t.length <= 1) return;
      e.output = [t[Math.min(t.length - 2, r - 1)][5] / BTC_INT], e.min = e.output[0], e.max = e.min;
      for (i = Math.min(t.length - 2, r - 1); i >= n; i--) s = t[i][4] > t[i + 1][4], s ? e.output.splice(0, 0, e.output[0] + t[i][5] / BTC_INT) : e.output.splice(0, 0, e.output[0] - t[i][5] / BTC_INT), e.output[0] < e.min && (e.min = e.output[0]), e.output[0] > e.max && (e.max = e.output[0])
    }

    function q(t) {
      var n = _("On Balance Volume");
      return t >= 0 && t < e.output.length && (n += ": ", n += e.output[t].toFixed(1)), n
    }

    function R() {
      return [{
        type: e.PSAR,
        data: e.output
      }]
    }

    function U(t, n, r) {
      var i = !0,
        s = e.p[0],
        o = e.p[1],
        u = 100,
        a = Math.min(t.length - 1, r + u),
        f, l, c = t[a][2],
        h = t[a][3],
        p = c,
        d = h,
        v;
      e.output = [d];
      for (v = a - 1; v >= n; v--) f = t[v][2], l = t[v][3], d = e.output[0] + s * (p - e.output[0]), i ? (f > p && (p = f, s += e.p[0], s > e.p[1] && (s = e.p[1])), d > l && (i = !1, d = p, s = e.p[0], p = l)) : (l < p && (p = l, s += e.p[0], s > e.p[1] && (s = e.p[1])), d < f && (i = !0, d = p, s = e.p[0], p = f)), c = f, h = l, e.output.splice(0, 0, d)
    }

    function z(t) {
      var n = "PSAR";
      return n += "(" + e.p[0].toFixed(3) + ", " + e.p[1].toFixed(digit) + ")", t >= 0 && t < e.output.length && (n += ": ", n += e.output[t].toFixed(digit)), n
    }

    function W() {
      return [{
        type: e.LINE,
        data: e.output
      }]
    }

    function X() {
      return {
        major: [30, 70],
        minor: [50]
      }
    }

    function V(t, n, r) {
      var i, s = 0,
        o, u = [],
        a = [],
        f = 0,
        l = 0,
        c = 0,
        h = !1,
        p = 0;
      e.output = [50];
      for (i = Math.min(t.length - 2, r + 250); i >= n; i--) {
        h = t[i][4] > t[i + 1][4], p = t[i][4] - t[i + 1][4], h ? u.push(p) : a.push(-p);
        if (s < e.p[0]) e.output.splice(0, 0, 50);
        else if (s == e.p[0]) {
          for (o = 0; o < u.length; o++) f += u[o];
          u.length == 0 ? f = 0 : f /= u.length;
          for (o = 0; o < a.length; o++) l += a[o];
          a.length == 0 ? l = 0 : l /= a.length, c = f / (l + 1e-8), e.output.splice(0, 0, 100 - 100 / (1 + c))
        } else f = (f * (e.p[0] - 1) + (h ? p : 0)) / e.p[0], l = (l * (e.p[0] - 1) + (h ? 0 : -p)) / e.p[0], c = f / (l + 1e-8), e.output.splice(0, 0, 100 - 100 / (1 + c));
        s++
      }
    }

    function $(t) {
      var n = _("RSI");
      return t >= 0 && t < e.output.length && (n += "(" + ~~e.p[0] + "): ", n += e.output[t].toFixed(1)), n
    }

    function J() {
      return [{
        type: e.LINE,
        data: e.output[0]
      }, {
        type: e.LINE,
        data: e.output[1]
      }]
    }

    function K() {
      return {
        major: [20, 80],
        minor: [50]
      }
    }

    function Q(t, n, r) {
      var i, s, o = [],
        u = 1e15,
        a = -1e15,
        f, l, c = 0,
        h = 0,
        p = 0,
        d = 2 / (e.p[2] + 1),
        v = 2 / (e.p[3] + 1);
      e.output = [
        [],
        []
      ];
      var m, g = 0,
        y, b = [],
        w = [],
        E = 0,
        S = 0,
        x = 0,
        T = 0,
        N = !1,
        C = 0;
      for (m = Math.min(t.length - 2, r + 250); m >= n; m--) {
        N = t[m][4] > t[m + 1][4], C = t[m][4] - t[m + 1][4], N ? b.push(C) : w.push(-C);
        if (g < e.p[0]) T = 50;
        else if (g == e.p[0]) {
          for (y = 0; y < b.length; y++) E += b[y];
          b.length == 0 ? E = 0 : E /= b.length;
          for (y = 0; y < w.length; y++) S += w[y];
          w.length == 0 ? S = 0 : S /= w.length, x = E / (S + 1e-8), T = 100 - 100 / (1 + x)
        } else E = (E * (e.p[0] - 1) + (N ? C : 0)) / e.p[0], S = (S * (e.p[0] - 1) + (N ? 0 : -C)) / e.p[0], x = E / (S + 1e-8), T = 100 - 100 / (1 + x);
        g++, o.splice(0, 0, T), T > a && (a = T), T < u && (u = T);
        if (o.length > e.p[1]) {
          l = o.pop();
          if (l >= a || l <= u) {
            u = 1e15, a = -1e15;
            for (s = 0; s < o.length; s++) o[s] > a && (a = o[s]), o[s] < u && (u = o[s])
          }
        }
        a == u ? c = 100 : c = 100 * (T - u) / (a - u), h = d * c + (1 - d) * h, p = v * h + (1 - v) * p, e.output[0].splice(0, 0, h), e.output[1].splice(0, 0, p)
      }
    }

    function G(t) {
      var n = "STORSI";
      return n += "(" + ~~e.p[0] + ", " + ~~e.p[1] + ", " + ~~e.p[2] + ", " + ~~e.p[3] + ")", t >= 0 && e.output.length > 0 && t < e.output[0].length && (n += " K:" + e.output[0][t].toFixed(digit) + ", ", n += " D:" + e.output[1][t].toFixed(digit)), n
    }

    function Y() {
      return [{
        type: e.LINE,
        data: e.output
      }]
    }

    function Z(t, n, r) {
      var i, s = [],
        o = 0,
        u, a = e.p[0];
      e.output = [];
      for (i = Math.min(t.length - 1, r + a); i >= n; i--) u = t[i][4], s.length < a ? (s.push(u), o = (o * (s.length - 1) + u) / s.length) : (o -= s[0] / a, o += u / a, s.splice(0, 1), s.push(u)), e.output.splice(0, 0, o)
    }

    function et(t) {
      var n = _("SMA");
      return t >= 0 && t < e.output.length && (n += "(" + ~~e.p[0] + "): ", n += e.output[t].toFixed(digit)), n
    }

    function tt() {
      return [{
        type: e.LINE,
        data: e.output[0]
      }, {
        type: e.LINE,
        data: e.output[1]
      }]
    }

    function nt() {
      return {
        major: [20, 80],
        minor: [50]
      }
    }

    function rt(t, n, r) {
      var i, s, o = [],
        u = 1e15,
        a = -1e15,
        f, l, c = 0,
        h = 0,
        p = 0,
        d = 2 / (e.p[1] + 1),
        v = 2 / (e.p[2] + 1);
      e.output = [
        [],
        []
      ];
      for (i = Math.min(t.length - 1, r + e.p[0]); i >= n; i--) {
        f = t[i][4], o.splice(0, 0, f), f > a && (a = f), f < u && (u = f);
        if (o.length > e.p[0]) {
          l = o.pop();
          if (l >= a || l <= u) {
            u = 1e15, a = -1e15;
            for (s = 0; s < o.length; s++) o[s] > a && (a = o[s]), o[s] < u && (u = o[s])
          }
        }
        a == u ? c = 100 : c = 100 * (f - u) / (a - u), h = d * c + (1 - d) * h, p = v * h + (1 - v) * p, e.output[0].splice(0, 0, h), e.output[1].splice(0, 0, p)
      }
    }

    function it(t) {
      var n = "STO";
      return t >= 0 && e.output.length > 0 && t < e.output[0].length && (n += " %K(" + ~~e.p[0] + ", " + ~~e.p[1] + "): ", n += e.output[0][t].toFixed(1), n += " %D(" + ~~e.p[2] + "): ", n += e.output[1][t].toFixed(1)), n
    }

    function st() {
      return [{
        type: e.LINE,
        data: e.output[0]
      }, {
        type: e.LINE,
        data: e.output[1]
      }, {
        type: e.LINE,
        data: e.output[2]
      }]
    }

    function ot() {
      return {
        major: [0, 100],
        minor: [50]
      }
    }

    function ut(t, n, r) {
      var i, s, o = [],
        u = 1e15,
        a = -1e15,
        f, l, c = 0,
        h = 0,
        p = 0,
        d = 0,
        v = 1 / e.p[1],
        m = 1 / e.p[2];
      e.output = [
        [],
        [],
        []
      ];
      for (i = Math.min(t.length - 1, r + e.p[0]); i >= n; i--) {
        f = t[i][4], o.splice(0, 0, f), f > a && (a = f), f < u && (u = f);
        if (o.length > e.p[0]) {
          l = o.pop();
          if (l >= a || l <= u) {
            u = 1e15, a = -1e15;
            for (s = 0; s < o.length; s++) o[s] > a && (a = o[s]), o[s] < u && (u = o[s])
          }
        }
        a == u ? c = 100 : c = 100 * (f - u) / (a - u), h = v * c + (1 - v) * h, p = m * h + (1 - m) * p, d = 3 * h - 2 * p, e.output[0].splice(0, 0, h), e.output[1].splice(0, 0, p), e.output[2].splice(0, 0, d)
      }
    }

    function at(t) {
      var n = "KDJ";
      return n += "(" + ~~e.p[0] + ", " + ~~e.p[1] + ", " + ~~e.p[2] + ")", t >= 0 && e.output.length > 0 && t < e.output[0].length && (n += " K:" + e.output[0][t].toFixed(digit) + ", ", n += " D:" + e.output[1][t].toFixed(digit) + ", ", n += " J:" + e.output[2][t].toFixed(digit)), n
    }

    function ft(t, n, r) {
      var i, s, o;
      if (typeof t == "undefined" || t.length <= n) return;
      e.max = -Infinity;
      for (i = 0; i <= r - n; i++) {
        s = t[i + n][5] / BTC_INT, s > e.max && (e.max = s);
        var u = !0;
        t[i + n][4] >= t[i + n][1] ? t[i + n][1] == t[i + n][4] && t[i + n + 1] && t[i + n + 1][4] > t[i + n][4] ? u = !1 : u = !0 : u = !1, e.output.push([s, u])
      }
      e.max == 0 ? e.max = 10 : e.max = e.max
    }

    function lt() {
      return [{
        type: e.LBLHIST,
        data: e.output
      }]
    }

    function ct(t) {
      var n = "";
      return t >= 0 && t < e.output.length && (n = _(getLang().volume), n += " " + e.output[t][0].toFixed(4)), n
    }

    function ht() {
      return [{
        type: e.LINE,
        data: e.output
      }]
    }

    function pt(t, n, r) {
      var i, s = 0,
        o = 0,
        u = 0;
      e.output = [];
      for (i = Math.min(t.length - 1, r + e.p[0]); i >= n; i--) s += t[i][4] * (t[i][5] / BTC_INT), o += t[i][5] / BTC_INT, u >= e.p[0] && (s -= t[i + e.p[0]][4] * (t[i + e.p[0]][5] / BTC_INT), o -= t[i + e.p[0]][5] / BTC_INT), e.output.splice(0, 0, s / o), u++
    }

    function dt(t) {
      var n = "VWAP";
      return n += "(" + ~~e.p[0] + ")", t >= 0 && t < e.output.length && (n += ": ", n += e.output[t].toFixed(digit)), n
    }

    function vt() {
      return {
        major: [20, 80],
        minor: [50]
      }
    }

    function mt() {
      return [{
        type: e.LINE,
        data: e.output
      }]
    }

    function gt(t, n, r) {
      var i, s, o = [],
        u = 1e15,
        a = -1e15,
        f, l, c = 0;
      e.output = [];
      for (i = Math.min(t.length - 1, r + e.p[0]); i >= n; i--) {
        f = t[i][4], o.splice(0, 0, f), f > a && (a = f), f < u && (u = f);
        if (o.length > e.p[0]) {
          l = o.pop();
          if (l >= a || l <= u) {
            u = 1e15, a = -1e15;
            for (s = 0; s < o.length; s++) o[s] > a && (a = o[s]), o[s] < u && (u = o[s])
          }
        }
        a == u ? c = 100 : c = 100 * (f - u) / (a - u), e.output.splice(0, 0, c)
      }
    }

    function yt(t) {
      var n = "Wm %R";
      return n += "(" + ~~e.p[0] + ")", t >= 0 && t < e.output.length && (n += ": ", n += e.output[t].toFixed(1)), n
    }

    function bt() {
      return {
        major: [-5, 5],
        minor: [0]
      }
    }

    function wt(t) {
      var n = _("MTM");
      return n += "(" + ~~e.p[0] + ")", t >= 0 && e.output.length > 0 && t < e.output.length && (n += ": ", n += e.output[t].toFixed(digit)), n
    }

    function Et() {
      return [{
        type: e.LINE,
        data: e.output
      }]
    }

    function St(t, n, r) {
      var i;
      e.min = Infinity, e.max = -Infinity, e.output = [];
      for (i = Math.min(t.length - 1 - e.p[0], r); i >= n; i--) {
        var s = t[i][4] - t[i + e.p[0]][4];
        s > e.max && (e.max = s), s < e.min && (e.min = s), e.output.splice(0, 0, s)
      }
      e.max = e.max + (e.max - e.min) * .05
    }

    function xt() {
      return [{
        type: e.LINE,
        data: e.output
      }]
    }

    function Tt(t, n, r) {
      var s = 0,
        o = 0;
      e.output = [];
      for (i = Math.min(t.length - 1, r); i >= n; i--) s += t[i][6], o += t[i][5], o == 0 ? e.output.splice(0, 0, t[i][4]) : e.output.splice(0, 0, s / o)
    }

    function Nt(t) {
      var n = "";
      return t >= 0 && t < e.output.length && (n = _("AVL"), n += e.output[t].toFixed(digit)), n
    }

    function Ct() {
      return [{
        type: e.LINE,
        data: e.output
      }]
    }

    function kt(t, n, r) {
      var s = 0,
        o = 0;
      e.output = [];
      for (i = Math.min(t.length - 1, r); i >= n; i--) s += (t[i][1] + t[i][2] + t[i][3] + t[i][4]) / 4 * t[i][5], o += t[i][5], o == 0 ? e.output.splice(0, 0, t[i][4]) : e.output.splice(0, 0, s / o)
    }

    function Lt(t) {
      var n = "";
      return t >= 0 && t < e.output.length && (n = _("AVL"), n += e.output[t].toFixed(digit)), n
    }

    function At(n) {
      DEBUG && t("Indicator: building " + n);
      switch (n) {
        case "dmi":
          e.shortName = "DMI", e.p = [14], e.ps = [{
            label: _("Period"),
            type: e.V.INT,
            bounds: [2, Infinity]
          }], e.label = r, e.draw = s, e.update = o;
          break;
        case "arn":
          e.shortName = "Aroon", e.min = 0, e.max = 100, e.p = [25], e.ps = [{
            label: _("Period"),
            type: e.V.INT,
            bounds: [2, Infinity]
          }], e.statics = u;
          break;
        case "atr":
          e.shortName = "ATR", e.p = [14], e.ps = [{
            label: _("Period"),
            type: e.V.INT,
            bounds: [2, Infinity]
          }];
          break;
        case "bnd":
          e.shortName = "Bands", e.p = [21, 2], e.ps = [{
            label: _("Period"),
            type: e.V.INT,
            bounds: [2, Infinity]
          }, {
            label: _("z Score"),
            type: e.V.FLOAT,
            bounds: [.1, Infinity],
            inc: .1,
            places: 1
          }], e.draw = a, e.update = f, e.label = l;
          break;
        case "cci":
          e.shortName = "CCI", e.min = -250, e.max = 250, e.p = [20], e.ps = [{
            label: _("Period"),
            type: e.V.INT,
            bounds: [2, Infinity]
          }], e.draw = c, e.statics = h, e.update = p, e.label = d;
          break;
        case "dcn":
          e.shortName = "Channels", e.p = [21], e.ps = [{
            label: _("Period"),
            type: e.V.INT,
            bounds: [2, Infinity]
          }], e.draw = v, e.update = m, e.label = g;
          break;
        case "ema":
          e.shortName = "EMA", e.p = [5], e.ps = [{
            label: _("Period"),
            type: e.V.INT,
            bounds: [1, Infinity]
          }], e.draw = y, e.update = b, e.label = w;
          break;
        case "ma":
          e.shortName = "MA", e.p = [5], e.ps = [{
            label: _("Period"),
            type: e.V.INT,
            bounds: [1, Infinity]
          }], e.draw = E, e.update = S, e.label = x;
          break;
        case "trix":
          e.shortName = "TRIX", e.p = [9], e.ps = [{
            label: _("Period"),
            type: e.V.INT,
            bounds: [1, Infinity]
          }], e.draw = L, e.update = A, e.label = O;
          break;
        case "macd":
          e.shortName = "MACD", e.p = [12, 26, 9], e.ps = [{
            label: "Short EMA",
            type: e.V.INT,
            bounds: [2, Infinity]
          }, {
            label: "Long EMA",
            type: e.V.INT,
            bounds: [2, Infinity]
          }, {
            label: "Signal",
            type: e.V.INT,
            bounds: [2, Infinity]
          }], e.label = H, e.draw = M, e.statics = D, e.update = P;
          break;
        case "mfi":
          e.shortName = "MFI", e.min = 0, e.max = 100, e.p = [14], e.ps = [{
            label: _("Period"),
            type: e.V.INT,
            bounds: [2, Infinity]
          }], e.statics = B;
          break;
        case "obv":
          e.shortName = "OBV", e.p = [], e.draw = j, e.statics = F, e.update = I, e.label = q;
          break;
        case "emv":
          e.shortName = "EMV", e.p = [1e4, 14], e.ps = [{
            label: "除数",
            type: e.V.INT,
            bounds: [2, Infinity]
          }, {
            label: "长度",
            type: e.V.INT,
            bounds: [2, Infinity]
          }], e.draw = T, e.statics = N, e.update = C, e.label = k;
          break;
        case "psar":
          e.shortName = "PSAR", e.p = [.02, .2], e.ps = [{
            label: "AF",
            type: e.V.FLOAT,
            bounds: [0, 1],
            inc: .01,
            places: 3
          }, {
            label: "Max AF",
            type: e.V.FLOAT,
            bounds: [0, 1],
            inc: .01,
            places: 3
          }], e.draw = R, e.update = U, e.label = z;
          break;
        case "rsi":
          e.shortName = "RSI", e.min = 0, e.max = 100, e.p = [14], e.ps = [{
            label: _("Period"),
            type: e.V.INT,
            bounds: [2, Infinity]
          }], e.draw = W, e.statics = X, e.update = V, e.label = $;
          break;
        case "storsi":
          e.shortName = "STORSI", e.min = 0, e.max = 100, e.p = [14, 9, 3, 3], e.ps = [{
            label: "RSI长度",
            type: e.V.INT,
            bounds: [1, Infinity]
          }, {
            label: "Stoch长度",
            type: e.V.INT,
            bounds: [1, Infinity]
          }, {
            label: "平滑%K",
            type: e.V.INT,
            bounds: [1, Infinity]
          }, {
            label: "平滑%D",
            type: e.V.INT,
            bounds: [1, Infinity]
          }], e.draw = J, e.statics = K, e.update = Q, e.label = G;
          break;
        case "sma":
          e.shortName = "SMA", e.p = [21], e.ps = [{
            label: _("Period"),
            type: e.V.INT,
            bounds: [2, Infinity]
          }], e.draw = Y, e.update = Z, e.label = et;
          break;
        case "sto":
          e.shortName = "STO", e.min = 0, e.max = 100, e.p = [14, 3, 3], e.ps = [{
            label: "长度",
            type: e.V.INT,
            bounds: [1, Infinity]
          }, {
            label: "平滑%K",
            type: e.V.INT,
            bounds: [1, Infinity]
          }, {
            label: "平滑%D",
            type: e.V.INT,
            bounds: [1, Infinity]
          }], e.draw = tt, e.statics = nt, e.update = rt, e.label = it;
          break;
        case "kdj":
          e.shortName = "KDJ", e.min = -50, e.max = 150, e.p = [9, 3, 3], e.ps = [{
            label: "%K",
            type: e.V.INT,
            bounds: [1, Infinity]
          }, {
            label: "%D",
            type: e.V.INT,
            bounds: [1, Infinity]
          }, {
            label: "%J",
            type: e.V.INT,
            bounds: [1, Infinity]
          }], e.draw = st, e.statics = ot, e.update = ut, e.label = at;
          break;
        case "vol":
          e.shortName = "VOL", e.min = 0, e.update = ft, e.draw = lt, e.label = ct;
          break;
        case "vwap":
          e.shortName = "VWAP", e.p = [14], e.ps = [{
            label: _("Period"),
            type: e.V.INT,
            bounds: [1, Infinity]
          }], e.draw = ht, e.update = pt, e.label = dt;
          break;
        case "wpr":
          e.shortName = "Wm %R", e.min = 0, e.max = 100, e.p = [14], e.ps = [{
            label: _("Period"),
            type: e.V.INT,
            bounds: [1, Infinity]
          }], e.draw = mt, e.statics = vt, e.update = gt, e.label = yt;
          break;
        case "mtm":
          e.shortName = "MTM", e.p = [14], e.ps = [{
            label: _("Period"),
            type: e.V.INT,
            bounds: [2, Infinity]
          }], e.label = wt, e.draw = Et, e.statics = bt, e.update = St;
          break;
        case "avl":
          e.shortName = "AVL", e.draw = xt, e.update = Tt, e.label = Nt;
          break;
        case "avlIndex":
          e.shortName = "AVL", e.draw = Ct, e.update = kt, e.label = Lt
      }
      e.type = n
    }

    function Ot(e) {}

    function Mt() {
      e.output = []
    }
    var e = {
        type: "",
        shortName: "IND",
        color: null,
        min: 0,
        max: 1,
        p: [],
        ps: [],
        V: new Validator,
        input: null,
        output: [],
        cache: {
          i0: -1,
          i1: -1,
          t0: -1,
          values: []
        },
        CANDLE: 0,
        OHLC: 1,
        HLC: 2,
        LINE: 3,
        MOUNTAIN: 4,
        BANDS: 5,
        PSAR: 6,
        HIST: 7,
        LBLHIST: 8,
        HISTLINE: 9,
        draw: function() {
          return []
        },
        statics: function() {
          return {}
        },
        update: function(e, t, n) {},
        label: function(e) {
          return ""
        },
        debug: RTBTC.isDebug()
      },
      t = RTBTC.debug;
    return {
      build: function(e, t) {
        return At(e), n(t), this
      },
      reset: function() {
        return Mt(), this
      },
      bounds: function() {
        return [e.min, e.max]
      },
      update: function(t, n, r) {
        e.output = [];
        if (typeof t == "undefined") return;
        if (!t.hasOwnProperty("length")) return;
        if (t.length == 0) return;
        return e.update(t, n, r), this
      },
      draw: function() {
        return e.draw()
      },
      statics: function() {
        return e.statics()
      },
      label: function(t) {
        return e.label(t)
      },
      color: function(t) {
        return typeof t == "undefined" ? e.color : (e.color = t, this)
      },
      shortName: function() {
        return e.shortName
      },
      settings: function() {
        return e.p
      },
      paramSettings: function() {
        return e.ps
      },
      params: function(e) {},
      paramUpdate: function(t, n) {
        return e.p[t] = n, this
      },
      internals: function() {
        return e.debug ? function() {
          return e
        } : function() {
          return null
        }
      }()
    }
  };
var mobile, Chart = function() {
  function n() {
    $(e.element).empty(), e.w = $(e.element).width(), e.h = $(e.element).height(), DEBUG && t("#######################_P.w, h: " + e.w + ", " + e.h), e.canvas.base = $("<canvas/>").attr("width", e.w + "px").attr("height", e.h + "px").attr("z-index", 100), e.canvas.bg = $("<canvas/>").attr("width", e.w + "px").attr("height", e.h + "px").attr("z-index", 101), e.canvas.main = $("<canvas/>").attr("width", e.w + "px").attr("height", e.h + "px").attr("z-index", 102), e.canvas.fg = $("<canvas/>").attr("width", e.w + "px").attr("height", e.h + "px").attr("z-index", 103), e.canvas.orders = $("<canvas/>").attr("width", e.w + "px").attr("height", e.h + "px").attr("z-index", 104), e.canvas.lbl = $("<canvas/>").attr("width", e.w + "px").attr("height", e.h + "px").attr("z-index", 105), e.canvas.line = $("<canvas/>").attr("width", e.w + "px").attr("height", e.h + "px").attr("z-index", 106).attr("id", "line"), e.canvas.i = $("<canvas/>").attr("width", e.w + "px").attr("height", e.h + "px").attr("z-index", 107), $(e.element).append(e.canvas.base).append(e.canvas.bg).append(e.canvas.main).append(e.canvas.fg).append(e.canvas.orders).append(e.canvas.lbl).append(e.canvas.line).append(e.canvas.i);
    var n = e.canvas.line[0].getContext("2d")
  }

  function r() {
    var n = (e.slots.length - 1) * (2 + e.px.pad) + 1 + e.px.lbl.h,
      r = e.h - n,
      i = -1,
      s;
    for (s = 0; s < e.slots.length; s++) e.slots[s].hasOwnProperty("main") ? e.slots[s].h = (e.mainSlotHeightPercent || .67) * r | 0 : e.slots[s].h = (1 - e.mainSlotHeightPercent || .33) * r / (e.slots.length - 1) | 0, e.slots[s].px = i, i += e.slots[s].h + 2 + e.px.pad + 1, DEBUG && t("Slot " + s + " height: " + e.slots[s].h + ", px: " + e.slots[s].px)
  }

  function s(t) {
    r();
    if (typeof t == "undefined") return;
    var n = new Validator,
      s = (new Validator).create(n.INT),
      o = (new Validator).create(n.BOOL);
    t.hasOwnProperty("r") && (e.settings.repaint = o.set(e.settings.repaint).set(t.r).get()), t.hasOwnProperty("g") && (e.settings.grid = o.set(e.settings.grid).set(t.g).get()), t.hasOwnProperty("c") && (e.settings.crosshairs = o.set(e.settings.crosshairs).set(t.c).get()), t.hasOwnProperty("k") && (e.settings.icontrols = o.set(e.settings.icontrols).set(t.k).get()), t.hasOwnProperty("b") && (e.settings.bidask = o.set(e.settings.bidask).set(t.b).get()), t.hasOwnProperty("l") && (e.settings.logscale = o.set(e.settings.logscale).set(t.l).get()), t.hasOwnProperty("o") && (e.settings.userorders = o.set(e.settings.userorders).set(t.o).get()), t.hasOwnProperty("time") && (e.settings.time = o.set(e.settings.userorders).set(t.time).get()), t.hasOwnProperty("m") && (e.mode.current = s.set(e.mode.current).set(t.m).get()), t.hasOwnProperty("d") && (e.mode.display = s.set(e.mode.display).set(t.d).get()), t.hasOwnProperty("w") && (e.px.bar.width = s.set(e.px.bar.width).set(t.w).get()), t.hasOwnProperty("s") && (e.px.bar.spacing = s.set(e.px.bar.spacing).set(t.s).get());
    var u = s.set(e.period.avail[e.period.current]).set(t.t).get();
    for (i = 0; i < e.period.avail.length; i++) e.period.avail[i] == u && (e.period.current = i);
    if (!t.hasOwnProperty("i")) return;
    var a = [],
      f, l = ["m", "p", "h"],
      c, h, p, d, v = [],
      m = [];
    for (i in e.indicators) e.indicators.hasOwnProperty(i) && v.push(i);
    for (i in e.overlays) e.overlays.hasOwnProperty(i) && m.push(i);
    for (i = 0; i < t.i.length; i++) {
      h = !0;
      for (c = 0; c < l.length; c++) h = h && t.i[i].hasOwnProperty(l[c]);
      if (!h) continue;
      p = {
        px: ~~+t.i[i].p,
        h: ~~+t.i[i].h
      };
      if (t.i[i].m) {
        p.main = !0, p.o = [], p.u = [];
        if (t.i[i].hasOwnProperty("o"))
          for (c = 0; c < t.i[i].o.length; c++) d = null, t.i[i].o[c].hasOwnProperty("t") && m.indexOf(t.i[i].o[c].t) >= 0 && t.i[i].o[c].hasOwnProperty("s") && (t.i[i].o[c].hasOwnProperty("c") && (d = t.i[i].o[c].c), p.o.push({
            t: t.i[i].o[c].t,
            i: null,
            s: t.i[i].o[c].s,
            c: d
          }));
        if (t.i[i].hasOwnProperty("u"))
          for (c = 0; c < t.i[i].u.length; c++) t.i[i].u[c].hasOwnProperty("t") && m.indexOf(t.i[i].u[c].t) >= 0 && t.i[i].u[c].hasOwnProperty("s") && (t.i[i].u[c].hasOwnProperty("c") && (d = t.i[i].u[c].c), p.u.push({
            t: t.i[i].u[c].t,
            i: null,
            s: t.i[i].u[c].s,
            c: d
          }))
      } else {
        if (!(v.indexOf(t.i[i].t) >= 0 && t.i[i].hasOwnProperty("r"))) continue;
        p.t = t.i[i].t, p.i = null, p.s = t.i[i].r
      }
      a.push(p)
    }
    a.length > 0 && (e.slots = a, r())
  }

  function o() {
    var t;
    e.bars.data = [];
    if (e.period.avail[e.period.current] == 0) {
      for (t = 0; t < e.bars.ticks.length; t++) e.bars.splice(0, 0, [e.bars.ticks[t][0], e.bars.ticks[t][1], e.bars.ticks[t][1], e.bars.ticks[t][1], e.bars.ticks[t][1], e.bars.ticks[t][2]]);
      return
    }
    e.bars.data.push([e.bars.ticks[0][0], e.bars.ticks[0][1], e.bars.ticks[0][1], e.bars.ticks[0][1], e.bars.ticks[0][1], e.bars.ticks[0][2]]);
    for (t = 1; t < e.bars.ticks.length; t++) u(e.bars.ticks[t])
  }

  function u(t) {
    var n = t[0],
      r = Cn();
    e.bars.data.length == 0 || r == 0 || n >= e.bars.data[0][0] + r * 1e3 ? (e.bars.data.splice(0, 0, [n, t[1], t[1], t[1], t[1], t[2]]), e.flags.recompute = !0) : (t[1] > e.bars.data[0][2] && (e.bars.data[0][2] = t[1]), t[1] < e.bars.data[0][3] && (e.bars.data[0][3] = t[1]), e.bars.data[0][4] = t[1], e.bars.data[0][5] += t[2], e.flags.recompute = !0);
    if (t[1] > e.highPrice || t[1] < e.lowPrice || e.bars.data[0][5] > e.maxVol) e.flags.recompute = !0
  }

  function a(e) {
    var t = parseFloat(e[0]),
      n = parseFloat(e[1]),
      r = parseFloat(e[2]);
    return !(isNaN(t) || isNaN(n) || isNaN(r))
  }

  function f() {
    var t, n, r = {};
    r.r = e.settings.repaint, r.g = e.settings.grid, r.c = e.settings.crosshairs, r.k = e.settings.icontrols, r.b = e.settings.bidask, r.l = e.settings.logscale, r.o = e.settings.userorders, r.m = +~~e.mode.current, r.d = +~~e.mode.display, r.t = +~~e.period.avail[e.period.current], r.w = +~~e.px.bar.width, r.s = +~~e.px.bar.spacing, r.i = [];
    for (t = 0; t < e.slots.length; t++)
      if (e.slots[t].hasOwnProperty("main")) {
        var i = [],
          s = [],
          o;
        for (n = 0; n < e.slots[t].o.length; n++) o = R(t, n, "o"), i.push({
          t: e.slots[t].o[n].t,
          s: e.slots[t].o[n].i.settings(),
          c: o
        });
        for (n = 0; n < e.slots[t].u.length; n++) o = R(t, n, "u"), s.push({
          t: e.slots[t].u[n].t,
          s: e.slots[t].u[n].i.settings(),
          c: o
        });
        r.i.push({
          m: !0,
          p: +~~e.slots[t].px,
          h: +~~e.slots[t].h,
          o: i,
          u: s
        })
      } else r.i.push({
        m: !1,
        t: e.slots[t].t,
        p: +~~e.slots[t].px,
        h: +~~e.slots[t].h,
        r: e.slots[t].i.settings()
      });
    return r
  }

  function l(e) {
    var t = "";
    switch (e) {
      case 0:
        t = "日";
        break;
      case 1:
        t = "一";
        break;
      case 2:
        t = "二";
        break;
      case 3:
        t = "三";
        break;
      case 4:
        t = "四";
        break;
      case 5:
        t = "五";
        break;
      case 6:
        t = "六";
        break;
      default:
    }
    return t
  }

  function c() {
    $(e.element).append($('<div id="chartCtrlFixed" class="chartCtrl" hidden><div class="content"><div>时间:<span id="date"></span></div><div>开盘:<span id="open"></span></div><div>最高:<span id="high"></span></div><div>最低:<span id="low"></span></div><div>收盘:<span  id="close"></span></div><div>涨幅:<span id="updownPercent" ></span></div><div>振幅:<span  id="updown1"></span></div><div>成交量:<span  id="volume"></span></div><div>成交额:<span  id="quoteVolume"></span></div><div>换手率:<span  id="hand"></span></div></div></div>'));
    var t = null;
    $(e.element).mouseover(function() {
      e.mode.display == e.CANDLE
    }), $(e.element).mouseout(function() {
      e.mode.display == e.CANDLE && $("#chartCtrlFixed").hide()
    }), e.updateXFK = function(t) {
      if (t) i = n = [(new Date).getTime(), 0, 0, 0, 0, 0];
      else var n = e.bars.data[e.curIndex],
        r = e.curIndex + 1 >= e.bars.data.length ? e.curIndex : e.curIndex + 1,
        i = e.bars.data[r];
      var s = e.period.avail[e.period.current],
        o;
      s > 0 && s <= 3600 ? o = (new Date(n[0])).Format("MM-dd hh:mm") : s == 86400 ? o = (new Date(n[0])).Format("yyyy/MM/dd/") + l((new Date(n[0])).getDay()) : s == 604800 && (o = (new Date(n[0])).Format("yyyy-MM-dd")), t && (o = "--"), $("#chartCtrlFixed #date").text(o), $("#chartCtrlFixed #open").text(t ? "--" : jt(n[1])), $("#chartCtrlFixed #open").css("color", n[1] < i[4] ? "#ff4056" : n[1] > i[4] ? "#34ce6b" : ""), $("#chartCtrlFixed #high").text(t ? "--" : jt(n[2])), $("#chartCtrlFixed #high").css("color", n[2] < i[4] ? "#ff4056" : n[2] > i[4] ? "#34ce6b" : ""), $("#chartCtrlFixed #low").text(t ? "--" : jt(n[3])), $("#chartCtrlFixed #low").css("color", n[3] < i[4] ? "#ff4056" : n[3] > i[4] ? "#34ce6b" : ""), $("#chartCtrlFixed #close").text(t ? "--" : jt(n[4])), $("#chartCtrlFixed #close").css("color", n[4] < i[4] ? "#ff4056" : n[4] > i[4] ? "#34ce6b" : ""), $("#chartCtrlFixed #updownPercent").text(t ? "--" : (100 * (n[4] - i[4]) / i[4]).toFixed(2) + "%"), $("#chartCtrlFixed #updownPercent").css("color", n[4] < i[4] ? "#ff4056" : n[4] > i[4] ? "#34ce6b" : ""), $("#chartCtrlFixed #updown1").text(t ? "--" : (100 * (n[2] - n[3]) / i[4]).toFixed(2) + "%"), $("#chartCtrlFixed #volume").text(t ? "--" : n[5].toFixed(0)), $("#chartCtrlFixed #hand").text(t ? "--" : ((e.data.circulation ? n[5] / e.data.circulation : 0) * 100).toFixed(6) + "%")
    }
  }

  function h(t) {
    if (e.mode.display == e.CANDLE) return;
    var n;
    t < 0 || t > e.bars.data.length ? n = [(new Date).getTime(), 0, 0, 0, 0, 0] : n = e.bars.data[t];
    if (!n) return;
    $("#time").text((new Date(n[0])).Format("hh:mm")), $("#price").text(n[4].toFixed(6)), $("#volume").text(n[5].toFixed(0)), $("#updown").text((n[4] == 0 ? 0 : n[4] - e.preClose).toFixed(6)), $("#price").css("color", n[4] >= e.preClose ? "red" : "green"), $("#updown").css("color", n[4] >= e.preClose ? "red" : "green")
  }

  function p() {
    $(e.element).attr("tabindex", 0).keydown(function(t) {
      if (t.keyCode != 37 && t.keyCode != 39) return;
      e.mouse.x < 0 && (e.mouse.x = 0), e.mouse.x > Xt(0, 0) && (e.mouse.x = Xt(0, 0));
      if (t.keyCode == 37) {
        e.mode.display == e.CANDLE;
        var n = e.mouse.x - e.px.bar.width - e.px.bar.spacing,
          r = $t(n < 0 ? 0 : n);
        if (r > e.bars.visible - 4) {
          var i = Gt(r);
          i < e.bars.data.length && (e.bars.offset++, O())
        } else e.mouse.x -= e.px.bar.width + e.px.bar.spacing, e.mouse.x < 0 && (e.mouse.x = 0)
      } else if (t.keyCode == 39) {
        var r = $t(e.mouse.x + e.px.bar.width + e.px.bar.spacing);
        r == 0 && e.bars.offset > 0 ? (e.bars.offset--, O()) : e.mouse.x += e.px.bar.width + e.px.bar.spacing
      }
      e.bars.data[Gt($t(e.mouse.x))] && (e.mouse.y = Wt(e.bars.data[Gt($t(e.mouse.x))][4], 0)), window.reqAnimFrame(function() {
        at(e.mouse.x, e.mouse.y, !0)
      })
    })
  }

  function d(t) {
    t.clearRect(0, 0, 40, 13), t.fillText((100 * (e.preClose ? e.price.high / e.preClose - 1 : 0)).toFixed(2) + "%", 2, 1, 40);
    var n = Wt(e.price.low, 0);
    t.clearRect(0, n - 15, 40, 12), t.fillText((100 * (e.preClose ? e.price.low / e.preClose - 1 : 0)).toFixed(2) + "%", 2, n - 12, 40)
  }

  function v(t) {
    var n = [],
      r = 0,
      i = $("<div/>").addClass("control-" + t);
    return n[r++] = '<span class="settings-popout">', n[r++] = '<span class="icon settings">', n[r++] = '<i class="icon-wrench"></i></span>', n[r++] = "</span>", i.addClass("icontrol").html(n.join("")).css("top", e.slots[t].px + 3 + "px"), i.hide(), t == 0 ? $("span.move-up i", i).addClass("disable") : $("span.move-up", i).tooltip({
      placement: "right",
      title: _("Move Up")
    }).click(function(e) {
      return function() {
        C(e, !0)
      }
    }(t)), $("span.settings", i).tooltip({
      placement: "right",
      title: _("Settings")
    }).click(function(e) {
      return function() {
        m(e)
      }
    }(t)), t == e.slots.length - 1 && $("span.move-down i", i).addClass("disable"), i
  }

  function m(t) {
    if (e.slots.length <= t) return;
    if (t < 0) return;
    if ($(".popout .extra-settings").length > 0) return;
    var n = $(".control-" + t, e.element);
    n.click(function(e) {
      e.stopPropagation()
    }), $(document).click(function() {
      $(".extra-settings", n).remove(), $(".colorpicker").hide(), n.data("popped", !1)
    });
    if (n.data("popped")) {
      $(".extra-settings", n).remove(), n.removeClass("popout"), n.data("popped", !1), $(".settings", n).tooltip("enable");
      return
    }
    var r = $("<span/>").addClass("extra-settings"),
      i = [];
    if (!e.slots[t].hasOwnProperty("main")) {
      r.append($("<span/>").addClass("icon remove-icon").append($("<i/>").addClass("icon-trash")).click(function(t) {
        return function() {
          $(".control-" + t + " .remove-icon", e.element).tooltip("hide"), L(t)
        }
      }(t)).tooltip({
        placement: "bottom",
        title: _("Remove")
      }));
      var s = e.slots[t].i.settings(),
        o = e.slots[t].i.paramSettings(),
        u = "",
        a = "";
      for (var f = 0; f < s.length; f++) u = uniqueID(), r.append($("<span/>").addClass("param-field").append($("<strong/>").text(o[f].hasOwnProperty("label") ? o[f].label : "P" + (f + 1))).append($("<input/>").attr("type", "text").val(s[f]).addClass("param-input").attr("id", u))), i.push({
        val: s[f],
        sel: "#" + u,
        set: o[f],
        fn: function(e, t) {
          return function(n) {
            typeof e == "function" && e(t, n), O()
          }
        }(e.slots[t].i.paramUpdate, f)
      })
    } else {
      var f, l, s, o, u, c, h, p, d = $("<div/>").addClass("underlays sortable"),
        v = $("<div/>").addClass("overlays sortable"),
        g = $("<div/>").addClass("rows");
      g.append($("<div/>").addClass("title").html(_("Behind Price")));
      for (l = 0; l < e.slots[t].u.length; l++) {
        h = R(t, l, "u"), e.slots[t]["u"][l]["t"] == "bidask" && (h = null), p = uniqueID(), c = $("<div/>").addClass("row").addClass("row1").addClass("u" + l).data({
          j: l,
          place: "u"
        }).append($("<span/>").addClass("icon reorder-icon").append($("<i/>").addClass("icon-reorder").css("color", h).attr("id", p))).append($("<u/>").html(e.slots[t].u[l].i.shortName() + ": ")), s = e.slots[t].u[l].i.settings(), o = e.slots[t].u[l].i.paramSettings(), u = "", s.length == 0 && c.append($("<u/>").text(" --- "));
        for (f = 0; f < s.length; f++) u = uniqueID(), c.append($("<span/>").addClass("param-field").append($("<strong/>").text(o[f].hasOwnProperty("label") ? o[f].label : "P" + (f + 1))).append($("<input/>").attr("type", "text").val(s[f]).addClass("param-input").attr("id", u))), i.push({
          val: s[f],
          sel: "#" + u,
          set: o[f],
          fn: function(n, r, i) {
            return function(s) {
              typeof n == "function" && n(r, s), e.slots[t].u[i].s = [s], O()
            }
          }(e.slots[t].u[l].i.paramUpdate, f, l)
        });
        u = uniqueID(), c.append($("<span/>").addClass("icon remove-icon").attr("id", u).append($("<i/>").addClass("icon-trash")).click(function(e, t, n, r) {
          return function() {
            $("#" + e).tooltip("hide"), k(t, n, r), m(r), m(r)
          }
        }(u, l, "u", t)).tooltip({
          placement: "right",
          title: _("Remove")
        })), a = uniqueID(), c.append($("<span/>").addClass("icon edit-icon").attr("id", a).append($("<i/>").addClass("icon-edit")).click(function(e, t, n, r, i) {
          return b(e, t, n, r, i)
        }(a, t, "u", l, p)).tooltip({
          placement: "right",
          title: _("Pick Color")
        })), c.append(clearingSpan()), d.append(c)
      }
      g.append(d), g.append($("<div/>").addClass("title").html(_("In Front of Price")));
      for (l = 0; l < e.slots[t].o.length; l++) {
        h = R(t, l, "o"), e.slots[t]["o"][l]["t"] == "bidask" && (h = null), p = uniqueID(), c = $("<div/>").addClass("row").addClass("o" + l).data({
          j: l,
          place: "o"
        }).append($("<span/>").addClass("icon reorder-icon").append($("<i/>").addClass("icon-reorder").css("color", h).attr("id", p))).append($("<u/>").html(e.slots[t].o[l].i.shortName() + ": ")), s = e.slots[t].o[l].i.settings(), o = e.slots[t].o[l].i.paramSettings(), u = "", s.length == 0 && c.append($("<u/>").text(" --- "));
        for (f = 0; f < s.length; f++) u = uniqueID(), c.append($("<span/>").addClass("param-field").append($("<strong/>").text(o[f].hasOwnProperty("label") ? o[f].label : "P" + (f + 1))).append($("<input/>").attr("type", "text").val(s[f]).addClass("param-input").attr("id", u))), i.push({
          val: s[f],
          sel: "#" + u,
          set: o[f],
          fn: function(n, r, i) {
            return function(s) {
              typeof n == "function" && n(r, s), e.slots[t].o[i].s = [s], O()
            }
          }(e.slots[t].o[l].i.paramUpdate, f, l)
        });
        u = uniqueID(), c.append($("<span/>").addClass("icon remove-icon").attr("id", u).append($("<i/>").addClass("icon-trash")).click(function(e, t, n, r) {
          return function() {
            $("#" + e).tooltip("hide"), k(t, n, r), m(r), m(r)
          }
        }(u, l, "o", t)).tooltip({
          placement: "right",
          title: _("Remove")
        })), a = uniqueID(), c.append($("<span/>").addClass("icon edit-icon").attr("id", a).append($("<i/>").addClass("icon-edit")).click(function(e, t, n, r, i) {
          return b(e, t, n, r, i)
        }(a, t, "o", l, p)).tooltip({
          placement: "right",
          title: _("Pick Color")
        })), c.append(clearingSpan()), v.append(c)
      }
      g.append(v), r.append(g);
      var y = {
        axis: "y",
        containment: $(".rows", r),
        placeholder: "sortable-empty-slot",
        forcePlaceholderSize: !0,
        tolerance: "pointer",
        handle: $(".reorder-icon", r),
        items: ".row",
        start: function(e, t) {},
        sortupdate: function(t) {
          return function(n, r) {
            var i, s = -1;
            for (s = 0; s < e.slots.length; s++)
              if (e.slots[s].hasOwnProperty("main")) break;
            var o = {
              u: deepCopy(e.slots[s].u),
              o: deepCopy(e.slots[s].o)
            };
            e.slots[s].u = [], e.slots[s].o = [], $(".underlays .row1", t).each(function(t, n) {
              e.slots[s].u.push(deepCopy(o[$(n).data("place")][$(n).data("j")]))
            }), $(".overlays .row1", t).each(function(t, n) {
              e.slots[s].o.push(deepCopy(o[$(n).data("place")][$(n).data("j")]))
            }), m(s), m(s), O(), $(".underlays .row1", t).each(function(e, t) {
              $(t).data("place", "u").data("j", e)
            }), $(".overlays .row1", t).each(function(e, t) {
              $(t).data("place", "o").data("j", e)
            }), O()
          }
        }($(".rows", r))
      };
      $(".overlays", r).append("<div class='row' style='height:0'></div>"), $(".underlays", r).append("<div class='row' style='height:0'></div>")
    }
    r.append(clearingSpan()), $(".settings-popout", n).append(r);
    for (var l = 0; l < i.length; l++) $(i[l].sel).data("value", i[l].val), E(t, i[l].sel, i[l].set, i[l].fn, O);
    n.addClass("popout"), $(".settings", n).tooltip("disable"), n.data("popped", !0)
  }

  function g() {
    var t, n;
    for (t = 0; t < e.slots.length; t++) n = $(".control-" + t, e.element), n.data("popped") && m(t)
  }

  function y() {
    var t, n;
    for (t = 0; t < e.slots.length; t++) n = $(".control-" + t, e.element), n.data("popped") || n.hide()
  }

  function b(t, n, r, i, s) {
    return function() {
      $("#" + t).ColorPicker({
        color: R(n, i, r),
        onChange: function(t, o, u) {
          U(n, i, r, "#" + o), r == "o" ? e.flags.redraw.overlay = !0 : r == "u" && (e.flags.redraw.underlay = !0), window.reqAnimFrame(A), $("#" + s).css("color", "#" + o)
        },
        onHide: function() {}
      }).ColorPickerShow(), $(".colorpicker").click(function(e) {
        e.stopPropagation()
      })
    }
  }

  function E(e, t, n, r, i, s) {
    var o = new Validator,
      u = (new Validator).create(n.type),
      a = n.hasOwnProperty("inc") ? n.inc : 1,
      f = n.hasOwnProperty("places") ? n.places : 0;
    $(t).on({
      keyup: function(i) {
        var s = $(t),
          o = i.keyCode || i.which,
          l = {
            left: 37,
            up: 38,
            right: 39,
            down: 40
          },
          c = {
            enter: 13,
            esc: 27
          },
          h = !1,
          p = s.data("value");
        switch (o) {
          case l.up:
            p + a <= n.bounds[1] && (s.data("value", p + a), s.val((p + a).toFixed(f)), typeof r == "function" && r(p + a));
            break;
          case l.down:
            p - a >= n.bounds[0] && (s.data("value", p - a), s.val((p - a).toFixed(f)), typeof r == "function" && r(p - a));
            break;
          case c.enter:
          case c.esc:
            i.preventDefault(), i.stopPropagation(), m(e);
            break;
          default:
            h = !0
        }
        if (h) {
          var d = +s.val(),
            v = u.set(p).set(d).get();
          v != p && (v >= n.bounds[0] && v <= n.bounds[1] ? (s.data("value", v), typeof r == "function" && r(v)) : s.val().length > 0 && s.val(p))
        }
      },
      blur: function() {
        $(t).val().length == 0 && $(t).val($(t).data("value")), typeof i == "function" && i()
      }
    })
  }

  function S() {
    var t = [],
      n = [],
      r = [{
        val: 0,
        text: _("Indicator…")
      }],
      i = [{
        val: 0,
        text: _("Overlay…")
      }],
      s;
    for (s = 0; s < e.period.avail.length; s++) t.push({
      val: e.period.avail[s],
      text: Ln(e.period.avail[s])
    });
    for (s = 0; s < e.mode.avail_display.length; s++) n.push({
      val: s,
      text: e.mode.avail_display[s]
    });
    for (s in e.indicators) e.indicators.hasOwnProperty(s) && r.push({
      val: s,
      text: e.indicators[s]
    });
    for (s in e.overlays) e.overlays.hasOwnProperty(s) && i.push({
      val: s,
      text: e.overlays[s]
    });
    return [$("<p/>").append(RTBTC.select(e.period.avail[e.period.current], t, function(t) {
      e.period.current = e.period.avail.indexOf(+t), Mn(), O()
    })).append($("<span/>").addClass("control-label").html(_("Time Period"))), $("<p/>").append(RTBTC.select(e.mode.display, n, function(t) {
      e.mode.display = +t, O()
    })).append($("<span/>").addClass("control-label").html(_("Draw Style"))), $("<p/>").append(RTBTC.toggle(e.settings.bidask, function() {
      e.settings.bidask = !0
    }, function() {
      e.settings.bidask = !1
    }, function() {
      O()
    })).append($("<span/>").addClass("control-label").html(_("Show Bid / Ask"))), $("<p/>").append(RTBTC.toggle(e.settings.crosshairs, function() {
      e.settings.crosshairs = !0
    }, function() {
      e.settings.crosshairs = !1
    }, function() {
      O()
    })).append($("<span/>").addClass("control-label").html(_("Show Crosshair"))), $("<p/>").append(RTBTC.toggle(e.settings.grid, function() {
      e.settings.grid = !0
    }, function() {
      e.settings.grid = !1
    }, function() {
      O()
    })).append($("<span/>").addClass("control-label").html(_("Show Grid"))), $("<p/>").append(RTBTC.toggle(e.settings.icontrols, function() {
      e.settings.icontrols = !0
    }, function() {
      e.settings.icontrols = !1;
      for (var t = 0; t < e.slots.length; t++) $(".control-" + t, e.element).hide().data("popped", !1)
    }, function() {
      O()
    })).append($("<span/>").addClass("control-label").html(_("Show Indicator Controls"))), $("<p/>").append(RTBTC.toggle(e.settings.logscale, function() {
      e.settings.logscale = !0
    }, function() {
      e.settings.logscale = !1
    }, function() {
      O()
    })).append($("<span/>").addClass("control-label").html(_("Logarithmic Scale"))), $("<p/>").append(RTBTC.select(0, i, function(e) {
      +e !== 0 && T(e)
    }, !0)).append($("<span/>").addClass("control-label").html(_("Add Overlay"))), $("<p/>").append(RTBTC.select(0, r, function(e) {
      +e !== 0 && N(e)
    }, !0)).append($("<span/>").addClass("control-label").html(_("Add Indicator"))), $("<p/>").append(RTBTC.toggle(e.settings.userorders, function() {
      e.settings.userorders = !0
    }, function() {
      e.settings.userorders = !1
    }, function() {
      O()
    })).append($("<span/>").addClass("control-label").html(_("Show User Orders")))]
  }

  function x() {
    var t, n, r;
    for (t = 0; t < e.slots.length; t++) {
      if (e.slots[t].hasOwnProperty("main")) {
        for (n = 0; n < e.slots[t].u.length; n++) typeof e.slots[t]["u"][n]["c"] != "undefined" && e.slots[t]["u"][n]["c"] != null ? r = e.slots[t].u[n].c : r = R(t), e.slots[t].u[n].i = (new Indicator).build(e.slots[t].u[n].t, e.slots[t].u[n].s).color(r);
        for (n = 0; n < e.slots[t].o.length; n++) typeof e.slots[t]["o"][n]["c"] != "undefined" && e.slots[t]["o"][n]["c"] != null ? r = e.slots[t].o[n].c : r = R(t), e.slots[t].o[n].i = (new Indicator).build(e.slots[t].o[n].t, e.slots[t].o[n].s).color(r)
      } else e.slots[t].i = (new Indicator).build(e.slots[t].t, e.slots[t].s);
      e.slots[t].control = v(t), $(e.element).append(e.slots[t].control)
    }
  }

  function T(n, r) {
    DEBUG && t("Adding overlay " + n + " to chart.");
    var i = {
      t: n,
      i: (new Indicator).build(n),
      s: []
    };
    i.s = i.i.settings(), r && i.i.paramUpdate(0, r), i.i.color(e.colors.stroke.i[e.lastColorIndex % e.colors.stroke.i.length]), e.lastColorIndex++;
    var s = -1,
      o;
    for (o = 0; o < e.slots.length; o++)
      if (e.slots[o].hasOwnProperty("main")) {
        s = o;
        break
      }
    if (s == -1) return;
    e.slots[s].u.push(i);
    var u = $(".control-" + s, e.element);
    u.data("popped") && (m(s), m(s)), O()
  }

  function N(n) {
    DEBUG && t("Adding indicator " + n + " to chart.");
    var i = (e.slots.length - 1) * (2 + e.px.pad) + 1 + e.px.lbl.h,
      s = e.h - i,
      o = Math.max(e.slots[e.slots.length - 1].h * e.slots.length / (e.slots.length + 1), e.px.slotmin),
      u = 0,
      a = 0,
      f = 0,
      l, c = !1,
      h = 0,
      p = {
        t: n,
        h: o,
        px: 0,
        i: (new Indicator).build(n),
        s: []
      };
    p.s = p.i.settings();
    while (u < o) {
      if (!c && e.slots[a % e.slots.length].h <= e.px.slotmin) {
        f++, f == e.slots.length && (c = !0), a++;
        continue
      }
      f = 0, e.slots[a % e.slots.length].h -= 1, u += 1;
      for (l = 1 + a % e.slots.length; l < e.slots.length; l++) e.slots[l].px -= 1;
      a++;
      if (++h > 1500) {
        DEBUG && t("Emergency break. nc = " + f + " shrink: " + (c ? "true" : "false")), DEBUG && t(e.slots);
        break
      }
    }
    p.px = e.slots[e.slots.length - 1].h + 2 + e.px.pad + 1, e.slots.push(p);
    for (var d = 1; d <= e.slots.length - 2; d++) $(".control-" + d, e.element).remove(), e.slots[d].control = v(d), $(e.element).append(e.slots[d].control);
    e.slots[e.slots.length - 1].control = v(e.slots.length - 1), $(e.element).append(e.slots[e.slots.length - 1].control), r(), Sn(), Nn()
  }

  function C(n, r) {
    if (e.slots.length <= 1) return;
    if (n == 0 && r) return;
    if (n == e.slots.length - 1 && !r) return;
    DEBUG && t("Moving indicator in slot " + n + " " + (r ? "up" : "down")), $(".icontrol", e.element).each(function(e, t) {
      $(t).data("popped") && m(e)
    });
    var i, s, o = r ? n - 1 : n + 1;
    s = e.slots[o].px, e.slots[o].px = e.slots[n].px, e.slots[n].px = s, i = e.slots.splice(n, 1)[0], e.slots.splice(o, 0, i), Sn(), Nn()
  }

  function k(t, n, r) {
    if (!e.slots[r].hasOwnProperty(n)) return;
    e.slots[r][n].splice(t, 1), $(".control-" + r + " ." + n + t, e.element).remove(), O()
  }

  function L(n) {
    if (e.slots[n].hasOwnProperty("main")) return;
    var r, i = +e.slots[n].h + e.px.pad + 3,
      s = -1;
    $(".control-" + (e.slots.length - 1), e.element).remove(), $(".icontrol", e.element).each(function(e, t) {
      $(t).data("popped") && m(e)
    });
    for (r = 0; r < e.slots.length; r++) {
      if (r == n) continue;
      s < 0 && r > n && (e.slots[r].px -= e.slots[n].h);
      if (e.slots[r].hasOwnProperty("main")) {
        s = r, e.slots[r].h += i;
        break
      }
    }
    for (r = 0; r < e.slots.length; r++) DEBUG && t("Slot " + r + " h: " + e.slots[r].h + ", px: " + e.slots[r].px);
    e.slots.splice(n, 1), Sn(), Nn()
  }

  function A() {
    var t = e.canvas.base[0].getContext("2d"),
      n = e.canvas.orders[0].getContext("2d"),
      r = e.canvas.bg[0].getContext("2d"),
      i = e.canvas.main[0].getContext("2d"),
      s = e.canvas.fg[0].getContext("2d");
    e.flags.recompute && M(t), e.flags.redraw.base && (t.clearRect(0, 0, e.w, e.h), P(t), e.flags.redraw.base = !1, e.settings.userorders ? B(n) : n.clearRect(0, 0, e.w, e.h));
    var o, u;
    if (e.flags.redraw.inds || e.flags.redraw.overlay) s.clearRect(0, 0, e.w, e.h), e.flags.redraw.inds = !0, e.flags.redraw.overlay = !0;
    e.flags.redraw.underlay && r.clearRect(0, 0, e.w, e.h);
    for (o = 0; o < e.slots.length; o++)
      if (e.slots[o].hasOwnProperty("main")) {
        e.flags.redraw.main && (i.clearRect(0, 0, e.w, e.h), F(i, o), e.flags.redraw.main = !1);
        if (e.flags.redraw.underlay) {
          D(r, o);
          for (u = 0; u < e.slots[o].u.length; u++) z(r, o, e.slots[o].u[u].i);
          e.flags.redraw.underlay = !1
        }
        if (e.flags.redraw.overlay) {
          D(s, o);
          for (u = 0; u < e.slots[o].o.length; u++) z(s, o, e.slots[o].o[u].i);
          e.flags.redraw.overlay = !1
        }
      } else if (e.flags.redraw.inds || e.slots[o]["t"] == "vol") D(s, o), z(s, o, e.slots[o].i);
    e.flags.redraw.inds = !1, !e.notClicked && mobile != 1 && (s.strokeStyle = "#f9ee30", s.strokeRect(0, 0, e.w, e.h))
  }

  function O() {
    var n = Cn(),
      r = [],
      i = 0,
      o = 0;
    e.bars.data = [];
    if (Data.data.bars[n])
      if (e.bars.fixTime == 1)
        for (var i = 0; i < Data.data.bars[n].length; i++) e.bars.data.push(Data.data.bars[n][i]);
      else e.bars.data = Data.data.bars[n];
    typeof e.bars.data == "undefined" && (DEBUG && t("No data for " + n), e.bars.data = []), e.flags.recompute = !0, A()
  }

  function M(t) {
    if (e.bars.fixTime) {
      var n = new Date(e.bars.data && e.bars.data.length > 0 ? e.bars.data[0][0] : new Date),
        r, i = new Date(n.getFullYear() + "/" + (n.getMonth() + 1) + "/" + n.getDate() + " " + e.bars.startTime1),
        s = new Date(n.getFullYear() + "/" + (n.getMonth() + 1) + "/" + n.getDate() + " " + e.bars.endTime1),
        o = new Date(n.getFullYear() + "/" + (n.getMonth() + 1) + "/" + n.getDate() + " " + e.bars.startTime2),
        u = new Date(n.getFullYear() + "/" + (n.getMonth() + 1) + "/" + n.getDate() + " " + e.bars.endTime2);
      n <= s && n >= i ? r = (s.getTime() - n.getTime() + (u - o)) / 6e4 + 1 : n < o && n > s ? r = (u - o) / 6e4 : n <= u && n >= o ? r = (u.getTime() - n.getTime()) / 6e4 : n > u ? r = 0 : r = (s.getTime() - i.getTime() + u.getTime() - o.getTime()) / 6e4, r = Math.floor(r), e.bars.blank = r < 0 ? 0 : r, e.bars.visible = (s.getTime() - i.getTime() + u.getTime() - o.getTime()) / 6e4 + 1, e.px.bar.spacing = 1
    } else e.bars.blank = 0, e.px.bar.spacing = e.px.bar.width / 3 > 2 ? e.px.bar.width / 3 : 2, e.bars.visible = parseInt((e.w - e.px.lbl.tick - e.px.lbl.w - 1) / (e.px.bar.width + e.px.bar.spacing)) | 0;
    var a, f, l = Qt();
    l[1] > -1 && (e.price.high = 0, e.price.low = 1e15);
    if (e.mode.display == e.CANDLE)
      for (a = l[0]; a <= l[1]; a++) e.bars.data[a][2] > e.price.high && (e.price.high = e.bars.data[a][2]), e.bars.data[a][3] < e.price.low && (e.price.low = e.bars.data[a][3]);
    else
      for (a = l[0]; a <= l[1]; a++) e.bars.data[a][4] > e.price.high && (e.price.high = e.bars.data[a][4]), e.bars.data[a][4] < e.price.low && (e.price.low = e.bars.data[a][4]);
    var c = e.canvas.base[0].getContext("2d");
    c.font = e.font.labels, e.px.lbl.w = c.measureText(jt(10)).width + 8, e.LblWidthChange && e.LblWidthChange(e.px.lbl.w);
    var h = e.price.high - e.price.low;
    e.settings.logscale && (e.price.high = Math.min(1.1 * e.price.high, e.price.high + .1 * h), e.price.low = Math.max(e.price.low / 1.1, e.price.low - .1 * h)), e.price.low < 0 && (e.price.low = 0), e.px.bar.dx = (e.px.bar.width - 1) / 2 | 0, e.period.string = Ln();
    for (a = 0; a < e.slots.length; a++)
      if (e.slots[a].hasOwnProperty("main")) {
        if (e.settings.logscale) {
          var p = e.slots[a].px,
            d = p + e.slots[a].h;
          try {
            e.log.m = (p - d) / log10(p1 / p0), e.log.b = (p * log10(p0) - d * log10(p1)) / log10(p0 / p1)
          } catch (v) {
            e.log.m = 0, e.log.b = 0
          }
        }
        var m = e.price.high,
          g = e.price.low;
        for (f = 0; f < e.slots[a].o.length; f++) {
          if (!e.slots[a].o[f].hasOwnProperty("i")) continue;
          e.slots[a].o[f].i.update(e.bars.data, l[0], l[1]);
          var y = e.slots[a].o[f].i.draw();
          if (y)
            for (var b = 0; b < y.length; b++) {
              var w = y[b].data;
              for (var E = 0; E < l[1] - l[0]; E++) {
                var S = w[E];
                S > e.price.high && (e.price.high = S), S < e.price.low && (e.price.low = S)
              }
            }
        }
        for (f = 0; f < e.slots[a].u.length; f++) {
          if (!e.slots[a].u[f].hasOwnProperty("i")) continue;
          e.slots[a]["u"][f]["t"] == "ema" && e.slots[a].u[f].s && e.slots[a].u[f].i.paramUpdate(0, e.slots[a].u[f].s[0]), e.slots[a].u[f].i.update(e.bars.data, l[0], l[1]);
          var y = e.slots[a].u[f].i.draw();
          if (y)
            for (var b = 0; b < y.length; b++) {
              var w = y[b].data;
              for (var E = 0; E < l[1] - l[0]; E++) {
                var S = w[E];
                S > e.price.high && (e.price.high = S), S < e.price.low && (e.price.low = S)
              }
            }
        }
      } else e.slots[a].i.update(e.bars.data, l[0], l[1]);
    var x = e.slots[0].h,
      T = (e.price.high - e.price.low) * 40 / (x - 40),
      N = Data.qouteFixed === undefined ? 1e-5 : Math.pow(.1, Data.qouteFixed - 2);
    T > N ? (e.price.high += T * 3 / 4, e.price.low -= T / 4) : (e.price.high = 1.01 * e.price.high, e.price.low = e.price.low / 1.01), e.price.low < 0 && (e.price.low = 0), e.price.range = e.price.high - e.price.low, e.flags.recompute = !1, e.flags.redraw.base = !0, e.flags.redraw.main = !0, e.flags.redraw.underlay = !0, e.flags.redraw.overlay = !0, e.flags.redraw.inds = !0
  }

  function D(t, n) {
    t.clearRect(0, e.slots[n].px - e.px.pad, e.w, e.slots[n].h + 2 * e.px.pad)
  }

  function P(t, n) {
    typeof n == "undefined" && (n = !1);
    var r, i;
    t.fillStyle = e.colors.fill.bg, i = e.w - e.px.lbl.w - e.px.lbl.tick, qt(t, i, 0, e.px.lbl.w + e.px.lbl.tick, e.h), qt(t, 0, 0, e.offset, e.h);
    for (r = 0; r < e.slots.length; r++) r < e.slots.length - 1 ? qt(t, 0, e.slots[r].px + e.slots[r].h + 2, i, e.px.pad) : qt(t, 0, e.slots[r].px + e.slots[r].h + 2, i, e.px.lbl.h);
    rt(t), t.textAlign = "left", t.textBaseline = "middle", t.font = e.font.labels, t.fillStyle = e.colors.fill.label;
    for (r = 0; r < e.slots.length; r++) e.slots[r].hasOwnProperty("main") ? (t.strokeStyle = e.colors.stroke.border, t.beginPath(), X(t, r), t.stroke()) : q(t, r), tt(t, r)
  }

  function H() {
    var n = e.canvas.orders[0].getContext("2d");
    DEBUG && t("Chart refreshing user orders.");
    try {
      B(n)
    } catch (r) {
      DEBUG && t("Could not clear user orders"), DEBUG && console.error(r)
    }
  }

  function B(t) {
    "undefined" == typeof t && (t = e.canvas.orders[0].getContext("2d"));
    var n = -1;
    for (var r = 0; r < e.slots.length; r++)
      if (e.slots[r].hasOwnProperty("main")) {
        n = r;
        break
      }
    if (n == -1) return;
    try {
      t.clearRect(0, 0, e.w, e.h)
    } catch (i) {
      return
    }
    if (!e.settings.userorders) return;
    var s = UserAccount.orders(),
      o = "",
      u = "",
      a = {},
      f = [],
      l = [],
      c = [],
      h = [],
      r = 0,
      p = 2,
      d = 0;
    for (o in s) {
      if (!s.hasOwnProperty(o)) continue;
      if (o != RTBTC.exchange()) continue;
      for (u in s[o]) {
        if (!s[o].hasOwnProperty(u)) continue;
        a = s[o][u], a.exch = o;
        if (!a.hasOwnProperty("base")) continue;
        if (a["base"] != RTBTC.base()) continue;
        if (!a.hasOwnProperty("quote")) continue;
        if (a["quote"] != RTBTC.quote()) continue;
        d = Wt(a.price, n);
        if (d < e.slots[n].px) continue;
        if (d > e.slots[n].px + e.slots[n].h) continue;
        a["action"] == "buy" ? (f.push(a), c.push(j(a))) : a["action"] == "sell" && (l.push(a), h.push(j(a)))
      }
    }
    f.length + l.length > 0 && (t.textAlign = "left", t.font = e.font.indicators);
    if (f.length > 0) {
      t.strokeStyle = e.colors.stroke.bid, t.fillStyle = e.colors.stroke.bid, t.textBaseline = "top", t.beginPath();
      for (r = 0; r < f.length; r++) {
        ot(t, n, f[r].price, e.DASHDOT), d = Wt(f[r].price, n) + 1;
        if (d > e.slots[n].px + e.slots[n].h - 10) continue;
        t.fillText(c[r], p, d)
      }
      t.stroke(), t.font = e.font.labels, t.textBaseline = "middle";
      for (r = 0; r < f.length; r++) t.fillStyle = e.colors.fill.flags, Mt(t, n, f[r].price, jt(f[r].price))
    }
    if (l.length > 0) {
      t.strokeStyle = e.colors.stroke.ask, t.fillStyle = e.colors.stroke.ask, t.textBaseline = "top", t.font = e.font.indicators, t.beginPath();
      for (r = 0; r < l.length; r++) ot(t, n, l[r].price, e.DASHDOT), d = Wt(l[r].price, n) + 1, t.fillText(h[r], p, d);
      t.stroke(), t.font = e.font.labels, t.textBaseline = "middle";
      for (r = 0; r < l.length; r++) t.fillStyle = e.colors.fill.flags, Mt(t, n, l[r].price, jt(l[r].price))
    }
  }

  function j(e) {
    var t = "";
    return e["action"] == "buy" ? t += _("BUY") : e["action"] == "sell" ? t += _("SELL") : t += "UNKNOWN ACTION", t += " ", t += parseFloat(e.amount).toFixed(Exchanges.cur_prec(e.exch, e.base)), t
  }

  function F(t, n) {
    if (typeof e.bars.data == "undefined" || e.bars.data.length == 0) return;
    e.settings.bidask && I(t, n);
    switch (e.mode.display) {
      case e.CANDLE:
      case e.OHLC:
      case e.HLC:
        V(t, n, e.bars.data, e.mode.display);
        break;
      case e.LINE:
      case e.MOUNTAIN:
        J(t, n, e.bars.data, e.mode.display == e.MOUNTAIN, !0, !0)
    }
  }

  function I(t, n) {
    if (isNaN(e.price.bid) && isNaN(e.price.ask)) return;
    var r = e.price.bid,
      i = e.price.ask;
    t.textBaseline = "middle", t.textAlign = "left", t.font = e.font.labels, t.fillStyle = e.colors.fill.flags, t.strokeStyle = e.colors.stroke.ask, t.beginPath(), ot(t, n, i, e.SOLID), t.stroke(), Mt(t, n, i, jt(i)), t.fillStyle = e.colors.fill.flags, t.strokeStyle = e.colors.stroke.bid, t.beginPath(), ot(t, n, r, e.SOLID), t.stroke(), Mt(t, n, r, jt(r))
  }

  function q(t, n) {
    var r = e.slots[n].i.statics(),
      i, s, o = !0,
      u = e.slots[n].i.bounds();
    t.lineWidth = 1;
    if (r.hasOwnProperty("minor")) {
      t.strokeStyle = e.colors.stroke.minorlevel, t.fillStyle = e.colors.fill.label, t.beginPath();
      for (i = 0; i < r.minor.length; i++) {
        s = r.minor[i];
        if (s < u[0] || s > u[1]) continue;
        ot(t, n, s, e.DASHDOT), Nt(t, n, s, jt(s))
      }
      t.stroke(), t.strokeStyle = e.colors.stroke.border, t.beginPath();
      for (i = 0; i < r.minor.length; i++) {
        s = r.minor[i];
        if (s < u[0] || s > u[1]) continue;
        Nt(t, n, s, jt(s))
      }
      t.stroke(), o = !1
    }
    if (r.hasOwnProperty("major")) {
      t.strokeStyle = e.colors.stroke.majorlevel, t.fillStyle = e.colors.fill.label, t.beginPath();
      for (i = 0; i < r.major.length; i++) {
        s = r.major[i];
        if (s < u[0] || s > u[1]) continue;
        ot(t, n, s, e.SOLID), Nt(t, n, s, jt(s))
      }
      t.stroke(), t.strokeStyle = e.colors.stroke.border, t.beginPath();
      for (i = 0; i < r.major.length; i++) {
        s = r.major[i];
        if (s < u[0] || s > u[1]) continue;
        Nt(t, n, s, jt(s))
      }
      t.stroke(), o = !1
    }
    o && (t.strokeStyle = e.colors.stroke.border, t.beginPath(), X(t, n), t.stroke())
  }

  function R(t, n, r) {
    var i = null,
      s = e.colors.stroke.i,
      o = null;
    return e.slots[t].hasOwnProperty("main") && typeof r != "undefined" && (o = e.slots[t][r][n].i), o != null && (i = o.color()), i === null && (typeof n != "undefined" ? i = s[n % s.length] : (i = s[e.lastColorIndex % s.length], e.lastColorIndex++)), i
  }

  function U(t, n, r, i) {
    var s = null;
    e.slots[t].hasOwnProperty("main") && typeof r != "undefined" ? s = e.slots[t][r][n].i : s = e.slots[t].i, s != null && s.color(i)
  }

  function z(t, n, r, i) {
    if ("undefined" == typeof r) return;
    var s = r.draw(),
      o, u = null,
      a = e.slots[n].hasOwnProperty("main");
    for (o = 0; o < s.length; o++) {
      u = null;
      switch (s[o].type) {
        case e.CANDLE:
          break;
        case e.OHLC:
          break;
        case e.HLC:
          break;
        case e.LINE:
          a && (u = r.color()), u == null && (u = R(n, o)), t.strokeStyle = u, t.beginPath(), J(t, n, s[o].data, !1, !1), t.stroke();
          break;
        case e.MOUNTAIN:
          J(t, n, s[o].data, !0, !1);
          break;
        case e.BANDS:
          break;
        case e.PSAR:
          a && (u = r.color()), u == null && (u = R(n, o)), t.strokeStyle = u, t.beginPath(), Q(t, n, s[o].data), t.stroke();
          break;
        case e.HIST:
          K(t, n, s[o].data, !0);
          break;
        case e.LBLHIST:
          K(t, n, s[o].data, !1)
      }
    }
  }

  function W(t) {
    var n, r, i = e.canvas.lbl[0].getContext("2d"),
      s, o, u, a, f = ~~(1.25 * e.px.lbl.font),
      l = Qt(),
      c = Gt(0),
      h = Gt(t),
      p = e.colors.stroke.i,
      d = e.w - e.px.lbl.tick - e.px.lbl.w - 2,
      v = "     boc: [" + l[0] + ", " + l[1] + "], bar: " + t + ", index: " + h;
    c < 0 && (t += c), t < 0 && (t = -1), i.strokeStyle = e.colors.fill.blankBG, i.lineWidth = 1.5, i.fillStyle = e.colors.fill.slottext, i.textBaseline = "top", i.font = e.font.indicators;
    var m = 3 + e.offset,
      g = 3 + e.offset;
    i.clearRect(0, 0, e.w, e.h);
    for (n = 0; n < e.slots.length; n++)
      if (e.slots[n].hasOwnProperty("main")) {
        u = lt(h), s = e.slots[n].px + 1, i.strokeText(u, g, s, d), i.fillText(u, g, s, d), g = 6 + e.offset + i.measureText(u).width;
        if (e.colors.stroke.priceShow == 1) {
          var y = e.w - e.px.lbl.tick - e.px.lbl.w,
            b = e.canvas.base[0].getContext("2d"),
            w = b.measureText(jt(e.price.high)).width,
            E = y - w - 3,
            g = y - b.measureText(jt(e.price.low)).width - 3;
          i.clearRect(E, s, d, 13), i.strokeText(jt(e.price.high), E, s, d), i.fillText(jt(e.price.high), E, s, d);
          var S = e.slots[n].h - 14;
          i.strokeText(jt(e.price.low), g, S, d), i.fillText(jt(e.price.low), g, S, d)
        }
        for (r = 0; r < e.slots[n].u.length; r++) {
          a = e.slots[n].u[r].i;
          if (!a.hasOwnProperty("label")) continue;
          if (s + f > e.slots[n].px + e.slots[n].h) break;
          mobile != 1 ? (u = a.label(t), i.fillStyle = R(n, r, "u"), g + i.measureText(u).width + 2 > d && (s += f, g = 2), i.fillText(u, g, s, d), g += i.measureText(u).width + 2) : (u = a.label(t), i.fillStyle = R(n, r, "u"), i.fillText(u, m, s, d), s += f)
        }
        for (r = 0; r < e.slots[n].o.length; r++) {
          a = e.slots[n].o[r].i;
          if (!a.hasOwnProperty("label")) continue;
          s += f;
          if (s + f > e.slots[n].px + e.slots[n].h) break;
          mobile != 1 ? (u = a.label(t), i.fillStyle = R(n, r, "o"), g + i.measureText(u).width + 2 > d && (s += f, g = 2), i.fillText(u, g, 0, d), g += i.measureText(u).width + 2) : (u = a.label(t), i.fillStyle = R(n, r, "o"), i.fillText(u, m, s, d))
        }
        i.fillStyle = e.colors.fill.flagtext
      } else {
        a = e.slots[n].i;
        if (!a.hasOwnProperty("label")) continue;
        u = a.label(t), s = e.slots[n].px + 1, i.fillText(u, m, s, d)
      }
  }

  function X(t, n) {
    var r, i, s, o, u, a, f = [],
      l, c, h, p, d, v, m, g, l = 0,
      y = 0,
      b, w, E, S = [5, 2.5, 2];
    if (e.slots[n].hasOwnProperty("main")) i = e.price.high, s = e.price.low;
    else {
      var x = e.slots[n].i.bounds();
      s = x[0], i = x[1]
    }
    r = i - s;
    if (r < 0) return;
    o = ~~(e.slots[n].h / (e.px.lbl.font * 4)), u = r / o;
    if (u < 0) return;
    h = Math.log(u) / Math.LN10, a = Math.pow(10, h > 0 ? ~~h : Math.floor(h)), b = .5;
    for (l = 0; l < S.length; l++) g = Math.log(u / a / (S[l] / 10)) / Math.LN10, g > 1 && f.push([a * S[l], Math.abs(b - g), g]);
    f.length == 0 && f.push([a, 0, 0]), c = 1e8;
    for (l = 0; l < f.length; l++) f[l][1] < c && (c = f[l][1], u = f[l][0]);
    p = ~~(i / u) * u, d = e.w - e.px.lbl.tick - e.px.lbl.w, v = Wt(p, n), m = Wt(s, n) - e.px.lbl.font / 2 | 0;
    if (n == 1) {
      var T = Wt(i, n);
      Ct(t, d, T, i.toFixed(2));
      return
    }
    if (e.slots[n].hasOwnProperty("main") && e.offset != 0) {
      t.textAlign = "right";
      for (var l = 0; l <= 6; l++) {
        var N = e.price.low + l * (e.price.high - e.price.low) / 6,
          T = Wt(N, n);
        l == 6 ? t.textBaseline = "top" : l == 0 ? t.textBaseline = "bottom" : t.textBaseline = "middle", t.fillText((100 * (e.preClose ? N / e.preClose - 1 : 0)).toFixed(2) + "%", e.offset - 3, T, e.offset - 3)
      }
      t.textAlign = "start"
    }
    l = 0, w = 2;
    while (p >= s && v < m && l < 100) {
      v >= e.slots[n].px + e.px.lbl.font / 2 && (Ct(t, d, v, jt(p)), e.settings.grid && ut(t, v, e.DASHED), y++);
      for (E = 0; E < w; E++) At(t, n, p - (E + 1) * u / (w + 1));
      p -= u, v = Wt(p, n), l++
    }
    y == 0 && (p = s + r / 2, v = Wt(p, n), Ct(t, d, v, jt(p)))
  }

  function V(t, n, r, i) {
    var s = Qt(),
      o, u = null,
      a = [],
      f = [],
      l, c, h;
    r.length - 1 > s[1] ? o = r[s[1] + 1] : o = r[s[1]];
    switch (i) {
      case e.CANDLE:
        u = G;
        break;
      case e.OHLC:
        u = Y;
        break;
      case e.HLC:
        u = Z;
        break;
      default:
        return
    }
    var p = 0,
      d = 1e5,
      v, m;
    for (l = s[1]; l >= s[0]; l--) r[l][4] >= r[l][1] ? r[l][1] == r[l][4] && r[l + 1] && r[l + 1][4] > r[l][1] ? f.push([l, Yt(l)]) : a.push([l, Yt(l)]) : f.push([l, Yt(l)]), o = r[l], r[l][2] >= p && (p = r[l][2], v = l), r[l][3] <= d && (d = r[l][3], m = l);
    t.strokeStyle = e.colors.stroke.down, t.fillStyle = e.colors.fill.down, t.beginPath();
    for (l = 0; l < f.length; l++) c = r[f[l][0]].slice(), c[5] /= BTC_INT, u(t, n, f[l][1], c, !0);
    t.stroke(), t.strokeStyle = e.colors.stroke.up, t.fillStyle = e.colors.fill.up, t.beginPath();
    for (l = 0; l < a.length; l++) c = deepCopy(r[a[l][0]]), c[5] /= BTC_INT, u(t, n, a[l][1], c, !1);
    t.stroke(), h = o[4], r.length >= 2 && r[1][4] > r[0][4] && (t.strokeStyle = e.colors.stroke.down), t.fillStyle = e.colors.fill.flags, t.textBaseline = "middle", t.font = e.font.labels, Mt(t, n, h, jt(h));
    if (i == e.CANDLE) {
      t.textBaseline = "middle", t.fillStyle = e.colors.stroke.arrow;
      var g = Wt(p, n),
        y = Xt(Yt(v)),
        b = Wt(d, n),
        w = Xt(Yt(m)),
        E = t.measureText(jt(p)).width + 19,
        S = t.measureText(jt(d)).width + 21;
      y - E > 0 ? (nn(t, 0, 0, y - 15, g, y - 2, g), t.fillText(jt(p), y - E, g)) : (nn(t, 0, 0, y + 15, g, y + 2, g), t.fillText(jt(p), y + 19, g)), w - S > 0 ? (nn(t, 0, 0, w - 15, b, w - 2, b), t.fillText(jt(d), w - E, b)) : (nn(t, 0, 0, w + 15, b, w + 2, b), t.fillText(jt(d), w + 19, b))
    }
  }

  function J(t, n, r, i, s, o) {
    if (typeof r == "undefined" || !(r.hasOwnProperty("length") && r.length > 0)) return;
    var u, a, f = Qt(),
      l, c, h, p, d;
    if (i) return;
    h = Xt(Yt(f[1])), p = s ? Wt(r[f[1]][4], n) : Wt(r[f[1] - f[0]], n);
    if (s) {
      var l = [],
        c = [],
        v = {},
        m = h,
        g = p,
        y = !0;
      l.push(f[1]), h = Xt(Yt(f[1])), p = Wt(r[f[1]][4], n), v[f[1]] = [+h, +p];
      for (u = f[1] - 1; u >= f[0]; u--) h = Xt(Yt(u)), p = Wt(r[u][4], n), r[u + 1][4] <= r[u][4] ? l.push(u) : c.push(u), v[u] = [+h, +p];
      d = r.length + 2, t.lineWidth = 1, t.strokeStyle = e.colors.stroke.fenshi || e.colors.stroke.down, t.beginPath();
      for (a = 0; a < c.length; a++) u = c[a], u < d - 1 && v.hasOwnProperty(u + 1) && Ft(t, v[u + 1][0], v[u + 1][1]), It(t, v[u][0], v[u][1]), d = u;
      t.stroke(), t.strokeStyle = e.colors.stroke.fenshi || e.colors.stroke.up, t.beginPath(), d = r.length + 2;
      for (u = 0; u < l.length; u++) l[u] < d - 1 && v.hasOwnProperty(l[u] + 1) && Ft(t, v[l[u] + 1][0], v[l[u] + 1][1]), It(t, v[l[u]][0], v[l[u]][1]), d = l[u];
      t.stroke(), r.length > 1 ? t.strokeStyle = r[1][4] <= r[0][4] ? e.colors.stroke.up : e.colors.stroke.down : t.strokeStyle = l, d = r[0][4]
    } else {
      var b = !1;
      Ft(t, h, p);
      for (u = f[1] - f[0]; u >= 0; u--) h = Xt(Yt(u + f[0])), p = Wt(r[u], n), p >= e.slots[n].px && p <= e.slots[n].px + e.slots[n].h ? b ? (b = !1, t.beginPath(), Ft(t, h, p)) : It(t, h, p) : b || (t.stroke(), b = !0);
      d = r[0], t.stroke()
    }
    t.lineWidth = 1, t.fillStyle = e.colors.fill.flags, t.textBaseline = "middle", t.font = e.font.labels, o && Mt(t, n, d, jt(d))
  }

  function K(t, n, r, i) {
    if (!(typeof r != "undefined" && r.hasOwnProperty("length") && r.length > 0)) return;
    var s = Qt(),
      o, u = [],
      a = [],
      f;
    if (i)
      for (o = 0; o <= s[1] - s[0]; o++) r[o] > 0 ? u.push([o, Yt(o + s[0])]) : a.push([o, Yt(o + s[0])]);
    else
      for (o = 0; o <= s[1] - s[0]; o++) r && r[o] !== undefined && (r[o][1] ? u.push([o, Yt(o + s[0])]) : a.push([o, Yt(o + s[0])]));
    t.strokeStyle = e.colors.stroke.down, t.fillStyle = e.colors.fill.down, t.beginPath();
    for (o = 0; o < a.length; o++) et(t, n, a[o][1], i ? r[a[o][0]] : r[a[o][0]][0], !1);
    t.stroke(), t.strokeStyle = e.colors.stroke.up, t.fillStyle = e.colors.fill.up, t.beginPath();
    for (o = 0; o < u.length; o++) et(t, n, u[o][1], i ? r[u[o][0]] : r[u[o][0]][0]);
    t.stroke(), i ? (f = r[0], f < 0 && (t.strokeStyle = e.colors.stroke.down)) : (f = r[0][0], r[0][1] || (t.strokeStyle = e.colors.stroke.down)), t.lineWidth = 1, t.fillStyle = e.colors.fill.flags, t.textBaseline = "middle", t.font = e.font.labels, Mt(t, n, f, jt(f)), t.stroke()
  }

  function Q(t, n, r) {
    if (!(r.hasOwnProperty("length") && r.length > 0)) return;
    var i = Qt(),
      s, o, u, a, f = 3,
      l = ~~((f - 1) / 2),
      c = e.slots[n].px + f,
      h = c + e.slots[n].h - f;
    for (s = 0; s <= i[1] - i[0]; s++) {
      o = Yt(s + i[0]), u = Xt(o), a = Wt(r[s], n);
      if (a < c || a > h) continue;
      Rt(t, u - l, a - l, f - 1, f - 1)
    }
  }

  function G(t, n, r, i, s) {
    var o = Wt(i[1], n),
      u = Wt(i[2], n),
      a = Wt(i[3], n),
      f = Wt(i[4], n),
      l = Math.min(o, f),
      c = Xt(r);
    s ? mobile == 1 && qt(t, c - e.px.bar.dx + 1, l, e.px.bar.width - 2, Math.abs(f - o)) : e.colors.stroke.fillUp && qt(t, c - e.px.bar.dx + 1, Math.min(o, f), e.px.bar.width - 2, Math.abs(o - f)), Rt(t, c - e.px.bar.dx, Math.min(o, f), e.px.bar.width - 1, Math.abs(o - f)), u < Math.min(o, f) && (Ft(t, c, u), It(t, c, Math.min(o, f) - 1)), a > Math.max(o, f) && (Ft(t, c, a), It(t, c, Math.max(o, f))), s && qt(t, c - e.px.bar.dx, l, e.px.bar.width - 1, Math.abs(f - o))
  }

  function Y(t, n, r, i) {
    var s = Wt(i[1], n),
      o = Wt(i[2], n),
      u = Wt(i[3], n),
      a = Wt(i[4], n),
      f = Xt(r);
    Ft(t, f - e.px.bar.dx, s), It(t, f, s), Ft(t, f, a), t.lineTo((f + e.px.bar.dx | 0) + .6, (a | 0) + .5), Ft(t, f, o), It(t, f, u)
  }

  function Z(t, n, r, i) {
    var s = Wt(i[2], n),
      o = Wt(i[3], n),
      u = Wt(i[4], n),
      a = Xt(r);
    Ft(t, a, u), t.lineTo((a + e.px.bar.dx | 0) + .6, (u | 0) + .5), Ft(t, a, s), It(t, a, o)
  }

  function et(t, n, r, i, s) {
    var o = Wt(i, n),
      u = Xt(r),
      a = Wt(0, n),
      f = Math.abs(a - o),
      l = Math.min(o, a);
    o < e.slots[n].px ? o = e.slots[n].px : o > e.slots[n].px + e.slots[n].h && (o = e.slots[n].px + e.slots[n].h), Rt(t, u - e.px.bar.dx, l, e.px.bar.width - 1 <= 0 ? 0 : e.px.bar.width - 1, f);
    if (s !== !1) {
      e.colors.stroke.fillUp && qt(t, u - e.px.bar.dx + 1, l + 1, e.px.bar.width - 2 <= 0 ? 0 : e.px.bar.width - 2, f);
      return
    }
    qt(t, u - e.px.bar.dx + 1, l + 1, e.px.bar.width - 2 <= 0 ? 0 : e.px.bar.width - 2, f)
  }

  function tt(t, n) {
    t.lineWidth = mobile ? 2 : 1, t.strokeStyle = e.colors.stroke.border;
    var r = e.offset - 1,
      i = e.slots[n].px - 1,
      s = e.w - e.px.lbl.w - e.offset - e.px.lbl.tick,
      o = e.slots[n].h + 2;
    Rt(t, r <= 0 ? 0 : r, i <= 0 ? 0 : i, s - (r <= 0 ? -r : 0), o - (i <= 0 ? -i : 0))
  }

  function nt(t) {
    for (var n = 1; n <= 5; n++) ut(t, Wt(n * (e.price.high - e.price.low) / 6 + e.price.low, 0), e.DOTTED)
  }

  function rt(t) {
    var n, r, i, s, o, u, a, f, l, c = e.w,
      h, p, d = Cn(),
      v = Settings.localTime,
      m = [];
    wt(t, !0), t.strokeStyle = e.colors.stroke.grid, t.lineWidth = 1, a = t.measureText("00:00").width, f = t.measureText("12/30").width, l = t.measureText("Jan").width, h = a * 1.25, p = Math.ceil(h / (e.px.bar.width + e.px.bar.spacing)) * 2, p <= 0 && (p = 1), t.beginPath();
    if (d < 14400) {
      for (i = 0;; i++) {
        o = Gt(i);
        if (o < 0) continue;
        if (o >= e.bars.data.length) break;
        u = e.bars.data[o][0];
        if (bt(u, v)) {
          m.push(i), gt(u, v) == 1 ? dt(u, v) == 1 ? Et(t, pt(u, v), i) : Et(t, vt(u, v), i) : Et(t, mt(u, !1, v), i);
          if (e.settings.grid)
            for (s = 0; s < e.slots.length; s++);
          if (i > e.bars.visible) break;
          i += p - 1
        }
      }
      m.length == 0 && m.push(Yt(e.bars.data.length - 1)), t.stroke(), t.beginPath(), wt(t, !1), t.strokeStyle = e.colors.stroke.grid;
      if (e.bars.fixTime) {
        var g = new Date,
          y = new Date(g.getFullYear() + "/" + (g.getMonth() + 1) + "/" + g.getDate() + " " + e.bars.startTime1),
          b = new Date(g.getFullYear() + "/" + (g.getMonth() + 1) + "/" + g.getDate() + " " + e.bars.endTime1),
          w = new Date(g.getFullYear() + "/" + (g.getMonth() + 1) + "/" + g.getDate() + " " + e.bars.startTime2),
          E = new Date(g.getFullYear() + "/" + (g.getMonth() + 1) + "/" + g.getDate() + " " + e.bars.endTime2),
          S = b.getTime() - y.getTime();
        S /= 6e4;
        var x = b.getTime() - y.getTime() + E.getTime() - w.getTime();
        x /= 6e4;
        var T = Math.ceil(x / e.w * 17),
          N = Math.ceil(x / e.w * e.offset),
          u = E.getTime();
        n = yt(u, !1, v), Et(t, n, T + Math.ceil(x / e.w * 2)), u = (E.getTime() + w.getTime()) / 2, n = yt(u, !1, v), Et(t, n, 60), u = b.getTime(), n = yt(u, !1, v), Et(t, n, 120), u = (b.getTime() + y.getTime()) / 2, n = yt(u, !1, v), Et(t, n, 180), u = y.getTime(), n = yt(u, !1, v), Et(t, n, 240 - T), e.mode.display != e.CANDLE && nt(t);
        for (s = 0; s < e.slots.length; s++) it(t, s, 0, e.DOTTED);
        for (s = 0; s < e.slots.length; s++) it(t, s, x / 4, e.DOTTED);
        for (s = 0; s < e.slots.length; s++) it(t, s, S + 1, e.DOTTED);
        for (s = 0; s < e.slots.length; s++) it(t, s, x + 1, e.DOTTED);
        for (s = 0; s < e.slots.length; s++) it(t, s, 3 * x / 4 + 1, e.DOTTED)
      } else
        for (r = m.length - 1; r >= 0; r--)
          for (i = m[r] - p;; i -= p) {
            if (i > e.bars.visible) continue;
            if (r == 0 && i < 0) break;
            o = Gt(i);
            if (o < 0) break;
            if (o >= e.bars.data.length) continue;
            if (e.settings.grid)
              for (s = 0; s < e.slots.length; s++);
            if (i <= m[r - 1]) break;
            if (r > 0 && Xt(i) + a / 2 >= Xt(m[r - 1]) - f / 2) break;
            u = e.bars.data[o][0], n = yt(u, !1, v), Et(t, n, i)
          }
      t.stroke()
    } else if (d < 86400) {
      var C = -1,
        k = -1;
      for (i = 0;; i++) {
        o = Gt(i);
        if (o < 0) continue;
        if (o >= e.bars.data.length - 1) break;
        u = e.bars.data[o][0], k = gt(u, v), C = gt(e.bars.data[o + 1][0], v);
        if (d > 86400 && dt(u, v) != dt(e.bars.data[o + 1][0], v) || C > 1 && k == 1) {
          m.push(i), dt(u, v) == 1 ? Et(t, pt(u, v), i) : Et(t, vt(u, v), i);
          if (e.settings.grid)
            for (s = 0; s < e.slots.length; s++);
          if (m[m.length - 1] > e.bars.visible) break;
          i += p - 1
        }
      }
      m.push(Yt(e.bars.data.length - 1)), t.stroke(), t.beginPath(), wt(t, !1), t.strokeStyle = e.colors.stroke.grid;
      for (r = m.length - 1; r >= 0; r--)
        for (i = m[r] - p;; i -= p) {
          if (i > e.bars.visible) continue;
          if (r == 0 && i < 0) break;
          o = Gt(i);
          if (o < 0) break;
          if (o >= e.bars.data.length) continue;
          if (e.settings.grid)
            for (s = 0; s < e.slots.length; s++);
          if (i <= m[r - 1]) break;
          if (r > 0 && Xt(i) + a / 2 >= Xt(m[r - 1]) - f / 2) break;
          u = e.bars.data[o][0], bt(u, v) ? d < 86400 ? n = gt(u, v) : n = mt(u, !1, v) : n = yt(u, !1, v), Et(t, n, i)
        }
      t.stroke()
    } else if (d < 2592e3) {
      var C = -1,
        k = -1;
      for (i = 0;; i++) {
        o = Gt(i);
        if (o < 0) continue;
        if (o >= e.bars.data.length - 1) break;
        u = e.bars.data[o][0], k = gt(u, v), C = gt(e.bars.data[o + 1][0], v);
        if (d > 86400 && dt(u, v) != dt(e.bars.data[o + 1][0], v) || C > 1 && k == 1) {
          m.push(i), dt(u, v) == 1 ? Et(t, pt(u, v), i) : Et(t, vt(u, v), i);
          if (e.settings.grid)
            for (s = 0; s < e.slots.length; s++);
          if (m[m.length - 1] > e.bars.visible) break;
          i += p - 1
        }
      }
      m.push(Yt(e.bars.data.length - 1)), t.stroke(), t.beginPath(), wt(t, !1), t.strokeStyle = e.colors.stroke.grid;
      for (r = m.length - 1; r >= 0; r--)
        for (i = m[r] - p;; i -= p) {
          if (i > e.bars.visible) continue;
          if (r == 0 && i < 0) break;
          o = Gt(i);
          if (o < 0) break;
          if (o >= e.bars.data.length) continue;
          if (e.settings.grid)
            for (s = 0; s < e.slots.length; s++);
          if (i <= m[r - 1]) break;
          if (r > 0 && Xt(i) + a / 2 >= Xt(m[r - 1]) - f / 2) break;
          u = e.bars.data[o][0], d < 86400 ? n = gt(u, v) : n = mt(u, !1, v), Et(t, n, i)
        }
      t.stroke()
    }
  }

  function it(e, t, n, r) {
    st(e, t, Xt(n), r)
  }

  function st(t, n, r, i) {
    var s, o = e.slots[n].px - 1,
      u = e.slots[n].px + e.slots[n].h;
    DEBUG && assert(u > o, "Invalid bounds on vertical line drawing. y0:" + o + ", y1:" + u);
    if (!(u > o)) return;
    if (u < 0) return;
    if (r < 0) return;
    if (r > e.w) return;
    if (r > 25e3) return;
    Ft(t, r, o), s = o;
    switch (i) {
      case e.DOTTED:
        while (s < u) It(t, r, ++s), Ft(t, r, ++s);
        break;
      case e.DASHED:
        while (s < u) s += 6, s = s > u ? u : s, It(t, r, s), s += 2, Ft(t, r, s);
        break;
      case e.DASHDOT:
        while (s < u) {
          s += 7, s = s > u ? u : s, It(t, r, s), s += 4;
          if (s >= u) break;
          Ft(t, r, s), s += 2, s = s > u ? u : s, It(t, r, s), s += 4, Ft(t, r, s)
        }
        break;
      case e.SOLID:
      default:
        It(t, r, u)
    }
  }

  function ot(t, n, r, i) {
    var s = Wt(r, n);
    if (s < e.slots[n].px) return;
    if (s > e.slots[n].px + e.slots[n].h) return;
    ut(t, s, i)
  }

  function ut(t, n, r) {
    var i, s = e.w - e.px.lbl.tick - e.px.lbl.w - 1,
      o = e.offset;
    DEBUG && assert(s > o, "Invalid bounds on line drawing. x0: " + s + ", x1: " + o);
    if (!(s > o)) return;
    Ft(t, s, n), i = s;
    switch (r) {
      case e.DOTTED:
        while (i > o + 1) It(t, --i, n), Ft(t, --i, n);
        break;
      case e.DASHED:
        while (i > o) i -= 6, i = i < o ? o : i, It(t, i, n), i -= 2, Ft(t, i, n);
        break;
      case e.DASHDOT:
        while (i > o) {
          i -= 7, i = i < o ? o : i, It(t, i, n), i -= 4;
          if (i <= o) break;
          Ft(t, i, n), i -= 2, i = i < o ? o : i, It(t, i, n), i -= 4, Ft(t, i, n)
        }
        break;
      case e.SOLID:
      default:
        It(t, o, n)
    }
  }

  function at(t, n, r) {
    if (!e.settings.crosshairs) return;
    if (t < e.offset) return;
    var i = e.canvas.i[0].getContext("2d"),
      s = $t(t),
      o = Zt(t, n);
    if (o == null || o < 0) return;
    var u = Kt(o, n),
      a = Gt(s),
      f = Xt(s),
      l;
    ft(i), i.textBaseline = "middle", i.textAlign = "left", i.font = e.font.labels, i.lineWidth = 1, i.fillStyle = e.colors.fill.crosshair, i.strokeStyle = e.colors.stroke.crosshair, i.beginPath();
    if (e.showMainCrosshairs) {
      e.crossHairH && ut(i, n, e.SOLID);
      for (l = 0; l < e.slots.length; l++) st(i, l, f, e.SOLID)
    }
    i.stroke(), i.fillStyle = e.colors.fill.crosshair, e.crossHairH && (r && (u = e.bars.data[a] && e.bars.data[a][4] || 0), _t(i, o, n, jt(u))), mobile && e.updateXFK && e.updateXFK(!0);
    if (a >= 0 && a < e.bars.data.length) {
      wt(i, !0);
      var c = ct(e.bars.data[a][0], !1, Settings.localTime),
        h = i.measureText(c).width,
        p = i.fillStyle,
        d = i.strokeStyle;
      i.fillStyle = e.colors.fill.crosshair, i.strokeStyle = e.colors.stroke.crosshair, Tt(i, s, h | 0), i.fillStyle = p, i.strokeStyle = d, St(i, c, xt(Xt(s), h + 10)), W(s)
    }
    e.px.crosshairs.x = f, e.px.crosshairs.y = n, e.mouse.bar = s
  }

  function ft(t) {
    if (!e.settings.crosshairs) return;
    var n = t || e.canvas.i[0].getContext("2d");
    n.clearRect(0, e.px.crosshairs.y - 30, e.w, 60), n.clearRect(e.px.crosshairs.x - 30, 0, 60, e.h), n.clearRect(0, e.h - e.px.lbl.h - 4, e.w, e.px.lbl.h + 4), e.mouse.bar = null;
    var r = e.canvas.lbl[0].getContext("2d");
    r.clearRect(0, 0, e.w, e.h)
  }

  function lt(t) {
    e.curIndex = t, h(t);
    if (t < 0 || t >= e.bars.data.length) return "";
    if (Zt(e.mouse.x, e.mouse.y) == 0 || Zt(e.mouse.x, e.mouse.y) == 1 || Zt(e.mouse.x, e.mouse.y) == 2 || Zt(e.mouse.x, e.mouse.y) == 3) e.curIndex = t, mobile && e.updateXFK && e.updateXFK(!1);
    if (typeof e.bars.data[t] == "undefined") return "";
    var n = e.bars.data[t][0],
      r = e.bars.data[t][1],
      i = e.bars.data[t][2],
      s = e.bars.data[t][3],
      o = e.bars.data[t][4],
      u = e.bars.data[t][5],
      a = [],
      f = e.bars.data[t + 1];
    return a = [ct(n, !1, Settings.localTime), "  ", " O:", jt(r), " H:", jt(i), " L:", jt(s), " C:", jt(o), " CHANGE:", (f ? 100 * (o - f[4]) / f[4] : 0).toFixed(2) + "%", " AMPLITUDE:", (f ? 100 * (i - s) / f[4] : 0).toFixed(2) + "%"], localStorage.lang == "cn" && (a = [ct(n, !1, Settings.localTime), "  ", " 开:", jt(r), " 高:", jt(i), " 低:", jt(s), " 收:", jt(o), " 涨幅:", (f ? 100 * (o - f[4]) / f[4] : 0).toFixed(2) + "%", " 振幅:", (f ? 100 * (i - s) / f[4] : 0).toFixed(2) + "%"]), mobile ? "" : a.join("")
  }

  function ct(e, t, n) {
    var r = new Date(e),
      i = "";
    return n === !0 ? (i = r.getFullYear() + "-", i += r.getMonth() + 1 < 10 ? "0" : "", i += r.getMonth() + 1 + "-", i += r.getDate() < 10 ? "0" : "", i += r.getDate() + " ", i += r.getHours() < 10 ? "0" : "", i += r.getHours() + ":", i += r.getMinutes() < 10 ? "0" : "", i += r.getMinutes(), t && (i += ":" + (r.getSeconds() < 10) ? "0" : "", i += r.getSeconds())) : (i = r.getUTCFullYear() + "-", i += r.getUTCMonth() + 1 < 10 ? "0" : "", i += r.getUTCMonth() + 1 + "-", i += r.getUTCDate() < 10 ? "0" : "", i += r.getUTCDate() + " ", i += r.getUTCHours() < 10 ? "0" : "", i += r.getUTCHours() + ":", i += r.getUTCMinutes() < 10 ? "0" : "", i += r.getUTCMinutes(), t && (i += ":" + (r.getUTCSeconds() < 10) ? "0" : "", i += r.getUTCSeconds())), i
  }

  function pt(e, t) {
    var n = new Date(e);
    return t === !0 ? n.getFullYear() : n.getUTCFullYear()
  }

  function dt(e, t) {
    var n = new Date(e);
    return t === !0 ? n.getMonth() + 1 : n.getUTCMonth() + 1
  }

  function vt(e, t) {
    var n = new Date(e);
    return t === !0 ? ht[n.getMonth()] : ht[n.getUTCMonth()]
  }

  function mt(e, t, n) {
    var r = new Date(e),
      i = "";
    return n === !0 ? (t && (i = r.getFullYear() + "/"), i += r.getMonth() + 1 + "/", i += r.getDate()) : (t && (i = r.getUTCFullYear() + "/"), i += r.getUTCMonth() + 1 + "/", i += r.getUTCDate()), i
  }

  function gt(e, t) {
    var n = new Date(e),
      r = "";
    return t === !0 ? r += n.getDate() : r += n.getUTCDate(), r
  }

  function yt(e, t, n) {
    var r = new Date(e),
      i = "";
    return n === !0 ? (i = r.getHours() + ":", i += r.getMinutes() < 10 ? "0" : "", i += r.getMinutes(), t && (i += ":" + (r.getSeconds() < 10 ? "0" : ""), i += r.getSeconds())) : (i = r.getUTCHours() + ":", i += r.getUTCMinutes() < 10 ? "0" : "", i += r.getUTCMinutes(), t && (i += ":" + (r.getUTCSeconds() < 10 ? "0" : ""), i += r.getUTCSeconds())), i
  }

  function bt(e, t) {
    if (t === !0) {
      var n = new Date(e);
      return n.getHours() == 0 && n.getMinutes() == 0 && n.getSeconds() == 0
    }
    return e % 86400 == 0
  }

  function wt(t, n) {
    t.textBaseline = "bottom", t.textAlign = "center";
    var r = "" + e.font.size + "px/" + e.font.lineHeight + "em " + e.font.face;
    n ? (r += " bold", t.fillStyle = e.colors.stroke.crosshair) : t.fillStyle = e.colors.fill.label, t.font = r
  }

  function Et(t, n, r) {
    var i = e.h - (e.px.lbl.h - e.px.lbl.font) / 2,
      s = Xt(r);
    t.fillText(n, s, i)
  }

  function St(t, n, r) {
    var i = e.h - (e.px.lbl.h - e.px.lbl.font) / 2;
    t.fillText(n, r, i)
  }

  function xt(t, n) {
    return t > e.w - e.px.lbl.w - e.px.lbl.tick - 1 - n / 2 ? e.w - e.px.lbl.w - e.px.lbl.tick - 1 - n / 2 : t < n / 2 ? n / 2 : t
  }

  function Tt(t, n, r) {
    var i = 5,
      s = Xt(n),
      o = xt(s, r + 2 * i) | 0,
      u = r / 2 + i | 0,
      a = 7,
      f = 4,
      l = xt(s, a);
    t.beginPath(), Ft(t, o - u, e.h - 1), It(t, o + u, e.h - 1), It(t, o + u, e.h - e.px.lbl.h), It(t, l + a / 2, e.h - e.px.lbl.h), It(t, l, e.h - e.px.lbl.h - f), It(t, l - a / 2, e.h - e.px.lbl.h), It(t, o - u, e.h - e.px.lbl.h), It(t, o - u, e.h - 1), t.fill(), t.stroke()
  }

  function Nt(t, n, r, i) {
    var s = Wt(r, n),
      o = e.w - e.px.lbl.tick - e.px.lbl.w;
    Ct(t, o, s, i)
  }

  function Ct(t, n, r, i) {
    Ft(t, n, r), It(t, n + e.px.lbl.tick, r), t.fillText(i, n + e.px.lbl.tick + 2, r, e.px.lbl.w)
  }

  function kt(t, n, r) {
    var i = Wt(r, n),
      s = e.w - e.px.lbl.tick - e.px.lbl.w;
    Lt(t, s, i)
  }

  function Lt(t, n, r) {
    Ft(t, n, r), It(t, n + e.px.lbl.tick, r)
  }

  function At(t, n, r) {
    var i = Wt(r, n),
      s = e.w - e.px.lbl.tick - e.px.lbl.w;
    Ot(t, s, i)
  }

  function Ot(t, n, r) {
    Ft(t, n, r), It(t, n + e.px.lbl.halftick, r)
  }

  function Mt(t, n, r, i) {
    if (e.colors.stroke.opacity == 1) return;
    var s = Wt(r, n),
      o = e.w - e.px.lbl.tick - e.px.lbl.w - 3,
      u;
    u = e.slots[n].px + 1 + Math.ceil(e.px.lbl.font / 2), s < u ? s = u : (u = e.slots[n].px + e.slots[n].h - Math.ceil(e.px.lbl.font / 2), s > u && (s = u)), Pt(t, o, s, i)
  }

  function _t(t, n, r, i) {
    var s = e.w - e.px.lbl.tick - e.px.lbl.w - 3,
      o;
    o = e.slots[n].px + 1 + Math.ceil(e.px.lbl.font / 2), r < o ? r = o : (o = e.slots[n].px + e.slots[n].h - Math.ceil(e.px.lbl.font / 2), r > o && (r = o)), Pt(t, s, r, i)
  }

  function Dt(t, n, r, i) {
    var s = 0,
      o;
    o = e.slots[n].px + 1 + Math.ceil(e.px.lbl.font / 2), r < o ? r = o : (o = e.slots[n].px + e.slots[n].h - Math.ceil(e.px.lbl.font / 2), r > o && (r = o)), s = e.offset + 4, Ht(t, s, r, i)
  }

  function Pt(t, n, r, i) {
    var s, o, u = e.px.lbl.font / 2;
    t.beginPath(), Ft(t, n, r), o = ~~(r - 1 - u), s = n + ~~u, It(t, s, o), s = n + e.px.lbl.w + e.px.lbl.tick + 1, t.lineTo((s | 0) + .6, (o | 0) + .5), Ft(t, s, o), o = Math.ceil(r + 1 + u), It(t, s, o), s = n + ~~u, It(t, s, o), It(t, n, r), t.fill(), t.stroke(), t.fillStyle = e.colors.fill.flagtext, t.fillText(i, n + e.px.lbl.tick + 5, r + 1)
  }

  function Ht(t, n, r, i) {
    var s, o, u = e.px.lbl.font / 2;
    t.beginPath(), Ft(t, n, r), o = ~~(r - 1 - u), s = n - ~~u, It(t, s, o), s = n + e.px.lbl.w + e.px.lbl.tick + 1, t.lineTo(.6, (o | 0) + .5), Ft(t, 0, o), o = Math.ceil(r + 1 + u), It(t, 0, o), s = n - ~~u, It(t, s, o), It(t, n, r), t.fill(), t.stroke(), t.fillStyle = e.colors.fill.flagtext, t.fillText(i, 2, r + 1, e.offset)
  }

  function Bt(e) {
    return e.toFixed(Data.baseFixed || 8)
  }

  function jt(e) {
    return e.toFixed(Data.qouteFixed || 8)
  }

  function Ft(e, t, n) {
    e.moveTo((t | 0) + .5, (n | 0) + .5)
  }

  function It(e, t, n) {
    e.lineTo((t | 0) + .5, (n | 0) + .5)
  }

  function qt(e, t, n, r, i) {
    e.fillRect(t | 0, n | 0, r | 0, i | 0)
  }

  function Rt(e, t, n, r, i) {
    e.strokeRect((t | 0) + .5, (n | 0) + .5, r | 0, i | 0)
  }

  function Ut(e, t, n, r, i) {
    e.rect((t | 0) + .5, (n | 0) + .5, r | 0, i | 0)
  }

  function zt(e, t, n, r, i) {
    Ft(e, t, n), It(e, r, i), e.stroke()
  }

  function Wt(t, n) {
    var r = null,
      i;
    if (e.slots[n].hasOwnProperty("main")) {
      r = [e.price.low, e.price.high];
      if (e.settings.logscale) return e.log.m * log10(t) + e.log.b;
      i = e.price.range
    } else r = e.slots[n].i.bounds(), i = Math.max(r[1] - r[0], 1e-8);
    var s = (r[1] - t) / i;
    return e.slots[n].px + Math.ceil(e.slots[n].h * s)
  }

  function Xt(t) {
    var n = Qt();
    return e.bars.visible > e.bars.data.length ? Vt(t) - Vt(n[1]) + (e.px.bar.width + 1) / 2 : Vt(t)
  }

  function Vt(t) {
    return e.w - e.px.lbl.w - e.px.lbl.tick - 1 - (t + 1) * (e.px.bar.spacing + e.px.bar.width) + (e.px.bar.width + 1) / 2 | 0
  }

  function $t(t) {
    var n = Qt();
    return e.bars.visible > e.bars.data.length ? n[1] - (t - (e.px.bar.spacing + e.px.bar.width) / 2) / (e.px.bar.spacing + e.px.bar.width) | 0 : Jt(t)
  }

  function Jt(t) {
    return (e.w - e.px.lbl.w - e.px.lbl.tick - 1 - e.px.bar.spacing / 2 - t) / (e.px.bar.spacing + e.px.bar.width) | 0
  }

  function Kt(t, n) {
    var r = null;
    if (e.slots[t].hasOwnProperty("main")) {
      if (e.settings.logscale) return Math.pow(10, (n - e.log.b) / e.log.m);
      r = [e.price.low, e.price.high]
    } else r = e.slots[t].i.bounds();
    var i = Math.max(r[1] - r[0], 1e-8),
      s = (n - e.slots[t].px) / e.slots[t].h;
    return r[1] - s * i
  }

  function Qt() {
    return typeof e.bars.data == "undefined" || e.bars.data.length == 0 ? [0, -1] : [Math.max(0, Gt(0)), Math.min(e.bars.data.length - 1, Gt(e.bars.visible))]
  }

  function Gt(t) {
    return t + e.bars.offset - e.bars.blank
  }

  function Yt(t) {
    return t - e.bars.offset + e.bars.blank
  }

  function Zt(t, n) {
    if (t >= e.w - e.px.lbl.w - e.px.lbl.tick - 1) return null;
    if (t < e.offset) return null;
    if (n >= e.h - e.px.lbl.h - 1) return null;
    if (n <= e.slots[0].px + e.slots[0].h) return 0;
    for (var r = 1; r < e.slots.length; r++) {
      if (n < e.slots[r].px) return -r;
      if (n <= e.slots[r].px + e.slots[r].h) return r
    }
  }

  function en(t, n) {
    return n < e.h - e.px.lbl.h ? !1 : t > e.w - e.px.lbl.w ? !1 : t < e.offset ? !1 : !0
  }

  function tn() {
    if (!e.settings.crosshairs) return;
    window.reqAnimFrame(function() {
      ft()
    })
  }

  function nn(t, n, r, i, s, o, u) {
    var a = new Array(i, s),
      f = new Array(o, u);
    t.fillStyle = e.colors.stroke.arrow, t.strokeStyle = e.colors.stroke.arrow, t.beginPath(), t.translate(n, r, 0), t.moveTo(a[0], a[1]), t.lineTo(f[0], f[1]), t.fill(), t.stroke(), t.save(), t.translate(f[0], f[1]);
    var l = (f[0] - a[0]) / (f[1] - a[1]);
    l = Math.atan(l), f[1] - a[1] >= 0 ? t.rotate(-l) : t.rotate(Math.PI - l), t.lineTo(-5, -10), t.lineTo(0, -5), t.lineTo(5, -10), t.lineTo(0, 0), t.fill(), t.restore(), t.closePath()
  }

  function ln() {
    e.canvas.i.on({
      mousedown: function(t) {
        if (e.stopEvent || mobile) return;
        e.mouse.origOffset = e.bars.offset, e.mouse.origSpacing = e.px.bar.spacing, hn(t), e.mouse.sx = e.mouse.x, e.mouse.sy = e.mouse.y, un = t.offsetX, an = t.offsetY;
        var n = Zt(e.mouse.x, e.mouse.y);
        n == null ? (en(e.mouse.x, e.mouse.y) ? (e.canvas.i.css("cursor", "e-resize"), e.mouse.zoom = !0, e.mouse.w0 = +e.px.bar.width) : e.canvas.i.css("cursor", "default"), tn()) : n < 0 ? (e.canvas.i.css("cursor", "n-resize"), e.mouse.resize = !0, e.mouse.re_slot = -n, e.mouse.re_slots.px0 = e.slots[e.mouse.re_slot - 1].px, e.mouse.re_slots.h0 = e.slots[e.mouse.re_slot - 1].h, e.mouse.re_slots.px1 = e.slots[e.mouse.re_slot].px, e.mouse.re_slots.h1 = e.slots[e.mouse.re_slot].h, tn()) : (e.mouse.down = !0, tn(), e.settings.crosshairs ? (e.canvas.i.css("cursor", "none"), window.reqAnimFrame(function() {
          at(e.mouse.x, e.mouse.y)
        })) : e.canvas.i.css("cursor", "crosshair"));
        if (e.settings.icontrols && n != e.mouse.slot) {
          n != null && n >= 0 && $(".control-" + n, e.element).show();
          var r, i;
          for (r = 0; r < e.slots.length; r++) {
            if (r == n) continue;
            i = $(".control-" + r, e.element), i.data("popped") || i.hide()
          }
        }
        e.mouse.slot = n, wn(t), t.preventDefault(), t.stopPropagation()
      },
      mouseup: function(t) {
        if (e.stopEvent || mobile) return;
        e.mouse.down = !1, e.mouse.resize = !1, e.mouse.zoom = !1, Math.abs(un - t.offsetX) < 1 && Math.abs(an - t.offsetY) < 1 && (e.notClicked = !e.notClicked, $(e.element).focus(), O()), wn(t), en(e.mouse.x, e.mouse.y) ? e.canvas.i.css("cursor", "e-resize") : e.canvas.i.css("cursor", "none");
        if (t.ctrlKey && t.shiftKey) {
          var n = Zt(e.mouse.x, e.mouse.y);
          n >= 0 && e.settings.crosshairs && (e.canvas.i.css("cursor", "none"), at(e.mouse.x, e.mouse.y)), Hn()
        }
      },
      contextmenu: function(t) {
        hn(t);
        var n = Zt(e.mouse.x, e.mouse.y);
        return n >= 0 && e.settings.crosshairs && (e.canvas.i.css("cursor", "none"), at(e.mouse.x, e.mouse.y)), Hn(), t.stopPropagation(), t.preventDefault(), !1
      },
      mouseout: function(t) {
        e.mouse.down = !1, e.mouse.resize = !1, e.mouse.zoom = !1, e.canvas.i.css("cursor", "none"), tn(), e.mouse.slot = -1
      },
      mousemove: function(t) {
        if (mobile) return;
        if (e.mouse.down || e.mouse.resize || e.mouse.zoom) e.flags.recompute = !0, wn(t);
        if (t.offsetY == rn && t.offsetX == sn) return;
        rn = t.offsetY, sn = t.offsetX, hn(t);
        var n = Zt(e.mouse.x, e.mouse.y),
          r = e.canvas.i[0].getContext("2d");
        n == null ? (en(e.mouse.x, e.mouse.y) ? e.canvas.i.css("cursor", "e-resize") : e.canvas.i.css("cursor", "default"), tn()) : n < 0 ? (e.canvas.i.css("cursor", "n-resize"), tn()) : e.settings.crosshairs ? (e.canvas.i.css("cursor", "none"), window.reqAnimFrame(function() {
          at(e.mouse.x, e.mouse.y)
        })) : e.canvas.i.css("cursor", "crosshair");
        if (e.settings.icontrols && n != e.mouse.slot) {
          n != null && n >= 0 && $(".control-" + n, e.element).show();
          var i, s;
          for (i = 0; i < e.slots.length; i++) {
            if (i == n) continue;
            s = $(".control-" + i, e.element), s.data("popped") || s.hide()
          }
        }
        e.mouse.slot = n;
        if (e.mouse.down || e.mouse.resize || e.mouse.zoom) e.mouse.down || e.mouse.zoom ? $(e.canvas.i).css("cursor", "e-resize") : e.canvas.i.css("cursor", "n-resize")
      },
      dblclick: function(t) {
        if (e.stopEvent) return;
        e.mode.display == e.CANDLE, e.mouse.down = !1
      },
      touchstart: function(t) {
        t.originalEvent.touches.length == 1 && (timeOutEvent = setTimeout(function() {
          on = !0, dn(t), $(".chartDetail").show(), $("html,body", parent.document).addClass("hidden")
        }, 300)), e.mouse.origOffset = e.bars.offset, e.mouse.origSpacing = e.px.bar.spacing;
        if (t.originalEvent.touches[0].clientX) e.mouse.sx = t.originalEvent.touches[0].clientX, e.mouse.sy = t.originalEvent.touches[0].clientY;
        else if (t.originalEvent.touches[0].pageX) {
          var n = e.canvas.i.offset();
          e.mouse.sx = t.originalEvent.touches[0].pageX - n.left, e.mouse.sy = t.originalEvent.touches[0].pageY - n.top
        }
        e.startTouchCoords = [];
        for (var r = 0; r < t.originalEvent.touches.length; ++r) e.startTouchCoords.push([t.originalEvent.touches[r].clientX, t.originalEvent.touches[r].clientY])
      },
      touchmove: function(t) {
        var n, r;
        if (t.originalEvent.touches[0].clientX) n = t.originalEvent.touches[0].clientX, r = t.originalEvent.touches[0].clientY;
        else if (t.originalEvent.touches[0].pageX) {
          var i = e.canvas.i.offset();
          n = t.originalEvent.touches[0].pageX - i.left, r = t.originalEvent.touches[0].pageY - i.top
        }(Math.abs(e.mouse.sx - n) > 6 || Math.abs(e.mouse.sy - r) > 6) && clearTimeout(timeOutEvent), on != 0 ? dn(t) : vn(t)
      },
      touchend: function(e) {
        clearTimeout(timeOutEvent), on = !1, $(".chartDetail").hide(), $("html,body", parent.document).removeClass("hidden"), mn(e), tn()
      }
    }), e.canvas.i.bind("mousewheel", cn), e.canvas.i.bind("pinch", pn), RTBTC.handler("barclose", e.element, _n)
  }

  function cn(t, n, r, i) {
    if (e.stopEvent) return;
    if (e.notClicked) return;
    stopEvent(t);
    if (isNaN(r) || isNaN(i)) return;
    r != 0 && (e.mouse.origOffset = e.bars.offset, e.bars.offset -= r, En(), e.bars.offset != e.mouse.origOffset && (O(), bn())), i != 0 && (w = e.px.bar.width, e.px.bar.width += i, e.px.bar.width < 2 && (e.px.bar.width = 2), e.px.bar.width > 51 && (e.px.bar.width = 51), e.px.bar.width != w && (En(), O(), bn())), localStorage.barWidth = e.px.bar.width
  }

  function hn(t) {
    if (t.offsetX) e.mouse.x = t.offsetX, e.mouse.y = t.offsetY;
    else if (t.pageX) {
      var n = e.canvas.i.offset();
      e.mouse.x = t.pageX - n.left, e.mouse.y = t.pageY - n.top
    }
  }

  function pn(t, n) {
    if (n.scale != null) {
      w = e.px.bar.width;
      var r = Math.round(e.px.bar.width * n.scale);
      e.px.bar.width = r + (r + 1) % 2, e.px.bar.width < 1 && (e.px.bar.width = 1), e.px.bar.width > 51 && (e.px.bar.width = 51), e.px.bar.width != w && (En(), O(), bn()), e.lastPinchTime = (new Date).getTime()
    }
    n.originalEvent.preventDefault(), n.originalEvent.stopPropagation()
  }

  function dn(t) {
    t.pageX = t.originalEvent.touches[0].pageX, t.pageY = t.originalEvent.touches[0].pageY, hn(t);
    var n = Zt(e.mouse.x, e.mouse.y),
      r = e.canvas.i[0].getContext("2d");
    n == null ? tn() : n < 0 ? (e.canvas.i.css("cursor", "n-resize"), tn()) : e.settings.crosshairs ? (e.canvas.i.css("cursor", "none"), window.reqAnimFrame(function() {
      at(e.mouse.x, e.mouse.y)
    })) : e.canvas.i.css("cursor", "crosshair"), e.mouse.slot = n, t.originalEvent.preventDefault(), t.originalEvent.stopPropagation()
  }

  function vn(t) {
    e.bars.allowScale = !0;
    if ((new Date).getTime() - e.lastPinchTime < 1e3) return;
    if (t.originalEvent.touches.length == 2 && e.startTouchCoords.length == 2) {
      var n = Math.sqrt(Math.pow(e.startTouchCoords[0][0] - e.startTouchCoords[1][0], 2) + Math.pow(e.startTouchCoords[0][1] - e.startTouchCoords[1][1], 2)),
        r = Math.sqrt(Math.pow(t.originalEvent.touches[0].clientX - t.originalEvent.touches[1].clientX, 2) + Math.pow(t.originalEvent.touches[0].clientY - t.originalEvent.touches[1].clientY, 2)),
        i = r / n;
      i > 1 && (i *= 1.3), i < 1 && (i *= .7);
      if (i != null) {
        w = e.px.bar.width;
        var s = Math.round(e.px.bar.width * i);
        e.px.bar.width = s + (s + 1) % 2, e.px.bar.width < 1 && (e.px.bar.width = 1), e.px.bar.width > 51 && (e.px.bar.width = 51), e.px.bar.width != w && (En(), O(), bn()), e.lastZoomTime = (new Date).getTime()
      }
      return
    }
    if (t.originalEvent.touches.length > 1) return;
    if ((new Date).getTime() - e.lastZoomTime < 1e3) return;
    e.flags.recompute = !0, e.bars.offset = e.mouse.origOffset + Math.round((t.originalEvent.touches[0].clientX - e.mouse.sx) / (e.px.bar.width + e.px.bar.spacing)), En(), e.bars.offset != e.mouse.origOffset && (O(), bn()), e.canvas.i.css("cursor", "e-resize")
  }

  function mn(t) {
    e.bars.allowScale = !0;
    if (t.originalEvent.changedTouches.length == 1 && e.startTouchCoords.length == 1 && e.startTouchCoords[0][1] != t.originalEvent.changedTouches[0].clientY && Math.abs((e.startTouchCoords[0][0] - t.originalEvent.changedTouches[0].clientX) / (e.startTouchCoords[0][1] - t.originalEvent.changedTouches[0].clientY)) < .15) {
      var n = Zt(e.mouse.sx, e.mouse.sy),
        r = 0;
      t.originalEvent.changedTouches[0].clientY > e.startTouchCoords[0][1] ? r = 1 : r = -1, n == 0 ? (e.currentOverlay = (e.currentOverlay + e.mobileOverlays.length + r) % e.mobileOverlays.length, yn(e.mobileOverlays[e.currentOverlay])) : n > 0 && (e.currentIndicator = (e.currentIndicator + e.mobileIndicators.length + r) % e.mobileIndicators.length, gn(e.mobileIndicators[e.currentIndicator]))
    }
  }

  function gn(t) {
    if (e.indicators.hasOwnProperty(t)) {
      while (e.slots.length > 2) L(e.slots.length - 1);
      N(t)
    }
    return this
  }

  function yn(t) {
    if (e.overlays.hasOwnProperty(t)) {
      while (e.slots[0].u.length > 0) k(e.slots[0].u.length - 1, "u", 0);
      T(t)
    }
    return this
  }

  function bn() {
    var t = Qt();
    t[1] > -1 && e.bars.offset >= e.bars.data.length - e.bars.visible + e.bars.blank + e.bars.endpad - 3 && Data.loadPrev(Cn())
  }

  function wn(t) {
    hn(t);
    if (e.mouse.down)
      if (t.ctrlKey) {
        var n = e.px.bar.spacing;
        e.px.bar.spacing = e.mouse.origSpacing + Math.round((e.mouse.sx - e.mouse.x) / 10), e.px.bar.spacing < 0 && (e.px.bar.spacing = 0), e.px.bar.spacing > 51 && (e.px.bar.spacing = 51), e.px.bar.spacing != n && (O(), bn())
      } else {
        e.bars.offset = e.mouse.origOffset + Math.round((e.mouse.x - e.mouse.sx) / (e.px.bar.width + e.px.bar.spacing)), En();
        if (e.bars.offset != e.mouse.origOffset || e.bars.offset == 0) O(), bn()
      }
    else if (e.mouse.zoom) {
      var r = e.mouse.x - e.mouse.sx,
        i = +e.px.bar.width;
      e.px.bar.width = e.mouse.w0 - 2 * (r / 10 | 0), e.px.bar.width < 3 && (e.px.bar.width = 3), e.px.bar.width > 51 && (e.px.bar.width = 51), e.px.bar.width != i && (En(), O(), bn())
    } else if (e.mouse.resize) {
      var s = e.mouse.y - e.mouse.sy;
      e.slots[e.mouse.re_slot - 1].h = e.mouse.re_slots.h0 + s, e.slots[e.mouse.re_slot - 1].h < e.px.slotmin && (s = e.px.slotmin - e.mouse.re_slots.h0, e.slots[e.mouse.re_slot - 1].h = e.px.slotmin), e.slots[e.mouse.re_slot].h = e.mouse.re_slots.h1 - s, e.slots[e.mouse.re_slot].px = e.mouse.re_slots.px1 + s, e.slots[e.mouse.re_slot].h < e.px.slotmin && (s = e.mouse.re_slots.h1 - e.px.slotmin, e.slots[e.mouse.re_slot].h = e.px.slotmin, e.slots[e.mouse.re_slot].px = e.mouse.re_slots.px1 + s), e.slots[e.mouse.re_slot - 1].h = e.mouse.re_slots.h0 + s;
      if (e.slots[e.mouse.re_slot - 1].h < e.px.slotmin) {
        var o = (e.slots[e.mouse.re_slot - 1].h + e.slots[e.mouse.re_slot].h) / 2;
        e.slots[e.mouse.re_slot].h = o, e.slots[e.mouse.re_slot - 1].h = o, e.slots[e.mouse.re_slot].px = e.slots[e.mouse.re_slot - 1].px + e.slots[e.mouse.re_slot - 1].h + e.px.pad + 3
      }
      for (var u = 0; u < e.slots.length; u++) $(".control-" + u, e.element).css("top", e.slots[u].px + 3 + "px");
      O()
    }
  }

  function En() {
    e.bars.offset > e.bars.data.length - e.bars.visible + e.bars.blank + e.bars.endpad && (e.bars.offset = e.bars.data.length - e.bars.visible + e.bars.blank + e.bars.endpad), e.bars.offset < 0 && (e.bars.offset = 0)
  }

  function Sn() {
    e.resize.avail = e.h - (e.slots.length * (2 + e.px.pad) - e.px.pad - 1 + e.px.lbl.h), e.resize.slots = [], e.resize.pct = [];
    for (var t = 0; t < e.slots.length; t++) e.resize.slots.push(e.slots[t].h), e.resize.pct.push(e.slots[t].h / e.resize.avail);
    g()
  }

  function xn() {
    var n = $(e.element).width(),
      r = $(e.element).height();
    if (e.w == n && e.h == r) return;
    e.w = n, e.h = r, DEBUG && t("@@@@@@@_P.w, h: " + e.w + ", " + e.h), $("canvas", e.element).each(function(t, n) {
      $(n).attr("width", e.w + "px").attr("height", e.h + "px")
    }), $("canvas", e.element).attr("val", !1), Tn();
    var i = e.canvas.i[0].getContext("2d");
    e.canvas.line[0].getContext("2d"), O()
  }

  function Tn() {
    var t = (e.slots.length - 1) * (2 + e.px.pad) + 1 + e.px.lbl.h,
      n = e.h - t,
      r = -1,
      i, s = 0,
      o, u;
    for (o = 0; o < e.slots.length; o++) e.slots[o].h = e.resize.pct[o] * n | 0, e.slots[o].px = r, r += e.slots[o].h + 2 + e.px.pad, s += e.slots[o].h;
    o = 0;
    while (s < n) {
      e.slots[o % e.slots.length].h += 1, s += 1;
      for (u = 1 + o % e.slots.length; u < e.slots.length; u++) e.slots[u].px += 1;
      o++
    }
    o = 0;
    while (s > n) {
      e.slots[o % e.slots.length].h -= 1, s -= 1;
      for (u = 1 + o % e.slots.length; u < e.slots.length; u++) e.slots[u].px -= 1;
      o++
    }
    for (o = 0; o < e.slots.length; o++) $(".control-" + o, e.element).css("top", e.slots[o].px + 3 + "px")
  }

  function Nn() {
    Tn(), O()
  }

  function Cn() {
    return e.period.avail[e.period.current]
  }

  function kn() {
    switch (e.mode.current) {
      case e.TIME_BAR:
        return Ln();
      case e.VOL_BAR:
        return On();
      default:
        return ""
    }
  }

  function Ln(t) {
    var n = typeof t == "undefined" ? e.period.avail[e.period.current] : t;
    return n == 0 ? "Ticks" : n < 60 ? "S" + n : n < 3600 ? "M" + (n / 60 | 0) : n < 86400 ? "H" + (n / 3600 | 0) : n < 604800 ? "D" + (n / 86400 | 0) : n < 2592e3 ? "W" + (n / 604800 | 0) : (n / 2592e3 | 0) + "M"
  }

  function An(t) {
    var n = typeof t == "undefined" ? e.period.avail[e.period.current] : t;
    return n == 0 ? _("Ticks") : n < 60 ? n + " " + 0 / 0 : n < 3600 ? (n / 60 | 0) + " " + _("minute") : n < 86400 ? (n / 3600 | 0) + " " + _("hour") : n < 604800 ? (n / 86400 | 0) + " " + _("day") : n < 2592e3 ? (n / 604800 | 0) + " " + _("week") : (n / 2592e3 | 0) + " " + _("month")
  }

  function On(t) {
    var n = typeof t == "undefined" ? e.volume.avail[e.volume.current] : t;
    return n |= 0, n < 1e3 ? "V" + n : n < 1e6 ? "V" + ~~(n / 1e3) + "K" : n < 1e9 ? "V" + ~~(n / 1e6) + "M" : "V" + ~~(n / 1e9) + "B"
  }

  function Mn() {
    var t = RTBTC.exchangeName() + " " + RTBTC.base() + "/" + RTBTC.quote() + ", " + kn();
    e.module.setTitle(t)
  }

  function _n(n) {
    typeof n == "undefined" && (n = Cn());
    var r = +n;
    isNaN(r) || e.mode.current == e.TIME_BAR && n == e.period.avail[e.period.current] && (DEBUG && t("handling bar close for period: " + n), e.bars.data = Data.data.bars[n], O())
  }

  function Dn(e) {
    O()
  }

  function Pn(t) {
    Colors.hasOwnProperty(t) && (e.colors = Colors[t]), O()
  }

  function Hn() {
    if (mobile) return;
    var t = e.font.headingSize,
      n = t * 1.25,
      r = 2.75 * n | 0,
      i = $("<canvas/>").attr("width", e.w).attr("height", e.h + r),
      s = i[0].getContext("2d"),
      o = RTBTC.base() + "/" + RTBTC.quote(),
      u = ", " + An() + " " + _("bars"),
      a = Qt(),
      f, l, c, h, p, d = Settings.localTime;
    s.fillStyle = e.colors.fill.blankBG, s.fillRect(0, r, e.w, e.h), s.fillStyle = e.colors.fill.bg, s.fillRect(0, 0, e.w, r), s.fillStyle = e.colors.stroke.crosshair, s.font = e.font.headingBold, s.textBaseline = "middle", c = s.measureText(o).width, f = s.measureText(e.watermark).width, l = e.w - f - t;
    if (a[1] >= a[0]) {
      s.fillText(o, t / 2, n), s.font = e.font.heading, s.fillStyle = e.colors.fill.slottext, s.fillText(u, t / 2 + c, n, l - c);
      for (p = a[1]; p > a[0]; p--)
        if (p < e.bars.data.length) {
          u = mt(e.bars.data[p][0], !0, d) + " " + yt(e.bars.data[p][0], d);
          break
        }
      u += " - ";
      for (p = a[0]; p < a[1]; p++)
        if (p >= 0) {
          u += mt(e.bars.data[p][0], !0, d) + " " + yt(e.bars.data[p][0], d);
          break
        }
      s.fillText(u, t / 2, 2 * n, l - e.px.lbl.tick - e.px.lbl.w)
    } else s.fillText(o, t / 2, 2 * n), s.font = e.font.heading, s.fillStyle = e.colors.fill.slottext, s.fillText(u, t / 2 + c, 2 * n, l - c);
    s.fillText(e.watermark, e.w - f - t / 2 - e.px.lbl.tick - e.px.lbl.w, 2 * n), s.drawImage(e.canvas.base[0], 0, r), s.drawImage(e.canvas.bg[0], 0, r), s.drawImage(e.canvas.main[0], 0, r), s.drawImage(e.canvas.fg[0], 0, r), s.drawImage(e.canvas.orders[0], 0, r), s.drawImage(e.canvas.lbl[0], 0, r), s.drawImage(e.canvas.line[0], 0, r), s.drawImage(e.canvas.i[0], 0, r), s.strokeStyle = e.colors.stroke.border, s.lineWidth = 1, s.beginPath(), Ft(s, 0, r), It(s, e.w - e.px.lbl.tick - e.px.lbl.w, r), s.stroke();
    var v = i[0].toDataURL("image/png");
    if (has_dataURI()) window.open(v, "_blank");
    else {
      var m = window.open(BASE_URL + "blank.html");
      m.data = '<img src="' + v + '"/>', m.document.write(m.data), m.focus()
    }
  }
  var e = {
      element: "",
      parent: null,
      module: null,
      self: null,
      canvas: {
        base: null,
        bg: null,
        main: null,
        fg: null,
        orders: null,
        lbl: null,
        i: null,
        line: null
      },
      w: 0,
      h: 0,
      mode: {
        current: 0,
        avail: ["Time Bars"],
        display: 0,
        avail_display: ["Candle", "OHLC", "HLC", "Line"]
      },
      TIME_BAR: 0,
      CANDLE: 0,
      OHLC: 1,
      HLC: 2,
      LINE: 3,
      MOUNTAIN: 4,
      BANDS: 5,
      PSAR: 6,
      HIST: 7,
      LBLHIST: 8,
      period: {
        current: 13,
        string: "M15",
        avail: [2592e3, 604800, 259200, 86400, 43200, 28800, 21600, 14400, 7200, 3600, 2700, 1800, 900, 300, 180, 60, 0]
      },
      bars: {
        visible: -1,
        offset: 0,
        blank: 0,
        endpad: 0,
        data: [],
        noload: {},
        startTime1: "9:30:00",
        endTime1: "11:30:00",
        startTime2: "13:00:00",
        endTime2: "15:00:00",
        ticks: [],
        fixTime: !1
      },
      slots: [{
        main: !0,
        px: 0,
        h: 50,
        u: [{
          t: "ema",
          i: null,
          s: [5]
        }],
        o: []
      }, {
        t: "vol",
        i: null,
        px: 5,
        h: 10,
        s: []
      }],
      resize: {
        avail: 0,
        slots: [],
        pct: []
      },
      price: {
        high: 100,
        low: 50,
        range: 50,
        bid: NaN,
        ask: NaN
      },
      log: {
        m: 0,
        b: 0,
        b10: 0
      },
      px: {
        pad: 5,
        lbl: {
          w: 65,
          h: 14,
          tick: 5,
          halftick: 2,
          font: 11
        },
        bar: {
          width: 7,
          dx: 4,
          spacing: 1
        },
        price: 1,
        crosshairs: {
          x: 0,
          y: 0
        },
        slotmin: 50
      },
      flags: {
        redraw: {
          base: !0,
          main: !0,
          underlay: !0,
          overlay: !0,
          inds: !0
        },
        recompute: !0,
        widget: !1
      },
      mouse: {
        down: !1,
        zoom: !1,
        w0: null,
        x: 0,
        y: 0,
        bar: null,
        sx: 0,
        sy: 0,
        origOffset: 0,
        origSpacing: 1,
        resize: !1,
        re_slot: 0,
        re_slots: {
          px0: 0,
          h0: 0,
          px1: 0,
          h1: 0
        },
        slot: -1
      },
      colors: Colors.c,
      lastColorIndex: 0,
      defaultColors: null,
      SOLID: 0,
      DOTTED: 1,
      DASHED: 2,
      DASHDOT: 3,
      font: {
        precision: 2,
        labels: mobile ? '10px/1.0em  "Microsoft YaHei", Arial, sans-serif' : '11px/1.0em  Consolas, "Courier New", monospace',
        size: 11,
        lineHeight: 1,
        face: ' "Microsoft YaHei", Consolas, "Courier New", monospace',
        indicators: '10px/1.0em  "Microsoft YaHei", Arial, sans-serif',
        heading: '12px/1.0em  "Microsoft YaHei", Arial, sans-serif',
        headingBold: 'bold 12px/1.0em  "Microsoft YaHei", Arial, sans-serif',
        headingSize: 12
      },
      watermark: "bijietech.com",
      settings: {
        repaint: !0,
        grid: !0,
        crosshairs: !0,
        icontrols: !0,
        bidask: !0,
        logscale: !1,
        userorders: !1
      },
      indicators: {
        macd: "MACD",
        kdj: "KDJ",
        cci: "Commodity Channel Index",
        dmi: "Directional Movement Index",
        obv: "On-Balance Volume",
        rsi: "Relative Strength Index",
        sto: "Stochastic Oscillator",
        storsi: "Stochastic RSI",
        vol: "Volume",
        wpr: "Williams %R",
        emv: "Ease of movement value",
        mtm: "Momentum"
      },
      mobileIndicators: ["macd", "kdj", "cci", "dmi", "obv", "rsi", "sto", "storsi", "wpr", "emv", "mtm", "avl"],
      currentIndicator: 0,
      overlays: {
        ema: "Exponential Moving Average",
        bnd: "Bollinger Bands &reg;",
        psar: "Parabolic SAR",
        dcn: "Price Channels",
        sma: "Simple Moving Average",
        vwap: "Volume Weighted Average Price",
        trix: "Triple Exponentially Smoothed Average",
        avl: "avl",
        ma: "ma"
      },
      mobileOverlays: ["ema", "bnd", "psar", "dcn", "sma", "vwap", "trix", "avl", "ma"],
      currentOverlay: 0,
      lastPinchTime: -1,
      lastZoomTime: -1,
      startTouchCoords: [],
      crossHairH: !0,
      setShowRateOnLeft: !1,
      data: {},
      curIndex: 1,
      offset: 0,
      preClose: 0,
      showMainCrosshairs: !0,
      stopEvent: !1,
      preTradingDay: 0,
      notClicked: !0,
      debug: RTBTC.isDebug()
    },
    t = RTBTC.debug;
  Date.prototype.Format = function(e) {
    var t = {
      "M+": this.getMonth() + 1,
      "d+": this.getDate(),
      "h+": this.getHours(),
      "m+": this.getMinutes(),
      "s+": this.getSeconds(),
      "q+": Math.floor((this.getMonth() + 3) / 3),
      S: this.getMilliseconds()
    };
    /(y+)/.test(e) && (e = e.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length)));
    for (var n in t)(new RegExp("(" + n + ")")).test(e) && (e = e.replace(RegExp.$1, RegExp.$1.length == 1 ? t[n] : ("00" + t[n]).substr(("" + t[n]).length)));
    return e
  };
  var ht = [_("Jan"), _("Feb"), _("Mar"), _("Apr"), _("May"), _("Jun"), _("Jul"), _("Aug"), _("Sep"), _("Oct"), _("Nov"), _("Dec")],
    rn = 0,
    sn = 0,
    on, un, an, fn = !1;
  return {
    build: function(t, r, i) {
      return e.element = t, e.parent = r, n(), ln(), s(i), x(), p(), c(), window.setTimeout(function() {
        RTBTC.trigger("what-theme", null)
      }, 100), $(e.element).on("mouseleave", function() {
        y()
      }), $(e.element).on("keydown", function(t) {
        t.keyCode == 38 && cn(e.element, -1, 0, 1), t.keyCode == 40 && cn(e.element, -1, 0, -1)
      }), this
    },
    lblWidth: function() {
      return e.px.lbl.w
    },
    module: function(t) {
      return e.module = t, Mn(), RTBTC.handler("barclose", e.module.id(), e.self.onBarClose), RTBTC.handler("theme", e.module.id(), e.self.onTheme), RTBTC.handler("trade", e.module.id(), e.self.onTrade), RTBTC.handler("bidask", e.module.id(), e.self.bidask), RTBTC.handler("orders", e.module.id(), B), RTBTC.handler("order-canceled", e.module.id(), H), this
    },
    self: function(t) {
      return e.self = t, this
    },
    settings: function() {
      return S()
    },
    save: function() {
      return f()
    },
    load: function(e) {
      s(e), O()
    },
    unload: function() {
      RTBTC.unregisterAll(e.module.id())
    },
    onBarClose: function(e) {
      _n(e)
    },
    onTheme: function(e) {
      Pn(e)
    },
    setPreClose: function(t) {
      e.preClose = Number(t)
    },
    showDetail: function() {
      c()
    },
    onTrade: function(e) {
      Dn(e)
    },
    wheel: function(t) {
      cn(e.element, -1, 0, -t)
    },
    loadTicks: function(n) {
      var r = e.bars.ticks;
      e.bars.ticks = [];
      for (var i = 0; i < n.length; i++) a(n[i]) && e.bars.ticks.push(n[i]);
      return e.bars.ticks.length == 0 ? (e.bars.ticks = r, t("Failed to load any new ticks!")) : (o(), A()), this
    },
    loadBars: function(t) {
      var n, r, i = e.bars.ticks,
        s = e.bars.data;
      if (t.length > 0) {
        e.bars.ticks = [];
        for (n = t.length - 1; n >= 0; n--) r = [t[n][0], t[n][1], t[n][5] / 4], a(r) && e.bars.ticks.push(r), r = [t[n][0], t[n][2], t[n][5] / 4], a(r) && e.bars.ticks.push(r), r = [t[n][0], t[n][3], t[n][5] / 4], a(r) && e.bars.ticks.push(r), r = [t[n][0], t[n][4], t[n][5] / 4], a(r) && e.bars.ticks.push(r);
        e.bars.ticks.length > 0 ? (e.bars.data = t, e.flags.redrawBG = !0, e.flags.recompute = !0, A()) : (e.bars.ticks = i, e.bars.data = s)
      }
      return this
    },
    tick: function(t) {
      var n = e.bars.data.length;
      a(t) && (e.bars.ticks.push([t[0], t[1], t[2]]), u(t), e.bars.data.length > n && (e.flags.redrawFG = !0), A())
    },
    bar: function(t) {
      var n = e.bars.data.length;
      if (e.bars.data.length > 0) {
        if (t[0] < e.bars.data[0][0]) return;
        if (t[0] == e.bars.data[0][0] && t[5] <= e.bars.data[0][5]) return;
        t[0] == e.bars.data[0][0] ? e.bars.data[0] = t : (e.bars.data.splice(0, 0, t), e.flags.redrawFG = !0)
      } else e.bars.data.splice(0, 0, t), e.flags.redrawFG = !0;
      e.flags.recompute = !0, A()
    },
    bidask: function(t) {
      var n = !1;
      return t.hasOwnProperty("bid") && e.price.bid != t["bid"] && (e.price.bid = t.bid, n = !0), t.hasOwnProperty("ask") && e.price.ask != t["ask"] && (e.price.ask = t.ask, n = !0), n && (e.flags.redraw.main = !0, A()), this
    },
    resize: function() {
      r(), Sn(), window.reqAnimFrame(xn), Nn()
    },
    drag: function(e) {
      switch (e) {
        case "start":
          g();
          break;
        case "during":
          break;
        case "stop":
        default:
      }
    },
    widget: function(t) {
      return t == null || typeof t == "undefined" ? e.flags.widget : (e.flags.widget = t, this)
    },
    addIndicator: function(e) {
      return N(e), this
    },
    addOrUpdateIndicator: function(t, n) {
      return e.indicators.hasOwnProperty(t) ? N(t, n) : e.overlays.hasOwnProperty(t) && T(t, n), this
    },
    removeIndicator: function() {
      while (e.slots.length > 2) L(e.slots.length - 1);
      while (e.slots[0].u.length > 1) k(e.slots[0].u.length - 1, "u", 0);
      return this
    },
    addOverlay: function(e, t) {
      T(e, t)
    },
    removeIndicatorByname: function(t) {
      return t instanceof Array && t.forEach(function(t) {
        var n = e.slots[0].u,
          r = n.length;
        for (var i = 0; i < r; i++) n[i] && n[i].t == t && k(i, "u", 0);
        var s = e.slots;
        for (var o = 0; o < s.length; o++) s[o]["t"] == t && L(o)
      }), this
    },
    setResolution: function(t) {
      return e.period.avail.indexOf(t) >= 0 && e.period.current != e.period.avail.indexOf(t) && (e.period.current = e.period.avail.indexOf(t), e.bars.offset = 0), Data.setup(t), this
    },
    crossHairH: function(t) {
      e.crossHairH = t
    },
    fixTime: function(t) {
      e.bars.fixTime = t, e.offset = t ? 40 : 0, e.bars.offset = 0, e.settings.grid = !0
    },
    setBarwidth: function(t) {
      e.px.bar.width = t
    },
    setData: function(t) {
      e.data = t
    },
    clearData: function() {
      Data.data.bars[Cn()] = [], O()
    },
    setOffset: function(t) {
      e.offset = t
    },
    setShowRateOnLeft: function(t) {
      e.setShowRateOnLeft = t
    },
    setLastColorIndex: function(t) {
      e.lastColorIndex = t
    },
    setMode: function(t) {
      return e.mode.avail_display.indexOf(t) >= 0 && e.mode.display != e.mode.avail_display.indexOf(t) && (e.mode.display = e.mode.avail_display.indexOf(t)), $(".icontrol", e.element).css("left", e.offset + 2 + "px"), this
    },
    setCrossHair: function(t) {
      e.showMainCrosshairs = t, e.stopEvent = !t, t ? (e.canvas.i.removeClass("showHand"), $("#chartCtrlFixed").length == 0 && c()) : (e.canvas.i.addClass("showHand"), $("#chartCtrlFixed").remove())
    },
    getMode: function() {
      return e.mode.display
    },
    getInernal: function() {
      return e.yToVal = Kt, e.xToBar = $t, e.toPxX = Xt, e.barToIndex = Gt, e.toPxY = Wt, e
    },
    getCurDay: function() {
      if (e.bars.data[e.curIndex]) return $("#chartCtrlFixed").hide(), e.bars.data[e.curIndex][0]
    },
    getPerClose: function() {
      if (e.bars.data[e.curIndex + 1]) return e.bars.data[e.curIndex + 1][4]
    },
    LblWidthChangeEvent: function(t) {
      e.LblWidthChange = t
    },
    showHighlowPriceAtAngles: function() {
      e.colors.stroke.priceShow = !0
    },
    setMainSlotHeightPercent: function(t) {
      e.mainSlotHeightPercent = t
    },
    redraw: function() {
      O()
    },
    isIndicator: function(t) {
      return !!e.indicators[t]
    },
    internals: function() {
      return e.debug ? function() {
        return e
      } : function() {
        return e
      }
    }()
  }
};
Date.prototype.get8Date = function() {
  var e = this.getTimezoneOffset() * 6e4,
    t = this.getTime() + e;
  return new Date(t + 288e5)
};
var Currency = function() {
  var e = [],
    t = "¤",
    n = {
      AUD: {
        symbol: "$",
        before: !0,
        digits: 2,
        name: _("Australian dollar")
      },
      BTC: {
        symbol: "BTC",
        before: !1,
        digits: 8,
        name: _("Bitcoin")
      },
      USDT: {
        symbol: "USDT",
        before: !1,
        digits: 2,
        name: _("USDT")
      },
      ANS: {
        symbol: "ANS",
        before: !1,
        digits: 8,
        name: _("Antshares")
      },
      BNB: {
        symbol: "BNB",
        before: !1,
        digits: 8,
        name: _("Binance")
      },
      ETH: {
        symbol: "ETH",
        before: !1,
        digits: 8,
        name: _("Ethereum")
      },
      123: {
        symbol: "123",
        before: !1,
        digits: 8,
        name: _("123")
      },
      456: {
        symbol: "456",
        before: !1,
        digits: 8,
        name: _("456")
      },
      CAD: {
        symbol: "$",
        before: !0,
        digits: 2,
        name: _("Canadian dollar")
      },
      CHF: {
        symbol: "S₣",
        before: !1,
        digits: 2,
        name: _("Swiss franc")
      },
      CLP: {
        symbol: "$",
        before: !0,
        digits: 2,
        name: _("Chilean peso")
      },
      CNY: {
        symbol: "CNY",
        before: !1,
        digits: 2,
        name: _("Chinese yuan")
      },
      DKK: {
        symbol: "kr",
        before: !1,
        digits: 2,
        name: _("Danish krone")
      },
      EUR: {
        symbol: "€",
        before: !0,
        digits: 2,
        name: _("Euro")
      },
      GBP: {
        symbol: "£",
        before: !0,
        digits: 2,
        name: _("Pound sterling")
      },
      HKD: {
        symbol: "圓",
        before: !0,
        digits: 2,
        name: _("Hong Kong dollar")
      },
      JPY: {
        symbol: "¥",
        before: !0,
        digits: 2,
        name: _("Japanese yen")
      },
      FTC: {
        symbol: "FTC",
        before: !1,
        digits: 8,
        name: _("Feathercoin")
      },
      LTC: {
        symbol: "Ł",
        before: !0,
        digits: 6,
        name: _("Litecoin")
      },
      NMC: {
        symbol: "ℕ",
        before: !0,
        digits: 8,
        name: _("Namecoin")
      },
      NVC: {
        symbol: "NVC",
        before: !1,
        digits: 8,
        name: _("Novacoin")
      },
      NOK: {
        symbol: "kr",
        before: !1,
        digits: 2,
        name: _("Norwegian krone")
      },
      NZD: {
        symbol: "$",
        before: !0,
        digits: 2,
        name: _("New Zealand dollar")
      },
      PLN: {
        symbol: "zł",
        before: !1,
        digits: 2,
        name: _("Polish złoty")
      },
      PPC: {
        symbol: "PPC",
        before: !1,
        digits: 8,
        name: _("Peercoin")
      },
      RUB: {
        symbol: "руб",
        before: !1,
        digits: 2,
        name: _("Russian ruble")
      },
      SEK: {
        symbol: "kr",
        before: !1,
        digits: 2,
        name: _("Swedish krona")
      },
      SGD: {
        symbol: "S",
        before: !0,
        digits: 2,
        name: _("Singapore dollar")
      },
      THB: {
        symbol: "฿",
        before: !0,
        digits: 2,
        name: _("Thai baht")
      },
      TRC: {
        symbol: "TRC",
        before: !1,
        digits: 8,
        name: _("Terracoin")
      },
      USD: {
        symbol: "$",
        before: !0,
        digits: 2,
        name: _("United States dollar")
      },
      XPM: {
        symbol: "Ψ",
        before: !0,
        digits: 8,
        name: _("Primecoin")
      }
    };
  for (var r in n) n.hasOwnProperty(r) && e.push(r);
  return e.sort(), {
    list: function() {
      return e
    },
    before: function(e) {
      try {
        return n[e].before
      } catch (t) {
        return !0
      }
    },
    fullname: function(e) {
      try {
        return n[e].name
      } catch (t) {
        return _("Currency")
      }
    },
    format: function(e, r, i) {
      try {
        i == null && (i = n[e].digits), r = parseFloat(r);
        var s = numberWithCommas(r.toFixed(i));
        return n[e].before ? n[e].symbol + s : s + " " + n[e].symbol
      } catch (o) {
        return t + "0.00"
      }
    },
    symbol: function(e) {
      try {
        return n[e].symbol
      } catch (r) {
        return t
      }
    },
    valid: function(e) {
      return n.hasOwnProperty(e)
    }
  }
}();
var OrderBookDaemon = function() {
    function t() {
      function t(t, n) {
        var r = 0,
          i = 0,
          s = RTBTC.baseInt();
        t *= RTBTC.quoteInt();
        if (n == "bid")
          for (i = 0; i < e.book.bid.price.length; i++) {
            if (e.book.bid.price[i] < t) break;
            r += e.book.bid.amount[i] / s
          } else if (n == "ask")
            for (i = 0; i < e.book.ask.price.length; i++) {
              if (e.book.ask.price[i] > t) break;
              r += e.book.ask.amount[i] / s
            }
          return r
      }
      var e = {
        book: {
          bid: {
            price: [],
            amount: []
          },
          ask: {
            price: [],
            amount: []
          }
        }
      };
      return {
        book: e.book,
        sumToPrice: function(e, n) {
          return t(e, n)
        },
        loadBook: function(t, n, r) {
          e.book.bid.price = [], e.book.bid.amount = [], e.book.ask.price = [], e.book.ask.amount = [];
          var i = Object.keys(n).sort(function(e, t) {
              return e - t
            }).reverse(),
            s = Object.keys(t).sort(function(e, t) {
              return e - t
            });
          i.slice(0, r || 20).forEach(function(t) {
            e.book.bid.price.push(parseFloat(t)), e.book.bid.amount.push(n[t])
          }), s.slice(0, r || 20).forEach(function(n) {
            e.book.ask.price.push(parseFloat(n)), e.book.ask.amount.push(t[n])
          }), RTBTC.trigger("newbook", null)
        }
      }
    }
    var e = null;
    return new function() {
      this.Build = function() {
        return e == null && (e = new t, e.constructor = null), e
      }
    }
  }(),
  OBD = null;
var TWOPI = 2 * Math.PI,
  OBD = OrderBookDaemon.Build(),
  VisualDepth = function() {
    function r() {
      e.parent.addClass("visualdepth"), e.element = $(".box-inner", e.parent), e.element.empty(), e.w = e.element.width(), e.h = e.element.height(), e.canvas.bg = $("<canvas/>").attr("width", e.w + "px").attr("height", e.h + "px").attr("z-index", 100), e.canvas.bidFill = $("<canvas/>").attr("width", e.w + "px").attr("height", e.h + "px").attr("z-index", 101), e.canvas.askFill = $("<canvas/>").attr("width", e.w + "px").attr("height", e.h + "px").attr("z-index", 102), e.canvas.bid = $("<canvas/>").attr("width", e.w + "px").attr("height", e.h + "px").attr("z-index", 103), e.canvas.sweepFill = $("<canvas/>").attr("width", e.w + "px").attr("height", e.h + "px").attr("z-index", 104), e.canvas.sweep = $("<canvas/>").attr("width", e.w + "px").attr("height", e.h + "px").attr("z-index", 105), e.canvas.ask = $("<canvas/>").attr("width", e.w + "px").attr("height", e.h + "px").attr("z-index", 106), e.canvas.orders = $("<canvas/>").attr("width", e.w + "px").attr("height", e.h + "px").attr("z-index", 107), e.canvas.userOrders = $("<canvas/>").attr("width", e.w + "px").attr("height", e.h + "px").attr("z-index", 108), e.canvas.axes = $("<canvas/>").attr("width", e.w + "px").attr("height", e.h + "px").attr("z-index", 109), e.canvas.lbl = $("<canvas/>").attr("width", e.w + "px").attr("height", e.h + "px").attr("z-index", 110), e.canvas.i = $("<canvas/>").attr("width", e.w + "px").attr("height", e.h + "px").attr("z-index", 111), e.element.append(e.canvas.bg).append(e.canvas.bidFill).append(e.canvas.askFill).append(e.canvas.bid).append(e.canvas.ask).append(e.canvas.sweepFill).append(e.canvas.sweep).append(e.canvas.orders).append(e.canvas.userOrders).append(e.canvas.axes).append(e.canvas.lbl).append(e.canvas.i), e.defaultColors = deepCopy(e.colors);
      var t = e.canvas.bg[0].getContext("2d");
      t.font = e.font.labels, e.px.lbl.w = t.measureText("100.00").width + e.px.pad + 2
    }

    function i(t) {
      if (typeof t == "undefined") return;
      var n = new Validator,
        r = (new Validator).create(n.FLOAT),
        i = (new Validator).create(n.BOOL);
      e.settings.grid = i.set(e.settings.grid).set(t.g).get(), e.settings.fill = i.set(e.settings.fill).set(t.f).get(), e.price.scale = r.set(e.price.scale).set(t.s).get()
    }

    function s() {
      var t, n, r = {};
      return r.g = e.settings.grid, r.f = e.settings.fill, r.s = e.price.scale, r
    }

    function o() {
      return [$("<p/>").append(RTBTC.toggle(e.settings.fill, function() {
        e.settings.fill = !0
      }, function() {
        e.settings.fill = !1, E()
      }, function() {
        a()
      })).append($("<span/>").addClass("control-label").html(_("Fill the Chart"))), $("<p/>").append(RTBTC.toggle(e.settings.grid, function() {
        e.settings.grid = !0
      }, function() {
        e.settings.grid = !1
      }, function() {
        a()
      })).append($("<span/>").addClass("control-label").html(_("Show Grid")))]
    }

    function u() {
      var t = e.canvas.bg[0].getContext("2d"),
        n = e.canvas.bidFill[0].getContext("2d"),
        r = e.canvas.askFill[0].getContext("2d"),
        i = e.canvas.bid[0].getContext("2d"),
        s = e.canvas.ask[0].getContext("2d"),
        o = e.canvas.axes[0].getContext("2d"),
        u = e.canvas.lbl[0].getContext("2d");
      e.flags.recompute && f(t);
      if (e.flags.redraw.base) {
        t.clearRect(0, 0, e.w, e.h), c(t), o.clearRect(0, e.h - e.px.lbl.h - 2 * e.px.lbl.tick - 2, e.w, e.px.lbl.h + 2 * e.px.lbl.tick + 2), o.font = e.font.labels;
        var a = o.measureText(e.volume).width;
        o.clearRect(0, 0, e.px.lbl.tick + a + 5, e.h - e.px.lbl.h - e.px.lbl.tick - 1), h(o, t), e.flags.redraw.base = !1
      }
      var l = e.flags.redraw.bid || e.flags.redraw.ask;
      e.flags.redraw.bid && (v(i, n), e.flags.redraw.bid = !1), e.flags.redraw.ask && (m(s, r), e.flags.redraw.ask = !1), l && S(u), mt()
    }

    function a(t) {
      e.flags.recompute = !0, t ? u() : window.reqAnimFrame(u)
    }

    function f(r) {
      var i = (e.price.low + e.price.high) / 2,
        s = RTBTC.quoteInt(),
        o = !1;
      n = OBD.book;
      var u = n.bid.price,
        a = n.ask.price;
      if (u.length == 0 && a.length > 0) n.bid.price = [a[0]], n.bid.amount = [n.ask.amount[0]];
      else if (u.length > 0 && a.length == 0) n.ask.price = [u[0]], n.ask.amount = [n.bid.amount[0]];
      else if (u.length == 0 && a.length == 0) return;
      if (n.bid.price.length > 0 && n.ask.price.length > 0) {
        e.price.low < n.bid.price[n.bid.price.length - 1] / s && (o = !0, DEBUG && t("New low price: " + e.price.low)), e.price.high > n.ask.price[n.ask.price.length - 1] / s && (o = !0, DEBUG && t("New high price: " + e.price.high)), e.price.low > n.bid.price[n.bid.price.length - 1] / s && DEBUG && t("New low price: " + e.price.low), e.price.high < n.ask.price[n.ask.price.length - 1] / s && DEBUG && t("New high price: " + e.price.high);
        var f = (n.ask.price[0] + n.bid.price[0]) / 2;
        f * (1 - e.price.scale) > 0 && (e.price.high = f * (1 + e.price.scale), e.price.low = f * (1 - e.price.scale)), (u.length == 0 || u.length == 1 && u[0] == a[0]) && a.length > 0 ? e.price.low < 0 && (e.price.low = 0) : u.length > 0 && (a.length == 0 || a.length == 1 && a[0] == u[0]), e.allowScale ? e.allowScale = !1 : e.price.range = e.price.high - e.price.low, e.price.range = e.price.high - e.price.low, o && (DEBUG && t(e.price), e.price.range = e.price.high - e.price.low, e.price.range <= 0 && (e.price.range = 1), e.price.high < e.price.low && (e.price.high = e.price.low + 1 / RTBTC.quoteInt()), e.price.scale < e.price.minScale ? e.price.scale = e.price.minScale : e.price.scale > e.price.maxScale && (e.price.scale = e.price.maxScale), DEBUG && t("Scale: " + e.price.scale + ", range: " + e.price.range))
      }
      var l = 0,
        c;
      e.sums.bid = [];
      for (c = 0; c < n.bid.amount.length; c++) {
        l += n.bid.amount[c] / RTBTC.baseInt(), e.sums.bid[c] = l;
        if (n.bid.price[c] / s < e.price.low) break
      }
      l = 0, e.sums.ask = [];
      for (c = 0; c < n.ask.amount.length; c++) {
        l += n.ask.amount[c] / RTBTC.baseInt(), e.sums.ask[c] = l;
        if (n.ask.price[c] / s > e.price.high) break
      }
      var h = 0,
        p = 0;
      n.ask.price[e.sums.ask.length - 1] > e.price.high ? h = e.sums.ask[e.sums.ask.length - 2] : h = e.sums.ask[e.sums.ask.length - 1], n.bid.price[e.sums.bid.length - 1] < e.price.low ? p = e.sums.bid[e.sums.bid.length - 2] : p = e.sums.bid[e.sums.bid.length - 1], e.volume = Math.max(h, p), e.volume *= 1.15, e.flags.recompute = !1, e.flags.redraw.base = !0, e.flags.redraw.bid = !0, e.flags.redraw.ask = !0, typeof e.asdf == "undefined" && (t(e), e.asdf = !0)
    }

    function l() {
      var t = n.bid.amount.length,
        r = n.ask.amount.length,
        i = RTBTC.quoteInt();
      if (n.bid.price[t - 1] / i < e.price.low && e.sums.bid.length > 0) {
        var s = n.bid.price[e.sums.bid.length - 1];
        if (s > e.price.low) {
          e.flags.recompute = !0;
          return
        }
      }
      if (n.ask.price[r - 1] / i > e.price.high && e.sums.ask.length > 0) {
        var o = n.ask.price[e.sums.ask.length - 1];
        if (o < e.price.high) {
          e.flags.recompute = !0;
          return
        }
      }
    }

    function c(t, n) {
      typeof n == "undefined" && (n = !1);
      var r = e.px.lbl.h + e.px.lbl.tick + 1,
        i = e.h - r;
      t.fillStyle = e.colors.fill.bg, K(t, 0, i, e.w, r), t.strokeStyle = e.colors.stroke.border, t.beginPath(), X(t, 0, i), V(t, e.w, i), t.stroke()
    }

    function h(e, t) {
      p(e, t), d(e, t)
    }

    function p(t, n) {
      t.font = e.font.labels, t.fillStyle = e.colors.fill.label, t.strokeStyle = e.colors.stroke.border, t.textBaseline = "middle", t.textAlign = "center";
      var r, i, s = 1 / RTBTC.quoteInt(),
        o = 7;
      spacing = e.font.size * 1.5, lblWidth = 0, candidates = [1e-6, 2e-5, 1e-4, 2e-4, 5e-4, .001, .01, .5, 1, 2, 2.5, 5], interval = 1e-8, iSpace = 0, found = !1, s = 1e-8;
      for (r = 0; r < 15; r++) {
        o = Math.max(Math.abs(Math.log(s) / Math.LN10) + 1, 2);
        for (i = 0; i < candidates.length; i++) {
          interval = s * candidates[i], lblWidth = t.measureText(e.price.high.toFixed(o)).width, iSpace = et(2 * interval) - et(interval);
          if (iSpace >= lblWidth + spacing) {
            found = !0;
            break
          }
        }
        if (found) break;
        s *= 10
      }
      e.price.decimals = o;
      var u = Math.ceil(e.price.high / interval) * interval,
        a = et(u),
        f = "";
      e.settings.grid && (n.strokeStyle = e.colors.stroke.grid, n.beginPath()), t.beginPath();
      while (u >= e.price.low) {
        if (a < 0) break;
        f = u.toFixed(o), j(t, f, u), e.settings.grid && C(n, a, e.DOTTED), u -= interval, a = et(u)
      }
      t.stroke(), e.settings.grid && n.stroke()
    }

    function d(t, n) {
      t.font = e.font.labels, t.fillStyle = e.colors.fill.label, t.strokeStyle = e.colors.stroke.border, t.textBaseline = "middle", t.textAlign = "left";
      var r, i, s = 1e-8,
        o = 8,
        u = e.font.size * .625,
        a = e.px.lbl.font,
        f = [1, 2, 2.5, 5];
      interval = 1e-8, iSpace = 0, found = !1;
      for (r = 0; r < 20; r++) {
        o = Math.max(Math.abs(Math.log(s) / Math.LN10) + 1, 2);
        for (i = 0; i < f.length; i++) {
          interval = s * f[i], iSpace = Z(interval) - Z(2 * interval);
          if (iSpace >= a + u) {
            found = !0;
            break
          }
        }
        if (found) break;
        s *= 10
      }
      s >= 1 && (o = 0);
      var l = interval,
        c = Z(l),
        h = "";
      e.settings.grid && (n.strokeStyle = e.colors.stroke.grid, n.beginPath()), t.beginPath();
      while (l < e.volume) h = numberWithCommas(l.toFixed(o)), I(t, h, l), e.settings.grid && L(n, c, e.DOTTED), l += interval, c = Z(l);
      t.stroke(), e.settings.grid && n.stroke()
    }

    function v(t, r) {
      t.clearRect(0, 0, e.w, e.h), t.strokeStyle = e.colors.stroke.bid, e.settings.fill && (r.clearRect(0, 0, e.w, e.h), r.fillStyle = e.colors.fill.down, b(r, e.sums.bid, n.bid.price, !0));
      var i = !1;
      if (e.interacted && n.bid.price.length > 0) {
        var s = n.bid.price[0] / RTBTC.quoteInt();
        e.px.crosshairs.x <= et(s) && (M(), i = !0)
      }
      g(t, e.sums.bid, n.bid.price, !0), i && O(e.mouse.x, e.mouse.y)
    }

    function m(t, r) {
      t.clearRect(0, 0, e.w, e.h), t.strokeStyle = e.colors.stroke.ask, e.settings.fill && (r.clearRect(0, 0, e.w, e.h), r.fillStyle = e.colors.fill.up, b(r, e.sums.ask, n.ask.price, !1));
      var i = !1;
      if (e.interacted && n.ask.price.length > 0) {
        var s = n.ask.price[0] / RTBTC.quoteInt();
        e.px.crosshairs.x >= et(s) && (M(), i = !0)
      }
      g(t, e.sums.ask, n.ask.price, !1), i && O(e.mouse.x, e.mouse.y)
    }

    function g(r, i, s, o, u) {
      if (s.length == 0) return;
      var a, f, l = i.length,
        c = RTBTC.quoteInt(),
        h = et(s[l - 1] / c),
        p = h,
        d = Z(i[l - 1]),
        v, m, g = h,
        y = typeof u != "undefined",
        b = y ? et(u) : o ? e.w + 1 : -1;
      r.beginPath();
      if (y) {
        h = b, g = h;
        for (a = l - 1; a >= 0; a--)
          if (o && s[a] / c > u || !o && s[a] / c < u) {
            l = a + 1;
            break
          }
      }
      v = Z(i[l - 1]), X(r, h, v), !y && h > 0 && (e.yVals[h] = v);
      for (a = l - 1; a >= 0; a--) {
        h = et(s[a] / c);
        if (o && h > g || !o && h < g) {
          v = Z(i[a]), o && h > g + 1 && V(r, g + 1, v), !o && h < g - 1 && V(r, g - 1, v), V(r, h, v), !y && h > 0 && (e.yVals[h] = v);
          if (!y) {
            if (o && h > g + 1)
              for (f = g + 1; f < h; f++) e.yVals[f] = undefined;
            if (!o && h < g - 1)
              for (f = g - 1; f > h; f--) e.yVals[f] = undefined
          }
          g = h
        }
        if (h < -100 * e.w || h > 100 * e.w) {
          DEBUG && t(n), DEBUG && t("n: " + l + ", " + "curInt: " + c + ", " + "prices[n-1]: " + s[l - 1] + ", " + "x: " + h + ", " + "xf: " + p + ", " + "sums[n-1]: " + i[l - 1] + ", " + "yf: " + d + ", ");
          break
        }
      }
      r.stroke()
    }

    function b(t, n, r, i, s) {
      if (r.length == 0) return;
      var o, u = n.length,
        a = RTBTC.quoteInt(),
        f = et(r[u - 1] / a),
        l = f,
        c = 0,
        h = f,
        p = 0,
        d = Z(0),
        v = t.createLinearGradient(0, 0, 0, d),
        m = typeof s != "undefined",
        g = m ? et(s) : i ? e.w + 1 : -1;
      t.beginPath();
      if (m) {
        f = g, h = g, l = g;
        for (o = u - 1; o >= 0; o--)
          if (i && r[o] / a > s || !i && r[o] / a < s) {
            u = o + 1;
            break
          }
      }
      p = Z(n[u - 1]), X(t, f, p);
      for (o = u - 1; o >= 0; o--) {
        f = et(r[o] / a);
        if (i && f > h || !i && f < h) p = Z(n[o]), i && f > h + 1 && V(t, h + 1, p), !i && f < h - 1 && V(t, h - 1, p), V(t, f, p), h = f
      }
      V(t, h, d), V(t, l, d), t.closePath(), v.addColorStop(0, t.fillStyle), v.addColorStop(1, e.colors.fill.blankBG), t.fillStyle = v, t.fill()
    }

    function E() {
      var t = e.canvas.bidFill[0].getContext("2d");
      t.clearRect(0, 0, e.w, e.h), t = e.canvas.askFill[0].getContext("2d"), t.clearRect(0, 0, e.w, e.h)
    }

    function S(t) {
      t.clearRect(0, e.h - e.px.lbl.h - e.px.lbl.tick - 1, e.w, e.px.lbl.h + e.px.lbl.tick + 1), t.clearRect(0, 0, e.w, e.font.overlaySize + e.px.lbl.tick + 5);
      var r = 0,
        i = 0;
      try {
        r = n.bid.price.length, i = n.ask.price.length
      } catch (s) {
        return
      }
      if (r == 0 && i == 0) return;
      var o = n.bid.price[0] / RTBTC.quoteInt(),
        u = n.ask.price[0] / RTBTC.quoteInt(),
        a = "",
        f = 0,
        l = 0,
        c = u > 0 ? 100 * (u - o) / u : NaN;
      t.font = e.font.labels, t.lineWidth = 1, t.fillStyle = e.colors.fill.crosshair, t.textAlign = "center", t.textBaseline = "middle", u > e.price.low && u < e.price.high && (a = Currency.format(RTBTC.quote(), u), f = et(u), t.strokeStyle = e.colors.stroke.ask, z(t, f, t.measureText(a).width), t.fillStyle = e.colors.fill.flagtext, F(t, a, f)), o > e.price.low && o < e.price.high && (t.fillStyle = e.colors.fill.crosshair, a = Currency.format(RTBTC.quote(), o), l = et(o), t.strokeStyle = e.colors.stroke.bid, z(t, l, t.measureText(a).width), t.fillStyle = e.colors.fill.flagtext, F(t, a, l)), u > e.price.low && u < e.price.high && o > e.price.low && o < e.price.high && !isNaN(c) && (a = c.toFixed(2) + "%", t.fillStyle = e.colors.fill.ordertext, t.strokeStyle = e.colors.stroke.order, t.textAlign = "center", t.textBaseline = "top", t.font = e.font.overlays, t.fillText(a, (f + l) / 2, 1), t.beginPath(), X(t, l, e.font.overlaySize + e.px.lbl.tick + 3), V(t, l, e.font.overlaySize + 3), V(t, f, e.font.overlaySize + 3), V(t, f, e.font.overlaySize + e.px.lbl.tick + 3), t.stroke())
    }

    function x(t) {
      var n = e.canvas.orders[0].getContext("2d"),
        r = et(t.price / RTBTC.quoteInt());
      if (r < 0 || r > e.w) return;
      if (t.amount > 0) n.strokeStyle = e.colors.stroke.up;
      else {
        if (!(t.amount < 0)) return;
        n.strokeStyle = e.colors.stroke.down
      }
      e.orders.length > r && r >= 0 && (n.beginPath(), X(n, r, e.h), V(n, r, e.h - e.px.lbl.h - e.px.lbl.tick), n.stroke(), typeof e.orders[r] == "undefined" ? e.orders[r] = 1 : e.orders[r]++), window.setTimeout(function(e) {
        return function() {
          T(e)
        }
      }(r), e.orderDelay)
    }

    function T(t) {
      if (e.orders.length > t && t >= 0) {
        if (typeof e.orders[t] == "undefined") return;
        if (--e.orders[t] > 0) return;
        var n = e.canvas.orders[0].getContext("2d");
        n.clearRect(t, e.h - e.px.lbl.h - e.px.lbl.tick, 1, e.px.lbl.h + e.px.lbl.tick)
      }
    }

    function N(e, t, n) {
      C(e, et(t), n)
    }

    function C(t, n, r) {
      var i, s = 0,
        o = e.h - e.px.lbl.h - e.px.lbl.tick - 2;
      X(t, n, s), i = s;
      switch (r) {
        case e.DOTTED:
          while (i < o) V(t, n, ++i), X(t, n, ++i);
          break;
        case e.DASHED:
          while (i < o) i += 6, i = i > o ? o : i, V(t, n, i), i += 2, X(t, n, i);
          break;
        case e.DASHDOT:
          while (i < o) {
            i += 7, i = i > o ? o : i, V(t, n, i), i += 4;
            if (i >= o) break;
            X(t, n, i), i += 2, i = i > o ? o : i, V(t, n, i), i += 4, X(t, n, i)
          }
          break;
        case e.SOLID:
        default:
          V(t, n, o)
      }
    }

    function k(t, n, r) {
      y = Z(n);
      if (y < 0) return;
      if (y > e.h - e.px.lbl.h - e.px.lbl.tick - 1) return;
      L(t, y, r)
    }

    function L(t, n, r) {
      var i, s = e.w,
        o = 0;
      X(t, s, n), i = s;
      switch (r) {
        case e.DOTTED:
          while (i > o + 1) V(t, --i, n), X(t, --i, n);
          break;
        case e.DASHED:
          while (i > o) i -= 6, i = i < o ? o : i, V(t, i, n), i -= 2, X(t, i, n);
          break;
        case e.DASHDOT:
          while (i > o) {
            i -= 7, i = i < o ? o : i, V(t, i, n), i -= 4;
            if (i <= o) break;
            X(t, i, n), i -= 2, i = i < o ? o : i, V(t, i, n), i -= 4, X(t, i, n)
          }
          break;
        case e.SOLID:
        default:
          V(t, o, n)
      }
    }

    function A(t) {
      var r = e.h - e.px.lbl.h - e.px.lbl.tick - 2;
      if (n.bid.price.length > 0 && n.ask.price.length > 0) {
        var i = n.bid.price[0] / RTBTC.quoteInt(),
          s = n.ask.price[0] / RTBTC.quoteInt(),
          o = et(i),
          u = et(s);
        if (t > o && t < u) return r;
        if (typeof e.yVals[t] != "undefined") return e.yVals[t];
        var a = (e.price.high + e.price.low) / 2,
          f = t;
        if (tt(t) >= s)
          while (Math.ceil(tt(--f) * 1e6) / 1e6 >= s) {
            if (typeof e.yVals[f] != "undefined") return e.yVals[f];
            if (f <= 0) break
          } else if (tt(t) <= i)
            while (Math.floor(tt(++f) * 1e6) / 1e6 <= i) {
              if (typeof e.yVals[f] != "undefined") return e.yVals[f];
              if (f >= e.w) break
            }
      }
      return r
    }

    function O(t, n) {
      e.mouse.shift && (H(), P(t, n));
      var r = e.canvas.i[0].getContext("2d");
      if (rt(t, n)) return;
      var i = tt(t),
        s = A(t),
        o = nt(s),
        u;
      M(r), r.font = e.font.labels, r.lineWidth = 1, r.fillStyle = e.colors.fill.crosshair, r.strokeStyle = e.colors.stroke.crosshair, r.beginPath(), r.arc(t + .5, s + .5, 2, 0, TWOPI, !1), r.stroke();
      var a = Currency.format(RTBTC.quote(), i),
        f = o.toFixed(e.volDecimals);
      z(r, t, r.measureText(a).width), W(r, s, r.measureText(f).width), r.fillStyle = e.colors.fill.flagtext, r.textAlign = "left", r.textBaseline = "middle", q(r, f, s, !0), r.textAlign = "center", F(r, a, t), e.px.crosshairs.x = t, e.px.crosshairs.y = n, e.interacted = !0
    }

    function M(t, n) {
      e.interacted = !1;
      var r = t || e.canvas.i[0].getContext("2d");
      if (n === !0) {
        r.clearRect(0, 0, e.w, e.h);
        return
      }
      r.font = e.font.labels;
      var i = A(e.px.crosshairs.x),
        s = r.measureText(Currency.format("CNY", e.volume, e.volDecimals)).width + e.px.lbl.tick + 6;
      r.clearRect(e.px.crosshairs.x - 4, i - 4, 8, 8), r.clearRect(0, e.h - e.px.lbl.h - e.px.lbl.tick - 1, e.w, e.px.lbl.h + e.px.lbl.tick + 1), r.clearRect(0, i - e.px.lbl.font - 3, s, 2 * e.px.lbl.font + 6)
    }

    function D() {
      window.reqAnimFrame(function() {
        M()
      })
    }

    function P(t, r) {
      var i = e.canvas.sweep[0].getContext("2d"),
        s = e.canvas.sweepFill[0].getContext("2d"),
        o = tt(t),
        u = n.bid.price[0] / RTBTC.quoteInt(),
        a = n.ask.price[0] / RTBTC.quoteInt();
      i.clearRect(0, 0, e.w, e.h), i.strokeStyle = e.colors.stroke.order, s.clearRect(0, 0, e.w, e.h), s.fillStyle = e.colors.fill.ordertext, o >= a ? (b(s, e.sums.ask, n.ask.price, !1, o), g(i, e.sums.ask, n.ask.price, !1, o)) : o <= u && (b(s, e.sums.bid, n.bid.price, !0, o), g(i, e.sums.bid, n.bid.price, !0, o))
    }

    function H() {
      var t = e.canvas.sweep[0].getContext("2d"),
        n = e.canvas.sweepFill[0].getContext("2d");
      t.clearRect(0, 0, e.w, e.h), n.clearRect(0, 0, e.w, e.h)
    }

    function B(t, n) {
      t.textBaseline = "bottom", t.textAlign = "center";
      var r = "" + e.font.size + "px/" + e.font.lineHeight + "em " + e.font.face;
      n ? (r += " bold", t.fillStyle = e.colors.stroke.crosshair) : t.fillStyle = e.colors.fill.label, t.font = r
    }

    function j(t, n, r) {
      var i = e.h - (e.px.lbl.h - e.px.lbl.tick) / 2 - 2,
        s = et(r);
      X(t, s, e.h - e.px.lbl.h - 2 * e.px.lbl.tick - 1), V(t, s, e.h - e.px.lbl.h - .5 * e.px.lbl.tick), t.fillText(n, s, i)
    }

    function F(t, n, r) {
      var i = e.h - (e.px.lbl.h - e.px.lbl.tick) / 2 - 2;
      t.fillText(n, R(r, 10 + t.measureText(n).width), i)
    }

    function I(e, t, n, r) {
      var i = Z(n);
      q(e, t, i, r)
    }

    function q(t, n, r, i) {
      i !== !0 && (X(t, 0, r), V(t, e.px.lbl.tick, r)), r = U(r, e.px.lbl.font + 2), t.save(), t.strokeStyle = e.colors.fill.blankBG, t.strokeText(n, e.px.lbl.tick + 2, r), t.restore(), t.fillText(n, e.px.lbl.tick + 2, r)
    }

    function R(t, n) {
      return t > e.w - n / 2 ? e.w - n / 2 : t < n / 2 ? n / 2 : t
    }

    function U(t, n) {
      var r = e.h - e.px.lbl.h - e.px.lbl.tick - 1 - n / 2;
      return t > r ? r : t < n / 2 ? n / 2 : t
    }

    function z(t, n, r) {
      var i = 5,
        s = R(n, r + 2 * i) | 0,
        o = r / 2 + i | 0,
        u = 7,
        a = 4,
        f = R(n, u);
      t.beginPath(), X(t, s - o, e.h - 1), V(t, s + o, e.h - 1), V(t, s + o, e.h - e.px.lbl.h), V(t, f + u / 2, e.h - e.px.lbl.h), V(t, f, e.h - e.px.lbl.h - a), V(t, f - u / 2, e.h - e.px.lbl.h), V(t, s - o, e.h - e.px.lbl.h), V(t, s - o, e.h - 1), t.fill(), t.stroke()
    }

    function W(t, n, r) {
      var i = e.px.lbl.tick + 2,
        s = i + r + 3,
        o = e.px.lbl.font / 2;
      n = U(n, e.px.lbl.font + 2), t.beginPath(), X(t, 0, n), V(t, o, n - 1 - o), t.lineTo((s | 0) + .6, (n - 1 - o | 0) + .5), X(t, s, n - 1 - o), V(t, s, n + 1 + o), V(t, o, n + 1 + o), V(t, 0, n), t.fill(), t.stroke()
    }

    function X(e, t, n) {
      e.moveTo((t | 0) + .5, (n | 0) + .5)
    }

    function V(e, t, n) {
      e.lineTo((t | 0) + .5, (n | 0) + .5)
    }

    function J(e, t, n) {
      e.lineTo((t | 0) + .6, (n | 0) + .5)
    }

    function K(e, t, n, r, i) {
      e.fillRect(t | 0, n | 0, r | 0, i | 0)
    }

    function Q(e, t, n, r, i) {
      e.strokeRect((t | 0) + .5, (n | 0) + .5, r | 0, i | 0)
    }

    function G(e, t, n, r, i) {
      e.rect((t | 0) + .5, (n | 0) + .5, r | 0, i | 0)
    }

    function Y(e, t, n, r, i) {
      X(e, t, n), V(e, r, i), e.stroke()
    }

    function Z(t) {
      var n = 1 - t / e.volume;
      return (e.h - e.px.lbl.h - e.px.lbl.tick - 2) * n | 0
    }

    function et(t) {
      return e.w * (t - e.price.low) / e.price.range | 0
    }

    function tt(t) {
      return e.price.low + t / e.w * e.price.range
    }

    function nt(t) {
      return (1 - t / (e.h - e.px.lbl.h - e.px.lbl.tick - 2)) * e.volume
    }

    function rt(t, n) {
      return n < e.h - e.px.lbl.h - e.px.lbl.tick - 1 ? !1 : !0
    }

    function it() {
      e.canvas.i.on({
        mousedown: function(t) {
          ut(t), e.mouse.sx = e.mouse.x, e.mouse.sy = e.mouse.y, e.mouse.s0 = e.price.scale, e.mouse.down = !0, rt(e.mouse.x, e.mouse.y) && (e.mouse.zoom = !0), stopEvent(t)
        },
        click: function(t) {
          ut(t), e.mouse.sx = e.mouse.x, e.mouse.sy = e.mouse.y, e.mouse.s0 = e.price.scale, O(e.mouse.x, e.mouse.y)
        },
        mouseup: function(t) {
          e.mouse.down = !1, e.mouse.zoom = !1, (!t.ctrlKey || !t.shiftKey) && ft(t)
        },
        mouseout: function(t) {
          e.mouse.down = !1, e.mouse.zoom = !1, D(), H()
        },
        mousemove: function(t) {
          e.mouse.down ? (at(t), e.mouse.zoom && e.canvas.i.css("cursor", "e-resize")) : (e.mouse.shift && !t.shiftKey && H(), ut(t), rt(e.mouse.x, e.mouse.y) ? (D(), e.canvas.i.css("cursor", "e-resize")) : (O(e.mouse.x, e.mouse.y), e.canvas.i.css("cursor", "pointer")))
        },
        dblclick: function(t) {
          e.mouse.down = !1, e.mouse.zoom = !1;
          if (e.price.scale == e.price.defaultScale) return;
          e.price.scale = e.price.defaultScale, e.flags.recompute = !0, a(), stopEvent(t)
        }
      }), e.canvas.i.bind("pinch", ot), e.canvas.i.bind("mousewheel", st), RTBTC.handler("newbook", e.element, vt), RTBTC.handler("orders", e.element, mt)
    }

    function st(t, n, r, i) {
      e.allowScale = !0, stopEvent(t);
      var s = 1;
      if (r === undefined && i === undefined) return;
      r != 0 ? s = 1 - r * .01 : i != 0 && (s = 1 - i * .1);
      var o = e.price.scale;
      e.price.scale *= s, e.price.scale > e.price.maxScale && (e.price.scale = e.price.maxScale), e.price.scale < e.price.minScale && (e.price.scale = e.price.minScale), e.price.scale != o && a()
    }

    function ot(t, n) {
      if (n.scale != null) {
        w = e.px.bar.width;
        var r = e.price.scale;
        e.price.scale *= n.scale, e.price.scale > e.price.maxScale && (e.price.scale = e.price.maxScale), e.price.scale < e.price.minScale && (e.price.scale = e.price.minScale), e.price.scale != r && a()
      }
      n.originalEvent.preventDefault(), n.originalEvent.stopPropagation()
    }

    function ut(t) {
      if (t.offsetX) e.mouse.x = t.offsetX, e.mouse.y = t.offsetY;
      else if (t.pageX) {
        var n = e.canvas.i.offset();
        e.mouse.x = t.pageX - n.left, e.mouse.y = t.pageY - n.top
      }
      e.mouse.shift = t.shiftKey
    }

    function at(t) {
      ut(t);
      if (e.mouse.zoom) {
        var n = e.mouse.x - e.mouse.sx,
          r = e.price.scale;
        t.shiftKey ? e.price.scale = e.mouse.s0 * (1 - n / 1e3) : e.price.scale = e.mouse.s0 * (1 - n / 100), e.price.scale > e.price.maxScale && (e.price.scale = e.price.maxScale), e.price.scale < e.price.minScale && (e.price.scale = e.price.minScale), e.price.scale != r && a()
      }
    }

    function ft(t) {
      ut(t);
      if (!rt(e.mouse.x, e.mouse.y)) {
        var r = +tt(e.mouse.x).toFixed(e.price.decimals),
          i = "",
          s = 0,
          o = {
            side: "",
            price: r
          };
        n.bid.price.length > 0 && r <= n.bid.price[0] / RTBTC.quoteInt() ? e.mouse.shift ? (i = "sell", s = OBD.sumToPrice(r, "bid"), o.amount = s) : i = "buy" : n.ask.price.length > 0 && r >= n.ask.price[0] / RTBTC.quoteInt() && (e.mouse.shift ? (i = "buy", s = OBD.sumToPrice(r, "ask"), o.amount = s) : i = "sell"), o.side = i, RTBTC.trigger("set-order-entry-" + i, o), e.mouse.shift && H()
      }
    }

    function lt() {}

    function ct() {
      var t = $(e.element).width(),
        n = $(e.element).height();
      if (e.w == t && e.h == n) return;
      e.w = t, e.h = n, $("canvas", e.element).each(function(t, n) {
        $(n).attr("width", e.w + "px").attr("height", e.h + "px")
      }), a(!0)
    }

    function ht() {
      if (isNaN(parseInt(e.w))) return;
      e.w = e.w | 0;
      if (e.w >= 0) {
        try {
          e.orders = new Array(e.w + 1), e.yVals = new Array(e.w + 1)
        } catch (n) {
          DEBUG && t("Exception on Array size");
          try {
            "console" in window && console.log("Warning: " + e.w)
          } catch (n) {}
        }
        a()
      }
    }

    function pt() {
      e.module.setTitle(_("Visual Depth"))
    }

    function dt(t) {
      var n = t.price / RTBTC.quoteInt();
      l(), t["location"] == "bid" ? n >= e.price.low && (e.flags.redraw.bid = !0, u()) : t["location"] == "ask" && n <= e.price.high && (e.flags.redraw.ask = !0, u()), e.settings.orders && x(t)
    }

    function vt() {
      e.flags.recompute = !0, e.flags.redraw.base = !0, e.flags.redraw.bid = !0, e.flags.redraw.ask = !0, M(null, !0), a(!0)
    }

    function mt() {
      var t = UserAccount.orders(),
        n, r, i = null,
        s = 0,
        o = "BIJIE";
      if (!t.hasOwnProperty(o)) return;
      t = t[o];
      for (n in t) t.hasOwnProperty(n) && (s++, i == null && (i = e.canvas.userOrders[0].getContext("2d"), i.clearRect(0, 0, e.w, e.h), i.text = e.font.overlays, i.textBaseline = "bottom", i.strokeStyle = e.colors.stroke.order, i.fillStyle = e.colors.fill.ordertext, i.beginPath()), r = t[n], r["quote"] == RTBTC.quote() && gt(i, r));
      i != null && (i.fill(), i.stroke()), s == 0 && e.userOrders > 0 && (i = e.canvas.userOrders[0].getContext("2d"), i.clearRect(0, 0, e.w, e.h)), e.userOrders = s
    }

    function gt(t, n) {
      var r = et(n.price),
        i = 0,
        s = "",
        o = "",
        u = n.quote;
      if (r < 0 || r > e.w) return;
      i = A(r), X(t, r, i), V(t, r - e.px.lbl.tick / 2, i - e.px.lbl.tick), J(t, r + e.px.lbl.tick / 2, i - e.px.lbl.tick), V(t, r, i), n["action"] == "buy" ? (s = _("BUY"), t.textAlign = "left", r -= e.px.lbl.tick / 2) : n["action"] == "sell" && (s = _("SELL"), t.textAlign = "right", r += e.px.lbl.tick / 2), o = Currency.format(u, n.price), s += " " + RTBTC.numFormatShort(n.amount, 8) + " @ " + o, t.fillText(s, r, i - 1.5 * e.px.lbl.tick)
    }

    function yt(t) {
      Colors.hasOwnProperty(t) && (e.colors = Colors[t], a())
    }

    function bt() {
      return;
      var t, n, r, i, s, o, u, a, f, l, c, h, p, d
    }
    var e = {
        element: "",
        parent: null,
        module: null,
        self: null,
        canvas: {
          bg: null,
          bidFill: null,
          askFill: null,
          bid: null,
          ask: null,
          sweepFill: null,
          sweep: null,
          orders: null,
          userOrders: null,
          axes: null,
          lbl: null,
          i: null
        },
        w: 0,
        h: 0,
        price: {
          low: 50,
          high: 100,
          range: 50,
          scale: .1,
          defaultScale: .1,
          minScale: 1e-5,
          maxScale: 1e5,
          decimals: 4
        },
        volume: 100,
        volDecimals: 2,
        orders: [],
        orderDelay: 1250,
        userOrders: 0,
        yVals: [],
        allowScale: !1,
        sums: {
          bid: [],
          ask: []
        },
        log: {
          m: 0,
          b: 0,
          b10: 0
        },
        px: {
          pad: 5,
          lbl: {
            w: 65,
            h: 16,
            tick: 4,
            halftick: 2,
            font: 11
          },
          crosshairs: {
            x: 0,
            y: 0
          }
        },
        flags: {
          redraw: {
            base: !0,
            bid: !0,
            ask: !0
          },
          recompute: !0,
          widget: !1
        },
        interacted: !1,
        mouse: {
          down: !1,
          zoom: !1,
          x: 0,
          y: 0,
          sx: 0,
          sy: 0,
          s0: null,
          shift: !1
        },
        colors: Colors.c1,
        SOLID: 0,
        DOTTED: 1,
        DASHED: 2,
        DASHDOT: 3,
        font: {
          precision: 6,
          labels: '11px/1.0em Consolas, "Courier New", monospace',
          size: 11,
          lineHeight: 1,
          face: 'Consolas, "Courier New", monospace',
          overlays: "10px/1.0em Arial, sans-serif",
          overlaySize: 10,
          heading: "12px/1.0em Arial, sans-serif",
          headingBold: "bold 12px/1.0em Arial, sans-serif",
          headingSize: 12
        },
        watermark: "© RTBTC",
        settings: {
          grid: !0,
          fill: !0,
          orders: !0
        },
        debug: RTBTC.isDebug()
      },
      t = RTBTC.debug,
      n = OBD.book;
    return {
      build: function(t, n, s) {
        return e.element = t, e.parent = n, r(), it(), i(s), window.setTimeout(function() {
          RTBTC.trigger("what-theme", null)
        }, 100), this
      },
      module: function(t) {
        return e.module = t, pt(), RTBTC.handler("newbook", e.module.id(), e.self.onBook), RTBTC.handler("depth", e.module.id(), e.self.onDepth), RTBTC.handler("theme", e.module.id(), e.self.onTheme), RTBTC.handler("orders", e.module.id(), mt), RTBTC.handler("order-canceled", e.module.id(), mt), this
      },
      self: function(t) {
        e.self = t
      },
      settings: function() {
        return o()
      },
      save: function() {
        return s()
      },
      load: function(e) {
        i(e), a()
      },
      unload: function() {
        RTBTC.unregisterAll(e.module.id())
      },
      onDepth: function(e) {
        dt(e)
      },
      onTheme: function(e) {
        yt(e)
      },
      onBook: function(e) {
        vt(e)
      },
      resize: function(e) {
        lt(), window.reqAnimFrame(ct), ht()
      },
      resizeStop: function() {
        ht()
      },
      drag: function(e) {
        switch (e) {
          case "start":
            break;
          case "during":
            break;
          case "stop":
          default:
        }
      },
      widget: function(t) {
        return t == null || typeof t == "undefined" ? e.flags.widget : (e.flags.widget = t, this)
      },
      internals: function() {
        return e.debug ? function() {
          return e
        } : function() {
          return {}
        }
      }()
    }
  };

function getLang() {
  var e = localStorage.lang || "cn";
  return Langs[e] || Langs.en
}
var Langs = {};
Langs.en = {
  time: "时间",
  open: "开盘",
  high: "最高",
  low: "最低",
  close: "收盘",
  increase: "涨幅",
  swing: "振幅",
  volume: "VOL",
  quoteVolume: "转让额",
  hand: "换手率",
  o: "开",
  h: "高",
  l: "低",
  c: "收",
  price: "价格",
  updown: "涨跌",
  rang: "幅度"
}, Langs.cn = {
  time: "时间",
  open: "开盘",
  high: "最高",
  low: "最低",
  close: "收盘",
  increase: "涨幅",
  swing: "振幅",
  volume: "成交量",
  quoteVolume: "成交额",
  hand: "换手率",
  o: "开",
  h: "高",
  l: "低",
  c: "收",
  price: "价格",
  updown: "涨跌",
  rang: "幅度"
};
var UserAccount_Class = function() {
    function t() {
      function t(e) {
        if (e == null || typeof e == "undefined") {
          _ordersFail();
          return
        }
        var t = null;
        if (!e.hasOwnProperty("exch")) {
          DEBUG && _debug("No exchange sent with orders!", RTBTC.ERROR);
          return
        }
        t = e.exch, e.hasOwnProperty("orders") && e["orders"] != null && e.orders.hasOwnProperty("length") && (n(e.orders, t), RTBTC.trigger("orders"))
      }

      function n(t, n) {
        var i = "",
          s = 0,
          o = {},
          u = millitime();
        for (i in e.orders[n]) {
          if (!e.orders[n].hasOwnProperty(i)) continue;
          o = e.orders[n][i], delete e.orders[n][i]
        }
        for (s = 0; s < t.length; s++) r(t[s], n)
      }

      function r(t, n) {
        var r = t.id,
          i = millitime();
        if (n == null || "undefined" == typeof n) {
          DEBUG && _debug("Order triggered with no exchange!", RTBTC.ERROR);
          return
        }
        e.orders[n] || (e.orders[n] = {}), e.orders[n].hasOwnProperty(r) ? e.orders[n][r].hasOwnProperty("added") && (e.orders[n][r].added = 0) : (e.orders[n][r] = {}, e.orders[n][r].added = i), e.orders[n][r].action = t.action, e.orders[n][r].amount = parseFloat(t.amount), e.orders[n][r].price = parseFloat(t.price), e.orders[n][r].base = t.base, e.orders[n][r].quote = t.quote, e.orders[n][r].status = t.status, e.orders[n][r]["status"] == "Unknown" && (e.orders[n][r].status = "Open")
      }
      var e = {
        orders: {}
      };
      return {
        orders: function() {
          return e.orders
        },
        ordersAdd: function(e) {
          t(e)
        }
      }
    }
    var e = null;
    return new function() {
      this.Build = function() {
        return e == null && (e = new t, e.constructor = null), e
      }
    }
  }(),
  UserAccount;
"use strict";
app.controller("chartController", ["$scope", "$http", "$rootScope", "$timeout", "klineStreamer", "streamer", "$stateParams", function(e, t, n, r, i, s, o) {
  e.oriSymbol = o.symbol, e.oriSymbol || (e.oriSymbol = "BNB_BTC"), e.symbol = e.oriSymbol.replace("_", "");
  var u = [60, 60, 300, 900, 1800, 3600, 86400, 604800],
    a = function(e) {
      switch (e + "") {
        case "0":
          return "1m";
        case "60":
          return "1m";
        case "180":
          return "3m";
        case "300":
          return "5m";
        case "900":
          return "15m";
        case "1800":
          return "30m";
        case "3600":
          return "1h";
        case "7200":
          return "2h";
        case "14400":
          return "4h";
        case "21600":
          return "6h";
        case "43200":
          return "12h";
        case "86400":
          return "1d";
        case "259200":
          return "3d";
        case "604800":
          return "1w"
      }
      console.log("Error parsing resolution: " + e)
    };
  window.showKline = function(t) {
    e.showKline = t;
    var n = e.$root.$$phase;
    n != "$apply" && n != "$digest" && e.$apply()
  }, showKline(!0), window.switchLang = function() {
    $translate.use(window.localStorage.lang);
    var t = e.$root.$$phase;
    t != "$apply" && t != "$digest" && e.$apply()
  };
  var f = "60",
    l = a(f);
  RTBTC.instrument("BIJIE", e.symbol, e.oriSymbol.split("_")[1]);
  var c = {
    t: Number(f),
    time: !0,
    i: [{
      m: !0,
      p: 0,
      h: 90,
      u: [],
      o: []
    }, {
      m: !1,
      t: "vol",
      i: null,
      p: 5,
      h: 10,
      r: []
    }]
  };
  window.chart = (new Chart).build("#chart_container", null, c), chart.setMainSlotHeightPercent(.8), chart.setShowRateOnLeft(!0), chart.onTheme("chart-black-mobile-bnb"), chart.crossHairH(!1), e.slideLine = function() {
    r(function() {
      var e = $(".filter .cur");
      $(".border-line").css({
        left: e.position().left,
        width: e.width()
      })
    }, 100)
  }, e.curIndex = Number(sessionStorage.klineCurIndex || 0), e.slideLine(), e.getCurrentProduct = function(n) {
    t.get("/exchange/public/product?symbol=" + n).success(function(t) {
      t.data.length > 0 && (e.currentProduct = t.data[0], Data.baseFixed = e.currentProduct.qtyTick = Math.abs(Math.log10(Number(e.currentProduct.minTrade))), Data.qouteFixed = e.currentProduct.priceTick = Math.abs(Math.log10(Number(e.currentProduct.tickSize))), chart.redraw())
    })
  }, e.getCurrentProduct(e.symbol), e.trades = [], e.streamBids = {}, e.streamBidsKeys = [], e.streamAsks = {}, e.streamAsksKeys = [];
  var h = function(t) {
    if (t.eventType == "depthUpdate") t.bids.forEach(function(t) {
      var n = Number(t[0]),
        r = Number(t[1]);
      r != 0 ? e.streamBids[n] = r : delete e.streamBids[n]
    }), t.asks.forEach(function(t) {
      var n = Number(t[0]),
        r = Number(t[1]);
      r != 0 ? e.streamAsks[n] = r : delete e.streamAsks[n]
    }), OBD.loadBook(e.streamAsks, e.streamBids, 9999999);
    else if (t.eventType == "trade") {
      t.price = Number(t.price).toFixed(6), t.qty = Number(t.qty).toFixed(6);
      if (!e.streamTrade || e.streamTrade.aggTradeId < t.aggTradeId) e.streamTrade = t, e.newest = t.price, e.trades.unshift(t), e.trades.length > 20 && e.trades.pop()
    } else t.eventType == "kline" ? (t.kline.interval == "1d" && (e.streamKline = t.kline, e.currentProduct != undefined && (e.currentProduct.open = t.kline.open, e.currentProduct.high = t.kline.high, e.currentProduct.low = t.kline.low, e.currentProduct.volume = t.kline.volume)), t.kline.interval == l && Data.onBar([t.kline.time, Number(t.kline.open), Number(t.kline.high), Number(t.kline.low), Number(t.kline.close), Number(t.kline.volume), Number(t.kline.quoteVolume)], Number(f))) : (console.log("Error! Bad data received:"), console.log(t))
  };
  if (e.symbol) var p = "avl";
  else {
    Data.indexFuture = !0;
    var p = "avlIndex"
  }
  chart.showHighlowPriceAtAngles(!0);
  var d = !0,
    v = function(e, t) {
      t ? (d || (chart.setBarwidth(7), chart.clearData(), chart.setOffset(0), chart.setLastColorIndex(0), chart.removeIndicatorByname([p]), chart.addOverlay("ma", 5), chart.addOverlay("ma", 10), chart.setMode("Candle"), d = !0), f = e, l = a(f), chart.setResolution(Number(e))) : (d && (chart.setBarwidth(2), chart.clearData(), chart.setOffset(0), chart.setLastColorIndex(0), chart.removeIndicatorByname(["ma", "ma"]), chart.addOverlay(p), chart.setMode("Line"), d = !1), f = "60", l = a(f), chart.setResolution(60))
    };
  e.chartLoaded = function() {
    e.loaded = !0, t.get("/exchange/public/klineUrl").success(function(t) {
      e.connectToKlineStreamer(t)
    })
  };
  var m = (new VisualDepth).build("#depth", $("#depth"));
  m.onTheme("depth-black-mobile-bnb"), window.UserAccount = UserAccount_Class.Build();
  var g = !1,
    y = "-1",
    b;
  Data.onLoaded(function() {
    y != b && (e.chartLoaded(), b = y), $("#loadingAnimetion").hide()
  }), $(".overchart").width(document.body.clientWidth - 18);
  var w;
  chart.LblWidthChangeEvent(function(e) {
    w != e && (w = e, $("#chart_container").width(document.body.clientWidth + e - 13), chart.resize())
  }), e.connectToKlineStreamer = function(t) {
    e.klineStreamer != null && (e.klineStreamer.stopStream(), e.klineStreamer = null), e.klineStreamer = new i, e.klineStreamer.startStream(e.symbol, t, a(f), function(e) {
      h(e)
    })
  }, e.connectToSymbol = function(t) {
    e.streamerInstance != null && (e.streamerInstance.stopStream(), e.streamerInstance = null), e.streamerInstance = new s, e.streamerInstance.startStream(e.symbol, t, function(t) {
      t.clean && (e.streamBids = {}, e.streamAsks = {}), h(t)
    })
  }, e.connectToIndexKlineStreamer = function(t) {
    e.klineStreamer != null && (e.klineStreamer.stopStream(), e.klineStreamer = null), e.klineStreamer = new indexKlineStreamer, e.klineStreamer.startStream(e.indexId, t, a(f), function(e) {
      h(e)
    })
  }, e.filter_item = !1, e.toggle = function() {
    e.filter_item = !e.filter_item
  }, e.getByInterval = function(t, n) {
    if (y == n) return;
    e.curIndex = n, v(t, !0), sessionStorage.klineCurIndex = e.curIndex, y = n
  }, e.getByInterval1 = function(t, n) {
    if (y == n) return;
    e.slideLine(), e.curIndex = n, v(t, !0), sessionStorage.klineCurIndex = e.curIndex, e.jszbLists = !1, e.showRight = !1, y = n
  }, e.stopPropagation1 = function(e) {
    e.stopPropagation()
  }, e.setTimeLine = function(t) {
    if (y == t) return;
    v("0", !1), e.curIndex = t, sessionStorage.klineCurIndex = e.curIndex, y = t
  }, e.curIndex == 0 ? e.setTimeLine(0) : e.curIndex >= 6 || e.curIndex <= 7 ? e.getByInterval(u[e.curIndex] + "", e.curIndex) : e.getByInterval1(u[e.curIndex] + "", e.curIndex), e.disconnect = function() {
    e.streamerInstance.stopStream(), e.streamerInstance = null
  }, window.WebSocket && e.symbol && t.get("/exchange/public/wssUrl").success(function(t) {
    e.connectToSymbol(t)
  }), window.onbeforeunload = function() {
    e.klineStreamer && e.klineStreamer.stopStream(), e.streamerInstance && e.streamerInstance.stopStream(), e.tradeStreamer && e.tradeStreamer.stopStream(), e.klineStreamer = null, e.streamerInstance = null, e.tradeStreamer = null
  }, e.$on("$destroy", function() {
    e.klineStreamer && e.klineStreamer.stopStream(), e.streamerInstance && e.streamerInstance.stopStream(), e.tradeStreamer && e.tradeStreamer.stopStream(), e.klineStreamer = null, e.streamerInstance = null, e.tradeStreamer = null
  })
}]).filter("T", ["$translate", function(e) {
  return function(t) {
    if (t) return e.instant(t)
  }
}]);
app.controller("listController", ["$scope", "$http", "$translate", "mktdataStreamer", "$rootScope", function(e, t, n, r, i) {
  i.pageTitle = n.instant("Markets"), i.curPage = "list", sessionStorage.callbackUrl = location.hash;
  var s = location.host.match("localhost") || location.host.match("192.168.0") ? "/exchange/public" : "/api/v1";
  e.getCnyusd = function() {
    t.get("/exchange/public/cnyusd").success(function(t) {
      e.cnyusdRate = t.rate
    })
  }, e.getCnyusd(), e.transToUSDT = {}, e.getTransToUSDT = function(t) {
    angular.forEach(t, function(t, n) {
      t.quoteAsset == "USDT" && (e.transToUSDT[t.baseAsset] = t.close)
    }), console.log(e.transToUSDT)
  }, e.markets = [], e.listLen = 0, e.products = [], e.getProducts = function() {
    t.get("/exchange/public/product").success(function(t) {
      t.data.length ? (t.data.forEach(function(t) {
        e.products.push(t), t.priceTick = Math.abs(Math.log10(t.tickSize)), t.qtyTick = Math.abs(Math.log10(t.minTrade)), e.markets.indexOf(t.quoteAsset) == -1 && e.markets.push(t.quoteAsset), e.getTransToUSDT(e.products)
      }), e.markets = e.markets.sort(function(e, t) {
        if (e == t) return 0;
        if (e > t) return 1;
        if (e < t) return -1
      }), e.markets.indexOf("BNB") == -1 && e.markets.push("BNB")) : e.products = {}
    })
  }, e.getProducts(), e.setCurMarket = function(t) {
    e.curMarket = t
  }, e.connectToMktdata = function(t) {
    e.streamerMktdata != null && (e.streamerMktdata.stopStream(), e.streamerMktdata = null), e.streamerMktdata = new r, e.streamerMktdata.startStream(t, function(t) {
      t.forEach(function(t) {
        if (t.eventType == "trade")
          for (var n in e.products)
            if (e.products[n].symbol == t.symbol) {
              var r = Number(t.price);
              e.products[n].preClose = e.products[n].close, e.products[n].close = r, e.products[n].open = t.open, e.products[n].high = t.high, e.products[n].low = t.low, e.products[n].volume = Number(t.volume), e.products[n].tradedMoney = Number(t.quoteVolume)
            }
      });
      if (e.$root && !e.$root.$$phase) {
        var n = e.$root.$$phase;
        n != "$apply" && n != "$digest" && e.$apply()
      }
    })
  }, t.get("/exchange/public/mktdataWssUrl").success(function(t) {
    e.connectToMktdata(t)
  }), e.$on("$destroy", function() {
    e.streamerMktdata && e.streamerMktdata.stopStream(), e.streamerMktdata = null
  }), e.changeToPC = function(e) {
    localStorage.userSetDevice = "PC", location.href = e
  }, e.showDownLoad = !0, e.closeDownLoad = function() {
    e.showDownLoad = !1
  }
}]).filter("filterPlus", function() {
  return function(e, t) {
    return isNaN(e) ? 0..toFixed(t) : Number(e) >= 0 ? "+" + Number(e).toFixed(t) : Number(e).toFixed(t)
  }
});
var KlineDataConvert = new function() {
  var e = this;
  this.barCount = 100, this.setData = function(t, n, r) {
    e.max = 0, e.min = 1e9, e.Data = t, e.h = r, e.w = n;
    for (var i = 0; i < e.Data.length; i++) {
      var s = this.Data[i],
        o = Number(s[4]);
      e.max < o && (e.max = o), e.min > o && (e.min = o)
    }
    e.min = e.min * .9, e.max = e.max * 1.1
  }, this.getY = function(t) {
    return e.h * (1 - (t - e.min) / (e.max - e.min))
  }, this.getX = function(t) {
    return e.w * (1 - t / e.barCount)
  }, this.getPath = function() {
    var t = [];
    return e.Data.reverse().forEach(function(n, r) {
      r == 0 ? (t.push("M" + e.w + " " + e.h), t.push("L" + e.getX(r) + " " + e.getY(n[4]))) : r == e.Data.length - 1 ? (t.push("L" + e.getX(r) + " " + e.getY(n[4])), t.push("L" + e.getX(r) + " " + e.h)) : t.push("L" + e.getX(r) + " " + e.getY(n[4]))
    }), t.join(" ")
  }
};
app.controller("indexController", ["$scope", "$rootScope", "$http", "$translate", "urlSearch", "mktdataStreamer", "tradeStreamer", "$stateParams", function(e, t, n, r, i, s, o, u) {
  t.pageTitle = r.instant("siteName"), t.gang = "|", t.curPage = "index", sessionStorage.callbackUrl = location.hash, e.currentProduct = {};
  var a = u.symbol || "BNB_BTC";
  t.urlSymbol = a, e.currentProduct.symbol = a.replace("_", ""), e.getCnyusd = function() {
    n.get("/exchange/public/cnyusd").success(function(t) {
      e.cnyusdRate = t.rate
    })
  }, e.getCnyusd(), e.transToUSDT = {}, e.getTransToUSDT = function(t) {
    angular.forEach(t, function(t, n) {
      t.quoteAsset == "USDT" && (e.transToUSDT[t.baseAsset] = t.close)
    }), console.log(e.transToUSDT)
  }, e.products = [], e.currentProduct.qtyTick = 8, e.getTradeLists = function() {
    n.get("/exchange/public/product").success(function(r) {
      r.data.length ? (e.products = r.data, e.getTransToUSDT(e.products), e.currentProduct.symbol ? angular.forEach(e.products, function(t, n) {
        t.symbol == e.currentProduct.symbol && (e.currentProduct = e.products[n])
      }) : e.currentProduct = r.data[0], t.setCurProducts(e.currentProduct), e.currentProduct.qtyTick = Math.abs(Math.log10(Number(e.currentProduct.minTrade))), e.currentProduct.priceTick = Math.abs(Math.log10(Number(e.currentProduct.tickSize))), t.siteName = e.currentProduct.close + " " + e.currentProduct.baseAsset + "/" + e.currentProduct.quoteAsset, sessionStorage.symbol = e.currentProduct.baseAsset + "_" + e.currentProduct.quoteAsset, e.klineUrl = "/exchange/mobileChartVertical.html?symbol=" + e.currentProduct.baseAsset + "_" + e.currentProduct.quoteAsset, window.WebSocket && n.get("/exchange/public/wssUrl").success(function(t) {
        e.connectToTradeStream(t)
      })) : e.products = []
    })
  }, e.getTradeLists(), e.connectToMktdata = function(n) {
    e.streamerMktdata != null && (e.streamerMktdata.stopStream(), e.streamerMktdata = null), e.streamerMktdata = new s, e.streamerMktdata.startStream(n, function(n) {
      n.forEach(function(n) {
        if (n.eventType == "trade") {
          for (var r in e.products) {
            if (e.products[r].symbol == n.symbol) {
              var i = Number(n.price);
              e.products[r].close = i, e.products[r].open = n.open, e.products[r].high = n.high, e.products[r].low = n.low, e.products[r].volume = Number(n.takerSellVolume) + Number(n.takerBuyVolume), e.products[r].tradedMoney = Number(n.quoteVolume)
            }
            e.products[r].symbol == e.currentProduct.symbol && (e.currentProduct = e.products[r])
          }
          n.symbol == e.currentProduct.symbol && (t.siteName = n.price + " " + e.currentProduct.baseAsset + "/" + e.currentProduct.quoteAsset)
        }
      });
      if (e.$root && !e.$root.$$phase) {
        var r = e.$root.$$phase;
        r != "$apply" && r != "$digest" && e.$apply()
      }
    })
  }, e.trades = [], e.connectToTradeStream = function(t) {
    e.streamerTrade != null && (e.streamerTrade.stopStream(), e.streamerTrade = null), e.streamerTrade = new o, e.streamerTrade.startStream(e.currentProduct.symbol, t, function(t) {
      t.eventType == "trade" && (t.price = Number(t.price), t.qty = Number(t.qty), e.streamTrade = t, e.trades.unshift(t), e.trades.length > 10 && e.trades.pop())
    })
  }, window.WebSocket ? n.get("/exchange/public/mktdataWssUrl").success(function(t) {
    e.connectToMktdata(t)
  }) : $interval(function() {
    e.getTradeLists()
  }, 1e3), e.isKline = !0, e.klineSwitch = function(t) {
    window.showKline(t), e.isKline = t
  }, e.$on("$destroy", function() {
    e.streamerMktdata && e.streamerMktdata.stopStream(), e.streamerTrade && e.streamerTrade.stopStream(), e.streamerMktdata = null, e.streamerTrade = null
  }), e.goTrade = function() {
    var e = $("#tradeDiv");
    e.hasClass("toRight") && e.removeClass("toRight"), e.hasClass("toLeft") || e.addClass("toLeft")
  }
}]).filter("symbol", function() {
  return function(e) {
    var t;
    return e = e || 0, Number(e) > 0 ? t = "+" + e : t = e, t
  }
}).filter("filterol", function() {
  return function(e, t) {
    return isNaN(e) ? 0..toFixed(t) : Number(e) >= 0 ? "+" + Number(e).toFixed(t) : Number(e).toFixed(t)
  }
}).filter("number2dight", function() {
  return function(e, t) {
    return Number(e).toFixed(t)
  }
});
app.controller("listController", ["$scope", "$http", "$translate", "mktdataStreamer", "$rootScope", function(e, t, n, r, i) {
  i.pageTitle = n.instant("Markets"), i.curPage = "list", sessionStorage.callbackUrl = location.hash;
  var s = location.host.match("localhost") || location.host.match("192.168.0") ? "/exchange/public" : "/api/v1";
  e.getCnyusd = function() {
    t.get("/exchange/public/cnyusd").success(function(t) {
      e.cnyusdRate = t.rate
    })
  }, e.getCnyusd(), e.transToUSDT = {}, e.getTransToUSDT = function(t) {
    angular.forEach(t, function(t, n) {
      t.quoteAsset == "USDT" && (e.transToUSDT[t.baseAsset] = t.close)
    }), console.log(e.transToUSDT)
  }, e.markets = [], e.listLen = 0, e.products = [], e.getProducts = function() {
    t.get("/exchange/public/product").success(function(t) {
      t.data.length ? (t.data.forEach(function(t) {
        e.products.push(t), t.priceTick = Math.abs(Math.log10(t.tickSize)), t.qtyTick = Math.abs(Math.log10(t.minTrade)), e.markets.indexOf(t.quoteAsset) == -1 && e.markets.push(t.quoteAsset), e.getTransToUSDT(e.products)
      }), e.markets = e.markets.sort(function(e, t) {
        if (e == t) return 0;
        if (e > t) return 1;
        if (e < t) return -1
      }), e.markets.indexOf("BNB") == -1 && e.markets.push("BNB")) : e.products = {}
    })
  }, e.getProducts(), e.setCurMarket = function(t) {
    e.curMarket = t
  }, e.connectToMktdata = function(t) {
    e.streamerMktdata != null && (e.streamerMktdata.stopStream(), e.streamerMktdata = null), e.streamerMktdata = new r, e.streamerMktdata.startStream(t, function(t) {
      t.forEach(function(t) {
        if (t.eventType == "trade")
          for (var n in e.products)
            if (e.products[n].symbol == t.symbol) {
              var r = Number(t.price);
              e.products[n].preClose = e.products[n].close, e.products[n].close = r, e.products[n].open = t.open, e.products[n].high = t.high, e.products[n].low = t.low, e.products[n].volume = Number(t.volume), e.products[n].tradedMoney = Number(t.quoteVolume)
            }
      });
      if (e.$root && !e.$root.$$phase) {
        var n = e.$root.$$phase;
        n != "$apply" && n != "$digest" && e.$apply()
      }
    })
  }, t.get("/exchange/public/mktdataWssUrl").success(function(t) {
    e.connectToMktdata(t)
  }), e.$on("$destroy", function() {
    e.streamerMktdata && e.streamerMktdata.stopStream(), e.streamerMktdata = null
  }), e.changeToPC = function(e) {
    localStorage.userSetDevice = "PC", location.href = e
  }, e.showDownLoad = !0, e.closeDownLoad = function() {
    e.showDownLoad = !1
  }
}]).filter("filterPlus", function() {
  return function(e, t) {
    return isNaN(e) ? 0..toFixed(t) : Number(e) >= 0 ? "+" + Number(e).toFixed(t) : Number(e).toFixed(t)
  }
});
var KlineDataConvert = new function() {
  var e = this;
  this.barCount = 100, this.setData = function(t, n, r) {
    e.max = 0, e.min = 1e9, e.Data = t, e.h = r, e.w = n;
    for (var i = 0; i < e.Data.length; i++) {
      var s = this.Data[i],
        o = Number(s[4]);
      e.max < o && (e.max = o), e.min > o && (e.min = o)
    }
    e.min = e.min * .9, e.max = e.max * 1.1
  }, this.getY = function(t) {
    return e.h * (1 - (t - e.min) / (e.max - e.min))
  }, this.getX = function(t) {
    return e.w * (1 - t / e.barCount)
  }, this.getPath = function() {
    var t = [];
    return e.Data.reverse().forEach(function(n, r) {
      r == 0 ? (t.push("M" + e.w + " " + e.h), t.push("L" + e.getX(r) + " " + e.getY(n[4]))) : r == e.Data.length - 1 ? (t.push("L" + e.getX(r) + " " + e.getY(n[4])), t.push("L" + e.getX(r) + " " + e.h)) : t.push("L" + e.getX(r) + " " + e.getY(n[4]))
    }), t.join(" ")
  }
};
app.controller("sliderListController", ["$scope", "$rootScope", "$http", "$timeout", function(e, t, n, r) {
  function i(t) {
    e.markets = {}, e.mkts = [], t.forEach(function(t) {
      e.markets[t.quoteAsset] || (e.markets[t.quoteAsset] = []), e.mkts.indexOf(t.quoteAsset) == -1 && e.mkts.push(t.quoteAsset), e.markets[t.quoteAsset].push(t), t.priceTick = Math.abs(Math.log10(t.tickSize)), t.qtyTick = Math.abs(Math.log10(t.minTrade))
    }), e.mkts.sort(function(e, t) {
      if (e == t) return 0;
      if (e > t) return 1;
      if (e < t) return -1
    })
  }
  t.setCurProducts = function(t) {
    e.curProduct = t, e.curMarket = t.quoteAsset
  }, t.setShowStatus = function() {
    n.get("/exchange/public/product").success(function(t) {
      t.data.length && (e.products = t.data, i(e.products), r(function() {
        Zepto.popup(".popup-products")
      }, 2))
    })
  }, e.changeSymbol = function(e) {
    $("#tradeDiv").removeClass("toRight"), $("#tradeDiv").removeClass("toLeft")
  }, e.marketClick = function(t) {
    e.curMarket = t
  }
}]).filter("filterPlus", function() {
  return function(e, t) {
    return isNaN(e) ? 0..toFixed(t) : Number(e) >= 0 ? "+" + Number(e).toFixed(t) : Number(e).toFixed(t)
  }
});
(function() {
  var e = function() {
      function e() {
        this.form = this.digits = 0, this.lostDigits = !1, this.roundingMode = 0;
        var t = this.DEFAULT_FORM,
          n = this.DEFAULT_LOSTDIGITS,
          r = this.DEFAULT_ROUNDINGMODE;
        if (4 == e.arguments.length) t = e.arguments[1], n = e.arguments[2], r = e.arguments[3];
        else if (3 == e.arguments.length) t = e.arguments[1], n = e.arguments[2];
        else if (2 == e.arguments.length) t = e.arguments[1];
        else if (1 != e.arguments.length) throw "MathContext(): " + e.arguments.length + " arguments given; expected 1 to 4";
        var i = e.arguments[0];
        if (i != this.DEFAULT_DIGITS) {
          if (i < this.MIN_DIGITS) throw "MathContext(): Digits too small: " + i;
          if (i > this.MAX_DIGITS) throw "MathContext(): Digits too large: " + i
        }
        if (t != this.SCIENTIFIC && t != this.ENGINEERING && t != this.PLAIN) throw "MathContext() Bad form value: " + t;
        if (!this.isValidRound(r)) throw "MathContext(): Bad roundingMode value: " + r;
        this.digits = i, this.form = t, this.lostDigits = n, this.roundingMode = r
      }
      return e.prototype.getDigits = function() {
        return this.digits
      }, e.prototype.getForm = function() {
        return this.form
      }, e.prototype.getLostDigits = function() {
        return this.lostDigits
      }, e.prototype.getRoundingMode = function() {
        return this.roundingMode
      }, e.prototype.toString = function() {
        var e = null,
          t = 0,
          n = null,
          e = this.form == this.SCIENTIFIC ? "SCIENTIFIC" : this.form == this.ENGINEERING ? "ENGINEERING" : "PLAIN",
          r = this.ROUNDS.length,
          t = 0;
        e: for (; 0 < r; r--, t++)
          if (this.roundingMode == this.ROUNDS[t]) {
            n = this.ROUNDWORDS[t];
            break e
          }
        return "digits=" + this.digits + " form=" + e + " lostDigits=" + (this.lostDigits ? "1" : "0") + " roundingMode=" + n
      }, e.prototype.isValidRound = function(e) {
        var t = 0,
          n = this.ROUNDS.length,
          t = 0;
        for (; 0 < n; n--, t++)
          if (e == this.ROUNDS[t]) return !0;
        return !1
      }, e.PLAIN = e.prototype.PLAIN = 0, e.SCIENTIFIC = e.prototype.SCIENTIFIC = 1, e.ENGINEERING = e.prototype.ENGINEERING = 2, e.ROUND_CEILING = e.prototype.ROUND_CEILING = 2, e.ROUND_DOWN = e.prototype.ROUND_DOWN = 1, e.ROUND_FLOOR = e.prototype.ROUND_FLOOR = 3, e.ROUND_HALF_DOWN = e.prototype.ROUND_HALF_DOWN = 5, e.ROUND_HALF_EVEN = e.prototype.ROUND_HALF_EVEN = 6, e.ROUND_HALF_UP = e.prototype.ROUND_HALF_UP = 4, e.ROUND_UNNECESSARY = e.prototype.ROUND_UNNECESSARY = 7, e.ROUND_UP = e.prototype.ROUND_UP = 0, e.prototype.DEFAULT_FORM = e.prototype.SCIENTIFIC, e.prototype.DEFAULT_DIGITS = 9, e.prototype.DEFAULT_LOSTDIGITS = !1, e.prototype.DEFAULT_ROUNDINGMODE = e.prototype.ROUND_HALF_UP, e.prototype.MIN_DIGITS = 0, e.prototype.MAX_DIGITS = 999999999, e.prototype.ROUNDS = [e.prototype.ROUND_HALF_UP, e.prototype.ROUND_UNNECESSARY, e.prototype.ROUND_CEILING, e.prototype.ROUND_DOWN, e.prototype.ROUND_FLOOR, e.prototype.ROUND_HALF_DOWN, e.prototype.ROUND_HALF_EVEN, e.prototype.ROUND_UP], e.prototype.ROUNDWORDS = "ROUND_HALF_UP ROUND_UNNECESSARY ROUND_CEILING ROUND_DOWN ROUND_FLOOR ROUND_HALF_DOWN ROUND_HALF_EVEN ROUND_UP".split(" "), e.prototype.DEFAULT = new e(e.prototype.DEFAULT_DIGITS, e.prototype.DEFAULT_FORM, e.prototype.DEFAULT_LOSTDIGITS, e.prototype.DEFAULT_ROUNDINGMODE), e
    }(),
    t = function(e) {
      function t(e, t) {
        return (e - e % t) / t
      }

      function n(e) {
        var t = Array(e),
          n;
        for (n = 0; n < e; ++n) t[n] = 0;
        return t
      }

      function r() {
        this.ind = 0, this.form = e.prototype.PLAIN, this.mant = null, this.exp = 0;
        if (0 != r.arguments.length) {
          var t, n, i;
          1 == r.arguments.length ? (t = r.arguments[0], n = 0, i = t.length) : (t = r.arguments[0], n = r.arguments[1], i = r.arguments[2]), "string" == typeof t && (t = t.split(""));
          var s, o, u, a, f, l = 0,
            c = 0;
          o = !1;
          var h = c = c = l = 0,
            p = 0;
          a = 0, 0 >= i && this.bad("BigDecimal(): ", t), this.ind = this.ispos, "-" == t[0] ? (i--, 0 == i && this.bad("BigDecimal(): ", t), this.ind = this.isneg, n++) : "+" == t[0] && (i--, 0 == i && this.bad("BigDecimal(): ", t), n++), o = s = !1, u = 0, f = a = -1, h = i, l = n;
          e: for (; 0 < h; h--, l++) {
            c = t[l];
            if ("0" <= c && "9" >= c) {
              f = l, u++;
              continue e
            }
            if ("." == c) {
              0 <= a && this.bad("BigDecimal(): ", t), a = l - n;
              continue e
            }
            if ("e" != c && "E" != c) {
              ("0" > c || "9" < c) && this.bad("BigDecimal(): ", t), s = !0, f = l, u++;
              continue e
            }
            l - n > i - 2 && this.bad("BigDecimal(): ", t), o = !1, "-" == t[l + 1] ? (o = !0, l += 2) : l = "+" == t[l + 1] ? l + 2 : l + 1, c = i - (l - n), (0 == c || 9 < c) && this.bad("BigDecimal(): ", t), i = c, c = l;
            for (; 0 < i; i--, c++) h = t[c], "0" > h && this.bad("BigDecimal(): ", t), "9" < h ? this.bad("BigDecimal(): ", t) : p = h - 0, this.exp = 10 * this.exp + p;
            o && (this.exp = -this.exp), o = !0;
            break e
          }
          0 == u && this.bad("BigDecimal(): ", t), 0 <= a && (this.exp = this.exp + a - u), p = f - 1, l = n;
          e: for (; l <= p; l++)
            if (c = t[l], "0" == c) n++, a--, u--;
            else {
              if ("." != c) break e;
              n++, a--
            }
          this.mant = Array(u), c = n;
          if (s)
            for (n = u, l = 0; 0 < n; n--, l++) l == a && c++, h = t[c], "9" >= h ? this.mant[l] = h - 0 : this.bad("BigDecimal(): ", t), c++;
          else
            for (n = u, l = 0; 0 < n; n--, l++) l == a && c++, this.mant[l] = t[c] - 0, c++;
          0 == this.mant[0] ? (this.ind = this.iszero, 0 < this.exp && (this.exp = 0), o && (this.mant = this.ZERO.mant, this.exp = 0)) : o && (this.form = e.prototype.SCIENTIFIC, a = this.exp + this.mant.length - 1, (a < this.MinExp || a > this.MaxExp) && this.bad("BigDecimal(): ", t))
        }
      }

      function i() {
        var e;
        if (1 == i.arguments.length) e = i.arguments[0];
        else {
          if (0 != i.arguments.length) throw "abs(): " + i.arguments.length + " arguments given; expected 0 or 1";
          e = this.plainMC
        }
        return this.ind == this.isneg ? this.negate(e) : this.plus(e)
      }

      function s() {
        var t;
        if (2 == s.arguments.length) t = s.arguments[1];
        else {
          if (1 != s.arguments.length) throw "add(): " + s.arguments.length + " arguments given; expected 1 or 2";
          t = this.plainMC
        }
        var n = s.arguments[0],
          i, o, u, a, f, l, c, h = 0;
        o = h = 0;
        var h = null,
          p = h = 0,
          d = 0,
          v = 0,
          m = 0,
          g = 0;
        t.lostDigits && this.checkdigits(n, t.digits), i = this;
        if (0 == i.ind && t.form != e.prototype.PLAIN) return n.plus(t);
        if (0 == n.ind && t.form != e.prototype.PLAIN) return i.plus(t);
        o = t.digits, 0 < o && (i.mant.length > o && (i = this.clone(i).round(t)), n.mant.length > o && (n = this.clone(n).round(t))), u = new r, a = i.mant, f = i.mant.length, l = n.mant, c = n.mant.length;
        if (i.exp == n.exp) u.exp = i.exp;
        else if (i.exp > n.exp) {
          h = f + i.exp - n.exp;
          if (h >= c + o + 1 && 0 < o) return u.mant = a, u.exp = i.exp, u.ind = i.ind, f < o && (u.mant = this.extend(i.mant, o), u.exp -= o - f), u.finish(t, !1);
          u.exp = n.exp, h > o + 1 && 0 < o && (h = h - o - 1, c -= h, u.exp += h, h = o + 1), h > f && (f = h)
        } else {
          h = c + n.exp - i.exp;
          if (h >= f + o + 1 && 0 < o) return u.mant = l, u.exp = n.exp, u.ind = n.ind, c < o && (u.mant = this.extend(n.mant, o), u.exp -= o - c), u.finish(t, !1);
          u.exp = i.exp, h > o + 1 && 0 < o && (h = h - o - 1, f -= h, u.exp += h, h = o + 1), h > c && (c = h)
        }
        u.ind = i.ind == this.iszero ? this.ispos : i.ind;
        if ((i.ind == this.isneg ? 1 : 0) == (n.ind == this.isneg ? 1 : 0)) o = 1;
        else
          do {
            o = -1;
            do
              if (n.ind != this.iszero)
                if (f < c || i.ind == this.iszero) h = a, a = l, l = h, h = f, f = c, c = h, u.ind = -u.ind;
                else if (!(f > c)) e: for (p = h = 0, d = a.length - 1, v = l.length - 1;;) {
              if (h <= d) m = a[h];
              else {
                if (p > v) {
                  if (t.form != e.prototype.PLAIN) return this.ZERO;
                  break e
                }
                m = 0
              }
              g = p <= v ? l[p] : 0;
              if (m != g) {
                m < g && (h = a, a = l, l = h, h = f, f = c, c = h, u.ind = -u.ind);
                break e
              }
              h++, p++
            }
            while (0)
          } while (0);
        return u.mant = this.byteaddsub(a, f, l, c, o, !1), u.finish(t, !1)
      }

      function o() {
        var e;
        if (2 == o.arguments.length) e = o.arguments[1];
        else {
          if (1 != o.arguments.length) throw "compareTo(): " + o.arguments.length + " arguments given; expected 1 or 2";
          e = this.plainMC
        }
        var t = o.arguments[0],
          n = 0,
          n = 0;
        e.lostDigits && this.checkdigits(t, e.digits);
        if (this.ind == t.ind && this.exp == t.exp) {
          n = this.mant.length;
          if (n < t.mant.length) return -this.ind;
          if (n > t.mant.length) return this.ind;
          if (n <= e.digits || 0 == e.digits) {
            e = n, n = 0;
            for (; 0 < e; e--, n++) {
              if (this.mant[n] < t.mant[n]) return -this.ind;
              if (this.mant[n] > t.mant[n]) return this.ind
            }
            return 0
          }
        } else {
          if (this.ind < t.ind) return -1;
          if (this.ind > t.ind) return 1
        }
        return t = this.clone(t), t.ind = -t.ind, this.add(t, e).ind
      }

      function u() {
        var t, n = -1;
        if (2 == u.arguments.length) t = "number" == typeof u.arguments[1] ? new e(0, e.prototype.PLAIN, !1, u.arguments[1]) : u.arguments[1];
        else if (3 == u.arguments.length) {
          n = u.arguments[1];
          if (0 > n) throw "divide(): Negative scale: " + n;
          t = new e(0, e.prototype.PLAIN, !1, u.arguments[2])
        } else {
          if (1 != u.arguments.length) throw "divide(): " + u.arguments.length + " arguments given; expected between 1 and 3";
          t = this.plainMC
        }
        return this.dodivide("D", u.arguments[0], t, n)
      }

      function a() {
        var e;
        if (2 == a.arguments.length) e = a.arguments[1];
        else {
          if (1 != a.arguments.length) throw "divideInteger(): " + a.arguments.length + " arguments given; expected 1 or 2";
          e = this.plainMC
        }
        return this.dodivide("I", a.arguments[0], e, 0)
      }

      function f() {
        var e;
        if (2 == f.arguments.length) e = f.arguments[1];
        else {
          if (1 != f.arguments.length) throw "max(): " + f.arguments.length + " arguments given; expected 1 or 2";
          e = this.plainMC
        }
        var t = f.arguments[0];
        return 0 <= this.compareTo(t, e) ? this.plus(e) : t.plus(e)
      }

      function l() {
        var e;
        if (2 == l.arguments.length) e = l.arguments[1];
        else {
          if (1 != l.arguments.length) throw "min(): " + l.arguments.length + " arguments given; expected 1 or 2";
          e = this.plainMC
        }
        var t = l.arguments[0];
        return 0 >= this.compareTo(t, e) ? this.plus(e) : t.plus(e)
      }

      function c() {
        var e;
        if (2 == c.arguments.length) e = c.arguments[1];
        else {
          if (1 != c.arguments.length) throw "multiply(): " + c.arguments.length + " arguments given; expected 1 or 2";
          e = this.plainMC
        }
        var t = c.arguments[0],
          n, i, s, o = s = null,
          u, a = 0,
          f, l = 0,
          h = 0;
        e.lostDigits && this.checkdigits(t, e.digits), n = this, i = 0, s = e.digits, 0 < s ? (n.mant.length > s && (n = this.clone(n).round(e)), t.mant.length > s && (t = this.clone(t).round(e))) : (0 < n.exp && (i += n.exp), 0 < t.exp && (i += t.exp)), n.mant.length < t.mant.length ? (s = n.mant, o = t.mant) : (s = t.mant, o = n.mant), u = s.length + o.length - 1, a = 9 < s[0] * o[0] ? u + 1 : u, f = new r;
        var a = this.createArrayWithZeros(a),
          p = s.length,
          l = 0;
        for (; 0 < p; p--, l++) h = s[l], 0 != h && (a = this.byteaddsub(a, a.length, o, u, h, !0)), u--;
        return f.ind = n.ind * t.ind, f.exp = n.exp + t.exp - i, f.mant = 0 == i ? a : this.extend(a, a.length + i), f.finish(e, !1)
      }

      function h() {
        var e;
        if (1 == h.arguments.length) e = h.arguments[0];
        else {
          if (0 != h.arguments.length) throw "negate(): " + h.arguments.length + " arguments given; expected 0 or 1";
          e = this.plainMC
        }
        var t;
        return e.lostDigits && this.checkdigits(null, e.digits), t = this.clone(this), t.ind = -t.ind, t.finish(e, !1)
      }

      function p() {
        var t;
        if (1 == p.arguments.length) t = p.arguments[0];
        else {
          if (0 != p.arguments.length) throw "plus(): " + p.arguments.length + " arguments given; expected 0 or 1";
          t = this.plainMC
        }
        return t.lostDigits && this.checkdigits(null, t.digits), t.form == e.prototype.PLAIN && this.form == e.prototype.PLAIN && (this.mant.length <= t.digits || 0 == t.digits) ? this : this.clone(this).finish(t, !1)
      }

      function d() {
        var t;
        if (2 == d.arguments.length) t = d.arguments[1];
        else {
          if (1 != d.arguments.length) throw "pow(): " + d.arguments.length + " arguments given; expected 1 or 2";
          t = this.plainMC
        }
        var n = d.arguments[0],
          r, i, s, o = s = 0,
          u, a = 0;
        t.lostDigits && this.checkdigits(n, t.digits), r = n.intcheck(this.MinArg, this.MaxArg), i = this, s = t.digits;
        if (0 == s) {
          if (n.ind == this.isneg) throw "pow(): Negative power: " + n.toString();
          s = 0
        } else {
          if (n.mant.length + n.exp > s) throw "pow(): Too many digits: " + n.toString();
          i.mant.length > s && (i = this.clone(i).round(t)), o = n.mant.length + n.exp, s = s + o + 1
        }
        s = new e(s, t.form, !1, t.roundingMode), o = this.ONE;
        if (0 == r) return o;
        0 > r && (r = -r), u = !1, a = 1;
        e: for (;; a++) {
          r <<= 1, 0 > r && (u = !0, o = o.multiply(i, s));
          if (31 == a) break e;
          if (!u) continue e;
          o = o.multiply(o, s)
        }
        return 0 > n.ind && (o = this.ONE.divide(o, s)), o.finish(t, !0)
      }

      function v() {
        var e;
        if (2 == v.arguments.length) e = v.arguments[1];
        else {
          if (1 != v.arguments.length) throw "remainder(): " + v.arguments.length + " arguments given; expected 1 or 2";
          e = this.plainMC
        }
        return this.dodivide("R", v.arguments[0], e, -1)
      }

      function m() {
        var e;
        if (2 == m.arguments.length) e = m.arguments[1];
        else {
          if (1 != m.arguments.length) throw "subtract(): " + m.arguments.length + " arguments given; expected 1 or 2";
          e = this.plainMC
        }
        var t = m.arguments[0];
        return e.lostDigits && this.checkdigits(t, e.digits), t = this.clone(t), t.ind = -t.ind, this.add(t, e)
      }

      function g() {
        var t, n, r, i;
        if (6 == g.arguments.length) t = g.arguments[2], n = g.arguments[3], r = g.arguments[4], i = g.arguments[5];
        else {
          if (2 != g.arguments.length) throw "format(): " + g.arguments.length + " arguments given; expected 2 or 6";
          n = t = -1, r = e.prototype.SCIENTIFIC, i = this.ROUND_HALF_UP
        }
        var s = g.arguments[0],
          o = g.arguments[1],
          u, a = 0,
          a = a = 0,
          f = null,
          l = f = a = 0;
        u = 0, a = null, l = f = 0, (-1 > s || 0 == s) && this.badarg("format", 1, s), -1 > o && this.badarg("format", 2, o), (-1 > t || 0 == t) && this.badarg("format", 3, t), -1 > n && this.badarg("format", 4, n), r != e.prototype.SCIENTIFIC && r != e.prototype.ENGINEERING && (-1 == r ? r = e.prototype.SCIENTIFIC : this.badarg("format", 5, r));
        if (i != this.ROUND_HALF_UP) try {
          -1 == i ? i = this.ROUND_HALF_UP : new e(9, e.prototype.SCIENTIFIC, !1, i)
        } catch (c) {
          this.badarg("format", 6, i)
        }
        u = this.clone(this), -1 == n ? u.form = e.prototype.PLAIN : u.ind == this.iszero ? u.form = e.prototype.PLAIN : (a = u.exp + u.mant.length, u.form = a > n ? r : -5 > a ? r : e.prototype.PLAIN);
        if (0 <= o) e: for (;;) {
          u.form == e.prototype.PLAIN ? a = -u.exp : u.form == e.prototype.SCIENTIFIC ? a = u.mant.length - 1 : (a = (u.exp + u.mant.length - 1) % 3, 0 > a && (a = 3 + a), a++, a = a >= u.mant.length ? 0 : u.mant.length - a);
          if (a == o) break e;
          if (a < o) {
            f = this.extend(u.mant, u.mant.length + o - a), u.mant = f, u.exp -= o - a;
            if (u.exp < this.MinExp) throw "format(): Exponent Overflow: " + u.exp;
            break e
          }
          a -= o;
          if (a > u.mant.length) {
            u.mant = this.ZERO.mant, u.ind = this.iszero, u.exp = 0;
            continue e
          }
          f = u.mant.length - a, l = u.exp, u.round(f, i);
          if (u.exp - l == a) break e
        }
        n = u.layout();
        if (0 < s) {
          r = n.length, u = 0;
          e: for (; 0 < r; r--, u++) {
            if ("." == n[u]) break e;
            if ("E" == n[u]) break e
          }
          u > s && this.badarg("format", 1, s);
          if (u < s) {
            a = Array(n.length + s - u), s -= u, f = 0;
            for (; 0 < s; s--, f++) a[f] = " ";
            this.arraycopy(n, 0, a, f, n.length), n = a
          }
        }
        if (0 < t) {
          s = n.length - 1, u = n.length - 1;
          e: for (; 0 < s; s--, u--)
            if ("E" == n[u]) break e;
          if (0 == u) {
            a = Array(n.length + t + 2), this.arraycopy(n, 0, a, 0, n.length), t += 2, f = n.length;
            for (; 0 < t; t--, f++) a[f] = " ";
            n = a
          } else if (l = n.length - u - 2, l > t && this.badarg("format", 3, t), l < t) {
            a = Array(n.length + t - l), this.arraycopy(n, 0, a, 0, u + 2), t -= l, f = u + 2;
            for (; 0 < t; t--, f++) a[f] = "0";
            this.arraycopy(n, u + 2, a, f, l), n = a
          }
        }
        return n.join("")
      }

      function y() {
        var t;
        if (2 == y.arguments.length) t = y.arguments[1];
        else {
          if (1 != y.arguments.length) throw "setScale(): " + y.arguments.length + " given; expected 1 or 2";
          t = this.ROUND_UNNECESSARY
        }
        var n = y.arguments[0],
          r, i;
        r = r = 0, r = this.scale();
        if (r == n && this.form == e.prototype.PLAIN) return this;
        i = this.clone(this);
        if (r <= n) r = 0 == r ? i.exp + n : n - r, i.mant = this.extend(i.mant, i.mant.length + r), i.exp = -n;
        else {
          if (0 > n) throw "setScale(): Negative scale: " + n;
          r = i.mant.length - (r - n), i = i.round(r, t), i.exp != -n && (i.mant = this.extend(i.mant, i.mant.length + 1), i.exp -= 1)
        }
        return i.form = e.prototype.PLAIN, i
      }

      function b() {
        var e, n = 0,
          i = 0;
        e = Array(190), n = 0;
        e: for (; 189 >= n; n++) {
          i = n - 90;
          if (0 <= i) {
            e[n] = i % 10, r.prototype.bytecar[n] = t(i, 10);
            continue e
          }
          i += 100, e[n] = i % 10, r.prototype.bytecar[n] = t(i, 10) - 10
        }
        return e
      }

      function w() {
        var e, t;
        if (2 == w.arguments.length) e = w.arguments[0], t = w.arguments[1];
        else {
          if (1 != w.arguments.length) throw "round(): " + w.arguments.length + " arguments given; expected 1 or 2";
          t = w.arguments[0], e = t.digits, t = t.roundingMode
        }
        var n, r, i = !1,
          s = 0,
          o;
        n = null, n = this.mant.length - e;
        if (0 >= n) return this;
        this.exp += n, n = this.ind, r = this.mant, 0 < e ? (this.mant = Array(e), this.arraycopy(r, 0, this.mant, 0, e), i = !0, s = r[e]) : (this.mant = this.ZERO.mant, this.ind = this.iszero, i = !1, s = 0 == e ? r[0] : 0), o = 0;
        if (t == this.ROUND_HALF_UP) 5 <= s && (o = n);
        else if (t == this.ROUND_UNNECESSARY) {
          if (!this.allzero(r, e)) throw "round(): Rounding necessary"
        } else if (t == this.ROUND_HALF_DOWN) 5 < s ? o = n : 5 == s && (this.allzero(r, e + 1) || (o = n));
        else if (t == this.ROUND_HALF_EVEN) 5 < s ? o = n : 5 == s && (this.allzero(r, e + 1) ? 1 == this.mant[this.mant.length - 1] % 2 && (o = n) : o = n);
        else if (t != this.ROUND_DOWN)
          if (t == this.ROUND_UP) this.allzero(r, e) || (o = n);
          else if (t == this.ROUND_CEILING) 0 < n && (this.allzero(r, e) || (o = n));
        else {
          if (t != this.ROUND_FLOOR) throw "round(): Bad round value: " + t;
          0 > n && (this.allzero(r, e) || (o = n))
        }
        0 != o && (this.ind == this.iszero ? (this.mant = this.ONE.mant, this.ind = o) : (this.ind == this.isneg && (o = -o), n = this.byteaddsub(this.mant, this.mant.length, this.ONE.mant, 1, o, i), n.length > this.mant.length ? (this.exp++, this.arraycopy(n, 0, this.mant, 0, this.mant.length)) : this.mant = n));
        if (this.exp > this.MaxExp) throw "round(): Exponent Overflow: " + this.exp;
        return this
      }
      return r.prototype.div = t, r.prototype.arraycopy = function(e, t, n, r, i) {
        var s;
        if (r > t)
          for (s = i - 1; 0 <= s; --s) n[s + r] = e[s + t];
        else
          for (s = 0; s < i; ++s) n[s + r] = e[s + t]
      }, r.prototype.createArrayWithZeros = n, r.prototype.abs = i, r.prototype.add = s, r.prototype.compareTo = o, r.prototype.divide = u, r.prototype.divideInteger = a, r.prototype.max = f, r.prototype.min = l, r.prototype.multiply = c, r.prototype.negate = h, r.prototype.plus = p, r.prototype.pow = d, r.prototype.remainder = v, r.prototype.subtract = m, r.prototype.equals = function(e) {
        var t = 0,
          n = null,
          i = null;
        if (null != e && e instanceof r && this.ind == e.ind) {
          if (this.mant.length == e.mant.length && this.exp == e.exp && this.form == e.form) {
            for (n = this.mant.length, t = 0; 0 < n; n--, t++)
              if (this.mant[t] != e.mant[t]) return !1
          } else {
            n = this.layout(), i = e.layout();
            if (n.length != i.length) return !1;
            e = n.length, t = 0;
            for (; 0 < e; e--, t++)
              if (n[t] != i[t]) return !1
          }
          return !0
        }
        return !1
      }, r.prototype.format = g, r.prototype.intValueExact = function() {
        var e, n = 0,
          r, i = 0;
        e = 0;
        if (this.ind == this.iszero) return 0;
        e = this.mant.length - 1;
        if (0 > this.exp) {
          e += this.exp;
          if (!this.allzero(this.mant, e + 1)) throw "intValueExact(): Decimal part non-zero: " + this.toString();
          if (0 > e) return 0;
          n = 0
        } else {
          if (9 < this.exp + e) throw "intValueExact(): Conversion overflow: " + this.toString();
          n = this.exp
        }
        r = 0;
        var s = e + n,
          i = 0;
        for (; i <= s; i++) r *= 10, i <= e && (r += this.mant[i]);
        if (9 == e + n && (e = t(r, 1e9), e != this.mant[0])) {
          if (-2147483648 == r && this.ind == this.isneg && 2 == this.mant[0]) return r;
          throw "intValueExact(): Conversion overflow: " + this.toString()
        }
        return this.ind == this.ispos ? r : -r
      }, r.prototype.movePointLeft = function(e) {
        var t;
        return t = this.clone(this), t.exp -= e, t.finish(this.plainMC, !1)
      }, r.prototype.movePointRight = function(e) {
        var t;
        return t = this.clone(this), t.exp += e, t.finish(this.plainMC, !1)
      }, r.prototype.scale = function() {
        return 0 <= this.exp ? 0 : -this.exp
      }, r.prototype.setScale = y, r.prototype.signum = function() {
        return this.ind
      }, r.prototype.toString = function() {
        return this.layout().join("")
      }, r.prototype.layout = function() {
        var t, n = 0,
          n = null,
          r = 0,
          i = 0;
        t = 0;
        var i = null,
          s, n = 0;
        t = Array(this.mant.length), r = this.mant.length, n = 0;
        for (; 0 < r; r--, n++) t[n] = this.mant[n] + "";
        if (this.form != e.prototype.PLAIN) {
          n = "", this.ind == this.isneg && (n += "-"), r = this.exp + t.length - 1;
          if (this.form == e.prototype.SCIENTIFIC) n += t[0], 1 < t.length && (n += "."), n += t.slice(1).join("");
          else if (i = r % 3, 0 > i && (i = 3 + i), r -= i, i++, i >= t.length)
            for (n += t.join(""), t = i - t.length; 0 < t; t--) n += "0";
          else n += t.slice(0, i).join(""), n = n + "." + t.slice(i).join("");
          return 0 != r && (0 > r ? (t = "-", r = -r) : t = "+", n += "E", n += t, n += r), n.split("")
        }
        if (0 == this.exp) return 0 <= this.ind ? t : (i = Array(t.length + 1), i[0] = "-", this.arraycopy(t, 0, i, 1, t.length), i);
        r = this.ind == this.isneg ? 1 : 0, s = this.exp + t.length;
        if (1 > s) {
          n = r + 2 - this.exp, i = Array(n), 0 != r && (i[0] = "-"), i[r] = "0", i[r + 1] = ".";
          var o = -s,
            n = r + 2;
          for (; 0 < o; o--, n++) i[n] = "0";
          return this.arraycopy(t, 0, i, r + 2 - s, t.length), i
        }
        if (s > t.length) {
          i = Array(r + s), 0 != r && (i[0] = "-"), this.arraycopy(t, 0, i, r, t.length), s -= t.length, n = r + t.length;
          for (; 0 < s; s--, n++) i[n] = "0";
          return i
        }
        return n = r + 1 + t.length, i = Array(n), 0 != r && (i[0] = "-"), this.arraycopy(t, 0, i, r, s), i[r + s] = ".", this.arraycopy(t, s, i, r + s + 1, t.length - s), i
      }, r.prototype.intcheck = function(e, t) {
        var n;
        n = this.intValueExact();
        if (n < e || n > t) throw "intcheck(): Conversion overflow: " + n;
        return n
      }, r.prototype.dodivide = function(n, i, s, o) {
        var u, a, f, l, c, h, p, d, v, m = 0,
          g = 0,
          y = 0;
        a = a = g = g = g = 0, u = null, u = u = 0, u = null, s.lostDigits && this.checkdigits(i, s.digits), u = this;
        if (0 == i.ind) throw "dodivide(): Divide by 0";
        if (0 == u.ind) return s.form != e.prototype.PLAIN ? this.ZERO : -1 == o ? u : u.setScale(o);
        a = s.digits, 0 < a ? (u.mant.length > a && (u = this.clone(u).round(s)), i.mant.length > a && (i = this.clone(i).round(s))) : (-1 == o && (o = u.scale()), a = u.mant.length, o != -u.exp && (a = a + o + u.exp), a = a - (i.mant.length - 1) - i.exp, a < u.mant.length && (a = u.mant.length), a < i.mant.length && (a = i.mant.length)), f = u.exp - i.exp + u.mant.length - i.mant.length;
        if (0 > f && "D" != n) return "I" == n ? this.ZERO : this.clone(u).finish(s, !1);
        l = new r, l.ind = u.ind * i.ind, l.exp = f, l.mant = this.createArrayWithZeros(a + 1), c = a + a + 1, f = this.extend(u.mant, c), h = c, p = i.mant, d = c, v = 10 * p[0] + 1, 1 < p.length && (v += p[1]), c = 0;
        e: for (;;) {
          m = 0;
          t: for (;;) {
            if (h < d) break t;
            if (h == d) {
              n: do {
                var b = h,
                  g = 0;
                for (; 0 < b; b--, g++) {
                  y = g < p.length ? p[g] : 0;
                  if (f[g] < y) break t;
                  if (f[g] > y) break n
                }
                m++, l.mant[c] = m, c++, f[0] = 0;
                break e
              } while (0);g = f[0]
            }
            else g = 10 * f[0], 1 < h && (g += f[1]);
            g = t(10 * g, v), 0 == g && (g = 1), m += g, f = this.byteaddsub(f, h, p, d, -g, !0);
            if (0 != f[0]) continue t;
            y = h - 2, g = 0;
            n: for (; g <= y; g++) {
              if (0 != f[g]) break n;
              h--
            }
            if (0 == g) continue t;
            this.arraycopy(f, g, f, 0, h)
          }
          if (0 != c || 0 != m) {
            l.mant[c] = m, c++;
            if (c == a + 1) break e;
            if (0 == f[0]) break e
          }
          if (0 <= o && -l.exp > o) break e;
          if ("D" != n && 0 >= l.exp) break e;
          l.exp -= 1, d--
        }
        0 == c && (c = 1);
        if ("I" == n || "R" == n) {
          if (c + l.exp > a) throw "dodivide(): Integer overflow";
          if ("R" == n)
            do {
              if (0 == l.mant[0]) return this.clone(u).finish(s, !1);
              if (0 == f[0]) return this.ZERO;
              l.ind = u.ind, a = a + a + 1 - u.mant.length, l.exp = l.exp - a + u.exp, a = h, g = a - 1;
              t: for (; 1 <= g && l.exp < u.exp && l.exp < i.exp; g--) {
                if (0 != f[g]) break t;
                a--, l.exp += 1
              }
              return a < f.length && (u = Array(a), this.arraycopy(f, 0, u, 0, a), f = u), l.mant = f, l.finish(s, !1)
            } while (0)
        } else 0 != f[0] && (u = l.mant[c - 1], 0 == u % 5 && (l.mant[c - 1] = u + 1));
        if (0 <= o) return c != l.mant.length && (l.exp -= l.mant.length - c), u = l.mant.length - (-l.exp - o), l.round(u, s.roundingMode), l.exp != -o && (l.mant = this.extend(l.mant, l.mant.length + 1), l.exp -= 1), l.finish(s, !0);
        if (c == l.mant.length) l.round(s);
        else {
          if (0 == l.mant[0]) return this.ZERO;
          u = Array(c), this.arraycopy(l.mant, 0, u, 0, c), l.mant = u
        }
        return l.finish(s, !0)
      }, r.prototype.bad = function(e, t) {
        throw e + "Not a number: " + t
      }, r.prototype.badarg = function(e, t, n) {
        throw "Bad argument " + t + " to " + e + ": " + n
      }, r.prototype.extend = function(e, t) {
        var r;
        return e.length == t ? e : (r = n(t), this.arraycopy(e, 0, r, 0, e.length), r)
      }, r.prototype.byteaddsub = function(e, t, n, r, i, s) {
        var o, u, a, f, l, c, h = 0;
        o = c = 0, o = e.length, u = n.length, t -= 1, f = a = r - 1, f < t && (f = t), r = null, s && f + 1 == o && (r = e), null == r && (r = this.createArrayWithZeros(f + 1)), l = !1, 1 == i ? l = !0 : -1 == i && (l = !0), c = 0, h = f;
        e: for (; 0 <= h; h--) {
          0 <= t && (t < o && (c += e[t]), t--), 0 <= a && (a < u && (c = l ? 0 < i ? c + n[a] : c - n[a] : c + n[a] * i), a--);
          if (10 > c && 0 <= c)
            do {
              r[h] = c, c = 0;
              continue e
            } while (0);
          c += 90, r[h] = this.bytedig[c], c = this.bytecar[c]
        }
        if (0 == c) return r;
        n = null, s && f + 2 == e.length && (n = e), null == n && (n = Array(f + 2)), n[0] = c, e = f + 1, o = 0;
        for (; 0 < e; e--, o++) n[o + 1] = r[o];
        return n
      }, r.prototype.diginit = b, r.prototype.clone = function(e) {
        var t;
        return t = new r, t.ind = e.ind, t.exp = e.exp, t.form = e.form, t.mant = e.mant, t
      }, r.prototype.checkdigits = function(e, t) {
        if (0 != t) {
          if (this.mant.length > t && !this.allzero(this.mant, t)) throw "Too many digits: " + this.toString();
          if (null != e && e.mant.length > t && !this.allzero(e.mant, t)) throw "Too many digits: " + e.toString()
        }
      }, r.prototype.round = w, r.prototype.allzero = function(e, t) {
        var n = 0;
        0 > t && (t = 0);
        var r = e.length - 1,
          n = t;
        for (; n <= r; n++)
          if (0 != e[n]) return !1;
        return !0
      }, r.prototype.finish = function(t, n) {
        var r = 0,
          i = 0,
          s = null,
          r = i = 0;
        0 != t.digits && this.mant.length > t.digits && this.round(t);
        if (n && t.form != e.prototype.PLAIN) {
          r = this.mant.length, i = r - 1;
          e: for (; 1 <= i; i--) {
            if (0 != this.mant[i]) break e;
            r--, this.exp++
          }
          r < this.mant.length && (s = Array(r), this.arraycopy(this.mant, 0, s, 0, r), this.mant = s)
        }
        this.form = e.prototype.PLAIN, r = this.mant.length, i = 0;
        for (; 0 < r; r--, i++)
          if (0 != this.mant[i]) {
            0 < i && (s = Array(this.mant.length - i), this.arraycopy(this.mant, i, s, 0, this.mant.length - i), this.mant = s), i = this.exp + this.mant.length;
            if (0 < i) {
              if (i > t.digits && 0 != t.digits && (this.form = t.form), i - 1 <= this.MaxExp) return this
            } else -5 > i && (this.form = t.form);
            i--;
            if (i < this.MinExp || i > this.MaxExp) t: do {
              if (this.form == e.prototype.ENGINEERING && (r = i % 3, 0 > r && (r = 3 + r), i -= r, i >= this.MinExp && i <= this.MaxExp)) break t;
              throw "finish(): Exponent Overflow: " + i
            } while (0);
            return this
          }
        this.ind = this.iszero;
        if (t.form != e.prototype.PLAIN) this.exp = 0;
        else if (0 < this.exp) this.exp = 0;
        else if (this.exp < this.MinExp) throw "finish(): Exponent Overflow: " + this.exp;
        return this.mant = this.ZERO.mant, this
      }, r.prototype.isGreaterThan = function(e) {
        return 0 < this.compareTo(e)
      }, r.prototype.isLessThan = function(e) {
        return 0 > this.compareTo(e)
      }, r.prototype.isGreaterThanOrEqualTo = function(e) {
        return 0 <= this.compareTo(e)
      }, r.prototype.isLessThanOrEqualTo = function(e) {
        return 0 >= this.compareTo(e)
      }, r.prototype.isPositive = function() {
        return 0 < this.compareTo(r.prototype.ZERO)
      }, r.prototype.isNegative = function() {
        return 0 > this.compareTo(r.prototype.ZERO)
      }, r.prototype.isZero = function() {
        return 0 === this.compareTo(r.prototype.ZERO)
      }, r.ROUND_CEILING = r.prototype.ROUND_CEILING = e.prototype.ROUND_CEILING, r.ROUND_DOWN = r.prototype.ROUND_DOWN = e.prototype.ROUND_DOWN, r.ROUND_FLOOR = r.prototype.ROUND_FLOOR = e.prototype.ROUND_FLOOR, r.ROUND_HALF_DOWN = r.prototype.ROUND_HALF_DOWN = e.prototype.ROUND_HALF_DOWN, r.ROUND_HALF_EVEN = r.prototype.ROUND_HALF_EVEN = e.prototype.ROUND_HALF_EVEN, r.ROUND_HALF_UP = r.prototype.ROUND_HALF_UP = e.prototype.ROUND_HALF_UP, r.ROUND_UNNECESSARY = r.prototype.ROUND_UNNECESSARY = e.prototype.ROUND_UNNECESSARY, r.ROUND_UP = r.prototype.ROUND_UP = e.prototype.ROUND_UP, r.prototype.ispos = 1, r.prototype.iszero = 0, r.prototype.isneg = -1, r.prototype.MinExp = -999999999, r.prototype.MaxExp = 999999999, r.prototype.MinArg = -999999999, r.prototype.MaxArg = 999999999, r.prototype.plainMC = new e(0, e.prototype.PLAIN), r.prototype.bytecar = Array(190), r.prototype.bytedig = b(), r.ZERO = r.prototype.ZERO = new r("0"), r.ONE = r.prototype.ONE = new r("1"), r.TEN = r.prototype.TEN = new r("10"), r
    }(e);
  "function" == typeof define && null != define.amd ? define({
    BigDecimal: t,
    MathContext: e
  }) : "object" == typeof this && (this.BigDecimal = t, this.MathContext = e)
}).call(this);
app.controller("tradeController", ["$scope", "$rootScope", "$http", "$translate", "urlSearch", "cookie", "$q", "streamer", "tradeStreamer", "$timeout", "$stateParams", function(e, t, n, r, i, s, o, u, a, f, l) {
  function m(e, t) {
    return Math.floor((new BigDecimal(e + "")).multiply(new BigDecimal(Math.pow(10, t) + "")).toString()) / Math.pow(10, t)
  }

  function g(e, t) {
    return Math.ceil((new BigDecimal(e + "")).multiply(new BigDecimal(Math.pow(10, t) + "")).toString()) / Math.pow(10, t)
  }

  function y(e, t) {
    return Math.atan(e) / Math.atan(t)
  }

  function b(t, n, r, i) {
    angular.forEach(t, function(t) {
      if (e.depthMergeUnit != 8) {
        var s = !1;
        r.forEach(function(r) {
          r[0] == i(Number(t), e.depthMergeUnit) && (r[1] += Number(n[t]), r[2] += Number(n[t] * t), s = !0)
        }), s || r.push([i(Number(t), e.depthMergeUnit), Number(n[t]), Number(n[t]) * Number(t)])
      } else r.push([Number(t), Number(n[t]), Number(t) * Number(n[t])])
    })
  }

  function w(e, t) {
    var n = $(".depths table").width(),
      r = [],
      i = [];
    angular.forEach(e, function(e) {
      r.push(e)
    }), angular.forEach(t, function(e) {
      i.push(e)
    });
    var s = sortDepth.medianUnit(r, i, 48);
    angular.forEach(e, function(e) {
      e.push({
        width: sortDepth.width(e[1], s) * n / 100
      })
    }), angular.forEach(t, function(e) {
      e.push({
        width: sortDepth.width(e[1], s) * n / 100
      })
    })
  }

  function E(e) {
    while (e.length < 8) e.push(["--", "--", {
      width: 0
    }])
  }

  function S(e) {
    while (e.length < 8) e.unshift(["--", "--", {
      width: 0
    }])
  }

  function x(e, t) {
    e && e.forEach(function(e) {
      var n = Number(e[0]),
        r = Number(e[1]);
      r != 0 ? t[n] = r : delete t[n]
    })
  }
  t.pageTitle = r.instant("transaction"), t.curPage = "trade", sessionStorage.callbackUrl = location.hash, e.urlPath = encodeURIComponent(location.pathname + location.search), e.currentProduct = {};
  var c = l.symbol || "BNB_BTC";
  t.urlSymbol = c, e.currentProduct.symbol = c.replace("_", ""), e.side = l.side, e.side || (e.side = "BUY"), e.getCommission = function(t, r) {
    var i = $.param({
      symbol: t,
      userId: r
    });
    n.post("/user/getCommission.html", i).success(function(t) {
      e.commission = t
    })
  }, e.userAssets = {}, e.getUserAsset = function() {
    n.post("/exchange/private/userAsset").success(function(t) {
      angular.forEach(t, function(t, n) {
        var r = {};
        r.asset = t.asset, r.free = Number(t.free), r.locked = Number(t.locked), r.freeze = Number(t.freeze), r.withdrawing = Number(t.withdrawing), e.userAssets[t.asset] = r
      })
    })
  };
  if (s.getCookie("logined") == "y") {
    e.Islogin = !0;
    var h = s.getCookie("userId");
    e.getCommission(e.currentProduct.symbol, h), e.getUserAsset()
  } else e.Islogin = !1;
  e.orderPercent = function(t) {
    e.side == "BUY" ? e.orderObj.qty = p(t * e.userAssets[e.currentProduct.quoteAsset].free / e.orderObj.price, e.currentProduct.qtyTick) : e.orderObj.qty = p(t * e.userAssets[e.currentProduct.baseAsset].free, e.currentProduct.qtyTick)
  }, e.tradeBuyVol = function(t) {
    var n = 0;
    for (var r = 0; r <= t; r++) e.bidsTwenty[r][1] != "--" && (n += Number(e.bidsTwenty[r][1]));
    e.side == "SELL" && (n < Number(e.userAssets[e.currentProduct.baseAsset].free) ? e.orderObj.qty = p(n, e.currentProduct.qtyTick) : e.orderObj.qty = p(e.userAssets[e.currentProduct.baseAsset].free, e.currentProduct.qtyTick))
  }, e.tradeSellVol = function(t) {
    var n = 0;
    for (var r = e.asksTwenty.length - 1; r >= t; r--) e.asksTwenty[r][1] != "--" && (n += Number(e.asksTwenty[r][1]));
    e.side == "BUY" && (n < Number(e.userAssets[e.currentProduct.quoteAsset].free / e.orderObj.price) ? e.orderObj.qty = p(n, e.currentProduct.qtyTick) : e.orderObj.qty = p(e.userAssets[e.currentProduct.quoteAsset].free / e.orderObj.price, e.currentProduct.qtyTick))
  };
  var p = function(e, t) {
    return (Math.floor((new BigDecimal(e + "")).multiply(new BigDecimal(Math.pow(10, t) + "")).toString()) / Math.pow(10, t)).toFixed(t)
  };
  e.orderObj = {}, e.trade = function(t) {
    t != "--" && (e.orderObj.price = Number(t).toFixed(e.currentProduct.priceTick))
  };
  var d = !0;
  e.order = function() {
    if (s.getCookie("logined") != "y") return location.href = "/m-ogin.html?callback=" + e.urlPath, !1;
    if (d) {
      d = !1;
      var t = e.orderObj.price,
        i = e.orderObj.qty,
        o = t * i,
        u = /^[0-9]+([.]{1}[0-9]{0,8})?$/;
      if (i == "" || i == null) return Zepto.toast(r.instant("The qty cannot be blank")), d = !0, !1;
      if (!u.test(i)) return Zepto.toast(r.instant("Please enter a correct qty")), d = !0, !1;
      if (e.side == "BUY" && o > Number(e.userAssets[e.currentProduct.quoteAsset].free)) return Zepto.toast(r.instant("Your balance is not enough")), d = !0, !1;
      if (e.side == "SELL" && i > Number(e.userAssets[e.currentProduct.baseAsset].free)) return Zepto.toast(r.instant("Your balance is not enough")), d = !0, !1;
      if (!u.test(t)) return Zepto.toast(r.instant("Please enter a correct price")), d = !0, !1;
      var a = {
        method: "post",
        url: "/exchange/private/order",
        data: $.param({
          price: e.orderObj.price,
          quantity: e.orderObj.qty,
          symbol: e.currentProduct.symbol,
          side: e.side,
          type: "LIMIT"
        })
      };
      n(a).then(function(t) {
        Zepto.toast(r.instant("orderSucceed")), f(function() {
          e.getUserAsset(), e.orderObj.qty = ""
        }, 500), d = !0
      }, function(e) {
        e.data.msg.toUpperCase().match("MARKET.*CLOSED") ? Zepto.toast("下单失败:非交易时间不能下单!") : e.data.msg.toUpperCase().match("INSUFFICIENT BALANCE") ? Zepto.toast("下单失败:余额不足") : Zepto.toast(e.data.msg), d = !0
      })
    }
  }, e.trades = [], e.streamBids = {}, e.streamBidsKeys = [], e.streamAsks = {}, e.streamAsksKeys = [], e.depthMergeUnit = 8, e.bidsTwenty = [], e.asksTwenty = [], E(e.bidsTwenty), S(e.asksTwenty);
  var v = function(t) {
    if (t.eventType == "depthUpdate") {
      console.log(t.bids), x(t.bids, e.streamBids), x(t.asks, e.streamAsks), console.log(e.streamBids);
      var n = 999999999;
      e.streamBidsKeys = Object.keys(e.streamBids).sort(function(e, t) {
        return e - t
      }), e.streamAsksKeys = Object.keys(e.streamAsks).sort(function(e, t) {
        return e - t
      });
      var r = [],
        i = [];
      b(e.streamBidsKeys, e.streamBids, r, m), b(e.streamAsksKeys, e.streamAsks, i, g), e.bidsTwenty = r.reverse().slice(0, 8), e.asksTwenty = i.slice(0, 8).reverse(), (e.bidsTwenty.length || e.asksTwenty.length) && w(e.bidsTwenty, e.asksTwenty), E(e.bidsTwenty), S(e.asksTwenty)
    } else t.eventType == "trade" ? (t.price = Number(t.price).toFixed(e.currentProduct.decimalPlaces), t.qty = Number(t.qty).toFixed(e.currentProduct.decimalPlaces), e.currentProduct.close = t.price, e.trades.push(t), (e.trades.length > 10 || e.trades[0].aggTradeId < t.aggTradeId) && e.trades.unshift(t)) : (console.log("Error! Bad data received:"), console.log(t));
    if (e.$root && !e.$root.$$phase) {
      var s = e.$root.$$phase;
      s != "$apply" && s != "$digest" && e.$apply()
    }
  };
  e.depthMergeChange = function(t) {
    e.depthMergeUnit = t, v({
      eventType: "depthUpdate"
    })
  }, e.connectToSymbol = function(t) {
    e.streamerInstance == null && (e.streamerInstance = new u, e.streamerInstance.startStream(e.currentProduct.symbol, t, function(t) {
      t.clean == 1 && (e.streamBids = {}, e.streamAsks = {}), v(t)
    }))
  }, e.connectToTradeStream = function(t) {
    e.streamerTrade == null && (e.streamerTrade = new a, e.streamerTrade.startStream(e.currentProduct.symbol, t, function(t) {
      t.clean == 1 && (e.trades = []), v(t)
    }))
  }, e.checkinput = function(e, t) {
    var n = $(e.target).val(),
      r = e.keyCode || e.which;
    if (r >= 48 && r <= 57 || r >= 96 && r <= 105 || r == 190 || r == 46) {
      n += String.fromCharCode(r);
      var i = new RegExp("^\\d+(\\.\\d{0," + t + "})?$");
      i.test(n) || (e.returnValue = !1, e.preventDefault && e.preventDefault())
    } else r != 13 && (e.returnValue = !1, e.preventDefault && e.preventDefault())
  }, e.products = [], e.depthUnits = [], e.getTradeLists = function() {
    n.get("/exchange/public/product").success(function(r) {
      if (r.data.length) {
        e.products = r.data, e.currentProduct.symbol ? angular.forEach(e.products, function(t, n) {
          t.symbol == e.currentProduct.symbol && (e.currentProduct = e.products[n])
        }) : e.currentProduct = r.data[0], t.setCurProducts(e.currentProduct), e.currentProduct.qtyTick = Math.abs(Math.log10(Number(e.currentProduct.minTrade))), e.depthMergeUnit = e.currentProduct.priceTick = Math.abs(Math.log10(Number(e.currentProduct.tickSize))), e.trade(e.currentProduct.close);
        var i = 2;
        while (i >= 0) e.depthUnits.push(e.currentProduct.priceTick - i), i--;
        sessionStorage.symbol = e.currentProduct.symbol, window.WebSocket ? n.get("/exchange/public/wssUrl").success(function(t) {
          e.connectToSymbol(t), e.connectToTradeStream(t)
        }) : $interval(function() {}, 1e3)
      } else e.products = []
    })
  }, e.getTradeLists(), e.$on("$destroy", function() {
    e.streamerInstance && e.streamerInstance.stopStream(), e.streamerTrade && e.streamerTrade.stopStream(), e.streamerInstance = null, e.streamerTrade = null
  }), e.goIndex = function() {
    var e = $("#tradeDiv");
    e.hasClass("toLeft") && e.removeClass("toLeft"), e.hasClass("toRight") || e.addClass("toRight")
  }
}]).filter("filterol", function() {
  return function(e, t) {
    var n;
    return e != "--" ? n = Number(e).toFixed(t) : n = "--", n
  }
}).filter("floor", function() {
  return function(e) {
    var t = Array.prototype.slice.call(arguments),
      n = Math.floor(Number(e) * Math.pow(10, Number(t[1]))) / Math.pow(10, Number(t[1]));
    return n.toFixed(t[1])
  }
}).filter("sameGray", ["$sce", function(e) {
  return function(t, n, r) {
    var i;
    return t = t && (t + "").replace(",", ""), isNaN(Number(t)) ? i = t : (t = Number(t).toFixed(r), n ? t.substring(0, t.length - 2) == Number(n).toFixed(r).substring(0, t.length - 2) ? i = '<span class="gray">' + t.substring(0, t.length - 2) + "</span>" + t.substr(t.length - 2, 2) : i = Number(t).toFixed(r) : i = Number(t).toFixed(r)), i = "<span>" + i + "</span>", e.trustAsHtml(i)
  }
}]);
var sortDepth = new function() {
  this.sort = function(e) {
    return e.sort(function(e, t) {
      return e[1] - t[1]
    }), e
  }, this.median = function(e) {
    var t = Math.floor(e.length / 3 * 2);
    return e[t][1] < 1 ? 1 : e[t][1]
  }, this.medianUnit = function(e, t, n) {
    var r = new Array(e);
    r = r[0];
    var i = new Array(t);
    i = i[0], r = r.concat(i);
    var s = this.median(this.sort(r)) / n;
    return r = null, i = null, s
  }, this.width = function(e, t) {
    if (t == 0) return 1;
    var n = Math.round(Number(e) / t);
    return n <= 0 ? 1 : n > 160 ? 160 : n
  }
};
app.controller("openOrdersController", ["$scope", "$rootScope", "$http", "$translate", "$timeout", "$stateParams", function(e, t, n, r, i, s) {
  function f() {
    a--, a == 0 && (Zepto.toast(r.instant("Succeed")), i(function() {
      e.getOpenOrders(u)
    }, 1e3))
  }

  function l(e) {
    Zepto.modal.prototype.defaults.modalContainer = document.body, Zepto.modal.prototype.defaults.modalButtonCancel = r.instant("Cancel"), Zepto.modal.prototype.defaults.modalButtonOk = r.instant("Confirm"), Zepto.confirm(r.instant("Are you sure to cancel all?"), function() {
      e()
    })
  }

  function c(e, t, i, s) {
    var o = {
      method: "post",
      url: "/exchange/private/deleteOrder",
      data: $.param({
        orderId: e,
        symbol: t
      })
    };
    n(o).then(function(e) {
      i()
    }, function(e) {
      Zepto.toast(r.instant("failed") + ":" + e.data.msg)
    })
  }
  t.pageTitle = r.instant("open orders"), t.curPage = "openOrders", sessionStorage.callbackUrl = location.hash;
  var o = s.symbol || "BNB_BTC";
  t.urlSymbol = o, e.getOpenOrders = function(t) {
    var r = {
      method: "post",
      url: "/exchange/private/openOrders"
    };
    n(r).success(function(n) {
      n.length ? (e.openOrders = n, t && t.forEach(function(t) {
        for (var n = 0; n < e.openOrders.length; n++) e.openOrders[n].symbol == t.symbol && (e.openOrders[n].priceTick = Math.abs(Math.log10(Number(t.tickSize))), e.openOrders[n].qtyTick = Math.abs(Math.log10(Number(t.minTrade))))
      })) : e.openOrders = []
    })
  };
  var u;
  e.getProducts = function() {
    var t = {
      method: "get",
      url: "/exchange/public/product"
    };
    n(t).success(function(t) {
      t.data.length && (e.getOpenOrders(t.data), u = t.data)
    })
  };
  var a;
  e.getProducts(), e.deleteAllOrder = function() {
    e.openOrders && e.openOrders.length > 0 && l(function() {
      a = e.openOrders.length, e.openOrders.forEach(function(e) {
        c(e.orderId, e.symbol, function() {
          f()
        }, function() {
          f()
        })
      })
    })
  }, e.deleteOrder = function(t, n) {
    c(t, n, function() {
      Zepto.toast(r.instant("Succeed")), i(function() {
        e.getOpenOrders(u)
      }, 1e3)
    })
  }
}]);
app.controller("tradeHistoryController", ["$scope", "$rootScope", "$http", "$translate", function(e, t, n, r) {
  t.pageTitle = r.instant("Trade History"), t.curPage = "tradeHistory", sessionStorage.callbackUrl = location.hash, e.rows = 5, e.currentPage = 1, e.trades = [], e.changPage = function(t) {
    e.currentPage = t;
    var r = new Date;
    r.setDate(r.getDate() + 1);
    var i = {
      method: "post",
      url: "/exchange/private/userTrades",
      data: "page=" + t + "&rows=" + e.rows + "&start=0&end=" + r.getTime()
    };
    n(i).success(function(t) {
      t.data && (e.trades = e.trades.concat(t.data)), e.total = t.total
    })
  }, e.changPage(1), e.getMore = function() {
    e.changPage(e.currentPage + 1)
  }
}]);
app.config(["$stateProvider", "$urlRouterProvider", function(e, t) {
  e.state("list", {
    url: "/",
    templateUrl: "/m-list.html"
  }).state("trade", {
    url: "/trade",
    templateUrl: "/m-tradeLayout.html"
  }).state("trade.index", {
    url: "/index?symbol",
    templateUrl: "/m-index.html"
  }).state("trade.trade", {
    url: "/trade?symbol&side",
    templateUrl: "/m-trade.html"
  }).state("trade.openOrders", {
    url: "/openOrders?symbol",
    templateUrl: "/userCenter/m-openOrders.html"
  }).state("tradeHistory", {
    url: "/tradeHistory",
    templateUrl: "/userCenter/m-tradeHistory.html"
  }), t.otherwise("/")
}]);
app.factory("form", ["myToast", function(e) {
  var t = {};
  return t.validate = function(t, n, r, i) {
    $(t).Validform({
      btnSubmit: n,
      showAllError: !1,
      datatype: {
        amount: /^(([1-9]\d{0,9})|0)(\.\d{1,8})?$/,
        registerEmail: /^\w+([-.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,
        agentId: function(e, t, n) {
          var r = /^\d{8}$/;
          if (e == "" || e == null) return !0;
          if (!r.test(e)) return !1;
          var i;
          return $.ajax({
            url: "/user/getAgentInfo.html",
            type: "POST",
            dataType: "json",
            async: !1,
            data: {
              agentId: e
            },
            success: function(e) {
              e.isExist && e.isVerified ? i = !0 : i = !1
            }
          }), i
        },
        pwd: function(e, t, n) {
          var r = /(?=.*\d)(?=.*[A-Z])[\da-zA-Z]/;
          return e == "" || e == null ? !1 : !r.test(e) || e.length < 8 ? !1 : !0
        }
      },
      postonce: !0,
      ajaxPost: !0,
      tiptype: function(t, n, r) {
        if (!n.obj.is("form")) {
          var i = n.obj.siblings(".Validform_checktip");
          r(i, n.type), i.text(t)
        } else e.showLoading()
      },
      beforeSubmit: function(e) {
        $(this.btnSubmit).attr("disabled", !0), i && i()
      },
      callback: function(n) {
        return e.hideLoading(), $(this.btnSubmit).attr("disabled", !1), n.success ? (r(n), $(t)[0].reset()) : (e.showMsg(n.msg, 2e3), nc != undefined && nc != null && nc.reset()), !1
      }
    })
  }, t
}]), app.factory("mobile", ["$http", "$translate", function(e, t) {
  var n = {},
    r = null;
  return n.flag = !0, n.showError = function(e, t) {
    angular.element("#" + e).focus().siblings(".Validform_checktip").text(t).addClass("Validform_wrong")
  }, n.picVerifyCode = function(e, t) {
    angular.element("#" + e).val("").focus(), angular.element("#" + t).click()
  }, n.clearCountDown = function(e, i) {
    n.flag = !0, angular.element("#" + i).text(t.instant("Regain")).removeClass("btn-disabled"), clearInterval(r)
  }, n.countDown = function(e, t) {
    angular.element("#" + e).val(""), angular.element("#" + t).addClass("btn-disabled");
    var i = 60;
    r = setInterval(function() {
      angular.element("#" + t).text(i + "s"), i--, i == -1 && n.clearCountDown(e, t)
    }, 1e3)
  }, n.sendVerifyCode = function(t, r, i, s) {
    if (n.flag) {
      n.flag = !1, n.countDown(r, i);
      if (s) var o = $.param({
        mobile: s
      });
      else var o;
      e.post(t, o).then(function(e) {
        if (!e.data.success) return layer.msg(e.data.msg, {
          icon: 2,
          shift: 1,
          time: 1500
        }), n.picVerifyCode("registerValiCode", "imageStream1"), n.flag = !0, n.clearCountDown(r, i), !1
      }, function(e) {
        layer.msg(e.data.msg, {
          icon: 2,
          shift: 1,
          time: 1500
        }), n.clearCountDown(r, i)
      })
    }
  }, n
}]), app.factory("urlSearch", function() {
  var e = {};
  return e.getUrlParam = function(e) {
    var t = location.search.substr(1),
      n = t.split("&");
    for (var r = 0; r < n.length; r++) {
      var i = n[r].split("=");
      if (e == i[0]) return i[1]
    }
  }, e
}), app.factory("cookie", function() {
  var e = {};
  return e.getCookie = function(e) {
    var t, n = new RegExp("(^| )" + e + "=([^;]*)(;|$)");
    return (t = document.cookie.match(n)) ? unescape(t[2]) : null
  }, e.delCookie = function(t) {
    var n = new Date;
    n.setTime(n.getTime() - 1);
    var r = e.getCookie(t);
    r != null && (document.cookie = t + "=" + r + ";expires=" + n.toGMTString())
  }, e
}), app.factory("T", ["$translate", function(e) {
  var t = {
    T: function(t) {
      return t ? e.instant(t) : t
    }
  };
  return t
}]), app.factory("myToast", function() {
  var e = {};
  return e.showMsg = function(e, t) {
    $(".alert").remove();
    var n = "<div class='alert alert-warn'>" + e + "<i class='font font-close'></i></div>";
    $(".page-current").append(n), setTimeout(function() {
      $(".alert").addClass("slideDown"), $(".alert .font-close").click(function(e) {
        e.stopPropagation(), $(this).parents(".alert").removeClass("slideDown"), setTimeout(function() {
          $(this).parents(".alert").remove()
        }, 300)
      })
    }, 500)
  }, e.hideMsg = function() {
    $(".alert").removeClass("slideDown").remove()
  }, e.showLoading = function() {
    var e = "<div class='loading'><img src='/m-resources/img/loading.gif'/></div>";
    $("body").append(e)
  }, e.hideLoading = function() {
    $(".loading").remove()
  }, e
});
app.factory("myInterceptor", ["$q", "cookie", function(e, t) {
  var n = {
    request: function(e) {
      e.headers = {
        "Content-Type": "application/x-www-form-urlencoded; charset=UTF-8",
        clientType: "H5",
        lang: localStorage.lang
      };
      var n = t.getCookie("CSRFToken");
      return n && (e.headers.CSRFToken = window.md5(n)), e
    },
    response: function(e) {
      return e
    },
    requestError: function(t) {
      return e.reject(t)
    },
    responseError: function(t) {
      console.log(t);
      if (t.status == 401) {
        var n = new Date;
        n.setTime(n.getTime() - 1e3), t = JSON.stringify(t), localStorage.setItem("temp2", t), typeof localStorage.getItem("temp2"), localStorage.getItem("temp2"), localStorage.a = document.cookie, document.cookie = "logined=;path=/;expires=" + n.toGMTString() + "", location.href = "/m-login.html?callback=" + encodeURIComponent(location.pathname) + encodeURIComponent(location.search)
      }
      return t.status == 302, e.reject(t)
    }
  };
  return n
}]);
(function(e, t, n) {
  function a(t, n) {
    var r = (e(window).width() - t.outerWidth()) / 2,
      i = (e(window).height() - t.outerHeight()) / 2,
      i = (document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + (i > 0 ? i : 0);
    t.css({
      left: r
    }).animate({
      top: i
    }, {
      duration: n,
      queue: !1
    })
  }

  function f() {
    if (e("#Validform_msg").length !== 0) return !1;
    i = e('<div id="Validform_msg"><div class="Validform_title">' + o.tit + '<a class="Validform_close" href="javascript:void(0);">&chi;</a></div><div class="Validform_info"></div><div class="iframe"><iframe frameborder="0" scrolling="no" height="100%" width="100%"></iframe></div></div>').appendTo("body"), i.find("a.Validform_close").click(function() {
      return i.hide(), s = !0, r && r.focus().addClass("Validform_error"), !1
    }).focus(function() {
      this.blur()
    }), e(window).bind("scroll resize", function() {
      !s && a(i, 400)
    })
  }
  var r = null,
    i = null,
    s = !0,
    o = {
      tit: "提示信息",
      w: {
        "*": "不能为空！",
        "*6-16": "请填写6到16位任意字符！",
        n: "请填写数字！",
        "n6-16": "请填写6到16位数字！",
        s: "不能输入特殊字符！",
        "s6-16": "请填写6到16位字符！",
        p: "请填写邮政编码！",
        m: "请填写手机号码！",
        e: "邮箱地址格式不对！",
        url: "请填写网址！"
      },
      def: "请填写正确信息！",
      undef: "datatype未定义！",
      reck: "两次输入的内容不一致！",
      r: "通过信息验证！",
      c: "正在检测信息…",
      s: "请{填写|选择}{0|信息}！",
      v: "所填信息没有经过验证，请稍后…",
      p: "正在提交数据…"
    };
  e.Tipmsg = o;
  var u = function(t, r, i) {
    var r = e.extend({}, u.defaults, r);
    r.datatype && e.extend(u.util.dataType, r.datatype);
    var s = this;
    s.tipmsg = {
      w: {}
    }, s.forms = t, s.objects = [];
    if (i === !0) return !1;
    t.each(function() {
      if (this.validform_inited == "inited") return !0;
      this.validform_inited = "inited";
      var t = this;
      t.settings = e.extend({}, r);
      var i = e(t);
      t.validform_status = "normal", i.data("tipmsg", s.tipmsg), i.delegate("[datatype]", "blur", function() {
        var e = arguments[1];
        u.util.check.call(this, i, e)
      }), i.delegate(":text", "keypress", function(e) {
        e.keyCode == 13 && i.find(":submit").length == 0 && i.submit()
      }), u.util.enhance.call(i, t.settings.tiptype, t.settings.usePlugin, t.settings.tipSweep), t.settings.btnSubmit && i.find(t.settings.btnSubmit).bind("click", function() {
        return i.trigger("submit"), !1
      }), i.submit(function() {
        var e = u.util.submitForm.call(i, t.settings);
        return e === n && (e = !0), e
      }), i.find("[type='reset']").add(i.find(t.settings.btnReset)).bind("click", function() {
        u.util.resetForm.call(i)
      })
    }), (r.tiptype == 1 || (r.tiptype == 2 || r.tiptype == 3) && r.ajaxPost) && f()
  };
  u.defaults = {
    tiptype: 1,
    tipSweep: !1,
    showAllError: !1,
    postonce: !1,
    ajaxPost: !1
  }, u.util = {
    dataType: {
      "*": /[\w\W]+/,
      "*6-16": /^[\w\W]{6,16}$/,
      n: /^\d+$/,
      "n6-16": /^\d{6,16}$/,
      s: /^[\u4E00-\u9FA5\uf900-\ufa2d\w\.\s]+$/,
      "s6-16": /^[\u4E00-\u9FA5\uf900-\ufa2d\w\.\s]{6,16}$/,
      p: /^[0-9]{6}$/,
      m: /^13[0-9]{9}$|^14[0-9]{9}$|^15[0-9]{9}$|^17[0-9]{9}$|^18[0-9]{9}$/,
      e: /^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,
      url: /^(\w+:\/\/)?\w+(\.\w+)+.*$/
    },
    toString: Object.prototype.toString,
    isEmpty: function(t) {
      return t === "" || t === e.trim(this.attr("tip"))
    },
    getValue: function(t) {
      var r, i = this;
      return t.is(":radio") ? (r = i.find(":radio[name='" + t.attr("name") + "']:checked").val(), r = r === n ? "" : r) : t.is(":checkbox") ? (r = "", i.find(":checkbox[name='" + t.attr("name") + "']:checked").each(function() {
        r += e(this).val() + ","
      }), r = r === n ? "" : r) : r = t.val(), r = e.trim(r), u.util.isEmpty.call(t, r) ? "" : r
    },
    enhance: function(t, n, r, i) {
      var s = this;
      s.find("[datatype]").each(function() {
        t == 2 ? e(this).parent().next().find(".Validform_checktip").length == 0 && (e(this).parent().next().append("<span class='Validform_checktip' />"), e(this).siblings(".Validform_checktip").remove()) : (t == 3 || t == 4) && e(this).siblings(".Validform_checktip").length == 0 && (e(this).parent().append("<span class='Validform_checktip' />"), e(this).parent().next().find(".Validform_checktip").remove())
      }), s.find("input[recheck]").each(function() {
        if (this.validform_inited == "inited") return !0;
        this.validform_inited = "inited";
        var t = e(this),
          n = s.find("input[name='" + e(this).attr("recheck") + "']");
        n.bind("keyup", function() {
          if (n.val() == t.val() && n.val() != "") {
            if (n.attr("tip") && n.attr("tip") == n.val()) return !1;
            t.trigger("blur")
          }
        }).bind("blur", function() {
          if (n.val() != t.val() && t.val() != "") {
            if (t.attr("tip") && t.attr("tip") == t.val()) return !1;
            t.trigger("blur")
          }
        })
      }), s.find("[tip]").each(function() {
        if (this.validform_inited == "inited") return !0;
        this.validform_inited = "inited";
        var t = e(this).attr("tip"),
          n = e(this).attr("altercss");
        e(this).focus(function() {
          e(this).val() == t && (e(this).val(""), n && e(this).removeClass(n))
        }).blur(function() {
          e.trim(e(this).val()) === "" && (e(this).val(t), n && e(this).addClass(n))
        })
      }), s.find(":checkbox[datatype],:radio[datatype]").each(function() {
        if (this.validform_inited == "inited") return !0;
        this.validform_inited = "inited";
        var t = e(this),
          n = t.attr("name");
        s.find("[name='" + n + "']").filter(":checkbox,:radio").bind("click", function() {
          setTimeout(function() {
            t.trigger("blur")
          }, 0)
        })
      }), s.find("select[datatype][multiple]").bind("click", function() {
        var t = e(this);
        setTimeout(function() {
          t.trigger("blur")
        }, 0)
      }), u.util.usePlugin.call(s, n, t, r, i)
    },
    usePlugin: function(t, n, r, i) {
      var s = this,
        t = t || {};
      if (s.find("input[plugin='swfupload']").length && typeof swfuploadhandler != "undefined") {
        var o = {
          custom_settings: {
            form: s,
            showmsg: function(e, t, i) {
              u.util.showmsg.call(s, e, n, {
                obj: s.find("input[plugin='swfupload']"),
                type: t,
                sweep: r
              })
            }
          }
        };
        o = e.extend(!0, {}, t.swfupload, o), s.find("input[plugin='swfupload']").each(function(t) {
          if (this.validform_inited == "inited") return !0;
          this.validform_inited = "inited", e(this).val(""), swfuploadhandler.init(o, t)
        })
      }
      s.find("input[plugin='datepicker']").length && e.fn.datePicker && (t.datepicker = t.datepicker || {}, t.datepicker.format && (Date.format = t.datepicker.format, delete t.datepicker.format), t.datepicker.firstDayOfWeek && (Date.firstDayOfWeek = t.datepicker.firstDayOfWeek, delete t.datepicker.firstDayOfWeek), s.find("input[plugin='datepicker']").each(function(n) {
        if (this.validform_inited == "inited") return !0;
        this.validform_inited = "inited", t.datepicker.callback && e(this).bind("dateSelected", function() {
          var n = (new Date(e.event._dpCache[this._dpId].getSelected()[0])).asString(Date.format);
          t.datepicker.callback(n, this)
        }), e(this).datePicker(t.datepicker)
      })), s.find("input[plugin*='passwordStrength']").length && e.fn.passwordStrength && (t.passwordstrength = t.passwordstrength || {}, t.passwordstrength.showmsg = function(e, t, i) {
        u.util.showmsg.call(s, t, n, {
          obj: e,
          type: i,
          sweep: r
        })
      }, s.find("input[plugin='passwordStrength']").each(function(n) {
        if (this.validform_inited == "inited") return !0;
        this.validform_inited = "inited", e(this).passwordStrength(t.passwordstrength)
      }));
      if (i != "addRule" && t.jqtransform && e.fn.jqTransSelect) {
        if (s[0].jqTransSelected == "true") return;
        s[0].jqTransSelected = "true";
        var a = function(t) {
            var n = e(".jqTransformSelectWrapper ul:visible");
            n.each(function() {
              var n = e(this).parents(".jqTransformSelectWrapper:first").find("select").get(0);
              (!t || !n.oLabel || n.oLabel.get(0) != t.get(0)) && e(this).hide()
            })
          },
          f = function(t) {
            e(t.target).parents(".jqTransformSelectWrapper").length === 0 && a(e(t.target))
          },
          l = function() {
            e(document).mousedown(f)
          };
        t.jqtransform.selector ? (s.find(t.jqtransform.selector).filter('input:submit, input:reset, input[type="button"]').jqTransInputButton(), s.find(t.jqtransform.selector).filter("input:text, input:password").jqTransInputText(), s.find(t.jqtransform.selector).filter("input:checkbox").jqTransCheckBox(), s.find(t.jqtransform.selector).filter("input:radio").jqTransRadio(), s.find(t.jqtransform.selector).filter("textarea").jqTransTextarea(), s.find(t.jqtransform.selector).filter("select").length > 0 && (s.find(t.jqtransform.selector).filter("select").jqTransSelect(), l())) : s.jqTransform(), s.find(".jqTransformSelectWrapper").find("li a").click(function() {
          e(this).parents(".jqTransformSelectWrapper").find("select").trigger("blur")
        })
      }
    },
    getNullmsg: function(e) {
      var t = this,
        n = /[\u4E00-\u9FA5\uf900-\ufa2da-zA-Z\s]+/g,
        r, i = e[0].settings.label || ".Validform_label";
      i = t.siblings(i).eq(0).text() || t.siblings().find(i).eq(0).text() || t.parent().siblings(i).eq(0).text() || t.parent().siblings().find(i).eq(0).text(), i = i.replace(/\s(?![a-zA-Z])/g, "").match(n), i = i ? i.join("") : [""], n = /\{(.+)\|(.+)\}/, r = e.data("tipmsg").s || o.s;
      if (i != "") {
        r = r.replace(/\{0\|(.+)\}/, i);
        if (t.attr("recheck")) return r = r.replace(/\{(.+)\}/, ""), t.attr("nullmsg", r), r
      } else r = t.is(":checkbox,:radio,select") ? r.replace(/\{0\|(.+)\}/, "") : r.replace(/\{0\|(.+)\}/, "$1");
      return r = t.is(":checkbox,:radio,select") ? r.replace(n, "$2") : r.replace(n, "$1"), t.attr("nullmsg", r), r
    },
    getErrormsg: function(t, n, r) {
      var i = /^(.+?)((\d+)-(\d+))?$/,
        s = /^(.+?)(\d+)-(\d+)$/,
        u = /(.*?)\d+(.+?)\d+(.*)/,
        a = n.match(i),
        f, l;
      if (r == "recheck") return l = t.data("tipmsg").reck || o.reck, l;
      var c = e.extend({}, o.w, t.data("tipmsg").w);
      if (a[0] in c) return t.data("tipmsg").w[a[0]] || o.w[a[0]];
      for (var h in c)
        if (h.indexOf(a[1]) != -1 && s.test(h)) return l = (t.data("tipmsg").w[h] || o.w[h]).replace(u, "$1" + a[3] + "$2" + a[4] + "$3"), t.data("tipmsg").w[a[0]] = l, l;
      return t.data("tipmsg").def || o.def
    },
    _regcheck: function(e, t, r, i) {
      var i = i,
        s = null,
        a = !1,
        f = /\/.+\//g,
        l = /^(.+?)(\d+)-(\d+)$/,
        c = 3;
      if (f.test(e)) {
        var h = e.match(f)[0].slice(1, -1),
          p = e.replace(f, ""),
          d = RegExp(h, p);
        a = d.test(t)
      } else if (u.util.toString.call(u.util.dataType[e]) == "[object Function]") a = u.util.dataType[e](t, r, i, u.util.dataType), a === !0 || a === n ? a = !0 : (s = a, a = !1);
      else {
        if (!(e in u.util.dataType)) {
          var v = e.match(l),
            m;
          if (!v) a = !1, s = i.data("tipmsg").undef || o.undef;
          else
            for (var g in u.util.dataType) {
              m = g.match(l);
              if (!m) continue;
              if (v[1] === m[1]) {
                var y = u.util.dataType[g].toString(),
                  p = y.match(/\/[mgi]*/g)[1].replace("/", ""),
                  w = new RegExp("\\{" + m[2] + "," + m[3] + "\\}", "g");
                y = y.replace(/\/[mgi]*/g, "/").replace(w, "{" + v[2] + "," + v[3] + "}").replace(/^\//, "").replace(/\/$/, ""), u.util.dataType[e] = new RegExp(y, p);
                break
              }
            }
        }
        u.util.toString.call(u.util.dataType[e]) == "[object RegExp]" && (a = u.util.dataType[e].test(t))
      }
      if (a) {
        c = 2, s = r.attr("sucmsg") || i.data("tipmsg").r || o.r;
        if (r.attr("recheck")) {
          var E = i.find("input[name='" + r.attr("recheck") + "']:first");
          t != E.val() && (a = !1, c = 3, s = r.attr("errormsg") || u.util.getErrormsg.call(r, i, e, "recheck"))
        }
      } else s = s || r.attr("errormsg") || u.util.getErrormsg.call(r, i, e), u.util.isEmpty.call(r, t) && (s = r.attr("nullmsg") || u.util.getNullmsg.call(r, i));
      return {
        passed: a,
        type: c,
        info: s
      }
    },
    regcheck: function(e, t, n) {
      var r = this,
        i = null,
        s = !1,
        o = 3;
      if (n.attr("ignore") === "ignore" && u.util.isEmpty.call(n, t)) return n.data("cked") && (i = ""), {
        passed: !0,
        type: 4,
        info: i
      };
      n.data("cked", "cked");
      var a = u.util.parseDatatype(e),
        f;
      for (var l = 0; l < a.length; l++) {
        for (var c = 0; c < a[l].length; c++) {
          f = u.util._regcheck(a[l][c], t, n, r);
          if (!f.passed) break
        }
        if (f.passed) break
      }
      return f
    },
    parseDatatype: function(e) {
      var t = /\/.+?\/[mgi]*(?=(,|$|\||\s))|[\w\*-]+/g,
        n = e.match(t),
        r = e.replace(t, "").replace(/\s*/g, "").split(""),
        i = [],
        s = 0;
      i[0] = [], i[0].push(n[0]);
      for (var o = 0; o < r.length; o++) r[o] == "|" && (s++, i[s] = []), i[s].push(n[o + 1]);
      return i
    },
    showmsg: function(t, r, o, f) {
      if (t == n) return;
      if (f == "bycheck" && o.sweep && (o.obj && !o.obj.is(".Validform_error") || typeof r == "function")) return;
      e.extend(o, {
        curform: this
      });
      if (typeof r == "function") {
        r(t, o, u.util.cssctl);
        return
      }(r == 1 || f == "byajax" && r != 4) && i.find(".Validform_info").html(t);
      if (r == 1 && f != "bycheck" && o.type != 2 || f == "byajax" && r != 4) s = !1, i.find(".iframe").css("height", i.outerHeight()), i.show(), a(i, 100);
      r == 2 && o.obj && (o.obj.parent().next().find(".Validform_checktip").html(t), u.util.cssctl(o.obj.parent().next().find(".Validform_checktip"), o.type)), (r == 3 || r == 4) && o.obj && (o.obj.siblings(".Validform_checktip").html(t), u.util.cssctl(o.obj.siblings(".Validform_checktip"), o.type))
    },
    cssctl: function(e, t) {
      switch (t) {
        case 1:
          e.removeClass("Validform_right Validform_wrong").addClass("Validform_checktip Validform_loading");
          break;
        case 2:
          e.removeClass("Validform_wrong Validform_loading").addClass("Validform_checktip Validform_right");
          break;
        case 4:
          e.removeClass("Validform_right Validform_wrong Validform_loading").addClass("Validform_checktip");
          break;
        default:
          e.removeClass("Validform_right Validform_loading").addClass("Validform_checktip Validform_wrong")
      }
    },
    check: function(t, n, i) {
      var s = t[0].settings,
        n = n || "",
        a = u.util.getValue.call(t, e(this));
      if (s.ignoreHidden && e(this).is(":hidden") || e(this).data("dataIgnore") === "dataIgnore") return !0;
      if (s.dragonfly && !e(this).data("cked") && u.util.isEmpty.call(e(this), a) && e(this).attr("ignore") != "ignore") return !1;
      var f = u.util.regcheck.call(t, e(this).attr("datatype"), a, e(this));
      if (a == this.validform_lastval && !e(this).attr("recheck") && n == "") return f.passed ? !0 : !1;
      this.validform_lastval = a;
      var l;
      r = l = e(this);
      if (!f.passed) return u.util.abort.call(l[0]), i || (u.util.showmsg.call(t, f.info, s.tiptype, {
        obj: e(this),
        type: f.type,
        sweep: s.tipSweep
      }, "bycheck"), !s.tipSweep && l.addClass("Validform_error")), !1;
      var c = e(this).attr("ajaxurl");
      if (c && !u.util.isEmpty.call(e(this), a) && !i) {
        var h = e(this);
        n == "postform" ? h[0].validform_subpost = "postform" : h[0].validform_subpost = "";
        if (h[0].validform_valid === "posting" && a == h[0].validform_ckvalue) return "ajax";
        h[0].validform_valid = "posting", h[0].validform_ckvalue = a, u.util.showmsg.call(t, t.data("tipmsg").c || o.c, s.tiptype, {
          obj: h,
          type: 1,
          sweep: s.tipSweep
        }, "bycheck"), u.util.abort.call(l[0]);
        var p = e.extend(!0, {}, s.ajaxurl || {}),
          v = {
            type: "POST",
            cache: !1,
            url: c,
            data: "param=" + encodeURIComponent(a) + "&name=" + encodeURIComponent(e(this).attr("name")),
            success: function(n) {
              e.trim(n.status) === "y" ? (h[0].validform_valid = "true", n.info && h.attr("sucmsg", n.info), u.util.showmsg.call(t, h.attr("sucmsg") || t.data("tipmsg").r || o.r, s.tiptype, {
                obj: h,
                type: 2,
                sweep: s.tipSweep
              }, "bycheck"), l.removeClass("Validform_error"), r = null, h[0].validform_subpost == "postform" && t.trigger("submit")) : (h[0].validform_valid = n.info, u.util.showmsg.call(t, n.info, s.tiptype, {
                obj: h,
                type: 3,
                sweep: s.tipSweep
              }), l.addClass("Validform_error")), l[0].validform_ajax = null
            },
            error: function(e) {
              if (e.status == "200") return e.responseText == "y" ? p.success({
                status: "y"
              }) : p.success({
                status: "n",
                info: e.responseText
              }), !1;
              if (e.statusText !== "abort") {
                var n = "status: " + e.status + "; statusText: " + e.statusText;
                u.util.showmsg.call(t, n, s.tiptype, {
                  obj: h,
                  type: 3,
                  sweep: s.tipSweep
                }), l.addClass("Validform_error")
              }
              return h[0].validform_valid = e.statusText, l[0].validform_ajax = null, !0
            }
          };
        if (p.success) {
          var m = p.success;
          p.success = function(e) {
            v.success(e), m(e, h)
          }
        }
        if (p.error) {
          var y = p.error;
          p.error = function(e) {
            v.error(e) && y(e, h)
          }
        }
        return p = e.extend({}, v, p, {
          dataType: "json"
        }), l[0].validform_ajax = e.ajax(p), "ajax"
      }
      return c && u.util.isEmpty.call(e(this), a) && (u.util.abort.call(l[0]), l[0].validform_valid = "true"), i || (u.util.showmsg.call(t, f.info, s.tiptype, {
        obj: e(this),
        type: f.type,
        sweep: s.tipSweep
      }, "bycheck"), l.removeClass("Validform_error")), r = null, !0
    },
    submitForm: function(t, n, i, s, a) {
      var f = this;
      if (f[0].validform_status === "posting") return !1;
      if (t.postonce && f[0].validform_status === "posted") return !1;
      var l = t.beforeCheck && t.beforeCheck(f);
      if (l === !1) return !1;
      var c = !0,
        h;
      f.find("[datatype]").each(function() {
        if (n) return !1;
        if (t.ignoreHidden && e(this).is(":hidden") || e(this).data("dataIgnore") === "dataIgnore") return !0;
        var i = u.util.getValue.call(f, e(this)),
          s;
        r = s = e(this), h = u.util.regcheck.call(f, e(this).attr("datatype"), i, e(this));
        if (!h.passed) return u.util.showmsg.call(f, h.info, t.tiptype, {
          obj: e(this),
          type: h.type,
          sweep: t.tipSweep
        }), s.addClass("Validform_error"), t.showAllError ? (c && (c = !1), !0) : (s.focus(), c = !1, !1);
        if (e(this).attr("ajaxurl") && !u.util.isEmpty.call(e(this), i)) {
          if (this.validform_valid !== "true") {
            var a = e(this);
            return u.util.showmsg.call(f, f.data("tipmsg").v || o.v, t.tiptype, {
              obj: a,
              type: 3,
              sweep: t.tipSweep
            }), s.addClass("Validform_error"), a.trigger("blur", ["postform"]), t.showAllError ? (c && (c = !1), !0) : (c = !1, !1)
          }
        } else e(this).attr("ajaxurl") && u.util.isEmpty.call(e(this), i) && (u.util.abort.call(this), this.validform_valid = "true");
        u.util.showmsg.call(f, h.info, t.tiptype, {
          obj: e(this),
          type: h.type,
          sweep: t.tipSweep
        }), s.removeClass("Validform_error"), r = null
      }), t.showAllError && f.find(".Validform_error:first").focus();
      if (c) {
        var p = t.beforeSubmit && t.beforeSubmit(f);
        if (p === !1) return !1;
        f[0].validform_status = "posting";
        if (!t.ajaxPost && s !== "ajaxPost") {
          t.postonce || (f[0].validform_status = "normal");
          var i = i || t.url;
          return i && f.attr("action", i), t.callback && t.callback(f)
        }
        var v = e.extend(!0, {}, t.ajaxpost || {});
        v.url = i || v.url || t.url || f.attr("action"), u.util.showmsg.call(f, f.data("tipmsg").p || o.p, t.tiptype, {
          obj: f,
          type: 1,
          sweep: t.tipSweep
        }, "byajax"), a ? v.async = !1 : a === !1 && (v.async = !0);
        if (v.success) {
          var m = v.success;
          v.success = function(n) {
            t.callback && t.callback(n), f[0].validform_ajax = null, e.trim(n.status) === "y" ? f[0].validform_status = "posted" : f[0].validform_status = "normal", m(n, f)
          }
        }
        if (v.error) {
          var y = v.error;
          v.error = function(e) {
            t.callback && t.callback(e), f[0].validform_status = "normal", f[0].validform_ajax = null, y(e, f)
          }
        }
        var b = {
          type: "POST",
          async: !0,
          data: f.serializeArray(),
          success: function(n) {
            e.trim(n.status) === "y" ? (f[0].validform_status = "posted", u.util.showmsg.call(f, n.info, t.tiptype, {
              obj: f,
              type: 2,
              sweep: t.tipSweep
            }, "byajax")) : (f[0].validform_status = "normal", u.util.showmsg.call(f, n.info, t.tiptype, {
              obj: f,
              type: 3,
              sweep: t.tipSweep
            }, "byajax")), t.callback && t.callback(n), f[0].validform_ajax = null
          },
          error: function(e) {
            var n = "status: " + e.status + "; statusText: " + e.statusText;
            u.util.showmsg.call(f, n, t.tiptype, {
              obj: f,
              type: 3,
              sweep: t.tipSweep
            }, "byajax"), t.callback && t.callback(e), f[0].validform_status = "normal", f[0].validform_ajax = null
          }
        };
        v = e.extend({}, b, v, {
          dataType: "json"
        }), f[0].validform_ajax = e.ajax(v)
      }
      return !1
    },
    resetForm: function() {
      var e = this;
      e.each(function() {
        this.reset && this.reset(), this.validform_status = "normal"
      }), e.find(".Validform_right").text(""), e.find(".passwordStrength").children().removeClass("bgStrength"), e.find(".Validform_checktip").removeClass("Validform_wrong Validform_right Validform_loading"), e.find(".Validform_error").removeClass("Validform_error"), e.find("[datatype]").removeData("cked").removeData("dataIgnore").each(function() {
        this.validform_lastval = null
      }), e.eq(0).find("input:first").focus()
    },
    abort: function() {
      this.validform_ajax && this.validform_ajax.abort()
    }
  }, e.Datatype = u.util.dataType, u.prototype = {
    dataType: u.util.dataType,
    eq: function(t) {
      var n = this;
      return t >= n.forms.length ? null : (t in n.objects || (n.objects[t] = new u(e(n.forms[t]).get(), {}, !0)), n.objects[t])
    },
    resetStatus: function() {
      var t = this;
      return e(t.forms).each(function() {
        this.validform_status = "normal"
      }), this
    },
    setStatus: function(t) {
      var n = this;
      return e(n.forms).each(function() {
        this.validform_status = t || "posting"
      }), this
    },
    getStatus: function() {
      var t = this,
        n = e(t.forms)[0].validform_status;
      return n
    },
    ignore: function(t) {
      var n = this,
        t = t || "[datatype]";
      return e(n.forms).find(t).each(function() {
        e(this).data("dataIgnore", "dataIgnore").removeClass("Validform_error")
      }), this
    },
    unignore: function(t) {
      var n = this,
        t = t || "[datatype]";
      return e(n.forms).find(t).each(function() {
        e(this).removeData("dataIgnore")
      }), this
    },
    addRule: function(t) {
      var n = this,
        t = t || [];
      for (var r = 0; r < t.length; r++) {
        var i = e(n.forms).find(t[r].ele);
        for (var s in t[r]) s !== "ele" && i.attr(s, t[r][s])
      }
      return e(n.forms).each(function() {
        var t = e(this);
        u.util.enhance.call(t, this.settings.tiptype, this.settings.usePlugin, this.settings.tipSweep, "addRule")
      }), this
    },
    ajaxPost: function(t, n, r) {
      var i = this;
      return e(i.forms).each(function() {
        (this.settings.tiptype == 1 || this.settings.tiptype == 2 || this.settings.tiptype == 3) && f(), u.util.submitForm.call(e(i.forms[0]), this.settings, t, r, "ajaxPost", n)
      }), this
    },
    submitForm: function(t, r) {
      var i = this;
      return e(i.forms).each(function() {
        var i = u.util.submitForm.call(e(this), this.settings, t, r);
        i === n && (i = !0), i === !0 && this.submit()
      }), this
    },
    resetForm: function() {
      var t = this;
      return u.util.resetForm.call(e(t.forms)), this
    },
    abort: function() {
      var t = this;
      return e(t.forms).each(function() {
        u.util.abort.call(this)
      }), this
    },
    check: function(t, n) {
      var n = n || "[datatype]",
        r = this,
        i = e(r.forms),
        s = !0;
      return i.find(n).each(function() {
        u.util.check.call(this, i, "", t) || (s = !1)
      }), s
    },
    config: function(t) {
      var n = this;
      return t = t || {}, e(n.forms).each(function() {
        var n = e(this);
        this.settings = e.extend(!0, this.settings, t), u.util.enhance.call(n, this.settings.tiptype, this.settings.usePlugin, this.settings.tipSweep)
      }), this
    }
  }, e.fn.Validform = function(e) {
    return new u(this, e)
  }, e.Showmsg = function(e) {
    f(), u.util.showmsg.call(t, e, 1, {})
  }, e.Hidemsg = function() {
    i.hide(), s = !0
  }
})(jQuery, window)